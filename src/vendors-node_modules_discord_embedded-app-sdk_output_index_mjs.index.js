"use strict";
(self["webpackChunkthreejs_example"] = self["webpackChunkthreejs_example"] || []).push([["vendors-node_modules_discord_embedded-app-sdk_output_index_mjs"],{

/***/ "./node_modules/@discord/embedded-app-sdk/output/Constants.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/Constants.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HANDSHAKE_SDK_VERSION_MINIMUM_MOBILE_VERSION: () => (/* binding */ HANDSHAKE_SDK_VERSION_MINIMUM_MOBILE_VERSION),
/* harmony export */   Orientation: () => (/* binding */ Orientation),
/* harmony export */   Permissions: () => (/* binding */ Permissions),
/* harmony export */   Platform: () => (/* binding */ Platform),
/* harmony export */   RPCCloseCodes: () => (/* binding */ RPCCloseCodes),
/* harmony export */   RPCErrorCodes: () => (/* binding */ RPCErrorCodes),
/* harmony export */   UNKNOWN_VERSION_NUMBER: () => (/* binding */ UNKNOWN_VERSION_NUMBER)
/* harmony export */ });
/* harmony import */ var _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/BigFlagUtils.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/BigFlagUtils.mjs");


var RPCCloseCodes;
(function (RPCCloseCodes) {
    RPCCloseCodes[RPCCloseCodes["CLOSE_NORMAL"] = 1000] = "CLOSE_NORMAL";
    RPCCloseCodes[RPCCloseCodes["CLOSE_UNSUPPORTED"] = 1003] = "CLOSE_UNSUPPORTED";
    RPCCloseCodes[RPCCloseCodes["CLOSE_ABNORMAL"] = 1006] = "CLOSE_ABNORMAL";
    RPCCloseCodes[RPCCloseCodes["INVALID_CLIENTID"] = 4000] = "INVALID_CLIENTID";
    RPCCloseCodes[RPCCloseCodes["INVALID_ORIGIN"] = 4001] = "INVALID_ORIGIN";
    RPCCloseCodes[RPCCloseCodes["RATELIMITED"] = 4002] = "RATELIMITED";
    RPCCloseCodes[RPCCloseCodes["TOKEN_REVOKED"] = 4003] = "TOKEN_REVOKED";
    RPCCloseCodes[RPCCloseCodes["INVALID_VERSION"] = 4004] = "INVALID_VERSION";
    RPCCloseCodes[RPCCloseCodes["INVALID_ENCODING"] = 4005] = "INVALID_ENCODING";
})(RPCCloseCodes || (RPCCloseCodes = {}));
var RPCErrorCodes;
(function (RPCErrorCodes) {
    RPCErrorCodes[RPCErrorCodes["INVALID_PAYLOAD"] = 4000] = "INVALID_PAYLOAD";
    RPCErrorCodes[RPCErrorCodes["INVALID_COMMAND"] = 4002] = "INVALID_COMMAND";
    RPCErrorCodes[RPCErrorCodes["INVALID_EVENT"] = 4004] = "INVALID_EVENT";
    RPCErrorCodes[RPCErrorCodes["INVALID_PERMISSIONS"] = 4006] = "INVALID_PERMISSIONS";
})(RPCErrorCodes || (RPCErrorCodes = {}));
/**
 * @deprecated use OrientationTypeObject instead
 */
var Orientation;
(function (Orientation) {
    Orientation["LANDSCAPE"] = "landscape";
    Orientation["PORTRAIT"] = "portrait";
})(Orientation || (Orientation = {}));
var Platform;
(function (Platform) {
    Platform["MOBILE"] = "mobile";
    Platform["DESKTOP"] = "desktop";
})(Platform || (Platform = {}));
/** See https://discord.com/developers/docs/topics/permissions#permissions-bitwise-permission-flags for more Permissions details */
const Permissions = Object.freeze({
    CREATE_INSTANT_INVITE: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(0),
    KICK_MEMBERS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(1),
    BAN_MEMBERS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(2),
    ADMINISTRATOR: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(3),
    MANAGE_CHANNELS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(4),
    MANAGE_GUILD: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(5),
    ADD_REACTIONS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(6),
    VIEW_AUDIT_LOG: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(7),
    PRIORITY_SPEAKER: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(8),
    STREAM: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(9),
    VIEW_CHANNEL: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(10),
    SEND_MESSAGES: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(11),
    SEND_TTS_MESSAGES: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(12),
    MANAGE_MESSAGES: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(13),
    EMBED_LINKS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(14),
    ATTACH_FILES: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(15),
    READ_MESSAGE_HISTORY: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(16),
    MENTION_EVERYONE: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(17),
    USE_EXTERNAL_EMOJIS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(18),
    VIEW_GUILD_INSIGHTS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(19),
    CONNECT: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(20),
    SPEAK: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(21),
    MUTE_MEMBERS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(22),
    DEAFEN_MEMBERS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(23),
    MOVE_MEMBERS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(24),
    USE_VAD: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(25),
    CHANGE_NICKNAME: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(26),
    MANAGE_NICKNAMES: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(27),
    MANAGE_ROLES: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(28),
    MANAGE_WEBHOOKS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(29),
    MANAGE_GUILD_EXPRESSIONS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(30),
    USE_APPLICATION_COMMANDS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(31),
    REQUEST_TO_SPEAK: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(32),
    MANAGE_EVENTS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(33),
    MANAGE_THREADS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(34),
    CREATE_PUBLIC_THREADS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(35),
    CREATE_PRIVATE_THREADS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(36),
    USE_EXTERNAL_STICKERS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(37),
    SEND_MESSAGES_IN_THREADS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(38),
    USE_EMBEDDED_ACTIVITIES: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(39),
    MODERATE_MEMBERS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(40),
    VIEW_CREATOR_MONETIZATION_ANALYTICS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(41),
    USE_SOUNDBOARD: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(42),
    CREATE_GUILD_EXPRESSIONS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(43),
    CREATE_EVENTS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(44),
    USE_EXTERNAL_SOUNDS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(45),
    SEND_VOICE_MESSAGES: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(46),
    SEND_POLLS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(49),
    USE_EXTERNAL_APPS: _utils_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].getFlag(50),
});
const UNKNOWN_VERSION_NUMBER = -1;
const HANDSHAKE_SDK_VERSION_MINIMUM_MOBILE_VERSION = 250;




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/Discord.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/Discord.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DiscordSDK: () => (/* binding */ DiscordSDK),
/* harmony export */   Opcodes: () => (/* binding */ Opcodes)
/* harmony export */ });
/* harmony import */ var _virtual_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_virtual/index.mjs */ "./node_modules/@discord/embedded-app-sdk/output/_virtual/index.mjs");
/* harmony import */ var _schema_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./schema/index.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/index.mjs");
/* harmony import */ var _commands_index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./commands/index.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/index.mjs");
/* harmony import */ var _error_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./error.mjs */ "./node_modules/@discord/embedded-app-sdk/output/error.mjs");
/* harmony import */ var _schema_events_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./schema/events.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/events.mjs");
/* harmony import */ var _Constants_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Constants.mjs */ "./node_modules/@discord/embedded-app-sdk/output/Constants.mjs");
/* harmony import */ var _utils_getDefaultSdkConfiguration_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/getDefaultSdkConfiguration.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/getDefaultSdkConfiguration.mjs");
/* harmony import */ var _utils_console_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils/console.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/console.mjs");
/* harmony import */ var _package_json_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./package.json.mjs */ "./node_modules/@discord/embedded-app-sdk/output/package.json.mjs");
/* harmony import */ var _schema_common_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./schema/common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");
/* harmony import */ var _lib_uuid_dist_esm_browser_v4_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./lib/uuid/dist/esm-browser/v4.mjs */ "./node_modules/@discord/embedded-app-sdk/output/lib/uuid/dist/esm-browser/v4.mjs");












var Opcodes;
(function (Opcodes) {
    Opcodes[Opcodes["HANDSHAKE"] = 0] = "HANDSHAKE";
    Opcodes[Opcodes["FRAME"] = 1] = "FRAME";
    Opcodes[Opcodes["CLOSE"] = 2] = "CLOSE";
    Opcodes[Opcodes["HELLO"] = 3] = "HELLO";
})(Opcodes || (Opcodes = {}));
const ALLOWED_ORIGINS = new Set(getAllowedOrigins());
function getAllowedOrigins() {
    if (typeof window === 'undefined')
        return [];
    return [
        window.location.origin,
        'https://discord.com',
        'https://discordapp.com',
        'https://ptb.discord.com',
        'https://ptb.discordapp.com',
        'https://canary.discord.com',
        'https://canary.discordapp.com',
        'https://staging.discord.co',
        'http://localhost:3333',
        'https://pax.discord.com',
        'null',
    ];
}
/**
 * The embedded application is running in an IFrame either within the main Discord client window or in a popout. The RPC server is always running in the main Discord client window. In either case, the referrer is the correct origin.
 */
function getRPCServerSource() {
    var _a;
    return [(_a = window.parent.opener) !== null && _a !== void 0 ? _a : window.parent, !!document.referrer ? document.referrer : '*'];
}
class DiscordSDK {
    getTransfer(payload) {
        var _a;
        switch (payload.cmd) {
            case _schema_common_mjs__WEBPACK_IMPORTED_MODULE_9__.Commands.SUBSCRIBE:
            case _schema_common_mjs__WEBPACK_IMPORTED_MODULE_9__.Commands.UNSUBSCRIBE:
                return undefined;
            default:
                return (_a = payload.transfer) !== null && _a !== void 0 ? _a : undefined;
        }
    }
    constructor(clientId, configuration) {
        this.sdkVersion = _package_json_mjs__WEBPACK_IMPORTED_MODULE_8__.version;
        this.mobileAppVersion = null;
        this.source = null;
        this.sourceOrigin = '';
        this.eventBus = new _virtual_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]();
        this.pendingCommands = new Map();
        this.sendCommand = (payload) => {
            var _a;
            if (this.source == null)
                throw new Error('Attempting to send message before initialization');
            const nonce = (0,_lib_uuid_dist_esm_browser_v4_mjs__WEBPACK_IMPORTED_MODULE_10__["default"])();
            (_a = this.source) === null || _a === void 0 ? void 0 : _a.postMessage([Opcodes.FRAME, Object.assign(Object.assign({}, payload), { nonce })], this.sourceOrigin, this.getTransfer(payload));
            const promise = new Promise((resolve, reject) => {
                this.pendingCommands.set(nonce, { resolve, reject });
            });
            return promise;
        };
        this.commands = (0,_commands_index_mjs__WEBPACK_IMPORTED_MODULE_2__["default"])(this.sendCommand);
        /**
         * WARNING - All "console" logs are emitted as messages to the Discord client
         *  If you write "console.log" anywhere in handleMessage or subsequent message handling
         * there is a good chance you will cause an infinite loop where you receive a message
         * which causes "console.log" which sends a message, which causes the discord client to
         * send a reply which causes handleMessage to fire again, and again to inifinity
         *
         * If you need to log within handleMessage, consider setting
         * config.disableConsoleLogOverride to true when initializing the SDK
         */
        this.handleMessage = (event) => {
            if (!ALLOWED_ORIGINS.has(event.origin))
                return;
            const tuple = event.data;
            if (!Array.isArray(tuple)) {
                return;
            }
            const [opcode, data] = tuple;
            switch (opcode) {
                case Opcodes.HELLO:
                    // backwards compat; the Discord client will still send HELLOs for old applications.
                    //
                    // TODO: figure out compatibility approach; it would be easier to maintain compatibility at the SDK level, not the underlying RPC protocol level...
                    return;
                case Opcodes.CLOSE:
                    return this.handleClose(data);
                case Opcodes.HANDSHAKE:
                    return this.handleHandshake();
                case Opcodes.FRAME:
                    return this.handleFrame(data);
                default:
                    throw new Error('Invalid message format');
            }
        };
        this.isReady = false;
        this.clientId = clientId;
        this.configuration = configuration !== null && configuration !== void 0 ? configuration : (0,_utils_getDefaultSdkConfiguration_mjs__WEBPACK_IMPORTED_MODULE_6__["default"])();
        if (typeof window !== 'undefined') {
            window.addEventListener('message', this.handleMessage);
        }
        if (typeof window === 'undefined') {
            this.frameId = '';
            this.instanceId = '';
            this.customId = null;
            this.referrerId = null;
            this.platform = _Constants_mjs__WEBPACK_IMPORTED_MODULE_5__.Platform.DESKTOP;
            this.guildId = null;
            this.channelId = null;
            this.locationId = null;
            return;
        }
        // START Capture URL Query Params
        const urlParams = new URLSearchParams(this._getSearch());
        const frameId = urlParams.get('frame_id');
        if (!frameId) {
            throw new Error('frame_id query param is not defined');
        }
        this.frameId = frameId;
        const instanceId = urlParams.get('instance_id');
        if (!instanceId) {
            throw new Error('instance_id query param is not defined');
        }
        this.instanceId = instanceId;
        const platform = urlParams.get('platform');
        if (!platform) {
            throw new Error('platform query param is not defined');
        }
        else if (platform !== _Constants_mjs__WEBPACK_IMPORTED_MODULE_5__.Platform.DESKTOP && platform !== _Constants_mjs__WEBPACK_IMPORTED_MODULE_5__.Platform.MOBILE) {
            throw new Error(`Invalid query param "platform" of "${platform}". Valid values are "${_Constants_mjs__WEBPACK_IMPORTED_MODULE_5__.Platform.DESKTOP}" or "${_Constants_mjs__WEBPACK_IMPORTED_MODULE_5__.Platform.MOBILE}"`);
        }
        this.platform = platform;
        this.customId = urlParams.get('custom_id');
        this.referrerId = urlParams.get('referrer_id');
        this.guildId = urlParams.get('guild_id');
        this.channelId = urlParams.get('channel_id');
        this.locationId = urlParams.get('location_id');
        this.mobileAppVersion = urlParams.get('mobile_app_version');
        // END Capture URL Query Params
        [this.source, this.sourceOrigin] = getRPCServerSource();
        this.addOnReadyListener();
        this.handshake();
    }
    close(code, message) {
        var _a;
        window.removeEventListener('message', this.handleMessage);
        const nonce = (0,_lib_uuid_dist_esm_browser_v4_mjs__WEBPACK_IMPORTED_MODULE_10__["default"])();
        (_a = this.source) === null || _a === void 0 ? void 0 : _a.postMessage([Opcodes.CLOSE, { code, message, nonce }], this.sourceOrigin);
    }
    async subscribe(event, listener, ...rest) {
        const [subscribeArgs] = rest;
        const listenerCount = this.eventBus.listenerCount(event);
        const emitter = this.eventBus.on(event, listener);
        // If first subscription, subscribe via RPC
        if (Object.values(_schema_events_mjs__WEBPACK_IMPORTED_MODULE_4__.Events).includes(event) && event !== _schema_events_mjs__WEBPACK_IMPORTED_MODULE_4__.Events.READY && listenerCount === 0) {
            await this.sendCommand({
                cmd: _schema_common_mjs__WEBPACK_IMPORTED_MODULE_9__.Commands.SUBSCRIBE,
                args: subscribeArgs,
                evt: event,
            });
        }
        return emitter;
    }
    async unsubscribe(event, listener, ...rest) {
        const [unsubscribeArgs] = rest;
        if (event !== _schema_events_mjs__WEBPACK_IMPORTED_MODULE_4__.Events.READY && this.eventBus.listenerCount(event) === 1) {
            await this.sendCommand({
                cmd: _schema_common_mjs__WEBPACK_IMPORTED_MODULE_9__.Commands.UNSUBSCRIBE,
                evt: event,
                args: unsubscribeArgs,
            });
        }
        return this.eventBus.off(event, listener);
    }
    async ready() {
        if (this.isReady) {
            return;
        }
        else {
            await new Promise((resolve) => {
                this.eventBus.once(_schema_events_mjs__WEBPACK_IMPORTED_MODULE_4__.Events.READY, resolve);
            });
        }
    }
    parseMajorMobileVersion() {
        if (this.mobileAppVersion && this.mobileAppVersion.includes('.')) {
            try {
                return parseInt(this.mobileAppVersion.split('.')[0]);
            }
            catch (_a) {
                return _Constants_mjs__WEBPACK_IMPORTED_MODULE_5__.UNKNOWN_VERSION_NUMBER;
            }
        }
        return _Constants_mjs__WEBPACK_IMPORTED_MODULE_5__.UNKNOWN_VERSION_NUMBER;
    }
    handshake() {
        var _a;
        const handshakePayload = {
            v: 1,
            encoding: 'json',
            client_id: this.clientId,
            frame_id: this.frameId,
        };
        const majorMobileVersion = this.parseMajorMobileVersion();
        if (this.platform === _Constants_mjs__WEBPACK_IMPORTED_MODULE_5__.Platform.DESKTOP || majorMobileVersion >= _Constants_mjs__WEBPACK_IMPORTED_MODULE_5__.HANDSHAKE_SDK_VERSION_MINIMUM_MOBILE_VERSION) {
            handshakePayload['sdk_version'] = this.sdkVersion;
        }
        (_a = this.source) === null || _a === void 0 ? void 0 : _a.postMessage([Opcodes.HANDSHAKE, handshakePayload], this.sourceOrigin);
    }
    addOnReadyListener() {
        this.eventBus.once(_schema_events_mjs__WEBPACK_IMPORTED_MODULE_4__.Events.READY, () => {
            this.overrideConsoleLogging();
            this.isReady = true;
        });
    }
    overrideConsoleLogging() {
        if (this.configuration.disableConsoleLogOverride)
            return;
        const sendCaptureLogCommand = (level, message) => {
            this.commands.captureLog({
                level,
                message,
            });
        };
        _utils_console_mjs__WEBPACK_IMPORTED_MODULE_7__.consoleLevels.forEach((level) => {
            (0,_utils_console_mjs__WEBPACK_IMPORTED_MODULE_7__.wrapConsoleMethod)(console, level, sendCaptureLogCommand);
        });
    }
    handleClose(data) {
        _schema_index_mjs__WEBPACK_IMPORTED_MODULE_1__.ClosePayload.parse(data);
    }
    handleHandshake() { }
    handleFrame(payload) {
        var _a, _b;
        let parsed;
        try {
            parsed = (0,_schema_index_mjs__WEBPACK_IMPORTED_MODULE_1__.parseIncomingPayload)(payload);
        }
        catch (e) {
            console.error('Failed to parse', payload);
            console.error(e);
            return;
        }
        if (parsed.cmd === 'DISPATCH') {
            this.eventBus.emit(parsed.evt, parsed.data);
        }
        else {
            if (parsed.evt === _schema_events_mjs__WEBPACK_IMPORTED_MODULE_4__.ERROR) {
                // In response to a command
                if (parsed.nonce != null) {
                    (_a = this.pendingCommands.get(parsed.nonce)) === null || _a === void 0 ? void 0 : _a.reject(parsed.data);
                    this.pendingCommands.delete(parsed.nonce);
                    return;
                }
                // General error
                this.eventBus.emit('error', new _error_mjs__WEBPACK_IMPORTED_MODULE_3__.SDKError(parsed.data.code, parsed.data.message));
            }
            if (parsed.nonce == null) {
                console.error('Missing nonce', payload);
                return;
            }
            (_b = this.pendingCommands.get(parsed.nonce)) === null || _b === void 0 ? void 0 : _b.resolve(parsed);
            this.pendingCommands.delete(parsed.nonce);
        }
    }
    _getSearch() {
        return typeof window === 'undefined' ? '' : window.location.search;
    }
}




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/_virtual/BigInteger.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/_virtual/BigInteger.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ bigInt)
/* harmony export */ });
/* harmony import */ var _commonjsHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_commonjsHelpers.mjs */ "./node_modules/@discord/embedded-app-sdk/output/_virtual/_commonjsHelpers.mjs");
/* harmony import */ var _lib_big_integer_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/big-integer/BigInteger.mjs */ "./node_modules/@discord/embedded-app-sdk/output/lib/big-integer/BigInteger.mjs");



var BigIntegerExports = (0,_lib_big_integer_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_1__.__require)();
var bigInt = /*@__PURE__*/(0,_commonjsHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__.getDefaultExportFromCjs)(BigIntegerExports);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/_virtual/BigInteger2.mjs":
/*!********************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/_virtual/BigInteger2.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __module: () => (/* binding */ BigInteger)
/* harmony export */ });
var BigInteger = {exports: {}};




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/_virtual/_commonjsHelpers.mjs":
/*!*************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/_virtual/_commonjsHelpers.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   commonjsGlobal: () => (/* binding */ commonjsGlobal),
/* harmony export */   getDefaultExportFromCjs: () => (/* binding */ getDefaultExportFromCjs)
/* harmony export */ });
var commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

function getDefaultExportFromCjs (x) {
	return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;
}




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/_virtual/index.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/_virtual/index.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ EventEmitter)
/* harmony export */ });
/* harmony import */ var _commonjsHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_commonjsHelpers.mjs */ "./node_modules/@discord/embedded-app-sdk/output/_virtual/_commonjsHelpers.mjs");
/* harmony import */ var _lib_eventemitter3_index2_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/eventemitter3/index2.mjs */ "./node_modules/@discord/embedded-app-sdk/output/lib/eventemitter3/index2.mjs");



var eventemitter3Exports = (0,_lib_eventemitter3_index2_mjs__WEBPACK_IMPORTED_MODULE_1__.__require)();
var EventEmitter = /*@__PURE__*/(0,_commonjsHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__.getDefaultExportFromCjs)(eventemitter3Exports);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/_virtual/index2.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/_virtual/index2.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ transform)
/* harmony export */ });
/* harmony import */ var _commonjsHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_commonjsHelpers.mjs */ "./node_modules/@discord/embedded-app-sdk/output/_virtual/_commonjsHelpers.mjs");
/* harmony import */ var _lib_lodash_transform_index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/lodash.transform/index.mjs */ "./node_modules/@discord/embedded-app-sdk/output/lib/lodash.transform/index.mjs");



var lodash_transformExports = (0,_lib_lodash_transform_index_mjs__WEBPACK_IMPORTED_MODULE_1__.__require)();
var transform = /*@__PURE__*/(0,_commonjsHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__.getDefaultExportFromCjs)(lodash_transformExports);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/_virtual/index3.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/_virtual/index3.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __module: () => (/* binding */ lodash_transform)
/* harmony export */ });
var lodash_transform = {exports: {}};




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/_virtual/index4.mjs":
/*!***************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/_virtual/index4.mjs ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __module: () => (/* binding */ eventemitter3)
/* harmony export */ });
var eventemitter3 = {exports: {}};




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/authenticate.mjs":
/*!*********************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/authenticate.mjs ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   authenticate: () => (/* binding */ authenticate)
/* harmony export */ });
/* harmony import */ var _generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../generated/schemas.mjs */ "./node_modules/@discord/embedded-app-sdk/output/generated/schemas.mjs");
/* harmony import */ var _utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/commandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs");



/**
 * Authenticate Activity
 */
const authenticate = (0,_utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_1__.schemaCommandFactory)(_generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_0__.Command.AUTHENTICATE);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/authorize.mjs":
/*!******************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/authorize.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   authorize: () => (/* binding */ authorize)
/* harmony export */ });
/* harmony import */ var _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../schema/common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");
/* harmony import */ var _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../schema/responses.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/responses.mjs");
/* harmony import */ var _utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/commandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs");




/**
 * Should be called directly after a `ready` payload is received from the
 * Discord client. It includes a list of all scopes that your activity would
 * like to be authorized to use. If the user does not yet have a valid token
 * for all scopes requested, this command will open an OAuth modal. Once an
 * authorized token is available, it will be returned in the command response.
 */
const authorize = (sendCommand) => (0,_utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__.commandFactory)(sendCommand, _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__.Commands.AUTHORIZE, _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__.AuthorizeResponse);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/captureLog.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/captureLog.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   captureLog: () => (/* binding */ captureLog)
/* harmony export */ });
/* harmony import */ var _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../schema/common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");
/* harmony import */ var _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../schema/responses.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/responses.mjs");
/* harmony import */ var _utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/commandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs");




/**
 *
 */
const captureLog = (sendCommand) => (0,_utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__.commandFactory)(sendCommand, _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__.Commands.CAPTURE_LOG, _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__.EmptyResponse);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/encourageHardwareAcceleration.mjs":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/encourageHardwareAcceleration.mjs ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   encourageHardwareAcceleration: () => (/* binding */ encourageHardwareAcceleration)
/* harmony export */ });
/* harmony import */ var _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../schema/common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");
/* harmony import */ var _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../schema/responses.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/responses.mjs");
/* harmony import */ var _utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/commandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs");




/**
 *
 */
const encourageHardwareAcceleration = (sendCommand) => (0,_utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__.commandFactory)(sendCommand, _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__.Commands.ENCOURAGE_HW_ACCELERATION, _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__.EncourageHardwareAccelerationResponse);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/getChannel.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/getChannel.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getChannel: () => (/* binding */ getChannel)
/* harmony export */ });
/* harmony import */ var _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../schema/common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");
/* harmony import */ var _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../schema/responses.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/responses.mjs");
/* harmony import */ var _utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/commandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs");




/**
 *
 * @description
 * RPC documentation here: https://discord.com/developers/docs/topics/rpc#getchannel
 * Calling getChannel gets info about the requested channel such as the channel name.
 *
 * Supported Platforms
 * | Web | iOS | Android |
 * |-----|-----|---------|
 * | ✅  | ✅  | ✅      |
 *
 * Required scopes:
 * - [guilds] for guild channels
 * - [guilds, dm_channels.read] for GDM channels. dm_channels.read requires approval from Discord.
 *
 * @example
 * await discordSdk.commands.getActivity({
 *   channel_id: discordSdk.channelId,
 * });
 */
const getChannel = (sendCommand) => (0,_utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__.commandFactory)(sendCommand, _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__.Commands.GET_CHANNEL, _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__.GetChannelResponse);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/getChannelPermissions.mjs":
/*!******************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/getChannelPermissions.mjs ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getChannelPermissions: () => (/* binding */ getChannelPermissions)
/* harmony export */ });
/* harmony import */ var _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../schema/common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");
/* harmony import */ var _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../schema/responses.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/responses.mjs");
/* harmony import */ var _utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/commandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs");




/**
 * Returns a bigint representing Permissions for the current user in the currently connected channel. Use PermissionsUtils to calculate if a user has a particular permission.
 * Always returns `0n` (no valid permissions) in a (G)DM context, so is unnecessary to call when discordSdk.guildId == null.
 */
const getChannelPermissions = (sendCommand) => (0,_utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__.commandFactory)(sendCommand, _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__.Commands.GET_CHANNEL_PERMISSIONS, _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__.GetChannelPermissionsResponse);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/getEntitlements.mjs":
/*!************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/getEntitlements.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getEntitlements: () => (/* binding */ getEntitlements)
/* harmony export */ });
/* harmony import */ var _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../schema/common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");
/* harmony import */ var _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../schema/responses.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/responses.mjs");
/* harmony import */ var _utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/commandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs");




/**
 *
 */
const getEntitlements = (sendCommand) => (0,_utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__.commandFactory)(sendCommand, _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__.Commands.GET_ENTITLEMENTS_EMBEDDED, _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__.GetEntitlementsResponse);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/getInstanceConnectedParticipants.mjs":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/getInstanceConnectedParticipants.mjs ***!
  \*****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getInstanceConnectedParticipants: () => (/* binding */ getInstanceConnectedParticipants)
/* harmony export */ });
/* harmony import */ var _generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../generated/schemas.mjs */ "./node_modules/@discord/embedded-app-sdk/output/generated/schemas.mjs");
/* harmony import */ var _utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/commandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs");



/**
 * Gets all participants connected to the instance
 */
const getInstanceConnectedParticipants = (0,_utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_1__.schemaCommandFactory)(_generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_0__.Command.GET_ACTIVITY_INSTANCE_CONNECTED_PARTICIPANTS);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/getPlatformBehaviors.mjs":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/getPlatformBehaviors.mjs ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getPlatformBehaviors: () => (/* binding */ getPlatformBehaviors)
/* harmony export */ });
/* harmony import */ var _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../schema/common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");
/* harmony import */ var _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../schema/responses.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/responses.mjs");
/* harmony import */ var _utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/commandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs");




/**
 * Returns an object with information about platform behaviors
 * This command can be utilized to inform and react to a breaking change in platform behavior
 *
 * @returns {GetPlatformBehaviorsPayload} payload - The command return value
 * @returns {boolean} payload.data.iosKeyboardResizesView - If on iOS the webview is resized when the keyboard is opened
 */
const getPlatformBehaviors = (sendCommand) => (0,_utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__.commandFactory)(sendCommand, _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__.Commands.GET_PLATFORM_BEHAVIORS, _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__.GetPlatformBehaviorsResponse);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/getRelationships.mjs":
/*!*************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/getRelationships.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getRelationships: () => (/* binding */ getRelationships)
/* harmony export */ });
/* harmony import */ var _utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/commandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs");
/* harmony import */ var _generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../generated/schemas.mjs */ "./node_modules/@discord/embedded-app-sdk/output/generated/schemas.mjs");



const getRelationships = (0,_utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_0__.schemaCommandFactory)(_generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_1__.Command.GET_RELATIONSHIPS);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/getSkus.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/getSkus.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSkus: () => (/* binding */ getSkus)
/* harmony export */ });
/* harmony import */ var _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../schema/common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");
/* harmony import */ var _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../schema/responses.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/responses.mjs");
/* harmony import */ var _utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/commandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs");




/*
 *
 */
const getSkus = (sendCommand) => (0,_utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__.commandFactory)(sendCommand, _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__.Commands.GET_SKUS_EMBEDDED, _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__.GetSkusResponse);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/getUser.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/getUser.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getUser: () => (/* binding */ getUser)
/* harmony export */ });
/* harmony import */ var _utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/commandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs");
/* harmony import */ var _generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../generated/schemas.mjs */ "./node_modules/@discord/embedded-app-sdk/output/generated/schemas.mjs");



const getUser = (0,_utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_0__.schemaCommandFactory)(_generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_1__.Command.GET_USER);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/index.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/index.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Commands: () => (/* reexport safe */ _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__.Commands),
/* harmony export */   "default": () => (/* binding */ commands)
/* harmony export */ });
/* harmony import */ var _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../schema/common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");
/* harmony import */ var _authenticate_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./authenticate.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/authenticate.mjs");
/* harmony import */ var _authorize_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./authorize.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/authorize.mjs");
/* harmony import */ var _captureLog_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./captureLog.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/captureLog.mjs");
/* harmony import */ var _encourageHardwareAcceleration_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./encourageHardwareAcceleration.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/encourageHardwareAcceleration.mjs");
/* harmony import */ var _getEntitlements_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./getEntitlements.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/getEntitlements.mjs");
/* harmony import */ var _getSkus_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./getSkus.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/getSkus.mjs");
/* harmony import */ var _getChannelPermissions_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./getChannelPermissions.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/getChannelPermissions.mjs");
/* harmony import */ var _getPlatformBehaviors_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./getPlatformBehaviors.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/getPlatformBehaviors.mjs");
/* harmony import */ var _openExternalLink_mjs__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./openExternalLink.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/openExternalLink.mjs");
/* harmony import */ var _openInviteDialog_mjs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./openInviteDialog.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/openInviteDialog.mjs");
/* harmony import */ var _openShareMomentDialog_mjs__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./openShareMomentDialog.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/openShareMomentDialog.mjs");
/* harmony import */ var _setActivity_mjs__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./setActivity.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/setActivity.mjs");
/* harmony import */ var _setConfig_mjs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./setConfig.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/setConfig.mjs");
/* harmony import */ var _setOrientationLockState_mjs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./setOrientationLockState.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/setOrientationLockState.mjs");
/* harmony import */ var _shareLink_mjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./shareLink.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/shareLink.mjs");
/* harmony import */ var _startPurchase_mjs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./startPurchase.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/startPurchase.mjs");
/* harmony import */ var _userSettingsGetLocale_mjs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./userSettingsGetLocale.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/userSettingsGetLocale.mjs");
/* harmony import */ var _initiateImageUpload_mjs__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./initiateImageUpload.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/initiateImageUpload.mjs");
/* harmony import */ var _getChannel_mjs__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./getChannel.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/getChannel.mjs");
/* harmony import */ var _getInstanceConnectedParticipants_mjs__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./getInstanceConnectedParticipants.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/getInstanceConnectedParticipants.mjs");
/* harmony import */ var _getRelationships_mjs__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./getRelationships.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/getRelationships.mjs");
/* harmony import */ var _inviteUserEmbedded_mjs__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./inviteUserEmbedded.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/inviteUserEmbedded.mjs");
/* harmony import */ var _getUser_mjs__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./getUser.mjs */ "./node_modules/@discord/embedded-app-sdk/output/commands/getUser.mjs");

























function commands(sendCommand) {
    return {
        authenticate: (0,_authenticate_mjs__WEBPACK_IMPORTED_MODULE_1__.authenticate)(sendCommand),
        authorize: (0,_authorize_mjs__WEBPACK_IMPORTED_MODULE_2__.authorize)(sendCommand),
        captureLog: (0,_captureLog_mjs__WEBPACK_IMPORTED_MODULE_3__.captureLog)(sendCommand),
        encourageHardwareAcceleration: (0,_encourageHardwareAcceleration_mjs__WEBPACK_IMPORTED_MODULE_4__.encourageHardwareAcceleration)(sendCommand),
        getChannel: (0,_getChannel_mjs__WEBPACK_IMPORTED_MODULE_19__.getChannel)(sendCommand),
        getChannelPermissions: (0,_getChannelPermissions_mjs__WEBPACK_IMPORTED_MODULE_7__.getChannelPermissions)(sendCommand),
        getEntitlements: (0,_getEntitlements_mjs__WEBPACK_IMPORTED_MODULE_5__.getEntitlements)(sendCommand),
        getPlatformBehaviors: (0,_getPlatformBehaviors_mjs__WEBPACK_IMPORTED_MODULE_8__.getPlatformBehaviors)(sendCommand),
        getSkus: (0,_getSkus_mjs__WEBPACK_IMPORTED_MODULE_6__.getSkus)(sendCommand),
        openExternalLink: (0,_openExternalLink_mjs__WEBPACK_IMPORTED_MODULE_9__.openExternalLink)(sendCommand),
        openInviteDialog: (0,_openInviteDialog_mjs__WEBPACK_IMPORTED_MODULE_10__.openInviteDialog)(sendCommand),
        openShareMomentDialog: (0,_openShareMomentDialog_mjs__WEBPACK_IMPORTED_MODULE_11__.openShareMomentDialog)(sendCommand),
        setActivity: (0,_setActivity_mjs__WEBPACK_IMPORTED_MODULE_12__.setActivity)(sendCommand),
        setConfig: (0,_setConfig_mjs__WEBPACK_IMPORTED_MODULE_13__.setConfig)(sendCommand),
        setOrientationLockState: (0,_setOrientationLockState_mjs__WEBPACK_IMPORTED_MODULE_14__.setOrientationLockState)(sendCommand),
        shareLink: (0,_shareLink_mjs__WEBPACK_IMPORTED_MODULE_15__.shareLink)(sendCommand),
        startPurchase: (0,_startPurchase_mjs__WEBPACK_IMPORTED_MODULE_16__.startPurchase)(sendCommand),
        userSettingsGetLocale: (0,_userSettingsGetLocale_mjs__WEBPACK_IMPORTED_MODULE_17__.userSettingsGetLocale)(sendCommand),
        initiateImageUpload: (0,_initiateImageUpload_mjs__WEBPACK_IMPORTED_MODULE_18__.initiateImageUpload)(sendCommand),
        getInstanceConnectedParticipants: (0,_getInstanceConnectedParticipants_mjs__WEBPACK_IMPORTED_MODULE_20__.getInstanceConnectedParticipants)(sendCommand),
        getRelationships: (0,_getRelationships_mjs__WEBPACK_IMPORTED_MODULE_21__.getRelationships)(sendCommand),
        inviteUserEmbedded: (0,_inviteUserEmbedded_mjs__WEBPACK_IMPORTED_MODULE_22__.inviteUserEmbedded)(sendCommand),
        getUser: (0,_getUser_mjs__WEBPACK_IMPORTED_MODULE_23__.getUser)(sendCommand),
    };
}




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/initiateImageUpload.mjs":
/*!****************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/initiateImageUpload.mjs ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   initiateImageUpload: () => (/* binding */ initiateImageUpload)
/* harmony export */ });
/* harmony import */ var _generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../generated/schemas.mjs */ "./node_modules/@discord/embedded-app-sdk/output/generated/schemas.mjs");
/* harmony import */ var _utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/commandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs");



/**
 * Triggers the file upload flow in the Discord app. The user will be prompted to select a valid image file
 * and then it will be uploaded on the app side to the Discord CDN.
 *
 * NOTE: The URL provided by the API is an ephemeral attachment URL, so the image will not be permanently
 * accessible at the link provided.
 *
 * @returns {Promise<{image_url: string}>}
 */
const initiateImageUpload = (0,_utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_1__.schemaCommandFactory)(_generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_0__.Command.INITIATE_IMAGE_UPLOAD);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/inviteUserEmbedded.mjs":
/*!***************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/inviteUserEmbedded.mjs ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   inviteUserEmbedded: () => (/* binding */ inviteUserEmbedded)
/* harmony export */ });
/* harmony import */ var _utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/commandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs");
/* harmony import */ var _generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../generated/schemas.mjs */ "./node_modules/@discord/embedded-app-sdk/output/generated/schemas.mjs");



const inviteUserEmbedded = (0,_utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_0__.schemaCommandFactory)(_generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_1__.Command.INVITE_USER_EMBEDDED);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/openExternalLink.mjs":
/*!*************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/openExternalLink.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   openExternalLink: () => (/* binding */ openExternalLink)
/* harmony export */ });
/* harmony import */ var _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../schema/common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");
/* harmony import */ var _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../schema/responses.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/responses.mjs");
/* harmony import */ var _utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/commandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs");




/**
 *
 */
const openExternalLink = (sendCommand) => (0,_utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__.commandFactory)(sendCommand, _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__.Commands.OPEN_EXTERNAL_LINK, _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__.OpenExternalLinkResponse);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/openInviteDialog.mjs":
/*!*************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/openInviteDialog.mjs ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   openInviteDialog: () => (/* binding */ openInviteDialog)
/* harmony export */ });
/* harmony import */ var _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../schema/common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");
/* harmony import */ var _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../schema/responses.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/responses.mjs");
/* harmony import */ var _utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/commandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs");




/**
 * Opens the invite dialog within the discord client, allowing users to share invite links to friends.
 * Does not work in (G)DM contexts (throws RPCError.INVALID_CHANNEL), so should not be called if discordSdk.guildId == null
 * Similarly, if the user does not have Permissions.CREATE_INSTANT_INVITE this command throws RPCErrors.INVALID_PERMISSIONS, so checking the user's permissions via getChannelPermissions is highly recommended.
 */
const openInviteDialog = (sendCommand) => (0,_utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__.commandFactory)(sendCommand, _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__.Commands.OPEN_INVITE_DIALOG, _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__.EmptyResponse);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/openShareMomentDialog.mjs":
/*!******************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/openShareMomentDialog.mjs ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   openShareMomentDialog: () => (/* binding */ openShareMomentDialog)
/* harmony export */ });
/* harmony import */ var _generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../generated/schemas.mjs */ "./node_modules/@discord/embedded-app-sdk/output/generated/schemas.mjs");
/* harmony import */ var _utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/commandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs");



/**
 * Opens the Share Moment Dialog in the user's client, allowing them to share the media at mediaUrl as a message.
 *
 * @param {string} mediaUrl - a Discord CDN URL for the piece of media to be shared.
 * @returns {Promise<void>}
 */
const openShareMomentDialog = (0,_utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_1__.schemaCommandFactory)(_generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_0__.Command.OPEN_SHARE_MOMENT_DIALOG);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/setActivity.mjs":
/*!********************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/setActivity.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   setActivity: () => (/* binding */ setActivity)
/* harmony export */ });
/* harmony import */ var _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../schema/common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");
/* harmony import */ var _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../schema/responses.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/responses.mjs");
/* harmony import */ var _utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/commandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs");




_schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__.Activity.pick({
    state: true,
    details: true,
    timestamps: true,
    assets: true,
    party: true,
    secrets: true,
    instance: true,
    type: true,
})
    .extend({
    type: _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__.Activity.shape.type.optional(),
    instance: _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__.Activity.shape.instance.optional(),
})
    .nullable();
/**
 *
 * @description
 * RPC documentation here: https://discord.com/developers/docs/topics/rpc#setactivity
 * Calling setActivity allows modifying how your activity's rich presence is displayed in the Discord App
 *
 * Supported Platforms
 * | Web | iOS | Android |
 * |-----|-----|---------|
 * | ✅  | ✅  | ✅      |
 *
 * Required scopes: [rpc.activities.write]
 *
 * @example
 * await discordSdk.commands.setActivity({
 *   activity: {
 *     type: 0,
 *     details: 'Details',
 *     state: 'Playing',
 *   },
 * });
 */
const setActivity = (sendCommand) => (0,_utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__.commandFactory)(sendCommand, _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__.Commands.SET_ACTIVITY, _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__.SetActivityResponse);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/setConfig.mjs":
/*!******************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/setConfig.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   setConfig: () => (/* binding */ setConfig)
/* harmony export */ });
/* harmony import */ var _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../schema/common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");
/* harmony import */ var _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../schema/responses.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/responses.mjs");
/* harmony import */ var _utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/commandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs");




/**
 *
 */
const setConfig = (sendCommand) => (0,_utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__.commandFactory)(sendCommand, _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__.Commands.SET_CONFIG, _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__.SetConfigResponse);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/setOrientationLockState.mjs":
/*!********************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/setOrientationLockState.mjs ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   setOrientationLockState: () => (/* binding */ setOrientationLockState)
/* harmony export */ });
/* harmony import */ var _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../schema/common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");
/* harmony import */ var _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../schema/responses.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/responses.mjs");
/* harmony import */ var _utils_compatCommandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/compatCommandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/compatCommandFactory.mjs");




const fallbackTransform = (args) => {
    return {
        lock_state: args.lock_state,
        picture_in_picture_lock_state: args.picture_in_picture_lock_state,
    };
};
const setOrientationLockState = (sendCommand) => (0,_utils_compatCommandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__["default"])({
    sendCommand,
    cmd: _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__.Commands.SET_ORIENTATION_LOCK_STATE,
    response: _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__.EmptyResponse,
    fallbackTransform,
});




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/shareLink.mjs":
/*!******************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/shareLink.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   shareLink: () => (/* binding */ shareLink)
/* harmony export */ });
/* harmony import */ var _generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../generated/schemas.mjs */ "./node_modules/@discord/embedded-app-sdk/output/generated/schemas.mjs");
/* harmony import */ var _utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/commandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs");



/**
 * Opens a modal in the user's client to share the Activity link.
 *
 * @param {string} referrer_id
 * @param {string} custom_id
 * @param {string} message - message sent alongside link when shared.
 * @returns {Promise<{success: boolean>} whether or not the user shared the link to someone
 */
const shareLink = (0,_utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_1__.schemaCommandFactory)(_generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_0__.Command.SHARE_LINK);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/startPurchase.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/startPurchase.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   startPurchase: () => (/* binding */ startPurchase)
/* harmony export */ });
/* harmony import */ var _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../schema/common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");
/* harmony import */ var _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../schema/responses.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/responses.mjs");
/* harmony import */ var _utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/commandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs");




/**
 *
 */
const startPurchase = (sendCommand) => (0,_utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__.commandFactory)(sendCommand, _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__.Commands.START_PURCHASE, _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__.StartPurchaseResponse);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/commands/userSettingsGetLocale.mjs":
/*!******************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/commands/userSettingsGetLocale.mjs ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   userSettingsGetLocale: () => (/* binding */ userSettingsGetLocale)
/* harmony export */ });
/* harmony import */ var _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../schema/common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");
/* harmony import */ var _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../schema/responses.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/responses.mjs");
/* harmony import */ var _utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/commandFactory.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs");




/**
 *
 */
const userSettingsGetLocale = (sendCommand) => (0,_utils_commandFactory_mjs__WEBPACK_IMPORTED_MODULE_2__.commandFactory)(sendCommand, _schema_common_mjs__WEBPACK_IMPORTED_MODULE_0__.Commands.USER_SETTINGS_GET_LOCALE, _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_1__.UserSettingsGetLocaleResponse);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/error.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/error.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SDKError: () => (/* binding */ SDKError)
/* harmony export */ });
class SDKError extends Error {
    constructor(code, message = '') {
        super(message);
        this.code = code;
        this.message = message;
        this.name = 'Discord SDK Error';
    }
}




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/generated/schemas.mjs":
/*!*****************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/generated/schemas.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AuthenticateRequestSchema: () => (/* binding */ AuthenticateRequestSchema),
/* harmony export */   AuthenticateResponseSchema: () => (/* binding */ AuthenticateResponseSchema),
/* harmony export */   Command: () => (/* binding */ Command),
/* harmony export */   GetActivityInstanceConnectedParticipantsResponseSchema: () => (/* binding */ GetActivityInstanceConnectedParticipantsResponseSchema),
/* harmony export */   GetRelationshipsResponseSchema: () => (/* binding */ GetRelationshipsResponseSchema),
/* harmony export */   GetUserRequestSchema: () => (/* binding */ GetUserRequestSchema),
/* harmony export */   GetUserResponseSchema: () => (/* binding */ GetUserResponseSchema),
/* harmony export */   InitiateImageUploadResponseSchema: () => (/* binding */ InitiateImageUploadResponseSchema),
/* harmony export */   InviteUserEmbeddedRequestSchema: () => (/* binding */ InviteUserEmbeddedRequestSchema),
/* harmony export */   OpenShareMomentDialogRequestSchema: () => (/* binding */ OpenShareMomentDialogRequestSchema),
/* harmony export */   Schemas: () => (/* binding */ Schemas),
/* harmony export */   ShareInteractionRequestSchema: () => (/* binding */ ShareInteractionRequestSchema),
/* harmony export */   ShareInteractionResponseSchema: () => (/* binding */ ShareInteractionResponseSchema),
/* harmony export */   ShareLinkRequestSchema: () => (/* binding */ ShareLinkRequestSchema),
/* harmony export */   ShareLinkResponseSchema: () => (/* binding */ ShareLinkResponseSchema)
/* harmony export */ });
/* harmony import */ var _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/zod/lib/index.mjs */ "./node_modules/@discord/embedded-app-sdk/output/lib/zod/lib/index.mjs");
/* harmony import */ var _utils_zodUtils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/zodUtils.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/zodUtils.mjs");



/**
 * This file is generated.
 * Run "npm run sync" to regenerate file.
 * @generated
 */
// INITIATE_IMAGE_UPLOAD
const InitiateImageUploadResponseSchema = _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({ image_url: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string() });
// OPEN_SHARE_MOMENT_DIALOG
const OpenShareMomentDialogRequestSchema = _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({ mediaUrl: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().max(1024) });
// AUTHENTICATE
const AuthenticateRequestSchema = _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({ access_token: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].union([_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(), _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["null"]()]).optional() });
const AuthenticateResponseSchema = _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({
    access_token: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(),
    user: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({
        username: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(),
        discriminator: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(),
        id: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(),
        avatar: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].union([_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(), _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["null"]()]).optional(),
        public_flags: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].number(),
        global_name: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].union([_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(), _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["null"]()]).optional(),
    }),
    scopes: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].array((0,_utils_zodUtils_mjs__WEBPACK_IMPORTED_MODULE_1__.fallbackToDefault)(_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["enum"]([
        'identify',
        'email',
        'connections',
        'guilds',
        'guilds.join',
        'guilds.members.read',
        'guilds.channels.read',
        'gdm.join',
        'bot',
        'rpc',
        'rpc.notifications.read',
        'rpc.voice.read',
        'rpc.voice.write',
        'rpc.video.read',
        'rpc.video.write',
        'rpc.screenshare.read',
        'rpc.screenshare.write',
        'rpc.activities.write',
        'webhook.incoming',
        'messages.read',
        'applications.builds.upload',
        'applications.builds.read',
        'applications.commands',
        'applications.commands.permissions.update',
        'applications.commands.update',
        'applications.store.update',
        'applications.entitlements',
        'activities.read',
        'activities.write',
        'activities.invites.write',
        'relationships.read',
        'relationships.write',
        'voice',
        'dm_channels.read',
        'role_connections.write',
        'presences.read',
        'presences.write',
        'openid',
        'dm_channels.messages.read',
        'dm_channels.messages.write',
        'gateway.connect',
        'account.global_name.update',
        'payment_sources.country_code',
        'sdk.social_layer_presence',
        'sdk.social_layer',
        'lobbies.write',
    ])
        .or(_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].literal(-1))
        .default(-1))),
    expires: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(),
    application: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({
        description: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(),
        icon: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].union([_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(), _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["null"]()]).optional(),
        id: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(),
        rpc_origins: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].array(_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string()).optional(),
        name: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(),
    }),
});
// GET_ACTIVITY_INSTANCE_CONNECTED_PARTICIPANTS
const GetActivityInstanceConnectedParticipantsResponseSchema = _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({
    participants: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].array(_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({
        id: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(),
        username: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(),
        global_name: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].union([_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(), _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["null"]()]).optional(),
        discriminator: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(),
        avatar: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].union([_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(), _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["null"]()]).optional(),
        flags: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].number(),
        bot: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].boolean(),
        avatar_decoration_data: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].union([
            _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({ asset: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(), skuId: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().optional(), expiresAt: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].number().optional() }),
            _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["null"](),
        ])
            .optional(),
        premium_type: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].union([_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].number(), _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["null"]()]).optional(),
        nickname: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().optional(),
    })),
});
// SHARE_INTERACTION
const ShareInteractionRequestSchema = _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({
    command: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(),
    content: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().max(2000).optional(),
    require_launch_channel: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].boolean().optional(),
    preview_image: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({ height: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].number(), url: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(), width: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].number() }).optional(),
    components: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].array(_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({
        type: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].literal(1),
        components: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].array(_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({
            type: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].literal(2),
            style: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].number().gte(1).lte(5),
            label: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().max(80).optional(),
            custom_id: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string()
                .max(100)
                .describe('Developer-defined identifier for the button; max 100 characters')
                .optional(),
        }))
            .max(5)
            .optional(),
    }))
        .optional(),
});
const ShareInteractionResponseSchema = _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({ success: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].boolean() });
// SHARE_LINK
const ShareLinkRequestSchema = _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({
    custom_id: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().max(64).optional(),
    message: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().max(1000),
    link_id: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().max(64).optional(),
});
const ShareLinkResponseSchema = _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({
    success: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].boolean(),
    didCopyLink: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].boolean(),
    didSendMessage: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].boolean(),
});
// GET_RELATIONSHIPS
const GetRelationshipsResponseSchema = _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({
    relationships: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].array(_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({
        type: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].number(),
        user: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({
            id: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(),
            username: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(),
            global_name: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].union([_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(), _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["null"]()]).optional(),
            discriminator: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(),
            avatar: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].union([_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(), _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["null"]()]).optional(),
            flags: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].number(),
            bot: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].boolean(),
            avatar_decoration_data: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].union([
                _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({ asset: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(), skuId: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().optional(), expiresAt: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].number().optional() }),
                _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["null"](),
            ])
                .optional(),
            premium_type: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].union([_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].number(), _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["null"]()]).optional(),
        }),
        presence: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({
            status: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(),
            activity: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].union([
                _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({
                    session_id: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().optional(),
                    type: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].number().optional(),
                    name: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(),
                    url: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].union([_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(), _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["null"]()]).optional(),
                    application_id: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().optional(),
                    state: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().optional(),
                    details: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().optional(),
                    emoji: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].union([
                        _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({
                            name: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(),
                            id: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].union([_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(), _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["null"]()]).optional(),
                            animated: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].union([_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].boolean(), _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["null"]()]).optional(),
                        }),
                        _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["null"](),
                    ])
                        .optional(),
                    assets: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({
                        large_image: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().optional(),
                        large_text: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().optional(),
                        small_image: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().optional(),
                        small_text: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().optional(),
                    })
                        .optional(),
                    timestamps: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({ start: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].number().optional(), end: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].number().optional() }).optional(),
                    party: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({
                        id: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().optional(),
                        size: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].array(_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].number()).min(2).max(2).optional(),
                        privacy: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].number().optional(),
                    })
                        .optional(),
                    secrets: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({ match: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().optional(), join: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().optional() }).optional(),
                    sync_id: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().optional(),
                    created_at: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].number().optional(),
                    instance: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].boolean().optional(),
                    flags: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].number().optional(),
                    metadata: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({}).optional(),
                    platform: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().optional(),
                    supported_platforms: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].array(_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string()).optional(),
                    buttons: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].array(_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string()).optional(),
                    hangStatus: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().optional(),
                }),
                _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["null"](),
            ])
                .optional(),
        })
            .optional(),
    })),
});
// INVITE_USER_EMBEDDED
const InviteUserEmbeddedRequestSchema = _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({
    user_id: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(),
    content: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().min(0).max(1024).optional(),
});
// GET_USER
const GetUserRequestSchema = _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({ id: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().max(64) });
const GetUserResponseSchema = _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].union([
    _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({
        id: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(),
        username: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(),
        global_name: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].union([_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(), _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["null"]()]).optional(),
        discriminator: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(),
        avatar: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].union([_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(), _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["null"]()]).optional(),
        flags: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].number(),
        bot: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].boolean(),
        avatar_decoration_data: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].union([_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({ asset: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string(), skuId: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].string().optional(), expiresAt: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].number().optional() }), _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["null"]()])
            .optional(),
        premium_type: _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].union([_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].number(), _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["null"]()]).optional(),
    }),
    _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["null"](),
]);
/**
 * RPC Commands which support schemas.
 */
var Command;
(function (Command) {
    Command["INITIATE_IMAGE_UPLOAD"] = "INITIATE_IMAGE_UPLOAD";
    Command["OPEN_SHARE_MOMENT_DIALOG"] = "OPEN_SHARE_MOMENT_DIALOG";
    Command["AUTHENTICATE"] = "AUTHENTICATE";
    Command["GET_ACTIVITY_INSTANCE_CONNECTED_PARTICIPANTS"] = "GET_ACTIVITY_INSTANCE_CONNECTED_PARTICIPANTS";
    Command["SHARE_INTERACTION"] = "SHARE_INTERACTION";
    Command["SHARE_LINK"] = "SHARE_LINK";
    Command["GET_RELATIONSHIPS"] = "GET_RELATIONSHIPS";
    Command["INVITE_USER_EMBEDDED"] = "INVITE_USER_EMBEDDED";
    Command["GET_USER"] = "GET_USER";
})(Command || (Command = {}));
const emptyResponseSchema = _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].object({}).optional().nullable();
const emptyRequestSchema = _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]["void"]();
/**
 * Request & Response schemas for each supported RPC Command.
 */
const Schemas = {
    [Command.INITIATE_IMAGE_UPLOAD]: {
        request: emptyRequestSchema,
        response: InitiateImageUploadResponseSchema,
    },
    [Command.OPEN_SHARE_MOMENT_DIALOG]: {
        request: OpenShareMomentDialogRequestSchema,
        response: emptyResponseSchema,
    },
    [Command.AUTHENTICATE]: {
        request: AuthenticateRequestSchema,
        response: AuthenticateResponseSchema,
    },
    [Command.GET_ACTIVITY_INSTANCE_CONNECTED_PARTICIPANTS]: {
        request: emptyRequestSchema,
        response: GetActivityInstanceConnectedParticipantsResponseSchema,
    },
    [Command.SHARE_INTERACTION]: {
        request: ShareInteractionRequestSchema,
        response: ShareInteractionResponseSchema,
    },
    [Command.SHARE_LINK]: {
        request: ShareLinkRequestSchema,
        response: ShareLinkResponseSchema,
    },
    [Command.GET_RELATIONSHIPS]: {
        request: emptyRequestSchema,
        response: GetRelationshipsResponseSchema,
    },
    [Command.INVITE_USER_EMBEDDED]: {
        request: InviteUserEmbeddedRequestSchema,
        response: emptyResponseSchema,
    },
    [Command.GET_USER]: {
        request: GetUserRequestSchema,
        response: GetUserResponseSchema,
    },
};




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/index.mjs":
/*!*****************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/index.mjs ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Commands: () => (/* binding */ Commands),
/* harmony export */   Common: () => (/* reexport module object */ _schema_common_mjs__WEBPACK_IMPORTED_MODULE_2__),
/* harmony export */   DiscordSDK: () => (/* reexport safe */ _Discord_mjs__WEBPACK_IMPORTED_MODULE_0__.DiscordSDK),
/* harmony export */   DiscordSDKMock: () => (/* reexport safe */ _mock_mjs__WEBPACK_IMPORTED_MODULE_7__.DiscordSDKMock),
/* harmony export */   Events: () => (/* reexport safe */ _schema_events_mjs__WEBPACK_IMPORTED_MODULE_1__.Events),
/* harmony export */   Orientation: () => (/* reexport safe */ _Constants_mjs__WEBPACK_IMPORTED_MODULE_4__.Orientation),
/* harmony export */   PermissionUtils: () => (/* reexport safe */ _utils_PermissionUtils_mjs__WEBPACK_IMPORTED_MODULE_5__["default"]),
/* harmony export */   Permissions: () => (/* reexport safe */ _Constants_mjs__WEBPACK_IMPORTED_MODULE_4__.Permissions),
/* harmony export */   Platform: () => (/* reexport safe */ _Constants_mjs__WEBPACK_IMPORTED_MODULE_4__.Platform),
/* harmony export */   PriceUtils: () => (/* reexport safe */ _utils_PriceUtils_mjs__WEBPACK_IMPORTED_MODULE_6__["default"]),
/* harmony export */   RPCCloseCodes: () => (/* reexport safe */ _Constants_mjs__WEBPACK_IMPORTED_MODULE_4__.RPCCloseCodes),
/* harmony export */   RPCErrorCodes: () => (/* reexport safe */ _Constants_mjs__WEBPACK_IMPORTED_MODULE_4__.RPCErrorCodes),
/* harmony export */   Responses: () => (/* reexport module object */ _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_3__),
/* harmony export */   attemptRemap: () => (/* reexport safe */ _utils_patchUrlMappings_mjs__WEBPACK_IMPORTED_MODULE_8__.attemptRemap),
/* harmony export */   patchUrlMappings: () => (/* reexport safe */ _utils_patchUrlMappings_mjs__WEBPACK_IMPORTED_MODULE_8__.patchUrlMappings)
/* harmony export */ });
/* harmony import */ var _Discord_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Discord.mjs */ "./node_modules/@discord/embedded-app-sdk/output/Discord.mjs");
/* harmony import */ var _schema_events_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./schema/events.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/events.mjs");
/* harmony import */ var _schema_common_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./schema/common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");
/* harmony import */ var _schema_responses_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./schema/responses.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/responses.mjs");
/* harmony import */ var _Constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Constants.mjs */ "./node_modules/@discord/embedded-app-sdk/output/Constants.mjs");
/* harmony import */ var _utils_PermissionUtils_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/PermissionUtils.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/PermissionUtils.mjs");
/* harmony import */ var _utils_PriceUtils_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/PriceUtils.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/PriceUtils.mjs");
/* harmony import */ var _mock_mjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./mock.mjs */ "./node_modules/@discord/embedded-app-sdk/output/mock.mjs");
/* harmony import */ var _utils_patchUrlMappings_mjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils/patchUrlMappings.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/patchUrlMappings.mjs");











const { Commands } = _schema_common_mjs__WEBPACK_IMPORTED_MODULE_2__;




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/lib/big-integer/BigInteger.mjs":
/*!**************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/lib/big-integer/BigInteger.mjs ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __require: () => (/* binding */ requireBigInteger)
/* harmony export */ });
/* harmony import */ var _virtual_BigInteger2_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../_virtual/BigInteger2.mjs */ "./node_modules/@discord/embedded-app-sdk/output/_virtual/BigInteger2.mjs");


var hasRequiredBigInteger;

function requireBigInteger () {
	if (hasRequiredBigInteger) return _virtual_BigInteger2_mjs__WEBPACK_IMPORTED_MODULE_0__.__module.exports;
	hasRequiredBigInteger = 1;
	(function (module) {
		var bigInt = (function (undefined$1) {

		    var BASE = 1e7,
		        LOG_BASE = 7,
		        MAX_INT = 9007199254740992,
		        MAX_INT_ARR = smallToArray(MAX_INT),
		        DEFAULT_ALPHABET = "0123456789abcdefghijklmnopqrstuvwxyz";

		    var supportsNativeBigInt = typeof BigInt === "function";

		    function Integer(v, radix, alphabet, caseSensitive) {
		        if (typeof v === "undefined") return Integer[0];
		        if (typeof radix !== "undefined") return +radix === 10 && !alphabet ? parseValue(v) : parseBase(v, radix, alphabet, caseSensitive);
		        return parseValue(v);
		    }

		    function BigInteger(value, sign) {
		        this.value = value;
		        this.sign = sign;
		        this.isSmall = false;
		    }
		    BigInteger.prototype = Object.create(Integer.prototype);

		    function SmallInteger(value) {
		        this.value = value;
		        this.sign = value < 0;
		        this.isSmall = true;
		    }
		    SmallInteger.prototype = Object.create(Integer.prototype);

		    function NativeBigInt(value) {
		        this.value = value;
		    }
		    NativeBigInt.prototype = Object.create(Integer.prototype);

		    function isPrecise(n) {
		        return -MAX_INT < n && n < MAX_INT;
		    }

		    function smallToArray(n) { // For performance reasons doesn't reference BASE, need to change this function if BASE changes
		        if (n < 1e7)
		            return [n];
		        if (n < 1e14)
		            return [n % 1e7, Math.floor(n / 1e7)];
		        return [n % 1e7, Math.floor(n / 1e7) % 1e7, Math.floor(n / 1e14)];
		    }

		    function arrayToSmall(arr) { // If BASE changes this function may need to change
		        trim(arr);
		        var length = arr.length;
		        if (length < 4 && compareAbs(arr, MAX_INT_ARR) < 0) {
		            switch (length) {
		                case 0: return 0;
		                case 1: return arr[0];
		                case 2: return arr[0] + arr[1] * BASE;
		                default: return arr[0] + (arr[1] + arr[2] * BASE) * BASE;
		            }
		        }
		        return arr;
		    }

		    function trim(v) {
		        var i = v.length;
		        while (v[--i] === 0);
		        v.length = i + 1;
		    }

		    function createArray(length) { // function shamelessly stolen from Yaffle's library https://github.com/Yaffle/BigInteger
		        var x = new Array(length);
		        var i = -1;
		        while (++i < length) {
		            x[i] = 0;
		        }
		        return x;
		    }

		    function truncate(n) {
		        if (n > 0) return Math.floor(n);
		        return Math.ceil(n);
		    }

		    function add(a, b) { // assumes a and b are arrays with a.length >= b.length
		        var l_a = a.length,
		            l_b = b.length,
		            r = new Array(l_a),
		            carry = 0,
		            base = BASE,
		            sum, i;
		        for (i = 0; i < l_b; i++) {
		            sum = a[i] + b[i] + carry;
		            carry = sum >= base ? 1 : 0;
		            r[i] = sum - carry * base;
		        }
		        while (i < l_a) {
		            sum = a[i] + carry;
		            carry = sum === base ? 1 : 0;
		            r[i++] = sum - carry * base;
		        }
		        if (carry > 0) r.push(carry);
		        return r;
		    }

		    function addAny(a, b) {
		        if (a.length >= b.length) return add(a, b);
		        return add(b, a);
		    }

		    function addSmall(a, carry) { // assumes a is array, carry is number with 0 <= carry < MAX_INT
		        var l = a.length,
		            r = new Array(l),
		            base = BASE,
		            sum, i;
		        for (i = 0; i < l; i++) {
		            sum = a[i] - base + carry;
		            carry = Math.floor(sum / base);
		            r[i] = sum - carry * base;
		            carry += 1;
		        }
		        while (carry > 0) {
		            r[i++] = carry % base;
		            carry = Math.floor(carry / base);
		        }
		        return r;
		    }

		    BigInteger.prototype.add = function (v) {
		        var n = parseValue(v);
		        if (this.sign !== n.sign) {
		            return this.subtract(n.negate());
		        }
		        var a = this.value, b = n.value;
		        if (n.isSmall) {
		            return new BigInteger(addSmall(a, Math.abs(b)), this.sign);
		        }
		        return new BigInteger(addAny(a, b), this.sign);
		    };
		    BigInteger.prototype.plus = BigInteger.prototype.add;

		    SmallInteger.prototype.add = function (v) {
		        var n = parseValue(v);
		        var a = this.value;
		        if (a < 0 !== n.sign) {
		            return this.subtract(n.negate());
		        }
		        var b = n.value;
		        if (n.isSmall) {
		            if (isPrecise(a + b)) return new SmallInteger(a + b);
		            b = smallToArray(Math.abs(b));
		        }
		        return new BigInteger(addSmall(b, Math.abs(a)), a < 0);
		    };
		    SmallInteger.prototype.plus = SmallInteger.prototype.add;

		    NativeBigInt.prototype.add = function (v) {
		        return new NativeBigInt(this.value + parseValue(v).value);
		    };
		    NativeBigInt.prototype.plus = NativeBigInt.prototype.add;

		    function subtract(a, b) { // assumes a and b are arrays with a >= b
		        var a_l = a.length,
		            b_l = b.length,
		            r = new Array(a_l),
		            borrow = 0,
		            base = BASE,
		            i, difference;
		        for (i = 0; i < b_l; i++) {
		            difference = a[i] - borrow - b[i];
		            if (difference < 0) {
		                difference += base;
		                borrow = 1;
		            } else borrow = 0;
		            r[i] = difference;
		        }
		        for (i = b_l; i < a_l; i++) {
		            difference = a[i] - borrow;
		            if (difference < 0) difference += base;
		            else {
		                r[i++] = difference;
		                break;
		            }
		            r[i] = difference;
		        }
		        for (; i < a_l; i++) {
		            r[i] = a[i];
		        }
		        trim(r);
		        return r;
		    }

		    function subtractAny(a, b, sign) {
		        var value;
		        if (compareAbs(a, b) >= 0) {
		            value = subtract(a, b);
		        } else {
		            value = subtract(b, a);
		            sign = !sign;
		        }
		        value = arrayToSmall(value);
		        if (typeof value === "number") {
		            if (sign) value = -value;
		            return new SmallInteger(value);
		        }
		        return new BigInteger(value, sign);
		    }

		    function subtractSmall(a, b, sign) { // assumes a is array, b is number with 0 <= b < MAX_INT
		        var l = a.length,
		            r = new Array(l),
		            carry = -b,
		            base = BASE,
		            i, difference;
		        for (i = 0; i < l; i++) {
		            difference = a[i] + carry;
		            carry = Math.floor(difference / base);
		            difference %= base;
		            r[i] = difference < 0 ? difference + base : difference;
		        }
		        r = arrayToSmall(r);
		        if (typeof r === "number") {
		            if (sign) r = -r;
		            return new SmallInteger(r);
		        } return new BigInteger(r, sign);
		    }

		    BigInteger.prototype.subtract = function (v) {
		        var n = parseValue(v);
		        if (this.sign !== n.sign) {
		            return this.add(n.negate());
		        }
		        var a = this.value, b = n.value;
		        if (n.isSmall)
		            return subtractSmall(a, Math.abs(b), this.sign);
		        return subtractAny(a, b, this.sign);
		    };
		    BigInteger.prototype.minus = BigInteger.prototype.subtract;

		    SmallInteger.prototype.subtract = function (v) {
		        var n = parseValue(v);
		        var a = this.value;
		        if (a < 0 !== n.sign) {
		            return this.add(n.negate());
		        }
		        var b = n.value;
		        if (n.isSmall) {
		            return new SmallInteger(a - b);
		        }
		        return subtractSmall(b, Math.abs(a), a >= 0);
		    };
		    SmallInteger.prototype.minus = SmallInteger.prototype.subtract;

		    NativeBigInt.prototype.subtract = function (v) {
		        return new NativeBigInt(this.value - parseValue(v).value);
		    };
		    NativeBigInt.prototype.minus = NativeBigInt.prototype.subtract;

		    BigInteger.prototype.negate = function () {
		        return new BigInteger(this.value, !this.sign);
		    };
		    SmallInteger.prototype.negate = function () {
		        var sign = this.sign;
		        var small = new SmallInteger(-this.value);
		        small.sign = !sign;
		        return small;
		    };
		    NativeBigInt.prototype.negate = function () {
		        return new NativeBigInt(-this.value);
		    };

		    BigInteger.prototype.abs = function () {
		        return new BigInteger(this.value, false);
		    };
		    SmallInteger.prototype.abs = function () {
		        return new SmallInteger(Math.abs(this.value));
		    };
		    NativeBigInt.prototype.abs = function () {
		        return new NativeBigInt(this.value >= 0 ? this.value : -this.value);
		    };


		    function multiplyLong(a, b) {
		        var a_l = a.length,
		            b_l = b.length,
		            l = a_l + b_l,
		            r = createArray(l),
		            base = BASE,
		            product, carry, i, a_i, b_j;
		        for (i = 0; i < a_l; ++i) {
		            a_i = a[i];
		            for (var j = 0; j < b_l; ++j) {
		                b_j = b[j];
		                product = a_i * b_j + r[i + j];
		                carry = Math.floor(product / base);
		                r[i + j] = product - carry * base;
		                r[i + j + 1] += carry;
		            }
		        }
		        trim(r);
		        return r;
		    }

		    function multiplySmall(a, b) { // assumes a is array, b is number with |b| < BASE
		        var l = a.length,
		            r = new Array(l),
		            base = BASE,
		            carry = 0,
		            product, i;
		        for (i = 0; i < l; i++) {
		            product = a[i] * b + carry;
		            carry = Math.floor(product / base);
		            r[i] = product - carry * base;
		        }
		        while (carry > 0) {
		            r[i++] = carry % base;
		            carry = Math.floor(carry / base);
		        }
		        return r;
		    }

		    function shiftLeft(x, n) {
		        var r = [];
		        while (n-- > 0) r.push(0);
		        return r.concat(x);
		    }

		    function multiplyKaratsuba(x, y) {
		        var n = Math.max(x.length, y.length);

		        if (n <= 30) return multiplyLong(x, y);
		        n = Math.ceil(n / 2);

		        var b = x.slice(n),
		            a = x.slice(0, n),
		            d = y.slice(n),
		            c = y.slice(0, n);

		        var ac = multiplyKaratsuba(a, c),
		            bd = multiplyKaratsuba(b, d),
		            abcd = multiplyKaratsuba(addAny(a, b), addAny(c, d));

		        var product = addAny(addAny(ac, shiftLeft(subtract(subtract(abcd, ac), bd), n)), shiftLeft(bd, 2 * n));
		        trim(product);
		        return product;
		    }

		    // The following function is derived from a surface fit of a graph plotting the performance difference
		    // between long multiplication and karatsuba multiplication versus the lengths of the two arrays.
		    function useKaratsuba(l1, l2) {
		        return -0.012 * l1 - 0.012 * l2 + 0.000015 * l1 * l2 > 0;
		    }

		    BigInteger.prototype.multiply = function (v) {
		        var n = parseValue(v),
		            a = this.value, b = n.value,
		            sign = this.sign !== n.sign,
		            abs;
		        if (n.isSmall) {
		            if (b === 0) return Integer[0];
		            if (b === 1) return this;
		            if (b === -1) return this.negate();
		            abs = Math.abs(b);
		            if (abs < BASE) {
		                return new BigInteger(multiplySmall(a, abs), sign);
		            }
		            b = smallToArray(abs);
		        }
		        if (useKaratsuba(a.length, b.length)) // Karatsuba is only faster for certain array sizes
		            return new BigInteger(multiplyKaratsuba(a, b), sign);
		        return new BigInteger(multiplyLong(a, b), sign);
		    };

		    BigInteger.prototype.times = BigInteger.prototype.multiply;

		    function multiplySmallAndArray(a, b, sign) { // a >= 0
		        if (a < BASE) {
		            return new BigInteger(multiplySmall(b, a), sign);
		        }
		        return new BigInteger(multiplyLong(b, smallToArray(a)), sign);
		    }
		    SmallInteger.prototype._multiplyBySmall = function (a) {
		        if (isPrecise(a.value * this.value)) {
		            return new SmallInteger(a.value * this.value);
		        }
		        return multiplySmallAndArray(Math.abs(a.value), smallToArray(Math.abs(this.value)), this.sign !== a.sign);
		    };
		    BigInteger.prototype._multiplyBySmall = function (a) {
		        if (a.value === 0) return Integer[0];
		        if (a.value === 1) return this;
		        if (a.value === -1) return this.negate();
		        return multiplySmallAndArray(Math.abs(a.value), this.value, this.sign !== a.sign);
		    };
		    SmallInteger.prototype.multiply = function (v) {
		        return parseValue(v)._multiplyBySmall(this);
		    };
		    SmallInteger.prototype.times = SmallInteger.prototype.multiply;

		    NativeBigInt.prototype.multiply = function (v) {
		        return new NativeBigInt(this.value * parseValue(v).value);
		    };
		    NativeBigInt.prototype.times = NativeBigInt.prototype.multiply;

		    function square(a) {
		        //console.assert(2 * BASE * BASE < MAX_INT);
		        var l = a.length,
		            r = createArray(l + l),
		            base = BASE,
		            product, carry, i, a_i, a_j;
		        for (i = 0; i < l; i++) {
		            a_i = a[i];
		            carry = 0 - a_i * a_i;
		            for (var j = i; j < l; j++) {
		                a_j = a[j];
		                product = 2 * (a_i * a_j) + r[i + j] + carry;
		                carry = Math.floor(product / base);
		                r[i + j] = product - carry * base;
		            }
		            r[i + l] = carry;
		        }
		        trim(r);
		        return r;
		    }

		    BigInteger.prototype.square = function () {
		        return new BigInteger(square(this.value), false);
		    };

		    SmallInteger.prototype.square = function () {
		        var value = this.value * this.value;
		        if (isPrecise(value)) return new SmallInteger(value);
		        return new BigInteger(square(smallToArray(Math.abs(this.value))), false);
		    };

		    NativeBigInt.prototype.square = function (v) {
		        return new NativeBigInt(this.value * this.value);
		    };

		    function divMod1(a, b) { // Left over from previous version. Performs faster than divMod2 on smaller input sizes.
		        var a_l = a.length,
		            b_l = b.length,
		            base = BASE,
		            result = createArray(b.length),
		            divisorMostSignificantDigit = b[b_l - 1],
		            // normalization
		            lambda = Math.ceil(base / (2 * divisorMostSignificantDigit)),
		            remainder = multiplySmall(a, lambda),
		            divisor = multiplySmall(b, lambda),
		            quotientDigit, shift, carry, borrow, i, l, q;
		        if (remainder.length <= a_l) remainder.push(0);
		        divisor.push(0);
		        divisorMostSignificantDigit = divisor[b_l - 1];
		        for (shift = a_l - b_l; shift >= 0; shift--) {
		            quotientDigit = base - 1;
		            if (remainder[shift + b_l] !== divisorMostSignificantDigit) {
		                quotientDigit = Math.floor((remainder[shift + b_l] * base + remainder[shift + b_l - 1]) / divisorMostSignificantDigit);
		            }
		            // quotientDigit <= base - 1
		            carry = 0;
		            borrow = 0;
		            l = divisor.length;
		            for (i = 0; i < l; i++) {
		                carry += quotientDigit * divisor[i];
		                q = Math.floor(carry / base);
		                borrow += remainder[shift + i] - (carry - q * base);
		                carry = q;
		                if (borrow < 0) {
		                    remainder[shift + i] = borrow + base;
		                    borrow = -1;
		                } else {
		                    remainder[shift + i] = borrow;
		                    borrow = 0;
		                }
		            }
		            while (borrow !== 0) {
		                quotientDigit -= 1;
		                carry = 0;
		                for (i = 0; i < l; i++) {
		                    carry += remainder[shift + i] - base + divisor[i];
		                    if (carry < 0) {
		                        remainder[shift + i] = carry + base;
		                        carry = 0;
		                    } else {
		                        remainder[shift + i] = carry;
		                        carry = 1;
		                    }
		                }
		                borrow += carry;
		            }
		            result[shift] = quotientDigit;
		        }
		        // denormalization
		        remainder = divModSmall(remainder, lambda)[0];
		        return [arrayToSmall(result), arrayToSmall(remainder)];
		    }

		    function divMod2(a, b) { // Implementation idea shamelessly stolen from Silent Matt's library http://silentmatt.com/biginteger/
		        // Performs faster than divMod1 on larger input sizes.
		        var a_l = a.length,
		            b_l = b.length,
		            result = [],
		            part = [],
		            base = BASE,
		            guess, xlen, highx, highy, check;
		        while (a_l) {
		            part.unshift(a[--a_l]);
		            trim(part);
		            if (compareAbs(part, b) < 0) {
		                result.push(0);
		                continue;
		            }
		            xlen = part.length;
		            highx = part[xlen - 1] * base + part[xlen - 2];
		            highy = b[b_l - 1] * base + b[b_l - 2];
		            if (xlen > b_l) {
		                highx = (highx + 1) * base;
		            }
		            guess = Math.ceil(highx / highy);
		            do {
		                check = multiplySmall(b, guess);
		                if (compareAbs(check, part) <= 0) break;
		                guess--;
		            } while (guess);
		            result.push(guess);
		            part = subtract(part, check);
		        }
		        result.reverse();
		        return [arrayToSmall(result), arrayToSmall(part)];
		    }

		    function divModSmall(value, lambda) {
		        var length = value.length,
		            quotient = createArray(length),
		            base = BASE,
		            i, q, remainder, divisor;
		        remainder = 0;
		        for (i = length - 1; i >= 0; --i) {
		            divisor = remainder * base + value[i];
		            q = truncate(divisor / lambda);
		            remainder = divisor - q * lambda;
		            quotient[i] = q | 0;
		        }
		        return [quotient, remainder | 0];
		    }

		    function divModAny(self, v) {
		        var value, n = parseValue(v);
		        if (supportsNativeBigInt) {
		            return [new NativeBigInt(self.value / n.value), new NativeBigInt(self.value % n.value)];
		        }
		        var a = self.value, b = n.value;
		        var quotient;
		        if (b === 0) throw new Error("Cannot divide by zero");
		        if (self.isSmall) {
		            if (n.isSmall) {
		                return [new SmallInteger(truncate(a / b)), new SmallInteger(a % b)];
		            }
		            return [Integer[0], self];
		        }
		        if (n.isSmall) {
		            if (b === 1) return [self, Integer[0]];
		            if (b == -1) return [self.negate(), Integer[0]];
		            var abs = Math.abs(b);
		            if (abs < BASE) {
		                value = divModSmall(a, abs);
		                quotient = arrayToSmall(value[0]);
		                var remainder = value[1];
		                if (self.sign) remainder = -remainder;
		                if (typeof quotient === "number") {
		                    if (self.sign !== n.sign) quotient = -quotient;
		                    return [new SmallInteger(quotient), new SmallInteger(remainder)];
		                }
		                return [new BigInteger(quotient, self.sign !== n.sign), new SmallInteger(remainder)];
		            }
		            b = smallToArray(abs);
		        }
		        var comparison = compareAbs(a, b);
		        if (comparison === -1) return [Integer[0], self];
		        if (comparison === 0) return [Integer[self.sign === n.sign ? 1 : -1], Integer[0]];

		        // divMod1 is faster on smaller input sizes
		        if (a.length + b.length <= 200)
		            value = divMod1(a, b);
		        else value = divMod2(a, b);

		        quotient = value[0];
		        var qSign = self.sign !== n.sign,
		            mod = value[1],
		            mSign = self.sign;
		        if (typeof quotient === "number") {
		            if (qSign) quotient = -quotient;
		            quotient = new SmallInteger(quotient);
		        } else quotient = new BigInteger(quotient, qSign);
		        if (typeof mod === "number") {
		            if (mSign) mod = -mod;
		            mod = new SmallInteger(mod);
		        } else mod = new BigInteger(mod, mSign);
		        return [quotient, mod];
		    }

		    BigInteger.prototype.divmod = function (v) {
		        var result = divModAny(this, v);
		        return {
		            quotient: result[0],
		            remainder: result[1]
		        };
		    };
		    NativeBigInt.prototype.divmod = SmallInteger.prototype.divmod = BigInteger.prototype.divmod;


		    BigInteger.prototype.divide = function (v) {
		        return divModAny(this, v)[0];
		    };
		    NativeBigInt.prototype.over = NativeBigInt.prototype.divide = function (v) {
		        return new NativeBigInt(this.value / parseValue(v).value);
		    };
		    SmallInteger.prototype.over = SmallInteger.prototype.divide = BigInteger.prototype.over = BigInteger.prototype.divide;

		    BigInteger.prototype.mod = function (v) {
		        return divModAny(this, v)[1];
		    };
		    NativeBigInt.prototype.mod = NativeBigInt.prototype.remainder = function (v) {
		        return new NativeBigInt(this.value % parseValue(v).value);
		    };
		    SmallInteger.prototype.remainder = SmallInteger.prototype.mod = BigInteger.prototype.remainder = BigInteger.prototype.mod;

		    BigInteger.prototype.pow = function (v) {
		        var n = parseValue(v),
		            a = this.value,
		            b = n.value,
		            value, x, y;
		        if (b === 0) return Integer[1];
		        if (a === 0) return Integer[0];
		        if (a === 1) return Integer[1];
		        if (a === -1) return n.isEven() ? Integer[1] : Integer[-1];
		        if (n.sign) {
		            return Integer[0];
		        }
		        if (!n.isSmall) throw new Error("The exponent " + n.toString() + " is too large.");
		        if (this.isSmall) {
		            if (isPrecise(value = Math.pow(a, b)))
		                return new SmallInteger(truncate(value));
		        }
		        x = this;
		        y = Integer[1];
		        while (true) {
		            if (b & 1 === 1) {
		                y = y.times(x);
		                --b;
		            }
		            if (b === 0) break;
		            b /= 2;
		            x = x.square();
		        }
		        return y;
		    };
		    SmallInteger.prototype.pow = BigInteger.prototype.pow;

		    NativeBigInt.prototype.pow = function (v) {
		        var n = parseValue(v);
		        var a = this.value, b = n.value;
		        var _0 = BigInt(0), _1 = BigInt(1), _2 = BigInt(2);
		        if (b === _0) return Integer[1];
		        if (a === _0) return Integer[0];
		        if (a === _1) return Integer[1];
		        if (a === BigInt(-1)) return n.isEven() ? Integer[1] : Integer[-1];
		        if (n.isNegative()) return new NativeBigInt(_0);
		        var x = this;
		        var y = Integer[1];
		        while (true) {
		            if ((b & _1) === _1) {
		                y = y.times(x);
		                --b;
		            }
		            if (b === _0) break;
		            b /= _2;
		            x = x.square();
		        }
		        return y;
		    };

		    BigInteger.prototype.modPow = function (exp, mod) {
		        exp = parseValue(exp);
		        mod = parseValue(mod);
		        if (mod.isZero()) throw new Error("Cannot take modPow with modulus 0");
		        var r = Integer[1],
		            base = this.mod(mod);
		        if (exp.isNegative()) {
		            exp = exp.multiply(Integer[-1]);
		            base = base.modInv(mod);
		        }
		        while (exp.isPositive()) {
		            if (base.isZero()) return Integer[0];
		            if (exp.isOdd()) r = r.multiply(base).mod(mod);
		            exp = exp.divide(2);
		            base = base.square().mod(mod);
		        }
		        return r;
		    };
		    NativeBigInt.prototype.modPow = SmallInteger.prototype.modPow = BigInteger.prototype.modPow;

		    function compareAbs(a, b) {
		        if (a.length !== b.length) {
		            return a.length > b.length ? 1 : -1;
		        }
		        for (var i = a.length - 1; i >= 0; i--) {
		            if (a[i] !== b[i]) return a[i] > b[i] ? 1 : -1;
		        }
		        return 0;
		    }

		    BigInteger.prototype.compareAbs = function (v) {
		        var n = parseValue(v),
		            a = this.value,
		            b = n.value;
		        if (n.isSmall) return 1;
		        return compareAbs(a, b);
		    };
		    SmallInteger.prototype.compareAbs = function (v) {
		        var n = parseValue(v),
		            a = Math.abs(this.value),
		            b = n.value;
		        if (n.isSmall) {
		            b = Math.abs(b);
		            return a === b ? 0 : a > b ? 1 : -1;
		        }
		        return -1;
		    };
		    NativeBigInt.prototype.compareAbs = function (v) {
		        var a = this.value;
		        var b = parseValue(v).value;
		        a = a >= 0 ? a : -a;
		        b = b >= 0 ? b : -b;
		        return a === b ? 0 : a > b ? 1 : -1;
		    };

		    BigInteger.prototype.compare = function (v) {
		        // See discussion about comparison with Infinity:
		        // https://github.com/peterolson/BigInteger.js/issues/61
		        if (v === Infinity) {
		            return -1;
		        }
		        if (v === -Infinity) {
		            return 1;
		        }

		        var n = parseValue(v),
		            a = this.value,
		            b = n.value;
		        if (this.sign !== n.sign) {
		            return n.sign ? 1 : -1;
		        }
		        if (n.isSmall) {
		            return this.sign ? -1 : 1;
		        }
		        return compareAbs(a, b) * (this.sign ? -1 : 1);
		    };
		    BigInteger.prototype.compareTo = BigInteger.prototype.compare;

		    SmallInteger.prototype.compare = function (v) {
		        if (v === Infinity) {
		            return -1;
		        }
		        if (v === -Infinity) {
		            return 1;
		        }

		        var n = parseValue(v),
		            a = this.value,
		            b = n.value;
		        if (n.isSmall) {
		            return a == b ? 0 : a > b ? 1 : -1;
		        }
		        if (a < 0 !== n.sign) {
		            return a < 0 ? -1 : 1;
		        }
		        return a < 0 ? 1 : -1;
		    };
		    SmallInteger.prototype.compareTo = SmallInteger.prototype.compare;

		    NativeBigInt.prototype.compare = function (v) {
		        if (v === Infinity) {
		            return -1;
		        }
		        if (v === -Infinity) {
		            return 1;
		        }
		        var a = this.value;
		        var b = parseValue(v).value;
		        return a === b ? 0 : a > b ? 1 : -1;
		    };
		    NativeBigInt.prototype.compareTo = NativeBigInt.prototype.compare;

		    BigInteger.prototype.equals = function (v) {
		        return this.compare(v) === 0;
		    };
		    NativeBigInt.prototype.eq = NativeBigInt.prototype.equals = SmallInteger.prototype.eq = SmallInteger.prototype.equals = BigInteger.prototype.eq = BigInteger.prototype.equals;

		    BigInteger.prototype.notEquals = function (v) {
		        return this.compare(v) !== 0;
		    };
		    NativeBigInt.prototype.neq = NativeBigInt.prototype.notEquals = SmallInteger.prototype.neq = SmallInteger.prototype.notEquals = BigInteger.prototype.neq = BigInteger.prototype.notEquals;

		    BigInteger.prototype.greater = function (v) {
		        return this.compare(v) > 0;
		    };
		    NativeBigInt.prototype.gt = NativeBigInt.prototype.greater = SmallInteger.prototype.gt = SmallInteger.prototype.greater = BigInteger.prototype.gt = BigInteger.prototype.greater;

		    BigInteger.prototype.lesser = function (v) {
		        return this.compare(v) < 0;
		    };
		    NativeBigInt.prototype.lt = NativeBigInt.prototype.lesser = SmallInteger.prototype.lt = SmallInteger.prototype.lesser = BigInteger.prototype.lt = BigInteger.prototype.lesser;

		    BigInteger.prototype.greaterOrEquals = function (v) {
		        return this.compare(v) >= 0;
		    };
		    NativeBigInt.prototype.geq = NativeBigInt.prototype.greaterOrEquals = SmallInteger.prototype.geq = SmallInteger.prototype.greaterOrEquals = BigInteger.prototype.geq = BigInteger.prototype.greaterOrEquals;

		    BigInteger.prototype.lesserOrEquals = function (v) {
		        return this.compare(v) <= 0;
		    };
		    NativeBigInt.prototype.leq = NativeBigInt.prototype.lesserOrEquals = SmallInteger.prototype.leq = SmallInteger.prototype.lesserOrEquals = BigInteger.prototype.leq = BigInteger.prototype.lesserOrEquals;

		    BigInteger.prototype.isEven = function () {
		        return (this.value[0] & 1) === 0;
		    };
		    SmallInteger.prototype.isEven = function () {
		        return (this.value & 1) === 0;
		    };
		    NativeBigInt.prototype.isEven = function () {
		        return (this.value & BigInt(1)) === BigInt(0);
		    };

		    BigInteger.prototype.isOdd = function () {
		        return (this.value[0] & 1) === 1;
		    };
		    SmallInteger.prototype.isOdd = function () {
		        return (this.value & 1) === 1;
		    };
		    NativeBigInt.prototype.isOdd = function () {
		        return (this.value & BigInt(1)) === BigInt(1);
		    };

		    BigInteger.prototype.isPositive = function () {
		        return !this.sign;
		    };
		    SmallInteger.prototype.isPositive = function () {
		        return this.value > 0;
		    };
		    NativeBigInt.prototype.isPositive = SmallInteger.prototype.isPositive;

		    BigInteger.prototype.isNegative = function () {
		        return this.sign;
		    };
		    SmallInteger.prototype.isNegative = function () {
		        return this.value < 0;
		    };
		    NativeBigInt.prototype.isNegative = SmallInteger.prototype.isNegative;

		    BigInteger.prototype.isUnit = function () {
		        return false;
		    };
		    SmallInteger.prototype.isUnit = function () {
		        return Math.abs(this.value) === 1;
		    };
		    NativeBigInt.prototype.isUnit = function () {
		        return this.abs().value === BigInt(1);
		    };

		    BigInteger.prototype.isZero = function () {
		        return false;
		    };
		    SmallInteger.prototype.isZero = function () {
		        return this.value === 0;
		    };
		    NativeBigInt.prototype.isZero = function () {
		        return this.value === BigInt(0);
		    };

		    BigInteger.prototype.isDivisibleBy = function (v) {
		        var n = parseValue(v);
		        if (n.isZero()) return false;
		        if (n.isUnit()) return true;
		        if (n.compareAbs(2) === 0) return this.isEven();
		        return this.mod(n).isZero();
		    };
		    NativeBigInt.prototype.isDivisibleBy = SmallInteger.prototype.isDivisibleBy = BigInteger.prototype.isDivisibleBy;

		    function isBasicPrime(v) {
		        var n = v.abs();
		        if (n.isUnit()) return false;
		        if (n.equals(2) || n.equals(3) || n.equals(5)) return true;
		        if (n.isEven() || n.isDivisibleBy(3) || n.isDivisibleBy(5)) return false;
		        if (n.lesser(49)) return true;
		        // we don't know if it's prime: let the other functions figure it out
		    }

		    function millerRabinTest(n, a) {
		        var nPrev = n.prev(),
		            b = nPrev,
		            r = 0,
		            d, i, x;
		        while (b.isEven()) b = b.divide(2), r++;
		        next: for (i = 0; i < a.length; i++) {
		            if (n.lesser(a[i])) continue;
		            x = bigInt(a[i]).modPow(b, n);
		            if (x.isUnit() || x.equals(nPrev)) continue;
		            for (d = r - 1; d != 0; d--) {
		                x = x.square().mod(n);
		                if (x.isUnit()) return false;
		                if (x.equals(nPrev)) continue next;
		            }
		            return false;
		        }
		        return true;
		    }

		    // Set "strict" to true to force GRH-supported lower bound of 2*log(N)^2
		    BigInteger.prototype.isPrime = function (strict) {
		        var isPrime = isBasicPrime(this);
		        if (isPrime !== undefined$1) return isPrime;
		        var n = this.abs();
		        var bits = n.bitLength();
		        if (bits <= 64)
		            return millerRabinTest(n, [2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37]);
		        var logN = Math.log(2) * bits.toJSNumber();
		        var t = Math.ceil((strict === true) ? (2 * Math.pow(logN, 2)) : logN);
		        for (var a = [], i = 0; i < t; i++) {
		            a.push(bigInt(i + 2));
		        }
		        return millerRabinTest(n, a);
		    };
		    NativeBigInt.prototype.isPrime = SmallInteger.prototype.isPrime = BigInteger.prototype.isPrime;

		    BigInteger.prototype.isProbablePrime = function (iterations, rng) {
		        var isPrime = isBasicPrime(this);
		        if (isPrime !== undefined$1) return isPrime;
		        var n = this.abs();
		        var t = iterations === undefined$1 ? 5 : iterations;
		        for (var a = [], i = 0; i < t; i++) {
		            a.push(bigInt.randBetween(2, n.minus(2), rng));
		        }
		        return millerRabinTest(n, a);
		    };
		    NativeBigInt.prototype.isProbablePrime = SmallInteger.prototype.isProbablePrime = BigInteger.prototype.isProbablePrime;

		    BigInteger.prototype.modInv = function (n) {
		        var t = bigInt.zero, newT = bigInt.one, r = parseValue(n), newR = this.abs(), q, lastT, lastR;
		        while (!newR.isZero()) {
		            q = r.divide(newR);
		            lastT = t;
		            lastR = r;
		            t = newT;
		            r = newR;
		            newT = lastT.subtract(q.multiply(newT));
		            newR = lastR.subtract(q.multiply(newR));
		        }
		        if (!r.isUnit()) throw new Error(this.toString() + " and " + n.toString() + " are not co-prime");
		        if (t.compare(0) === -1) {
		            t = t.add(n);
		        }
		        if (this.isNegative()) {
		            return t.negate();
		        }
		        return t;
		    };

		    NativeBigInt.prototype.modInv = SmallInteger.prototype.modInv = BigInteger.prototype.modInv;

		    BigInteger.prototype.next = function () {
		        var value = this.value;
		        if (this.sign) {
		            return subtractSmall(value, 1, this.sign);
		        }
		        return new BigInteger(addSmall(value, 1), this.sign);
		    };
		    SmallInteger.prototype.next = function () {
		        var value = this.value;
		        if (value + 1 < MAX_INT) return new SmallInteger(value + 1);
		        return new BigInteger(MAX_INT_ARR, false);
		    };
		    NativeBigInt.prototype.next = function () {
		        return new NativeBigInt(this.value + BigInt(1));
		    };

		    BigInteger.prototype.prev = function () {
		        var value = this.value;
		        if (this.sign) {
		            return new BigInteger(addSmall(value, 1), true);
		        }
		        return subtractSmall(value, 1, this.sign);
		    };
		    SmallInteger.prototype.prev = function () {
		        var value = this.value;
		        if (value - 1 > -MAX_INT) return new SmallInteger(value - 1);
		        return new BigInteger(MAX_INT_ARR, true);
		    };
		    NativeBigInt.prototype.prev = function () {
		        return new NativeBigInt(this.value - BigInt(1));
		    };

		    var powersOfTwo = [1];
		    while (2 * powersOfTwo[powersOfTwo.length - 1] <= BASE) powersOfTwo.push(2 * powersOfTwo[powersOfTwo.length - 1]);
		    var powers2Length = powersOfTwo.length, highestPower2 = powersOfTwo[powers2Length - 1];

		    function shift_isSmall(n) {
		        return Math.abs(n) <= BASE;
		    }

		    BigInteger.prototype.shiftLeft = function (v) {
		        var n = parseValue(v).toJSNumber();
		        if (!shift_isSmall(n)) {
		            throw new Error(String(n) + " is too large for shifting.");
		        }
		        if (n < 0) return this.shiftRight(-n);
		        var result = this;
		        if (result.isZero()) return result;
		        while (n >= powers2Length) {
		            result = result.multiply(highestPower2);
		            n -= powers2Length - 1;
		        }
		        return result.multiply(powersOfTwo[n]);
		    };
		    NativeBigInt.prototype.shiftLeft = SmallInteger.prototype.shiftLeft = BigInteger.prototype.shiftLeft;

		    BigInteger.prototype.shiftRight = function (v) {
		        var remQuo;
		        var n = parseValue(v).toJSNumber();
		        if (!shift_isSmall(n)) {
		            throw new Error(String(n) + " is too large for shifting.");
		        }
		        if (n < 0) return this.shiftLeft(-n);
		        var result = this;
		        while (n >= powers2Length) {
		            if (result.isZero() || (result.isNegative() && result.isUnit())) return result;
		            remQuo = divModAny(result, highestPower2);
		            result = remQuo[1].isNegative() ? remQuo[0].prev() : remQuo[0];
		            n -= powers2Length - 1;
		        }
		        remQuo = divModAny(result, powersOfTwo[n]);
		        return remQuo[1].isNegative() ? remQuo[0].prev() : remQuo[0];
		    };
		    NativeBigInt.prototype.shiftRight = SmallInteger.prototype.shiftRight = BigInteger.prototype.shiftRight;

		    function bitwise(x, y, fn) {
		        y = parseValue(y);
		        var xSign = x.isNegative(), ySign = y.isNegative();
		        var xRem = xSign ? x.not() : x,
		            yRem = ySign ? y.not() : y;
		        var xDigit = 0, yDigit = 0;
		        var xDivMod = null, yDivMod = null;
		        var result = [];
		        while (!xRem.isZero() || !yRem.isZero()) {
		            xDivMod = divModAny(xRem, highestPower2);
		            xDigit = xDivMod[1].toJSNumber();
		            if (xSign) {
		                xDigit = highestPower2 - 1 - xDigit; // two's complement for negative numbers
		            }

		            yDivMod = divModAny(yRem, highestPower2);
		            yDigit = yDivMod[1].toJSNumber();
		            if (ySign) {
		                yDigit = highestPower2 - 1 - yDigit; // two's complement for negative numbers
		            }

		            xRem = xDivMod[0];
		            yRem = yDivMod[0];
		            result.push(fn(xDigit, yDigit));
		        }
		        var sum = fn(xSign ? 1 : 0, ySign ? 1 : 0) !== 0 ? bigInt(-1) : bigInt(0);
		        for (var i = result.length - 1; i >= 0; i -= 1) {
		            sum = sum.multiply(highestPower2).add(bigInt(result[i]));
		        }
		        return sum;
		    }

		    BigInteger.prototype.not = function () {
		        return this.negate().prev();
		    };
		    NativeBigInt.prototype.not = SmallInteger.prototype.not = BigInteger.prototype.not;

		    BigInteger.prototype.and = function (n) {
		        return bitwise(this, n, function (a, b) { return a & b; });
		    };
		    NativeBigInt.prototype.and = SmallInteger.prototype.and = BigInteger.prototype.and;

		    BigInteger.prototype.or = function (n) {
		        return bitwise(this, n, function (a, b) { return a | b; });
		    };
		    NativeBigInt.prototype.or = SmallInteger.prototype.or = BigInteger.prototype.or;

		    BigInteger.prototype.xor = function (n) {
		        return bitwise(this, n, function (a, b) { return a ^ b; });
		    };
		    NativeBigInt.prototype.xor = SmallInteger.prototype.xor = BigInteger.prototype.xor;

		    var LOBMASK_I = 1 << 30, LOBMASK_BI = (BASE & -BASE) * (BASE & -BASE) | LOBMASK_I;
		    function roughLOB(n) { // get lowestOneBit (rough)
		        // SmallInteger: return Min(lowestOneBit(n), 1 << 30)
		        // BigInteger: return Min(lowestOneBit(n), 1 << 14) [BASE=1e7]
		        var v = n.value,
		            x = typeof v === "number" ? v | LOBMASK_I :
		                typeof v === "bigint" ? v | BigInt(LOBMASK_I) :
		                    v[0] + v[1] * BASE | LOBMASK_BI;
		        return x & -x;
		    }

		    function integerLogarithm(value, base) {
		        if (base.compareTo(value) <= 0) {
		            var tmp = integerLogarithm(value, base.square(base));
		            var p = tmp.p;
		            var e = tmp.e;
		            var t = p.multiply(base);
		            return t.compareTo(value) <= 0 ? { p: t, e: e * 2 + 1 } : { p: p, e: e * 2 };
		        }
		        return { p: bigInt(1), e: 0 };
		    }

		    BigInteger.prototype.bitLength = function () {
		        var n = this;
		        if (n.compareTo(bigInt(0)) < 0) {
		            n = n.negate().subtract(bigInt(1));
		        }
		        if (n.compareTo(bigInt(0)) === 0) {
		            return bigInt(0);
		        }
		        return bigInt(integerLogarithm(n, bigInt(2)).e).add(bigInt(1));
		    };
		    NativeBigInt.prototype.bitLength = SmallInteger.prototype.bitLength = BigInteger.prototype.bitLength;

		    function max(a, b) {
		        a = parseValue(a);
		        b = parseValue(b);
		        return a.greater(b) ? a : b;
		    }
		    function min(a, b) {
		        a = parseValue(a);
		        b = parseValue(b);
		        return a.lesser(b) ? a : b;
		    }
		    function gcd(a, b) {
		        a = parseValue(a).abs();
		        b = parseValue(b).abs();
		        if (a.equals(b)) return a;
		        if (a.isZero()) return b;
		        if (b.isZero()) return a;
		        var c = Integer[1], d, t;
		        while (a.isEven() && b.isEven()) {
		            d = min(roughLOB(a), roughLOB(b));
		            a = a.divide(d);
		            b = b.divide(d);
		            c = c.multiply(d);
		        }
		        while (a.isEven()) {
		            a = a.divide(roughLOB(a));
		        }
		        do {
		            while (b.isEven()) {
		                b = b.divide(roughLOB(b));
		            }
		            if (a.greater(b)) {
		                t = b; b = a; a = t;
		            }
		            b = b.subtract(a);
		        } while (!b.isZero());
		        return c.isUnit() ? a : a.multiply(c);
		    }
		    function lcm(a, b) {
		        a = parseValue(a).abs();
		        b = parseValue(b).abs();
		        return a.divide(gcd(a, b)).multiply(b);
		    }
		    function randBetween(a, b, rng) {
		        a = parseValue(a);
		        b = parseValue(b);
		        var usedRNG = rng || Math.random;
		        var low = min(a, b), high = max(a, b);
		        var range = high.subtract(low).add(1);
		        if (range.isSmall) return low.add(Math.floor(usedRNG() * range));
		        var digits = toBase(range, BASE).value;
		        var result = [], restricted = true;
		        for (var i = 0; i < digits.length; i++) {
		            var top = restricted ? digits[i] + (i + 1 < digits.length ? digits[i + 1] / BASE : 0) : BASE;
		            var digit = truncate(usedRNG() * top);
		            result.push(digit);
		            if (digit < digits[i]) restricted = false;
		        }
		        return low.add(Integer.fromArray(result, BASE, false));
		    }

		    var parseBase = function (text, base, alphabet, caseSensitive) {
		        alphabet = alphabet || DEFAULT_ALPHABET;
		        text = String(text);
		        if (!caseSensitive) {
		            text = text.toLowerCase();
		            alphabet = alphabet.toLowerCase();
		        }
		        var length = text.length;
		        var i;
		        var absBase = Math.abs(base);
		        var alphabetValues = {};
		        for (i = 0; i < alphabet.length; i++) {
		            alphabetValues[alphabet[i]] = i;
		        }
		        for (i = 0; i < length; i++) {
		            var c = text[i];
		            if (c === "-") continue;
		            if (c in alphabetValues) {
		                if (alphabetValues[c] >= absBase) {
		                    if (c === "1" && absBase === 1) continue;
		                    throw new Error(c + " is not a valid digit in base " + base + ".");
		                }
		            }
		        }
		        base = parseValue(base);
		        var digits = [];
		        var isNegative = text[0] === "-";
		        for (i = isNegative ? 1 : 0; i < text.length; i++) {
		            var c = text[i];
		            if (c in alphabetValues) digits.push(parseValue(alphabetValues[c]));
		            else if (c === "<") {
		                var start = i;
		                do { i++; } while (text[i] !== ">" && i < text.length);
		                digits.push(parseValue(text.slice(start + 1, i)));
		            }
		            else throw new Error(c + " is not a valid character");
		        }
		        return parseBaseFromArray(digits, base, isNegative);
		    };

		    function parseBaseFromArray(digits, base, isNegative) {
		        var val = Integer[0], pow = Integer[1], i;
		        for (i = digits.length - 1; i >= 0; i--) {
		            val = val.add(digits[i].times(pow));
		            pow = pow.times(base);
		        }
		        return isNegative ? val.negate() : val;
		    }

		    function stringify(digit, alphabet) {
		        alphabet = alphabet || DEFAULT_ALPHABET;
		        if (digit < alphabet.length) {
		            return alphabet[digit];
		        }
		        return "<" + digit + ">";
		    }

		    function toBase(n, base) {
		        base = bigInt(base);
		        if (base.isZero()) {
		            if (n.isZero()) return { value: [0], isNegative: false };
		            throw new Error("Cannot convert nonzero numbers to base 0.");
		        }
		        if (base.equals(-1)) {
		            if (n.isZero()) return { value: [0], isNegative: false };
		            if (n.isNegative())
		                return {
		                    value: [].concat.apply([], Array.apply(null, Array(-n.toJSNumber()))
		                        .map(Array.prototype.valueOf, [1, 0])
		                    ),
		                    isNegative: false
		                };

		            var arr = Array.apply(null, Array(n.toJSNumber() - 1))
		                .map(Array.prototype.valueOf, [0, 1]);
		            arr.unshift([1]);
		            return {
		                value: [].concat.apply([], arr),
		                isNegative: false
		            };
		        }

		        var neg = false;
		        if (n.isNegative() && base.isPositive()) {
		            neg = true;
		            n = n.abs();
		        }
		        if (base.isUnit()) {
		            if (n.isZero()) return { value: [0], isNegative: false };

		            return {
		                value: Array.apply(null, Array(n.toJSNumber()))
		                    .map(Number.prototype.valueOf, 1),
		                isNegative: neg
		            };
		        }
		        var out = [];
		        var left = n, divmod;
		        while (left.isNegative() || left.compareAbs(base) >= 0) {
		            divmod = left.divmod(base);
		            left = divmod.quotient;
		            var digit = divmod.remainder;
		            if (digit.isNegative()) {
		                digit = base.minus(digit).abs();
		                left = left.next();
		            }
		            out.push(digit.toJSNumber());
		        }
		        out.push(left.toJSNumber());
		        return { value: out.reverse(), isNegative: neg };
		    }

		    function toBaseString(n, base, alphabet) {
		        var arr = toBase(n, base);
		        return (arr.isNegative ? "-" : "") + arr.value.map(function (x) {
		            return stringify(x, alphabet);
		        }).join('');
		    }

		    BigInteger.prototype.toArray = function (radix) {
		        return toBase(this, radix);
		    };

		    SmallInteger.prototype.toArray = function (radix) {
		        return toBase(this, radix);
		    };

		    NativeBigInt.prototype.toArray = function (radix) {
		        return toBase(this, radix);
		    };

		    BigInteger.prototype.toString = function (radix, alphabet) {
		        if (radix === undefined$1) radix = 10;
		        if (radix !== 10 || alphabet) return toBaseString(this, radix, alphabet);
		        var v = this.value, l = v.length, str = String(v[--l]), zeros = "0000000", digit;
		        while (--l >= 0) {
		            digit = String(v[l]);
		            str += zeros.slice(digit.length) + digit;
		        }
		        var sign = this.sign ? "-" : "";
		        return sign + str;
		    };

		    SmallInteger.prototype.toString = function (radix, alphabet) {
		        if (radix === undefined$1) radix = 10;
		        if (radix != 10 || alphabet) return toBaseString(this, radix, alphabet);
		        return String(this.value);
		    };

		    NativeBigInt.prototype.toString = SmallInteger.prototype.toString;

		    NativeBigInt.prototype.toJSON = BigInteger.prototype.toJSON = SmallInteger.prototype.toJSON = function () { return this.toString(); };

		    BigInteger.prototype.valueOf = function () {
		        return parseInt(this.toString(), 10);
		    };
		    BigInteger.prototype.toJSNumber = BigInteger.prototype.valueOf;

		    SmallInteger.prototype.valueOf = function () {
		        return this.value;
		    };
		    SmallInteger.prototype.toJSNumber = SmallInteger.prototype.valueOf;
		    NativeBigInt.prototype.valueOf = NativeBigInt.prototype.toJSNumber = function () {
		        return parseInt(this.toString(), 10);
		    };

		    function parseStringValue(v) {
		        if (isPrecise(+v)) {
		            var x = +v;
		            if (x === truncate(x))
		                return supportsNativeBigInt ? new NativeBigInt(BigInt(x)) : new SmallInteger(x);
		            throw new Error("Invalid integer: " + v);
		        }
		        var sign = v[0] === "-";
		        if (sign) v = v.slice(1);
		        var split = v.split(/e/i);
		        if (split.length > 2) throw new Error("Invalid integer: " + split.join("e"));
		        if (split.length === 2) {
		            var exp = split[1];
		            if (exp[0] === "+") exp = exp.slice(1);
		            exp = +exp;
		            if (exp !== truncate(exp) || !isPrecise(exp)) throw new Error("Invalid integer: " + exp + " is not a valid exponent.");
		            var text = split[0];
		            var decimalPlace = text.indexOf(".");
		            if (decimalPlace >= 0) {
		                exp -= text.length - decimalPlace - 1;
		                text = text.slice(0, decimalPlace) + text.slice(decimalPlace + 1);
		            }
		            if (exp < 0) throw new Error("Cannot include negative exponent part for integers");
		            text += (new Array(exp + 1)).join("0");
		            v = text;
		        }
		        var isValid = /^([0-9][0-9]*)$/.test(v);
		        if (!isValid) throw new Error("Invalid integer: " + v);
		        if (supportsNativeBigInt) {
		            return new NativeBigInt(BigInt(sign ? "-" + v : v));
		        }
		        var r = [], max = v.length, l = LOG_BASE, min = max - l;
		        while (max > 0) {
		            r.push(+v.slice(min, max));
		            min -= l;
		            if (min < 0) min = 0;
		            max -= l;
		        }
		        trim(r);
		        return new BigInteger(r, sign);
		    }

		    function parseNumberValue(v) {
		        if (supportsNativeBigInt) {
		            return new NativeBigInt(BigInt(v));
		        }
		        if (isPrecise(v)) {
		            if (v !== truncate(v)) throw new Error(v + " is not an integer.");
		            return new SmallInteger(v);
		        }
		        return parseStringValue(v.toString());
		    }

		    function parseValue(v) {
		        if (typeof v === "number") {
		            return parseNumberValue(v);
		        }
		        if (typeof v === "string") {
		            return parseStringValue(v);
		        }
		        if (typeof v === "bigint") {
		            return new NativeBigInt(v);
		        }
		        return v;
		    }
		    // Pre-define numbers in range [-999,999]
		    for (var i = 0; i < 1000; i++) {
		        Integer[i] = parseValue(i);
		        if (i > 0) Integer[-i] = parseValue(-i);
		    }
		    // Backwards compatibility
		    Integer.one = Integer[1];
		    Integer.zero = Integer[0];
		    Integer.minusOne = Integer[-1];
		    Integer.max = max;
		    Integer.min = min;
		    Integer.gcd = gcd;
		    Integer.lcm = lcm;
		    Integer.isInstance = function (x) { return x instanceof BigInteger || x instanceof SmallInteger || x instanceof NativeBigInt; };
		    Integer.randBetween = randBetween;

		    Integer.fromArray = function (digits, base, isNegative) {
		        return parseBaseFromArray(digits.map(parseValue), parseValue(base || 10), isNegative);
		    };

		    return Integer;
		})();

		// Node.js check
		if (module.hasOwnProperty("exports")) {
		    module.exports = bigInt;
		}
	} (_virtual_BigInteger2_mjs__WEBPACK_IMPORTED_MODULE_0__.__module));
	return _virtual_BigInteger2_mjs__WEBPACK_IMPORTED_MODULE_0__.__module.exports;
}




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/lib/decimal.js-light/decimal.mjs":
/*!****************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/lib/decimal.js-light/decimal.mjs ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Decimal: () => (/* binding */ Decimal),
/* harmony export */   "default": () => (/* binding */ Decimal$1)
/* harmony export */ });
/*
 *  decimal.js-light v2.5.1
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js-light
 *  Copyright (c) 2020 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Expat Licence
 */


// ------------------------------------  EDITABLE DEFAULTS  ------------------------------------- //


// The limit on the value of `precision`, and on the value of the first argument to
// `toDecimalPlaces`, `toExponential`, `toFixed`, `toPrecision` and `toSignificantDigits`.
var MAX_DIGITS = 1e9,                        // 0 to 1e9


  // The initial configuration properties of the Decimal constructor.
  defaults = {

    // These values must be integers within the stated ranges (inclusive).
    // Most of these values can be changed during run-time using `Decimal.config`.

    // The maximum number of significant digits of the result of a calculation or base conversion.
    // E.g. `Decimal.config({ precision: 20 });`
    precision: 20,                         // 1 to MAX_DIGITS

    // The rounding mode used by default by `toInteger`, `toDecimalPlaces`, `toExponential`,
    // `toFixed`, `toPrecision` and `toSignificantDigits`.
    //
    // ROUND_UP         0 Away from zero.
    // ROUND_DOWN       1 Towards zero.
    // ROUND_CEIL       2 Towards +Infinity.
    // ROUND_FLOOR      3 Towards -Infinity.
    // ROUND_HALF_UP    4 Towards nearest neighbour. If equidistant, up.
    // ROUND_HALF_DOWN  5 Towards nearest neighbour. If equidistant, down.
    // ROUND_HALF_EVEN  6 Towards nearest neighbour. If equidistant, towards even neighbour.
    // ROUND_HALF_CEIL  7 Towards nearest neighbour. If equidistant, towards +Infinity.
    // ROUND_HALF_FLOOR 8 Towards nearest neighbour. If equidistant, towards -Infinity.
    //
    // E.g.
    // `Decimal.rounding = 4;`
    // `Decimal.rounding = Decimal.ROUND_HALF_UP;`
    rounding: 4,                           // 0 to 8

    // The exponent value at and beneath which `toString` returns exponential notation.
    // JavaScript numbers: -7
    toExpNeg: -7,                          // 0 to -MAX_E

    // The exponent value at and above which `toString` returns exponential notation.
    // JavaScript numbers: 21
    toExpPos:  21,                         // 0 to MAX_E

    // The natural logarithm of 10.
    // 115 digits
    LN10: '2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286'
  },


// ------------------------------------ END OF EDITABLE DEFAULTS -------------------------------- //


  Decimal,
  external = true,

  decimalError = '[DecimalError] ',
  invalidArgument = decimalError + 'Invalid argument: ',
  exponentOutOfRange = decimalError + 'Exponent out of range: ',

  mathfloor = Math.floor,
  mathpow = Math.pow,

  isDecimal = /^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,

  ONE,
  BASE = 1e7,
  LOG_BASE = 7,
  MAX_SAFE_INTEGER = 9007199254740991,
  MAX_E = mathfloor(MAX_SAFE_INTEGER / LOG_BASE),    // 1286742750677284

  // Decimal.prototype object
  P = {};


// Decimal prototype methods


/*
 *  absoluteValue                       abs
 *  comparedTo                          cmp
 *  decimalPlaces                       dp
 *  dividedBy                           div
 *  dividedToIntegerBy                  idiv
 *  equals                              eq
 *  exponent
 *  greaterThan                         gt
 *  greaterThanOrEqualTo                gte
 *  isInteger                           isint
 *  isNegative                          isneg
 *  isPositive                          ispos
 *  isZero
 *  lessThan                            lt
 *  lessThanOrEqualTo                   lte
 *  logarithm                           log
 *  minus                               sub
 *  modulo                              mod
 *  naturalExponential                  exp
 *  naturalLogarithm                    ln
 *  negated                             neg
 *  plus                                add
 *  precision                           sd
 *  squareRoot                          sqrt
 *  times                               mul
 *  toDecimalPlaces                     todp
 *  toExponential
 *  toFixed
 *  toInteger                           toint
 *  toNumber
 *  toPower                             pow
 *  toPrecision
 *  toSignificantDigits                 tosd
 *  toString
 *  valueOf                             val
 */


/*
 * Return a new Decimal whose value is the absolute value of this Decimal.
 *
 */
P.absoluteValue = P.abs = function () {
  var x = new this.constructor(this);
  if (x.s) x.s = 1;
  return x;
};


/*
 * Return
 *   1    if the value of this Decimal is greater than the value of `y`,
 *  -1    if the value of this Decimal is less than the value of `y`,
 *   0    if they have the same value
 *
 */
P.comparedTo = P.cmp = function (y) {
  var i, j, xdL, ydL,
    x = this;

  y = new x.constructor(y);

  // Signs differ?
  if (x.s !== y.s) return x.s || -y.s;

  // Compare exponents.
  if (x.e !== y.e) return x.e > y.e ^ x.s < 0 ? 1 : -1;

  xdL = x.d.length;
  ydL = y.d.length;

  // Compare digit by digit.
  for (i = 0, j = xdL < ydL ? xdL : ydL; i < j; ++i) {
    if (x.d[i] !== y.d[i]) return x.d[i] > y.d[i] ^ x.s < 0 ? 1 : -1;
  }

  // Compare lengths.
  return xdL === ydL ? 0 : xdL > ydL ^ x.s < 0 ? 1 : -1;
};


/*
 * Return the number of decimal places of the value of this Decimal.
 *
 */
P.decimalPlaces = P.dp = function () {
  var x = this,
    w = x.d.length - 1,
    dp = (w - x.e) * LOG_BASE;

  // Subtract the number of trailing zeros of the last word.
  w = x.d[w];
  if (w) for (; w % 10 == 0; w /= 10) dp--;

  return dp < 0 ? 0 : dp;
};


/*
 * Return a new Decimal whose value is the value of this Decimal divided by `y`, truncated to
 * `precision` significant digits.
 *
 */
P.dividedBy = P.div = function (y) {
  return divide(this, new this.constructor(y));
};


/*
 * Return a new Decimal whose value is the integer part of dividing the value of this Decimal
 * by the value of `y`, truncated to `precision` significant digits.
 *
 */
P.dividedToIntegerBy = P.idiv = function (y) {
  var x = this,
    Ctor = x.constructor;
  return round(divide(x, new Ctor(y), 0, 1), Ctor.precision);
};


/*
 * Return true if the value of this Decimal is equal to the value of `y`, otherwise return false.
 *
 */
P.equals = P.eq = function (y) {
  return !this.cmp(y);
};


/*
 * Return the (base 10) exponent value of this Decimal (this.e is the base 10000000 exponent).
 *
 */
P.exponent = function () {
  return getBase10Exponent(this);
};


/*
 * Return true if the value of this Decimal is greater than the value of `y`, otherwise return
 * false.
 *
 */
P.greaterThan = P.gt = function (y) {
  return this.cmp(y) > 0;
};


/*
 * Return true if the value of this Decimal is greater than or equal to the value of `y`,
 * otherwise return false.
 *
 */
P.greaterThanOrEqualTo = P.gte = function (y) {
  return this.cmp(y) >= 0;
};


/*
 * Return true if the value of this Decimal is an integer, otherwise return false.
 *
 */
P.isInteger = P.isint = function () {
  return this.e > this.d.length - 2;
};


/*
 * Return true if the value of this Decimal is negative, otherwise return false.
 *
 */
P.isNegative = P.isneg = function () {
  return this.s < 0;
};


/*
 * Return true if the value of this Decimal is positive, otherwise return false.
 *
 */
P.isPositive = P.ispos = function () {
  return this.s > 0;
};


/*
 * Return true if the value of this Decimal is 0, otherwise return false.
 *
 */
P.isZero = function () {
  return this.s === 0;
};


/*
 * Return true if the value of this Decimal is less than `y`, otherwise return false.
 *
 */
P.lessThan = P.lt = function (y) {
  return this.cmp(y) < 0;
};


/*
 * Return true if the value of this Decimal is less than or equal to `y`, otherwise return false.
 *
 */
P.lessThanOrEqualTo = P.lte = function (y) {
  return this.cmp(y) < 1;
};


/*
 * Return the logarithm of the value of this Decimal to the specified base, truncated to
 * `precision` significant digits.
 *
 * If no base is specified, return log[10](x).
 *
 * log[base](x) = ln(x) / ln(base)
 *
 * The maximum error of the result is 1 ulp (unit in the last place).
 *
 * [base] {number|string|Decimal} The base of the logarithm.
 *
 */
P.logarithm = P.log = function (base) {
  var r,
    x = this,
    Ctor = x.constructor,
    pr = Ctor.precision,
    wpr = pr + 5;

  // Default base is 10.
  if (base === void 0) {
    base = new Ctor(10);
  } else {
    base = new Ctor(base);

    // log[-b](x) = NaN
    // log[0](x)  = NaN
    // log[1](x)  = NaN
    if (base.s < 1 || base.eq(ONE)) throw Error(decimalError + 'NaN');
  }

  // log[b](-x) = NaN
  // log[b](0) = -Infinity
  if (x.s < 1) throw Error(decimalError + (x.s ? 'NaN' : '-Infinity'));

  // log[b](1) = 0
  if (x.eq(ONE)) return new Ctor(0);

  external = false;
  r = divide(ln(x, wpr), ln(base, wpr), wpr);
  external = true;

  return round(r, pr);
};


/*
 * Return a new Decimal whose value is the value of this Decimal minus `y`, truncated to
 * `precision` significant digits.
 *
 */
P.minus = P.sub = function (y) {
  var x = this;
  y = new x.constructor(y);
  return x.s == y.s ? subtract(x, y) : add(x, (y.s = -y.s, y));
};


/*
 * Return a new Decimal whose value is the value of this Decimal modulo `y`, truncated to
 * `precision` significant digits.
 *
 */
P.modulo = P.mod = function (y) {
  var q,
    x = this,
    Ctor = x.constructor,
    pr = Ctor.precision;

  y = new Ctor(y);

  // x % 0 = NaN
  if (!y.s) throw Error(decimalError + 'NaN');

  // Return x if x is 0.
  if (!x.s) return round(new Ctor(x), pr);

  // Prevent rounding of intermediate calculations.
  external = false;
  q = divide(x, y, 0, 1).times(y);
  external = true;

  return x.minus(q);
};


/*
 * Return a new Decimal whose value is the natural exponential of the value of this Decimal,
 * i.e. the base e raised to the power the value of this Decimal, truncated to `precision`
 * significant digits.
 *
 */
P.naturalExponential = P.exp = function () {
  return exp(this);
};


/*
 * Return a new Decimal whose value is the natural logarithm of the value of this Decimal,
 * truncated to `precision` significant digits.
 *
 */
P.naturalLogarithm = P.ln = function () {
  return ln(this);
};


/*
 * Return a new Decimal whose value is the value of this Decimal negated, i.e. as if multiplied by
 * -1.
 *
 */
P.negated = P.neg = function () {
  var x = new this.constructor(this);
  x.s = -x.s || 0;
  return x;
};


/*
 * Return a new Decimal whose value is the value of this Decimal plus `y`, truncated to
 * `precision` significant digits.
 *
 */
P.plus = P.add = function (y) {
  var x = this;
  y = new x.constructor(y);
  return x.s == y.s ? add(x, y) : subtract(x, (y.s = -y.s, y));
};


/*
 * Return the number of significant digits of the value of this Decimal.
 *
 * [z] {boolean|number} Whether to count integer-part trailing zeros: true, false, 1 or 0.
 *
 */
P.precision = P.sd = function (z) {
  var e, sd, w,
    x = this;

  if (z !== void 0 && z !== !!z && z !== 1 && z !== 0) throw Error(invalidArgument + z);

  e = getBase10Exponent(x) + 1;
  w = x.d.length - 1;
  sd = w * LOG_BASE + 1;
  w = x.d[w];

  // If non-zero...
  if (w) {

    // Subtract the number of trailing zeros of the last word.
    for (; w % 10 == 0; w /= 10) sd--;

    // Add the number of digits of the first word.
    for (w = x.d[0]; w >= 10; w /= 10) sd++;
  }

  return z && e > sd ? e : sd;
};


/*
 * Return a new Decimal whose value is the square root of this Decimal, truncated to `precision`
 * significant digits.
 *
 */
P.squareRoot = P.sqrt = function () {
  var e, n, pr, r, s, t, wpr,
    x = this,
    Ctor = x.constructor;

  // Negative or zero?
  if (x.s < 1) {
    if (!x.s) return new Ctor(0);

    // sqrt(-x) = NaN
    throw Error(decimalError + 'NaN');
  }

  e = getBase10Exponent(x);
  external = false;

  // Initial estimate.
  s = Math.sqrt(+x);

  // Math.sqrt underflow/overflow?
  // Pass x to Math.sqrt as integer, then adjust the exponent of the result.
  if (s == 0 || s == 1 / 0) {
    n = digitsToString(x.d);
    if ((n.length + e) % 2 == 0) n += '0';
    s = Math.sqrt(n);
    e = mathfloor((e + 1) / 2) - (e < 0 || e % 2);

    if (s == 1 / 0) {
      n = '5e' + e;
    } else {
      n = s.toExponential();
      n = n.slice(0, n.indexOf('e') + 1) + e;
    }

    r = new Ctor(n);
  } else {
    r = new Ctor(s.toString());
  }

  pr = Ctor.precision;
  s = wpr = pr + 3;

  // Newton-Raphson iteration.
  for (;;) {
    t = r;
    r = t.plus(divide(x, t, wpr + 2)).times(0.5);

    if (digitsToString(t.d).slice(0, wpr) === (n = digitsToString(r.d)).slice(0, wpr)) {
      n = n.slice(wpr - 3, wpr + 1);

      // The 4th rounding digit may be in error by -1 so if the 4 rounding digits are 9999 or
      // 4999, i.e. approaching a rounding boundary, continue the iteration.
      if (s == wpr && n == '4999') {

        // On the first iteration only, check to see if rounding up gives the exact result as the
        // nines may infinitely repeat.
        round(t, pr + 1, 0);

        if (t.times(t).eq(x)) {
          r = t;
          break;
        }
      } else if (n != '9999') {
        break;
      }

      wpr += 4;
    }
  }

  external = true;

  return round(r, pr);
};


/*
 * Return a new Decimal whose value is the value of this Decimal times `y`, truncated to
 * `precision` significant digits.
 *
 */
P.times = P.mul = function (y) {
  var carry, e, i, k, r, rL, t, xdL, ydL,
    x = this,
    Ctor = x.constructor,
    xd = x.d,
    yd = (y = new Ctor(y)).d;

  // Return 0 if either is 0.
  if (!x.s || !y.s) return new Ctor(0);

  y.s *= x.s;
  e = x.e + y.e;
  xdL = xd.length;
  ydL = yd.length;

  // Ensure xd points to the longer array.
  if (xdL < ydL) {
    r = xd;
    xd = yd;
    yd = r;
    rL = xdL;
    xdL = ydL;
    ydL = rL;
  }

  // Initialise the result array with zeros.
  r = [];
  rL = xdL + ydL;
  for (i = rL; i--;) r.push(0);

  // Multiply!
  for (i = ydL; --i >= 0;) {
    carry = 0;
    for (k = xdL + i; k > i;) {
      t = r[k] + yd[i] * xd[k - i - 1] + carry;
      r[k--] = t % BASE | 0;
      carry = t / BASE | 0;
    }

    r[k] = (r[k] + carry) % BASE | 0;
  }

  // Remove trailing zeros.
  for (; !r[--rL];) r.pop();

  if (carry) ++e;
  else r.shift();

  y.d = r;
  y.e = e;

  return external ? round(y, Ctor.precision) : y;
};


/*
 * Return a new Decimal whose value is the value of this Decimal rounded to a maximum of `dp`
 * decimal places using rounding mode `rm` or `rounding` if `rm` is omitted.
 *
 * If `dp` is omitted, return a new Decimal whose value is the value of this Decimal.
 *
 * [dp] {number} Decimal places. Integer, 0 to MAX_DIGITS inclusive.
 * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.
 *
 */
P.toDecimalPlaces = P.todp = function (dp, rm) {
  var x = this,
    Ctor = x.constructor;

  x = new Ctor(x);
  if (dp === void 0) return x;

  checkInt32(dp, 0, MAX_DIGITS);

  if (rm === void 0) rm = Ctor.rounding;
  else checkInt32(rm, 0, 8);

  return round(x, dp + getBase10Exponent(x) + 1, rm);
};


/*
 * Return a string representing the value of this Decimal in exponential notation rounded to
 * `dp` fixed decimal places using rounding mode `rounding`.
 *
 * [dp] {number} Decimal places. Integer, 0 to MAX_DIGITS inclusive.
 * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.
 *
 */
P.toExponential = function (dp, rm) {
  var str,
    x = this,
    Ctor = x.constructor;

  if (dp === void 0) {
    str = toString(x, true);
  } else {
    checkInt32(dp, 0, MAX_DIGITS);

    if (rm === void 0) rm = Ctor.rounding;
    else checkInt32(rm, 0, 8);

    x = round(new Ctor(x), dp + 1, rm);
    str = toString(x, true, dp + 1);
  }

  return str;
};


/*
 * Return a string representing the value of this Decimal in normal (fixed-point) notation to
 * `dp` fixed decimal places and rounded using rounding mode `rm` or `rounding` if `rm` is
 * omitted.
 *
 * As with JavaScript numbers, (-0).toFixed(0) is '0', but e.g. (-0.00001).toFixed(0) is '-0'.
 *
 * [dp] {number} Decimal places. Integer, 0 to MAX_DIGITS inclusive.
 * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.
 *
 * (-0).toFixed(0) is '0', but (-0.1).toFixed(0) is '-0'.
 * (-0).toFixed(1) is '0.0', but (-0.01).toFixed(1) is '-0.0'.
 * (-0).toFixed(3) is '0.000'.
 * (-0.5).toFixed(0) is '-0'.
 *
 */
P.toFixed = function (dp, rm) {
  var str, y,
    x = this,
    Ctor = x.constructor;

  if (dp === void 0) return toString(x);

  checkInt32(dp, 0, MAX_DIGITS);

  if (rm === void 0) rm = Ctor.rounding;
  else checkInt32(rm, 0, 8);

  y = round(new Ctor(x), dp + getBase10Exponent(x) + 1, rm);
  str = toString(y.abs(), false, dp + getBase10Exponent(y) + 1);

  // To determine whether to add the minus sign look at the value before it was rounded,
  // i.e. look at `x` rather than `y`.
  return x.isneg() && !x.isZero() ? '-' + str : str;
};


/*
 * Return a new Decimal whose value is the value of this Decimal rounded to a whole number using
 * rounding mode `rounding`.
 *
 */
P.toInteger = P.toint = function () {
  var x = this,
    Ctor = x.constructor;
  return round(new Ctor(x), getBase10Exponent(x) + 1, Ctor.rounding);
};


/*
 * Return the value of this Decimal converted to a number primitive.
 *
 */
P.toNumber = function () {
  return +this;
};


/*
 * Return a new Decimal whose value is the value of this Decimal raised to the power `y`,
 * truncated to `precision` significant digits.
 *
 * For non-integer or very large exponents pow(x, y) is calculated using
 *
 *   x^y = exp(y*ln(x))
 *
 * The maximum error is 1 ulp (unit in last place).
 *
 * y {number|string|Decimal} The power to which to raise this Decimal.
 *
 */
P.toPower = P.pow = function (y) {
  var e, k, pr, r, sign, yIsInt,
    x = this,
    Ctor = x.constructor,
    guard = 12,
    yn = +(y = new Ctor(y));

  // pow(x, 0) = 1
  if (!y.s) return new Ctor(ONE);

  x = new Ctor(x);

  // pow(0, y > 0) = 0
  // pow(0, y < 0) = Infinity
  if (!x.s) {
    if (y.s < 1) throw Error(decimalError + 'Infinity');
    return x;
  }

  // pow(1, y) = 1
  if (x.eq(ONE)) return x;

  pr = Ctor.precision;

  // pow(x, 1) = x
  if (y.eq(ONE)) return round(x, pr);

  e = y.e;
  k = y.d.length - 1;
  yIsInt = e >= k;
  sign = x.s;

  if (!yIsInt) {

    // pow(x < 0, y non-integer) = NaN
    if (sign < 0) throw Error(decimalError + 'NaN');

  // If y is a small integer use the 'exponentiation by squaring' algorithm.
  } else if ((k = yn < 0 ? -yn : yn) <= MAX_SAFE_INTEGER) {
    r = new Ctor(ONE);

    // Max k of 9007199254740991 takes 53 loop iterations.
    // Maximum digits array length; leaves [28, 34] guard digits.
    e = Math.ceil(pr / LOG_BASE + 4);

    external = false;

    for (;;) {
      if (k % 2) {
        r = r.times(x);
        truncate(r.d, e);
      }

      k = mathfloor(k / 2);
      if (k === 0) break;

      x = x.times(x);
      truncate(x.d, e);
    }

    external = true;

    return y.s < 0 ? new Ctor(ONE).div(r) : round(r, pr);
  }

  // Result is negative if x is negative and the last digit of integer y is odd.
  sign = sign < 0 && y.d[Math.max(e, k)] & 1 ? -1 : 1;

  x.s = 1;
  external = false;
  r = y.times(ln(x, pr + guard));
  external = true;
  r = exp(r);
  r.s = sign;

  return r;
};


/*
 * Return a string representing the value of this Decimal rounded to `sd` significant digits
 * using rounding mode `rounding`.
 *
 * Return exponential notation if `sd` is less than the number of digits necessary to represent
 * the integer part of the value in normal notation.
 *
 * [sd] {number} Significant digits. Integer, 1 to MAX_DIGITS inclusive.
 * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.
 *
 */
P.toPrecision = function (sd, rm) {
  var e, str,
    x = this,
    Ctor = x.constructor;

  if (sd === void 0) {
    e = getBase10Exponent(x);
    str = toString(x, e <= Ctor.toExpNeg || e >= Ctor.toExpPos);
  } else {
    checkInt32(sd, 1, MAX_DIGITS);

    if (rm === void 0) rm = Ctor.rounding;
    else checkInt32(rm, 0, 8);

    x = round(new Ctor(x), sd, rm);
    e = getBase10Exponent(x);
    str = toString(x, sd <= e || e <= Ctor.toExpNeg, sd);
  }

  return str;
};


/*
 * Return a new Decimal whose value is the value of this Decimal rounded to a maximum of `sd`
 * significant digits using rounding mode `rm`, or to `precision` and `rounding` respectively if
 * omitted.
 *
 * [sd] {number} Significant digits. Integer, 1 to MAX_DIGITS inclusive.
 * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.
 *
 */
P.toSignificantDigits = P.tosd = function (sd, rm) {
  var x = this,
    Ctor = x.constructor;

  if (sd === void 0) {
    sd = Ctor.precision;
    rm = Ctor.rounding;
  } else {
    checkInt32(sd, 1, MAX_DIGITS);

    if (rm === void 0) rm = Ctor.rounding;
    else checkInt32(rm, 0, 8);
  }

  return round(new Ctor(x), sd, rm);
};


/*
 * Return a string representing the value of this Decimal.
 *
 * Return exponential notation if this Decimal has a positive exponent equal to or greater than
 * `toExpPos`, or a negative exponent equal to or less than `toExpNeg`.
 *
 */
P.toString = P.valueOf = P.val = P.toJSON = P[Symbol.for('nodejs.util.inspect.custom')] = function () {
  var x = this,
    e = getBase10Exponent(x),
    Ctor = x.constructor;

  return toString(x, e <= Ctor.toExpNeg || e >= Ctor.toExpPos);
};


// Helper functions for Decimal.prototype (P) and/or Decimal methods, and their callers.


/*
 *  add                 P.minus, P.plus
 *  checkInt32          P.todp, P.toExponential, P.toFixed, P.toPrecision, P.tosd
 *  digitsToString      P.log, P.sqrt, P.pow, toString, exp, ln
 *  divide              P.div, P.idiv, P.log, P.mod, P.sqrt, exp, ln
 *  exp                 P.exp, P.pow
 *  getBase10Exponent   P.exponent, P.sd, P.toint, P.sqrt, P.todp, P.toFixed, P.toPrecision,
 *                      P.toString, divide, round, toString, exp, ln
 *  getLn10             P.log, ln
 *  getZeroString       digitsToString, toString
 *  ln                  P.log, P.ln, P.pow, exp
 *  parseDecimal        Decimal
 *  round               P.abs, P.idiv, P.log, P.minus, P.mod, P.neg, P.plus, P.toint, P.sqrt,
 *                      P.times, P.todp, P.toExponential, P.toFixed, P.pow, P.toPrecision, P.tosd,
 *                      divide, getLn10, exp, ln
 *  subtract            P.minus, P.plus
 *  toString            P.toExponential, P.toFixed, P.toPrecision, P.toString, P.valueOf
 *  truncate            P.pow
 *
 *  Throws:             P.log, P.mod, P.sd, P.sqrt, P.pow,  checkInt32, divide, round,
 *                      getLn10, exp, ln, parseDecimal, Decimal, config
 */


function add(x, y) {
  var carry, d, e, i, k, len, xd, yd,
    Ctor = x.constructor,
    pr = Ctor.precision;

  // If either is zero...
  if (!x.s || !y.s) {

    // Return x if y is zero.
    // Return y if y is non-zero.
    if (!y.s) y = new Ctor(x);
    return external ? round(y, pr) : y;
  }

  xd = x.d;
  yd = y.d;

  // x and y are finite, non-zero numbers with the same sign.

  k = x.e;
  e = y.e;
  xd = xd.slice();
  i = k - e;

  // If base 1e7 exponents differ...
  if (i) {
    if (i < 0) {
      d = xd;
      i = -i;
      len = yd.length;
    } else {
      d = yd;
      e = k;
      len = xd.length;
    }

    // Limit number of zeros prepended to max(ceil(pr / LOG_BASE), len) + 1.
    k = Math.ceil(pr / LOG_BASE);
    len = k > len ? k + 1 : len + 1;

    if (i > len) {
      i = len;
      d.length = 1;
    }

    // Prepend zeros to equalise exponents. Note: Faster to use reverse then do unshifts.
    d.reverse();
    for (; i--;) d.push(0);
    d.reverse();
  }

  len = xd.length;
  i = yd.length;

  // If yd is longer than xd, swap xd and yd so xd points to the longer array.
  if (len - i < 0) {
    i = len;
    d = yd;
    yd = xd;
    xd = d;
  }

  // Only start adding at yd.length - 1 as the further digits of xd can be left as they are.
  for (carry = 0; i;) {
    carry = (xd[--i] = xd[i] + yd[i] + carry) / BASE | 0;
    xd[i] %= BASE;
  }

  if (carry) {
    xd.unshift(carry);
    ++e;
  }

  // Remove trailing zeros.
  // No need to check for zero, as +x + +y != 0 && -x + -y != 0
  for (len = xd.length; xd[--len] == 0;) xd.pop();

  y.d = xd;
  y.e = e;

  return external ? round(y, pr) : y;
}


function checkInt32(i, min, max) {
  if (i !== ~~i || i < min || i > max) {
    throw Error(invalidArgument + i);
  }
}


function digitsToString(d) {
  var i, k, ws,
    indexOfLastWord = d.length - 1,
    str = '',
    w = d[0];

  if (indexOfLastWord > 0) {
    str += w;
    for (i = 1; i < indexOfLastWord; i++) {
      ws = d[i] + '';
      k = LOG_BASE - ws.length;
      if (k) str += getZeroString(k);
      str += ws;
    }

    w = d[i];
    ws = w + '';
    k = LOG_BASE - ws.length;
    if (k) str += getZeroString(k);
  } else if (w === 0) {
    return '0';
  }

  // Remove trailing zeros of last w.
  for (; w % 10 === 0;) w /= 10;

  return str + w;
}


var divide = (function () {

  // Assumes non-zero x and k, and hence non-zero result.
  function multiplyInteger(x, k) {
    var temp,
      carry = 0,
      i = x.length;

    for (x = x.slice(); i--;) {
      temp = x[i] * k + carry;
      x[i] = temp % BASE | 0;
      carry = temp / BASE | 0;
    }

    if (carry) x.unshift(carry);

    return x;
  }

  function compare(a, b, aL, bL) {
    var i, r;

    if (aL != bL) {
      r = aL > bL ? 1 : -1;
    } else {
      for (i = r = 0; i < aL; i++) {
        if (a[i] != b[i]) {
          r = a[i] > b[i] ? 1 : -1;
          break;
        }
      }
    }

    return r;
  }

  function subtract(a, b, aL) {
    var i = 0;

    // Subtract b from a.
    for (; aL--;) {
      a[aL] -= i;
      i = a[aL] < b[aL] ? 1 : 0;
      a[aL] = i * BASE + a[aL] - b[aL];
    }

    // Remove leading zeros.
    for (; !a[0] && a.length > 1;) a.shift();
  }

  return function (x, y, pr, dp) {
    var cmp, e, i, k, prod, prodL, q, qd, rem, remL, rem0, sd, t, xi, xL, yd0, yL, yz,
      Ctor = x.constructor,
      sign = x.s == y.s ? 1 : -1,
      xd = x.d,
      yd = y.d;

    // Either 0?
    if (!x.s) return new Ctor(x);
    if (!y.s) throw Error(decimalError + 'Division by zero');

    e = x.e - y.e;
    yL = yd.length;
    xL = xd.length;
    q = new Ctor(sign);
    qd = q.d = [];

    // Result exponent may be one less than e.
    for (i = 0; yd[i] == (xd[i] || 0); ) ++i;
    if (yd[i] > (xd[i] || 0)) --e;

    if (pr == null) {
      sd = pr = Ctor.precision;
    } else if (dp) {
      sd = pr + (getBase10Exponent(x) - getBase10Exponent(y)) + 1;
    } else {
      sd = pr;
    }

    if (sd < 0) return new Ctor(0);

    // Convert precision in number of base 10 digits to base 1e7 digits.
    sd = sd / LOG_BASE + 2 | 0;
    i = 0;

    // divisor < 1e7
    if (yL == 1) {
      k = 0;
      yd = yd[0];
      sd++;

      // k is the carry.
      for (; (i < xL || k) && sd--; i++) {
        t = k * BASE + (xd[i] || 0);
        qd[i] = t / yd | 0;
        k = t % yd | 0;
      }

    // divisor >= 1e7
    } else {

      // Normalise xd and yd so highest order digit of yd is >= BASE/2
      k = BASE / (yd[0] + 1) | 0;

      if (k > 1) {
        yd = multiplyInteger(yd, k);
        xd = multiplyInteger(xd, k);
        yL = yd.length;
        xL = xd.length;
      }

      xi = yL;
      rem = xd.slice(0, yL);
      remL = rem.length;

      // Add zeros to make remainder as long as divisor.
      for (; remL < yL;) rem[remL++] = 0;

      yz = yd.slice();
      yz.unshift(0);
      yd0 = yd[0];

      if (yd[1] >= BASE / 2) ++yd0;

      do {
        k = 0;

        // Compare divisor and remainder.
        cmp = compare(yd, rem, yL, remL);

        // If divisor < remainder.
        if (cmp < 0) {

          // Calculate trial digit, k.
          rem0 = rem[0];
          if (yL != remL) rem0 = rem0 * BASE + (rem[1] || 0);

          // k will be how many times the divisor goes into the current remainder.
          k = rem0 / yd0 | 0;

          //  Algorithm:
          //  1. product = divisor * trial digit (k)
          //  2. if product > remainder: product -= divisor, k--
          //  3. remainder -= product
          //  4. if product was < remainder at 2:
          //    5. compare new remainder and divisor
          //    6. If remainder > divisor: remainder -= divisor, k++

          if (k > 1) {
            if (k >= BASE) k = BASE - 1;

            // product = divisor * trial digit.
            prod = multiplyInteger(yd, k);
            prodL = prod.length;
            remL = rem.length;

            // Compare product and remainder.
            cmp = compare(prod, rem, prodL, remL);

            // product > remainder.
            if (cmp == 1) {
              k--;

              // Subtract divisor from product.
              subtract(prod, yL < prodL ? yz : yd, prodL);
            }
          } else {

            // cmp is -1.
            // If k is 0, there is no need to compare yd and rem again below, so change cmp to 1
            // to avoid it. If k is 1 there is a need to compare yd and rem again below.
            if (k == 0) cmp = k = 1;
            prod = yd.slice();
          }

          prodL = prod.length;
          if (prodL < remL) prod.unshift(0);

          // Subtract product from remainder.
          subtract(rem, prod, remL);

          // If product was < previous remainder.
          if (cmp == -1) {
            remL = rem.length;

            // Compare divisor and new remainder.
            cmp = compare(yd, rem, yL, remL);

            // If divisor < new remainder, subtract divisor from remainder.
            if (cmp < 1) {
              k++;

              // Subtract divisor from remainder.
              subtract(rem, yL < remL ? yz : yd, remL);
            }
          }

          remL = rem.length;
        } else if (cmp === 0) {
          k++;
          rem = [0];
        }    // if cmp === 1, k will be 0

        // Add the next digit, k, to the result array.
        qd[i++] = k;

        // Update the remainder.
        if (cmp && rem[0]) {
          rem[remL++] = xd[xi] || 0;
        } else {
          rem = [xd[xi]];
          remL = 1;
        }

      } while ((xi++ < xL || rem[0] !== void 0) && sd--);
    }

    // Leading zero?
    if (!qd[0]) qd.shift();

    q.e = e;

    return round(q, dp ? pr + getBase10Exponent(q) + 1 : pr);
  };
})();


/*
 * Return a new Decimal whose value is the natural exponential of `x` truncated to `sd`
 * significant digits.
 *
 * Taylor/Maclaurin series.
 *
 * exp(x) = x^0/0! + x^1/1! + x^2/2! + x^3/3! + ...
 *
 * Argument reduction:
 *   Repeat x = x / 32, k += 5, until |x| < 0.1
 *   exp(x) = exp(x / 2^k)^(2^k)
 *
 * Previously, the argument was initially reduced by
 * exp(x) = exp(r) * 10^k  where r = x - k * ln10, k = floor(x / ln10)
 * to first put r in the range [0, ln10], before dividing by 32 until |x| < 0.1, but this was
 * found to be slower than just dividing repeatedly by 32 as above.
 *
 * (Math object integer min/max: Math.exp(709) = 8.2e+307, Math.exp(-745) = 5e-324)
 *
 *  exp(x) is non-terminating for any finite, non-zero x.
 *
 */
function exp(x, sd) {
  var denominator, guard, pow, sum, t, wpr,
    i = 0,
    k = 0,
    Ctor = x.constructor,
    pr = Ctor.precision;

  if (getBase10Exponent(x) > 16) throw Error(exponentOutOfRange + getBase10Exponent(x));

  // exp(0) = 1
  if (!x.s) return new Ctor(ONE);

  if (sd == null) {
    external = false;
    wpr = pr;
  } else {
    wpr = sd;
  }

  t = new Ctor(0.03125);

  while (x.abs().gte(0.1)) {
    x = x.times(t);    // x = x / 2^5
    k += 5;
  }

  // Estimate the precision increase necessary to ensure the first 4 rounding digits are correct.
  guard = Math.log(mathpow(2, k)) / Math.LN10 * 2 + 5 | 0;
  wpr += guard;
  denominator = pow = sum = new Ctor(ONE);
  Ctor.precision = wpr;

  for (;;) {
    pow = round(pow.times(x), wpr);
    denominator = denominator.times(++i);
    t = sum.plus(divide(pow, denominator, wpr));

    if (digitsToString(t.d).slice(0, wpr) === digitsToString(sum.d).slice(0, wpr)) {
      while (k--) sum = round(sum.times(sum), wpr);
      Ctor.precision = pr;
      return sd == null ? (external = true, round(sum, pr)) : sum;
    }

    sum = t;
  }
}


// Calculate the base 10 exponent from the base 1e7 exponent.
function getBase10Exponent(x) {
  var e = x.e * LOG_BASE,
    w = x.d[0];

  // Add the number of digits of the first word of the digits array.
  for (; w >= 10; w /= 10) e++;
  return e;
}


function getLn10(Ctor, sd, pr) {

  if (sd > Ctor.LN10.sd()) {


    // Reset global state in case the exception is caught.
    external = true;
    if (pr) Ctor.precision = pr;
    throw Error(decimalError + 'LN10 precision limit exceeded');
  }

  return round(new Ctor(Ctor.LN10), sd);
}


function getZeroString(k) {
  var zs = '';
  for (; k--;) zs += '0';
  return zs;
}


/*
 * Return a new Decimal whose value is the natural logarithm of `x` truncated to `sd` significant
 * digits.
 *
 *  ln(n) is non-terminating (n != 1)
 *
 */
function ln(y, sd) {
  var c, c0, denominator, e, numerator, sum, t, wpr, x2,
    n = 1,
    guard = 10,
    x = y,
    xd = x.d,
    Ctor = x.constructor,
    pr = Ctor.precision;

  // ln(-x) = NaN
  // ln(0) = -Infinity
  if (x.s < 1) throw Error(decimalError + (x.s ? 'NaN' : '-Infinity'));

  // ln(1) = 0
  if (x.eq(ONE)) return new Ctor(0);

  if (sd == null) {
    external = false;
    wpr = pr;
  } else {
    wpr = sd;
  }

  if (x.eq(10)) {
    if (sd == null) external = true;
    return getLn10(Ctor, wpr);
  }

  wpr += guard;
  Ctor.precision = wpr;
  c = digitsToString(xd);
  c0 = c.charAt(0);
  e = getBase10Exponent(x);

  if (Math.abs(e) < 1.5e15) {

    // Argument reduction.
    // The series converges faster the closer the argument is to 1, so using
    // ln(a^b) = b * ln(a),   ln(a) = ln(a^b) / b
    // multiply the argument by itself until the leading digits of the significand are 7, 8, 9,
    // 10, 11, 12 or 13, recording the number of multiplications so the sum of the series can
    // later be divided by this number, then separate out the power of 10 using
    // ln(a*10^b) = ln(a) + b*ln(10).

    // max n is 21 (gives 0.9, 1.0 or 1.1) (9e15 / 21 = 4.2e14).
    //while (c0 < 9 && c0 != 1 || c0 == 1 && c.charAt(1) > 1) {
    // max n is 6 (gives 0.7 - 1.3)
    while (c0 < 7 && c0 != 1 || c0 == 1 && c.charAt(1) > 3) {
      x = x.times(y);
      c = digitsToString(x.d);
      c0 = c.charAt(0);
      n++;
    }

    e = getBase10Exponent(x);

    if (c0 > 1) {
      x = new Ctor('0.' + c);
      e++;
    } else {
      x = new Ctor(c0 + '.' + c.slice(1));
    }
  } else {

    // The argument reduction method above may result in overflow if the argument y is a massive
    // number with exponent >= 1500000000000000 (9e15 / 6 = 1.5e15), so instead recall this
    // function using ln(x*10^e) = ln(x) + e*ln(10).
    t = getLn10(Ctor, wpr + 2, pr).times(e + '');
    x = ln(new Ctor(c0 + '.' + c.slice(1)), wpr - guard).plus(t);

    Ctor.precision = pr;
    return sd == null ? (external = true, round(x, pr)) : x;
  }

  // x is reduced to a value near 1.

  // Taylor series.
  // ln(y) = ln((1 + x)/(1 - x)) = 2(x + x^3/3 + x^5/5 + x^7/7 + ...)
  // where x = (y - 1)/(y + 1)    (|x| < 1)
  sum = numerator = x = divide(x.minus(ONE), x.plus(ONE), wpr);
  x2 = round(x.times(x), wpr);
  denominator = 3;

  for (;;) {
    numerator = round(numerator.times(x2), wpr);
    t = sum.plus(divide(numerator, new Ctor(denominator), wpr));

    if (digitsToString(t.d).slice(0, wpr) === digitsToString(sum.d).slice(0, wpr)) {
      sum = sum.times(2);

      // Reverse the argument reduction.
      if (e !== 0) sum = sum.plus(getLn10(Ctor, wpr + 2, pr).times(e + ''));
      sum = divide(sum, new Ctor(n), wpr);

      Ctor.precision = pr;
      return sd == null ? (external = true, round(sum, pr)) : sum;
    }

    sum = t;
    denominator += 2;
  }
}


/*
 * Parse the value of a new Decimal `x` from string `str`.
 */
function parseDecimal(x, str) {
  var e, i, len;

  // Decimal point?
  if ((e = str.indexOf('.')) > -1) str = str.replace('.', '');

  // Exponential form?
  if ((i = str.search(/e/i)) > 0) {

    // Determine exponent.
    if (e < 0) e = i;
    e += +str.slice(i + 1);
    str = str.substring(0, i);
  } else if (e < 0) {

    // Integer.
    e = str.length;
  }

  // Determine leading zeros.
  for (i = 0; str.charCodeAt(i) === 48;) ++i;

  // Determine trailing zeros.
  for (len = str.length; str.charCodeAt(len - 1) === 48;) --len;
  str = str.slice(i, len);

  if (str) {
    len -= i;
    e = e - i - 1;
    x.e = mathfloor(e / LOG_BASE);
    x.d = [];

    // Transform base

    // e is the base 10 exponent.
    // i is where to slice str to get the first word of the digits array.
    i = (e + 1) % LOG_BASE;
    if (e < 0) i += LOG_BASE;

    if (i < len) {
      if (i) x.d.push(+str.slice(0, i));
      for (len -= LOG_BASE; i < len;) x.d.push(+str.slice(i, i += LOG_BASE));
      str = str.slice(i);
      i = LOG_BASE - str.length;
    } else {
      i -= len;
    }

    for (; i--;) str += '0';
    x.d.push(+str);

    if (external && (x.e > MAX_E || x.e < -MAX_E)) throw Error(exponentOutOfRange + e);
  } else {

    // Zero.
    x.s = 0;
    x.e = 0;
    x.d = [0];
  }

  return x;
}


/*
 * Round `x` to `sd` significant digits, using rounding mode `rm` if present (truncate otherwise).
 */
 function round(x, sd, rm) {
  var i, j, k, n, rd, doRound, w, xdi,
    xd = x.d;

  // rd: the rounding digit, i.e. the digit after the digit that may be rounded up.
  // w: the word of xd which contains the rounding digit, a base 1e7 number.
  // xdi: the index of w within xd.
  // n: the number of digits of w.
  // i: what would be the index of rd within w if all the numbers were 7 digits long (i.e. if
  // they had leading zeros)
  // j: if > 0, the actual index of rd within w (if < 0, rd is a leading zero).

  // Get the length of the first word of the digits array xd.
  for (n = 1, k = xd[0]; k >= 10; k /= 10) n++;
  i = sd - n;

  // Is the rounding digit in the first word of xd?
  if (i < 0) {
    i += LOG_BASE;
    j = sd;
    w = xd[xdi = 0];
  } else {
    xdi = Math.ceil((i + 1) / LOG_BASE);
    k = xd.length;
    if (xdi >= k) return x;
    w = k = xd[xdi];

    // Get the number of digits of w.
    for (n = 1; k >= 10; k /= 10) n++;

    // Get the index of rd within w.
    i %= LOG_BASE;

    // Get the index of rd within w, adjusted for leading zeros.
    // The number of leading zeros of w is given by LOG_BASE - n.
    j = i - LOG_BASE + n;
  }

  if (rm !== void 0) {
    k = mathpow(10, n - j - 1);

    // Get the rounding digit at index j of w.
    rd = w / k % 10 | 0;

    // Are there any non-zero digits after the rounding digit?
    doRound = sd < 0 || xd[xdi + 1] !== void 0 || w % k;

    // The expression `w % mathpow(10, n - j - 1)` returns all the digits of w to the right of the
    // digit at (left-to-right) index j, e.g. if w is 908714 and j is 2, the expression will give
    // 714.

    doRound = rm < 4
      ? (rd || doRound) && (rm == 0 || rm == (x.s < 0 ? 3 : 2))
      : rd > 5 || rd == 5 && (rm == 4 || doRound || rm == 6 &&

        // Check whether the digit to the left of the rounding digit is odd.
        ((i > 0 ? j > 0 ? w / mathpow(10, n - j) : 0 : xd[xdi - 1]) % 10) & 1 ||
          rm == (x.s < 0 ? 8 : 7));
  }

  if (sd < 1 || !xd[0]) {
    if (doRound) {
      k = getBase10Exponent(x);
      xd.length = 1;

      // Convert sd to decimal places.
      sd = sd - k - 1;

      // 1, 0.1, 0.01, 0.001, 0.0001 etc.
      xd[0] = mathpow(10, (LOG_BASE - sd % LOG_BASE) % LOG_BASE);
      x.e = mathfloor(-sd / LOG_BASE) || 0;
    } else {
      xd.length = 1;

      // Zero.
      xd[0] = x.e = x.s = 0;
    }

    return x;
  }

  // Remove excess digits.
  if (i == 0) {
    xd.length = xdi;
    k = 1;
    xdi--;
  } else {
    xd.length = xdi + 1;
    k = mathpow(10, LOG_BASE - i);

    // E.g. 56700 becomes 56000 if 7 is the rounding digit.
    // j > 0 means i > number of leading zeros of w.
    xd[xdi] = j > 0 ? (w / mathpow(10, n - j) % mathpow(10, j) | 0) * k : 0;
  }

  if (doRound) {
    for (;;) {

      // Is the digit to be rounded up in the first word of xd?
      if (xdi == 0) {
        if ((xd[0] += k) == BASE) {
          xd[0] = 1;
          ++x.e;
        }

        break;
      } else {
        xd[xdi] += k;
        if (xd[xdi] != BASE) break;
        xd[xdi--] = 0;
        k = 1;
      }
    }
  }

  // Remove trailing zeros.
  for (i = xd.length; xd[--i] === 0;) xd.pop();

  if (external && (x.e > MAX_E || x.e < -MAX_E)) {
    throw Error(exponentOutOfRange + getBase10Exponent(x));
  }

  return x;
}


function subtract(x, y) {
  var d, e, i, j, k, len, xd, xe, xLTy, yd,
    Ctor = x.constructor,
    pr = Ctor.precision;

  // Return y negated if x is zero.
  // Return x if y is zero and x is non-zero.
  if (!x.s || !y.s) {
    if (y.s) y.s = -y.s;
    else y = new Ctor(x);
    return external ? round(y, pr) : y;
  }

  xd = x.d;
  yd = y.d;

  // x and y are non-zero numbers with the same sign.

  e = y.e;
  xe = x.e;
  xd = xd.slice();
  k = xe - e;

  // If exponents differ...
  if (k) {
    xLTy = k < 0;

    if (xLTy) {
      d = xd;
      k = -k;
      len = yd.length;
    } else {
      d = yd;
      e = xe;
      len = xd.length;
    }

    // Numbers with massively different exponents would result in a very high number of zeros
    // needing to be prepended, but this can be avoided while still ensuring correct rounding by
    // limiting the number of zeros to `Math.ceil(pr / LOG_BASE) + 2`.
    i = Math.max(Math.ceil(pr / LOG_BASE), len) + 2;

    if (k > i) {
      k = i;
      d.length = 1;
    }

    // Prepend zeros to equalise exponents.
    d.reverse();
    for (i = k; i--;) d.push(0);
    d.reverse();

  // Base 1e7 exponents equal.
  } else {

    // Check digits to determine which is the bigger number.

    i = xd.length;
    len = yd.length;
    xLTy = i < len;
    if (xLTy) len = i;

    for (i = 0; i < len; i++) {
      if (xd[i] != yd[i]) {
        xLTy = xd[i] < yd[i];
        break;
      }
    }

    k = 0;
  }

  if (xLTy) {
    d = xd;
    xd = yd;
    yd = d;
    y.s = -y.s;
  }

  len = xd.length;

  // Append zeros to xd if shorter.
  // Don't add zeros to yd if shorter as subtraction only needs to start at yd length.
  for (i = yd.length - len; i > 0; --i) xd[len++] = 0;

  // Subtract yd from xd.
  for (i = yd.length; i > k;) {
    if (xd[--i] < yd[i]) {
      for (j = i; j && xd[--j] === 0;) xd[j] = BASE - 1;
      --xd[j];
      xd[i] += BASE;
    }

    xd[i] -= yd[i];
  }

  // Remove trailing zeros.
  for (; xd[--len] === 0;) xd.pop();

  // Remove leading zeros and adjust exponent accordingly.
  for (; xd[0] === 0; xd.shift()) --e;

  // Zero?
  if (!xd[0]) return new Ctor(0);

  y.d = xd;
  y.e = e;

  //return external && xd.length >= pr / LOG_BASE ? round(y, pr) : y;
  return external ? round(y, pr) : y;
}


function toString(x, isExp, sd) {
  var k,
    e = getBase10Exponent(x),
    str = digitsToString(x.d),
    len = str.length;

  if (isExp) {
    if (sd && (k = sd - len) > 0) {
      str = str.charAt(0) + '.' + str.slice(1) + getZeroString(k);
    } else if (len > 1) {
      str = str.charAt(0) + '.' + str.slice(1);
    }

    str = str + (e < 0 ? 'e' : 'e+') + e;
  } else if (e < 0) {
    str = '0.' + getZeroString(-e - 1) + str;
    if (sd && (k = sd - len) > 0) str += getZeroString(k);
  } else if (e >= len) {
    str += getZeroString(e + 1 - len);
    if (sd && (k = sd - e - 1) > 0) str = str + '.' + getZeroString(k);
  } else {
    if ((k = e + 1) < len) str = str.slice(0, k) + '.' + str.slice(k);
    if (sd && (k = sd - len) > 0) {
      if (e + 1 === len) str += '.';
      str += getZeroString(k);
    }
  }

  return x.s < 0 ? '-' + str : str;
}


// Does not strip trailing zeros.
function truncate(arr, len) {
  if (arr.length > len) {
    arr.length = len;
    return true;
  }
}


// Decimal methods


/*
 *  clone
 *  config/set
 */


/*
 * Create and return a Decimal constructor with the same configuration properties as this Decimal
 * constructor.
 *
 */
function clone(obj) {
  var i, p, ps;

  /*
   * The Decimal constructor and exported function.
   * Return a new Decimal instance.
   *
   * value {number|string|Decimal} A numeric value.
   *
   */
  function Decimal(value) {
    var x = this;

    // Decimal called without new.
    if (!(x instanceof Decimal)) return new Decimal(value);

    // Retain a reference to this Decimal constructor, and shadow Decimal.prototype.constructor
    // which points to Object.
    x.constructor = Decimal;

    // Duplicate.
    if (value instanceof Decimal) {
      x.s = value.s;
      x.e = value.e;
      x.d = (value = value.d) ? value.slice() : value;
      return;
    }

    if (typeof value === 'number') {

      // Reject Infinity/NaN.
      if (value * 0 !== 0) {
        throw Error(invalidArgument + value);
      }

      if (value > 0) {
        x.s = 1;
      } else if (value < 0) {
        value = -value;
        x.s = -1;
      } else {
        x.s = 0;
        x.e = 0;
        x.d = [0];
        return;
      }

      // Fast path for small integers.
      if (value === ~~value && value < 1e7) {
        x.e = 0;
        x.d = [value];
        return;
      }

      return parseDecimal(x, value.toString());
    } else if (typeof value !== 'string') {
      throw Error(invalidArgument + value);
    }

    // Minus sign?
    if (value.charCodeAt(0) === 45) {
      value = value.slice(1);
      x.s = -1;
    } else {
      x.s = 1;
    }

    if (isDecimal.test(value)) parseDecimal(x, value);
    else throw Error(invalidArgument + value);
  }

  Decimal.prototype = P;

  Decimal.ROUND_UP = 0;
  Decimal.ROUND_DOWN = 1;
  Decimal.ROUND_CEIL = 2;
  Decimal.ROUND_FLOOR = 3;
  Decimal.ROUND_HALF_UP = 4;
  Decimal.ROUND_HALF_DOWN = 5;
  Decimal.ROUND_HALF_EVEN = 6;
  Decimal.ROUND_HALF_CEIL = 7;
  Decimal.ROUND_HALF_FLOOR = 8;

  Decimal.clone = clone;
  Decimal.config = Decimal.set = config;

  if (obj === void 0) obj = {};
  if (obj) {
    ps = ['precision', 'rounding', 'toExpNeg', 'toExpPos', 'LN10'];
    for (i = 0; i < ps.length;) if (!obj.hasOwnProperty(p = ps[i++])) obj[p] = this[p];
  }

  Decimal.config(obj);

  return Decimal;
}


/*
 * Configure global settings for a Decimal constructor.
 *
 * `obj` is an object with one or more of the following properties,
 *
 *   precision  {number}
 *   rounding   {number}
 *   toExpNeg   {number}
 *   toExpPos   {number}
 *
 * E.g. Decimal.config({ precision: 20, rounding: 4 })
 *
 */
function config(obj) {
  if (!obj || typeof obj !== 'object') {
    throw Error(decimalError + 'Object expected');
  }
  var i, p, v,
    ps = [
      'precision', 1, MAX_DIGITS,
      'rounding', 0, 8,
      'toExpNeg', -1 / 0, 0,
      'toExpPos', 0, 1 / 0
    ];

  for (i = 0; i < ps.length; i += 3) {
    if ((v = obj[p = ps[i]]) !== void 0) {
      if (mathfloor(v) === v && v >= ps[i + 1] && v <= ps[i + 2]) this[p] = v;
      else throw Error(invalidArgument + p + ': ' + v);
    }
  }

  if ((v = obj[p = 'LN10']) !== void 0) {
      if (v == Math.LN10) this[p] = new this(v);
      else throw Error(invalidArgument + p + ': ' + v);
  }

  return this;
}


// Create and configure initial Decimal constructor.
var Decimal = clone(defaults);

// Internal constant.
ONE = new Decimal(1);

var Decimal$1 = Decimal;




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/lib/eventemitter3/index2.mjs":
/*!************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/lib/eventemitter3/index2.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __require: () => (/* binding */ requireEventemitter3)
/* harmony export */ });
/* harmony import */ var _virtual_index4_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../_virtual/index4.mjs */ "./node_modules/@discord/embedded-app-sdk/output/_virtual/index4.mjs");


var hasRequiredEventemitter3;

function requireEventemitter3 () {
	if (hasRequiredEventemitter3) return _virtual_index4_mjs__WEBPACK_IMPORTED_MODULE_0__.__module.exports;
	hasRequiredEventemitter3 = 1;
	(function (module) {

		var has = Object.prototype.hasOwnProperty
		  , prefix = '~';

		/**
		 * Constructor to create a storage for our `EE` objects.
		 * An `Events` instance is a plain object whose properties are event names.
		 *
		 * @constructor
		 * @private
		 */
		function Events() {}

		//
		// We try to not inherit from `Object.prototype`. In some engines creating an
		// instance in this way is faster than calling `Object.create(null)` directly.
		// If `Object.create(null)` is not supported we prefix the event names with a
		// character to make sure that the built-in object properties are not
		// overridden or used as an attack vector.
		//
		if (Object.create) {
		  Events.prototype = Object.create(null);

		  //
		  // This hack is needed because the `__proto__` property is still inherited in
		  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.
		  //
		  if (!new Events().__proto__) prefix = false;
		}

		/**
		 * Representation of a single event listener.
		 *
		 * @param {Function} fn The listener function.
		 * @param {*} context The context to invoke the listener with.
		 * @param {Boolean} [once=false] Specify if the listener is a one-time listener.
		 * @constructor
		 * @private
		 */
		function EE(fn, context, once) {
		  this.fn = fn;
		  this.context = context;
		  this.once = once || false;
		}

		/**
		 * Add a listener for a given event.
		 *
		 * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.
		 * @param {(String|Symbol)} event The event name.
		 * @param {Function} fn The listener function.
		 * @param {*} context The context to invoke the listener with.
		 * @param {Boolean} once Specify if the listener is a one-time listener.
		 * @returns {EventEmitter}
		 * @private
		 */
		function addListener(emitter, event, fn, context, once) {
		  if (typeof fn !== 'function') {
		    throw new TypeError('The listener must be a function');
		  }

		  var listener = new EE(fn, context || emitter, once)
		    , evt = prefix ? prefix + event : event;

		  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;
		  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);
		  else emitter._events[evt] = [emitter._events[evt], listener];

		  return emitter;
		}

		/**
		 * Clear event by name.
		 *
		 * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.
		 * @param {(String|Symbol)} evt The Event name.
		 * @private
		 */
		function clearEvent(emitter, evt) {
		  if (--emitter._eventsCount === 0) emitter._events = new Events();
		  else delete emitter._events[evt];
		}

		/**
		 * Minimal `EventEmitter` interface that is molded against the Node.js
		 * `EventEmitter` interface.
		 *
		 * @constructor
		 * @public
		 */
		function EventEmitter() {
		  this._events = new Events();
		  this._eventsCount = 0;
		}

		/**
		 * Return an array listing the events for which the emitter has registered
		 * listeners.
		 *
		 * @returns {Array}
		 * @public
		 */
		EventEmitter.prototype.eventNames = function eventNames() {
		  var names = []
		    , events
		    , name;

		  if (this._eventsCount === 0) return names;

		  for (name in (events = this._events)) {
		    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);
		  }

		  if (Object.getOwnPropertySymbols) {
		    return names.concat(Object.getOwnPropertySymbols(events));
		  }

		  return names;
		};

		/**
		 * Return the listeners registered for a given event.
		 *
		 * @param {(String|Symbol)} event The event name.
		 * @returns {Array} The registered listeners.
		 * @public
		 */
		EventEmitter.prototype.listeners = function listeners(event) {
		  var evt = prefix ? prefix + event : event
		    , handlers = this._events[evt];

		  if (!handlers) return [];
		  if (handlers.fn) return [handlers.fn];

		  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {
		    ee[i] = handlers[i].fn;
		  }

		  return ee;
		};

		/**
		 * Return the number of listeners listening to a given event.
		 *
		 * @param {(String|Symbol)} event The event name.
		 * @returns {Number} The number of listeners.
		 * @public
		 */
		EventEmitter.prototype.listenerCount = function listenerCount(event) {
		  var evt = prefix ? prefix + event : event
		    , listeners = this._events[evt];

		  if (!listeners) return 0;
		  if (listeners.fn) return 1;
		  return listeners.length;
		};

		/**
		 * Calls each of the listeners registered for a given event.
		 *
		 * @param {(String|Symbol)} event The event name.
		 * @returns {Boolean} `true` if the event had listeners, else `false`.
		 * @public
		 */
		EventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {
		  var evt = prefix ? prefix + event : event;

		  if (!this._events[evt]) return false;

		  var listeners = this._events[evt]
		    , len = arguments.length
		    , args
		    , i;

		  if (listeners.fn) {
		    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);

		    switch (len) {
		      case 1: return listeners.fn.call(listeners.context), true;
		      case 2: return listeners.fn.call(listeners.context, a1), true;
		      case 3: return listeners.fn.call(listeners.context, a1, a2), true;
		      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;
		      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;
		      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;
		    }

		    for (i = 1, args = new Array(len -1); i < len; i++) {
		      args[i - 1] = arguments[i];
		    }

		    listeners.fn.apply(listeners.context, args);
		  } else {
		    var length = listeners.length
		      , j;

		    for (i = 0; i < length; i++) {
		      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);

		      switch (len) {
		        case 1: listeners[i].fn.call(listeners[i].context); break;
		        case 2: listeners[i].fn.call(listeners[i].context, a1); break;
		        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;
		        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;
		        default:
		          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {
		            args[j - 1] = arguments[j];
		          }

		          listeners[i].fn.apply(listeners[i].context, args);
		      }
		    }
		  }

		  return true;
		};

		/**
		 * Add a listener for a given event.
		 *
		 * @param {(String|Symbol)} event The event name.
		 * @param {Function} fn The listener function.
		 * @param {*} [context=this] The context to invoke the listener with.
		 * @returns {EventEmitter} `this`.
		 * @public
		 */
		EventEmitter.prototype.on = function on(event, fn, context) {
		  return addListener(this, event, fn, context, false);
		};

		/**
		 * Add a one-time listener for a given event.
		 *
		 * @param {(String|Symbol)} event The event name.
		 * @param {Function} fn The listener function.
		 * @param {*} [context=this] The context to invoke the listener with.
		 * @returns {EventEmitter} `this`.
		 * @public
		 */
		EventEmitter.prototype.once = function once(event, fn, context) {
		  return addListener(this, event, fn, context, true);
		};

		/**
		 * Remove the listeners of a given event.
		 *
		 * @param {(String|Symbol)} event The event name.
		 * @param {Function} fn Only remove the listeners that match this function.
		 * @param {*} context Only remove the listeners that have this context.
		 * @param {Boolean} once Only remove one-time listeners.
		 * @returns {EventEmitter} `this`.
		 * @public
		 */
		EventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {
		  var evt = prefix ? prefix + event : event;

		  if (!this._events[evt]) return this;
		  if (!fn) {
		    clearEvent(this, evt);
		    return this;
		  }

		  var listeners = this._events[evt];

		  if (listeners.fn) {
		    if (
		      listeners.fn === fn &&
		      (!once || listeners.once) &&
		      (!context || listeners.context === context)
		    ) {
		      clearEvent(this, evt);
		    }
		  } else {
		    for (var i = 0, events = [], length = listeners.length; i < length; i++) {
		      if (
		        listeners[i].fn !== fn ||
		        (once && !listeners[i].once) ||
		        (context && listeners[i].context !== context)
		      ) {
		        events.push(listeners[i]);
		      }
		    }

		    //
		    // Reset the array, or remove it completely if we have no more listeners.
		    //
		    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;
		    else clearEvent(this, evt);
		  }

		  return this;
		};

		/**
		 * Remove all listeners, or those of the specified event.
		 *
		 * @param {(String|Symbol)} [event] The event name.
		 * @returns {EventEmitter} `this`.
		 * @public
		 */
		EventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {
		  var evt;

		  if (event) {
		    evt = prefix ? prefix + event : event;
		    if (this._events[evt]) clearEvent(this, evt);
		  } else {
		    this._events = new Events();
		    this._eventsCount = 0;
		  }

		  return this;
		};

		//
		// Alias methods names because people roll like that.
		//
		EventEmitter.prototype.off = EventEmitter.prototype.removeListener;
		EventEmitter.prototype.addListener = EventEmitter.prototype.on;

		//
		// Expose the prefix.
		//
		EventEmitter.prefixed = prefix;

		//
		// Allow `EventEmitter` to be imported as module namespace.
		//
		EventEmitter.EventEmitter = EventEmitter;

		//
		// Expose the module.
		//
		{
		  module.exports = EventEmitter;
		} 
	} (_virtual_index4_mjs__WEBPACK_IMPORTED_MODULE_0__.__module));
	return _virtual_index4_mjs__WEBPACK_IMPORTED_MODULE_0__.__module.exports;
}




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/lib/lodash.transform/index.mjs":
/*!**************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/lib/lodash.transform/index.mjs ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __require: () => (/* binding */ requireLodash_transform)
/* harmony export */ });
/* harmony import */ var _virtual_commonjsHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../_virtual/_commonjsHelpers.mjs */ "./node_modules/@discord/embedded-app-sdk/output/_virtual/_commonjsHelpers.mjs");
/* harmony import */ var _virtual_index3_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../_virtual/index3.mjs */ "./node_modules/@discord/embedded-app-sdk/output/_virtual/index3.mjs");



/**
 * lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="npm" -o ./`
 * Copyright jQuery Foundation and other contributors <https://jquery.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
_virtual_index3_mjs__WEBPACK_IMPORTED_MODULE_1__.__module.exports;

var hasRequiredLodash_transform;

function requireLodash_transform () {
	if (hasRequiredLodash_transform) return _virtual_index3_mjs__WEBPACK_IMPORTED_MODULE_1__.__module.exports;
	hasRequiredLodash_transform = 1;
	(function (module, exports) {
		/** Used as the size to enable large array optimizations. */
		var LARGE_ARRAY_SIZE = 200;

		/** Used as the `TypeError` message for "Functions" methods. */
		var FUNC_ERROR_TEXT = 'Expected a function';

		/** Used to stand-in for `undefined` hash values. */
		var HASH_UNDEFINED = '__lodash_hash_undefined__';

		/** Used to compose bitmasks for comparison styles. */
		var UNORDERED_COMPARE_FLAG = 1,
		    PARTIAL_COMPARE_FLAG = 2;

		/** Used as references for various `Number` constants. */
		var INFINITY = 1 / 0,
		    MAX_SAFE_INTEGER = 9007199254740991;

		/** `Object#toString` result references. */
		var argsTag = '[object Arguments]',
		    arrayTag = '[object Array]',
		    boolTag = '[object Boolean]',
		    dateTag = '[object Date]',
		    errorTag = '[object Error]',
		    funcTag = '[object Function]',
		    genTag = '[object GeneratorFunction]',
		    mapTag = '[object Map]',
		    numberTag = '[object Number]',
		    objectTag = '[object Object]',
		    promiseTag = '[object Promise]',
		    regexpTag = '[object RegExp]',
		    setTag = '[object Set]',
		    stringTag = '[object String]',
		    symbolTag = '[object Symbol]',
		    weakMapTag = '[object WeakMap]';

		var arrayBufferTag = '[object ArrayBuffer]',
		    dataViewTag = '[object DataView]',
		    float32Tag = '[object Float32Array]',
		    float64Tag = '[object Float64Array]',
		    int8Tag = '[object Int8Array]',
		    int16Tag = '[object Int16Array]',
		    int32Tag = '[object Int32Array]',
		    uint8Tag = '[object Uint8Array]',
		    uint8ClampedTag = '[object Uint8ClampedArray]',
		    uint16Tag = '[object Uint16Array]',
		    uint32Tag = '[object Uint32Array]';

		/** Used to match property names within property paths. */
		var reIsDeepProp = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
		    reIsPlainProp = /^\w*$/,
		    reLeadingDot = /^\./,
		    rePropName = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;

		/**
		 * Used to match `RegExp`
		 * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).
		 */
		var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;

		/** Used to match backslashes in property paths. */
		var reEscapeChar = /\\(\\)?/g;

		/** Used to detect host constructors (Safari). */
		var reIsHostCtor = /^\[object .+?Constructor\]$/;

		/** Used to detect unsigned integer values. */
		var reIsUint = /^(?:0|[1-9]\d*)$/;

		/** Used to identify `toStringTag` values of typed arrays. */
		var typedArrayTags = {};
		typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =
		typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =
		typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =
		typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =
		typedArrayTags[uint32Tag] = true;
		typedArrayTags[argsTag] = typedArrayTags[arrayTag] =
		typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =
		typedArrayTags[dataViewTag] = typedArrayTags[dateTag] =
		typedArrayTags[errorTag] = typedArrayTags[funcTag] =
		typedArrayTags[mapTag] = typedArrayTags[numberTag] =
		typedArrayTags[objectTag] = typedArrayTags[regexpTag] =
		typedArrayTags[setTag] = typedArrayTags[stringTag] =
		typedArrayTags[weakMapTag] = false;

		/** Detect free variable `global` from Node.js. */
		var freeGlobal = typeof _virtual_commonjsHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__.commonjsGlobal == 'object' && _virtual_commonjsHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__.commonjsGlobal && _virtual_commonjsHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__.commonjsGlobal.Object === Object && _virtual_commonjsHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__.commonjsGlobal;

		/** Detect free variable `self`. */
		var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

		/** Used as a reference to the global object. */
		var root = freeGlobal || freeSelf || Function('return this')();

		/** Detect free variable `exports`. */
		var freeExports = exports && !exports.nodeType && exports;

		/** Detect free variable `module`. */
		var freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;

		/** Detect the popular CommonJS extension `module.exports`. */
		var moduleExports = freeModule && freeModule.exports === freeExports;

		/** Detect free variable `process` from Node.js. */
		var freeProcess = moduleExports && freeGlobal.process;

		/** Used to access faster Node.js helpers. */
		var nodeUtil = (function() {
		  try {
		    return freeProcess && freeProcess.binding('util');
		  } catch (e) {}
		}());

		/* Node.js helper references. */
		var nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;

		/**
		 * A specialized version of `_.forEach` for arrays without support for
		 * iteratee shorthands.
		 *
		 * @private
		 * @param {Array} [array] The array to iterate over.
		 * @param {Function} iteratee The function invoked per iteration.
		 * @returns {Array} Returns `array`.
		 */
		function arrayEach(array, iteratee) {
		  var index = -1,
		      length = array ? array.length : 0;

		  while (++index < length) {
		    if (iteratee(array[index], index, array) === false) {
		      break;
		    }
		  }
		  return array;
		}

		/**
		 * A specialized version of `_.some` for arrays without support for iteratee
		 * shorthands.
		 *
		 * @private
		 * @param {Array} [array] The array to iterate over.
		 * @param {Function} predicate The function invoked per iteration.
		 * @returns {boolean} Returns `true` if any element passes the predicate check,
		 *  else `false`.
		 */
		function arraySome(array, predicate) {
		  var index = -1,
		      length = array ? array.length : 0;

		  while (++index < length) {
		    if (predicate(array[index], index, array)) {
		      return true;
		    }
		  }
		  return false;
		}

		/**
		 * The base implementation of `_.property` without support for deep paths.
		 *
		 * @private
		 * @param {string} key The key of the property to get.
		 * @returns {Function} Returns the new accessor function.
		 */
		function baseProperty(key) {
		  return function(object) {
		    return object == null ? undefined : object[key];
		  };
		}

		/**
		 * The base implementation of `_.times` without support for iteratee shorthands
		 * or max array length checks.
		 *
		 * @private
		 * @param {number} n The number of times to invoke `iteratee`.
		 * @param {Function} iteratee The function invoked per iteration.
		 * @returns {Array} Returns the array of results.
		 */
		function baseTimes(n, iteratee) {
		  var index = -1,
		      result = Array(n);

		  while (++index < n) {
		    result[index] = iteratee(index);
		  }
		  return result;
		}

		/**
		 * The base implementation of `_.unary` without support for storing metadata.
		 *
		 * @private
		 * @param {Function} func The function to cap arguments for.
		 * @returns {Function} Returns the new capped function.
		 */
		function baseUnary(func) {
		  return function(value) {
		    return func(value);
		  };
		}

		/**
		 * Gets the value at `key` of `object`.
		 *
		 * @private
		 * @param {Object} [object] The object to query.
		 * @param {string} key The key of the property to get.
		 * @returns {*} Returns the property value.
		 */
		function getValue(object, key) {
		  return object == null ? undefined : object[key];
		}

		/**
		 * Checks if `value` is a host object in IE < 9.
		 *
		 * @private
		 * @param {*} value The value to check.
		 * @returns {boolean} Returns `true` if `value` is a host object, else `false`.
		 */
		function isHostObject(value) {
		  // Many host objects are `Object` objects that can coerce to strings
		  // despite having improperly defined `toString` methods.
		  var result = false;
		  if (value != null && typeof value.toString != 'function') {
		    try {
		      result = !!(value + '');
		    } catch (e) {}
		  }
		  return result;
		}

		/**
		 * Converts `map` to its key-value pairs.
		 *
		 * @private
		 * @param {Object} map The map to convert.
		 * @returns {Array} Returns the key-value pairs.
		 */
		function mapToArray(map) {
		  var index = -1,
		      result = Array(map.size);

		  map.forEach(function(value, key) {
		    result[++index] = [key, value];
		  });
		  return result;
		}

		/**
		 * Creates a unary function that invokes `func` with its argument transformed.
		 *
		 * @private
		 * @param {Function} func The function to wrap.
		 * @param {Function} transform The argument transform.
		 * @returns {Function} Returns the new function.
		 */
		function overArg(func, transform) {
		  return function(arg) {
		    return func(transform(arg));
		  };
		}

		/**
		 * Converts `set` to an array of its values.
		 *
		 * @private
		 * @param {Object} set The set to convert.
		 * @returns {Array} Returns the values.
		 */
		function setToArray(set) {
		  var index = -1,
		      result = Array(set.size);

		  set.forEach(function(value) {
		    result[++index] = value;
		  });
		  return result;
		}

		/** Used for built-in method references. */
		var arrayProto = Array.prototype,
		    funcProto = Function.prototype,
		    objectProto = Object.prototype;

		/** Used to detect overreaching core-js shims. */
		var coreJsData = root['__core-js_shared__'];

		/** Used to detect methods masquerading as native. */
		var maskSrcKey = (function() {
		  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');
		  return uid ? ('Symbol(src)_1.' + uid) : '';
		}());

		/** Used to resolve the decompiled source of functions. */
		var funcToString = funcProto.toString;

		/** Used to check objects for own properties. */
		var hasOwnProperty = objectProto.hasOwnProperty;

		/**
		 * Used to resolve the
		 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
		 * of values.
		 */
		var objectToString = objectProto.toString;

		/** Used to detect if a method is native. */
		var reIsNative = RegExp('^' +
		  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\$&')
		  .replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$'
		);

		/** Built-in value references. */
		var Symbol = root.Symbol,
		    Uint8Array = root.Uint8Array,
		    getPrototype = overArg(Object.getPrototypeOf, Object),
		    objectCreate = Object.create,
		    propertyIsEnumerable = objectProto.propertyIsEnumerable,
		    splice = arrayProto.splice;

		/* Built-in method references for those with the same name as other `lodash` methods. */
		var nativeKeys = overArg(Object.keys, Object);

		/* Built-in method references that are verified to be native. */
		var DataView = getNative(root, 'DataView'),
		    Map = getNative(root, 'Map'),
		    Promise = getNative(root, 'Promise'),
		    Set = getNative(root, 'Set'),
		    WeakMap = getNative(root, 'WeakMap'),
		    nativeCreate = getNative(Object, 'create');

		/** Used to detect maps, sets, and weakmaps. */
		var dataViewCtorString = toSource(DataView),
		    mapCtorString = toSource(Map),
		    promiseCtorString = toSource(Promise),
		    setCtorString = toSource(Set),
		    weakMapCtorString = toSource(WeakMap);

		/** Used to convert symbols to primitives and strings. */
		var symbolProto = Symbol ? Symbol.prototype : undefined,
		    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined,
		    symbolToString = symbolProto ? symbolProto.toString : undefined;

		/**
		 * Creates a hash object.
		 *
		 * @private
		 * @constructor
		 * @param {Array} [entries] The key-value pairs to cache.
		 */
		function Hash(entries) {
		  var index = -1,
		      length = entries ? entries.length : 0;

		  this.clear();
		  while (++index < length) {
		    var entry = entries[index];
		    this.set(entry[0], entry[1]);
		  }
		}

		/**
		 * Removes all key-value entries from the hash.
		 *
		 * @private
		 * @name clear
		 * @memberOf Hash
		 */
		function hashClear() {
		  this.__data__ = nativeCreate ? nativeCreate(null) : {};
		}

		/**
		 * Removes `key` and its value from the hash.
		 *
		 * @private
		 * @name delete
		 * @memberOf Hash
		 * @param {Object} hash The hash to modify.
		 * @param {string} key The key of the value to remove.
		 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
		 */
		function hashDelete(key) {
		  return this.has(key) && delete this.__data__[key];
		}

		/**
		 * Gets the hash value for `key`.
		 *
		 * @private
		 * @name get
		 * @memberOf Hash
		 * @param {string} key The key of the value to get.
		 * @returns {*} Returns the entry value.
		 */
		function hashGet(key) {
		  var data = this.__data__;
		  if (nativeCreate) {
		    var result = data[key];
		    return result === HASH_UNDEFINED ? undefined : result;
		  }
		  return hasOwnProperty.call(data, key) ? data[key] : undefined;
		}

		/**
		 * Checks if a hash value for `key` exists.
		 *
		 * @private
		 * @name has
		 * @memberOf Hash
		 * @param {string} key The key of the entry to check.
		 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
		 */
		function hashHas(key) {
		  var data = this.__data__;
		  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);
		}

		/**
		 * Sets the hash `key` to `value`.
		 *
		 * @private
		 * @name set
		 * @memberOf Hash
		 * @param {string} key The key of the value to set.
		 * @param {*} value The value to set.
		 * @returns {Object} Returns the hash instance.
		 */
		function hashSet(key, value) {
		  var data = this.__data__;
		  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;
		  return this;
		}

		// Add methods to `Hash`.
		Hash.prototype.clear = hashClear;
		Hash.prototype['delete'] = hashDelete;
		Hash.prototype.get = hashGet;
		Hash.prototype.has = hashHas;
		Hash.prototype.set = hashSet;

		/**
		 * Creates an list cache object.
		 *
		 * @private
		 * @constructor
		 * @param {Array} [entries] The key-value pairs to cache.
		 */
		function ListCache(entries) {
		  var index = -1,
		      length = entries ? entries.length : 0;

		  this.clear();
		  while (++index < length) {
		    var entry = entries[index];
		    this.set(entry[0], entry[1]);
		  }
		}

		/**
		 * Removes all key-value entries from the list cache.
		 *
		 * @private
		 * @name clear
		 * @memberOf ListCache
		 */
		function listCacheClear() {
		  this.__data__ = [];
		}

		/**
		 * Removes `key` and its value from the list cache.
		 *
		 * @private
		 * @name delete
		 * @memberOf ListCache
		 * @param {string} key The key of the value to remove.
		 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
		 */
		function listCacheDelete(key) {
		  var data = this.__data__,
		      index = assocIndexOf(data, key);

		  if (index < 0) {
		    return false;
		  }
		  var lastIndex = data.length - 1;
		  if (index == lastIndex) {
		    data.pop();
		  } else {
		    splice.call(data, index, 1);
		  }
		  return true;
		}

		/**
		 * Gets the list cache value for `key`.
		 *
		 * @private
		 * @name get
		 * @memberOf ListCache
		 * @param {string} key The key of the value to get.
		 * @returns {*} Returns the entry value.
		 */
		function listCacheGet(key) {
		  var data = this.__data__,
		      index = assocIndexOf(data, key);

		  return index < 0 ? undefined : data[index][1];
		}

		/**
		 * Checks if a list cache value for `key` exists.
		 *
		 * @private
		 * @name has
		 * @memberOf ListCache
		 * @param {string} key The key of the entry to check.
		 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
		 */
		function listCacheHas(key) {
		  return assocIndexOf(this.__data__, key) > -1;
		}

		/**
		 * Sets the list cache `key` to `value`.
		 *
		 * @private
		 * @name set
		 * @memberOf ListCache
		 * @param {string} key The key of the value to set.
		 * @param {*} value The value to set.
		 * @returns {Object} Returns the list cache instance.
		 */
		function listCacheSet(key, value) {
		  var data = this.__data__,
		      index = assocIndexOf(data, key);

		  if (index < 0) {
		    data.push([key, value]);
		  } else {
		    data[index][1] = value;
		  }
		  return this;
		}

		// Add methods to `ListCache`.
		ListCache.prototype.clear = listCacheClear;
		ListCache.prototype['delete'] = listCacheDelete;
		ListCache.prototype.get = listCacheGet;
		ListCache.prototype.has = listCacheHas;
		ListCache.prototype.set = listCacheSet;

		/**
		 * Creates a map cache object to store key-value pairs.
		 *
		 * @private
		 * @constructor
		 * @param {Array} [entries] The key-value pairs to cache.
		 */
		function MapCache(entries) {
		  var index = -1,
		      length = entries ? entries.length : 0;

		  this.clear();
		  while (++index < length) {
		    var entry = entries[index];
		    this.set(entry[0], entry[1]);
		  }
		}

		/**
		 * Removes all key-value entries from the map.
		 *
		 * @private
		 * @name clear
		 * @memberOf MapCache
		 */
		function mapCacheClear() {
		  this.__data__ = {
		    'hash': new Hash,
		    'map': new (Map || ListCache),
		    'string': new Hash
		  };
		}

		/**
		 * Removes `key` and its value from the map.
		 *
		 * @private
		 * @name delete
		 * @memberOf MapCache
		 * @param {string} key The key of the value to remove.
		 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
		 */
		function mapCacheDelete(key) {
		  return getMapData(this, key)['delete'](key);
		}

		/**
		 * Gets the map value for `key`.
		 *
		 * @private
		 * @name get
		 * @memberOf MapCache
		 * @param {string} key The key of the value to get.
		 * @returns {*} Returns the entry value.
		 */
		function mapCacheGet(key) {
		  return getMapData(this, key).get(key);
		}

		/**
		 * Checks if a map value for `key` exists.
		 *
		 * @private
		 * @name has
		 * @memberOf MapCache
		 * @param {string} key The key of the entry to check.
		 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
		 */
		function mapCacheHas(key) {
		  return getMapData(this, key).has(key);
		}

		/**
		 * Sets the map `key` to `value`.
		 *
		 * @private
		 * @name set
		 * @memberOf MapCache
		 * @param {string} key The key of the value to set.
		 * @param {*} value The value to set.
		 * @returns {Object} Returns the map cache instance.
		 */
		function mapCacheSet(key, value) {
		  getMapData(this, key).set(key, value);
		  return this;
		}

		// Add methods to `MapCache`.
		MapCache.prototype.clear = mapCacheClear;
		MapCache.prototype['delete'] = mapCacheDelete;
		MapCache.prototype.get = mapCacheGet;
		MapCache.prototype.has = mapCacheHas;
		MapCache.prototype.set = mapCacheSet;

		/**
		 *
		 * Creates an array cache object to store unique values.
		 *
		 * @private
		 * @constructor
		 * @param {Array} [values] The values to cache.
		 */
		function SetCache(values) {
		  var index = -1,
		      length = values ? values.length : 0;

		  this.__data__ = new MapCache;
		  while (++index < length) {
		    this.add(values[index]);
		  }
		}

		/**
		 * Adds `value` to the array cache.
		 *
		 * @private
		 * @name add
		 * @memberOf SetCache
		 * @alias push
		 * @param {*} value The value to cache.
		 * @returns {Object} Returns the cache instance.
		 */
		function setCacheAdd(value) {
		  this.__data__.set(value, HASH_UNDEFINED);
		  return this;
		}

		/**
		 * Checks if `value` is in the array cache.
		 *
		 * @private
		 * @name has
		 * @memberOf SetCache
		 * @param {*} value The value to search for.
		 * @returns {number} Returns `true` if `value` is found, else `false`.
		 */
		function setCacheHas(value) {
		  return this.__data__.has(value);
		}

		// Add methods to `SetCache`.
		SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;
		SetCache.prototype.has = setCacheHas;

		/**
		 * Creates a stack cache object to store key-value pairs.
		 *
		 * @private
		 * @constructor
		 * @param {Array} [entries] The key-value pairs to cache.
		 */
		function Stack(entries) {
		  this.__data__ = new ListCache(entries);
		}

		/**
		 * Removes all key-value entries from the stack.
		 *
		 * @private
		 * @name clear
		 * @memberOf Stack
		 */
		function stackClear() {
		  this.__data__ = new ListCache;
		}

		/**
		 * Removes `key` and its value from the stack.
		 *
		 * @private
		 * @name delete
		 * @memberOf Stack
		 * @param {string} key The key of the value to remove.
		 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
		 */
		function stackDelete(key) {
		  return this.__data__['delete'](key);
		}

		/**
		 * Gets the stack value for `key`.
		 *
		 * @private
		 * @name get
		 * @memberOf Stack
		 * @param {string} key The key of the value to get.
		 * @returns {*} Returns the entry value.
		 */
		function stackGet(key) {
		  return this.__data__.get(key);
		}

		/**
		 * Checks if a stack value for `key` exists.
		 *
		 * @private
		 * @name has
		 * @memberOf Stack
		 * @param {string} key The key of the entry to check.
		 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
		 */
		function stackHas(key) {
		  return this.__data__.has(key);
		}

		/**
		 * Sets the stack `key` to `value`.
		 *
		 * @private
		 * @name set
		 * @memberOf Stack
		 * @param {string} key The key of the value to set.
		 * @param {*} value The value to set.
		 * @returns {Object} Returns the stack cache instance.
		 */
		function stackSet(key, value) {
		  var cache = this.__data__;
		  if (cache instanceof ListCache) {
		    var pairs = cache.__data__;
		    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {
		      pairs.push([key, value]);
		      return this;
		    }
		    cache = this.__data__ = new MapCache(pairs);
		  }
		  cache.set(key, value);
		  return this;
		}

		// Add methods to `Stack`.
		Stack.prototype.clear = stackClear;
		Stack.prototype['delete'] = stackDelete;
		Stack.prototype.get = stackGet;
		Stack.prototype.has = stackHas;
		Stack.prototype.set = stackSet;

		/**
		 * Creates an array of the enumerable property names of the array-like `value`.
		 *
		 * @private
		 * @param {*} value The value to query.
		 * @param {boolean} inherited Specify returning inherited property names.
		 * @returns {Array} Returns the array of property names.
		 */
		function arrayLikeKeys(value, inherited) {
		  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.
		  // Safari 9 makes `arguments.length` enumerable in strict mode.
		  var result = (isArray(value) || isArguments(value))
		    ? baseTimes(value.length, String)
		    : [];

		  var length = result.length,
		      skipIndexes = !!length;

		  for (var key in value) {
		    if ((hasOwnProperty.call(value, key)) &&
		        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {
		      result.push(key);
		    }
		  }
		  return result;
		}

		/**
		 * Gets the index at which the `key` is found in `array` of key-value pairs.
		 *
		 * @private
		 * @param {Array} array The array to inspect.
		 * @param {*} key The key to search for.
		 * @returns {number} Returns the index of the matched value, else `-1`.
		 */
		function assocIndexOf(array, key) {
		  var length = array.length;
		  while (length--) {
		    if (eq(array[length][0], key)) {
		      return length;
		    }
		  }
		  return -1;
		}

		/**
		 * The base implementation of `_.create` without support for assigning
		 * properties to the created object.
		 *
		 * @private
		 * @param {Object} prototype The object to inherit from.
		 * @returns {Object} Returns the new object.
		 */
		function baseCreate(proto) {
		  return isObject(proto) ? objectCreate(proto) : {};
		}

		/**
		 * The base implementation of `baseForOwn` which iterates over `object`
		 * properties returned by `keysFunc` and invokes `iteratee` for each property.
		 * Iteratee functions may exit iteration early by explicitly returning `false`.
		 *
		 * @private
		 * @param {Object} object The object to iterate over.
		 * @param {Function} iteratee The function invoked per iteration.
		 * @param {Function} keysFunc The function to get the keys of `object`.
		 * @returns {Object} Returns `object`.
		 */
		var baseFor = createBaseFor();

		/**
		 * The base implementation of `_.forOwn` without support for iteratee shorthands.
		 *
		 * @private
		 * @param {Object} object The object to iterate over.
		 * @param {Function} iteratee The function invoked per iteration.
		 * @returns {Object} Returns `object`.
		 */
		function baseForOwn(object, iteratee) {
		  return object && baseFor(object, iteratee, keys);
		}

		/**
		 * The base implementation of `_.get` without support for default values.
		 *
		 * @private
		 * @param {Object} object The object to query.
		 * @param {Array|string} path The path of the property to get.
		 * @returns {*} Returns the resolved value.
		 */
		function baseGet(object, path) {
		  path = isKey(path, object) ? [path] : castPath(path);

		  var index = 0,
		      length = path.length;

		  while (object != null && index < length) {
		    object = object[toKey(path[index++])];
		  }
		  return (index && index == length) ? object : undefined;
		}

		/**
		 * The base implementation of `getTag`.
		 *
		 * @private
		 * @param {*} value The value to query.
		 * @returns {string} Returns the `toStringTag`.
		 */
		function baseGetTag(value) {
		  return objectToString.call(value);
		}

		/**
		 * The base implementation of `_.hasIn` without support for deep paths.
		 *
		 * @private
		 * @param {Object} [object] The object to query.
		 * @param {Array|string} key The key to check.
		 * @returns {boolean} Returns `true` if `key` exists, else `false`.
		 */
		function baseHasIn(object, key) {
		  return object != null && key in Object(object);
		}

		/**
		 * The base implementation of `_.isEqual` which supports partial comparisons
		 * and tracks traversed objects.
		 *
		 * @private
		 * @param {*} value The value to compare.
		 * @param {*} other The other value to compare.
		 * @param {Function} [customizer] The function to customize comparisons.
		 * @param {boolean} [bitmask] The bitmask of comparison flags.
		 *  The bitmask may be composed of the following flags:
		 *     1 - Unordered comparison
		 *     2 - Partial comparison
		 * @param {Object} [stack] Tracks traversed `value` and `other` objects.
		 * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
		 */
		function baseIsEqual(value, other, customizer, bitmask, stack) {
		  if (value === other) {
		    return true;
		  }
		  if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {
		    return value !== value && other !== other;
		  }
		  return baseIsEqualDeep(value, other, baseIsEqual, customizer, bitmask, stack);
		}

		/**
		 * A specialized version of `baseIsEqual` for arrays and objects which performs
		 * deep comparisons and tracks traversed objects enabling objects with circular
		 * references to be compared.
		 *
		 * @private
		 * @param {Object} object The object to compare.
		 * @param {Object} other The other object to compare.
		 * @param {Function} equalFunc The function to determine equivalents of values.
		 * @param {Function} [customizer] The function to customize comparisons.
		 * @param {number} [bitmask] The bitmask of comparison flags. See `baseIsEqual`
		 *  for more details.
		 * @param {Object} [stack] Tracks traversed `object` and `other` objects.
		 * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
		 */
		function baseIsEqualDeep(object, other, equalFunc, customizer, bitmask, stack) {
		  var objIsArr = isArray(object),
		      othIsArr = isArray(other),
		      objTag = arrayTag,
		      othTag = arrayTag;

		  if (!objIsArr) {
		    objTag = getTag(object);
		    objTag = objTag == argsTag ? objectTag : objTag;
		  }
		  if (!othIsArr) {
		    othTag = getTag(other);
		    othTag = othTag == argsTag ? objectTag : othTag;
		  }
		  var objIsObj = objTag == objectTag && !isHostObject(object),
		      othIsObj = othTag == objectTag && !isHostObject(other),
		      isSameTag = objTag == othTag;

		  if (isSameTag && !objIsObj) {
		    stack || (stack = new Stack);
		    return (objIsArr || isTypedArray(object))
		      ? equalArrays(object, other, equalFunc, customizer, bitmask, stack)
		      : equalByTag(object, other, objTag, equalFunc, customizer, bitmask, stack);
		  }
		  if (!(bitmask & PARTIAL_COMPARE_FLAG)) {
		    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),
		        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');

		    if (objIsWrapped || othIsWrapped) {
		      var objUnwrapped = objIsWrapped ? object.value() : object,
		          othUnwrapped = othIsWrapped ? other.value() : other;

		      stack || (stack = new Stack);
		      return equalFunc(objUnwrapped, othUnwrapped, customizer, bitmask, stack);
		    }
		  }
		  if (!isSameTag) {
		    return false;
		  }
		  stack || (stack = new Stack);
		  return equalObjects(object, other, equalFunc, customizer, bitmask, stack);
		}

		/**
		 * The base implementation of `_.isMatch` without support for iteratee shorthands.
		 *
		 * @private
		 * @param {Object} object The object to inspect.
		 * @param {Object} source The object of property values to match.
		 * @param {Array} matchData The property names, values, and compare flags to match.
		 * @param {Function} [customizer] The function to customize comparisons.
		 * @returns {boolean} Returns `true` if `object` is a match, else `false`.
		 */
		function baseIsMatch(object, source, matchData, customizer) {
		  var index = matchData.length,
		      length = index;

		  if (object == null) {
		    return !length;
		  }
		  object = Object(object);
		  while (index--) {
		    var data = matchData[index];
		    if ((data[2])
		          ? data[1] !== object[data[0]]
		          : !(data[0] in object)
		        ) {
		      return false;
		    }
		  }
		  while (++index < length) {
		    data = matchData[index];
		    var key = data[0],
		        objValue = object[key],
		        srcValue = data[1];

		    if (data[2]) {
		      if (objValue === undefined && !(key in object)) {
		        return false;
		      }
		    } else {
		      var stack = new Stack;
		      var result; 
		      if (!(result === undefined
		            ? baseIsEqual(srcValue, objValue, customizer, UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG, stack)
		            : result
		          )) {
		        return false;
		      }
		    }
		  }
		  return true;
		}

		/**
		 * The base implementation of `_.isNative` without bad shim checks.
		 *
		 * @private
		 * @param {*} value The value to check.
		 * @returns {boolean} Returns `true` if `value` is a native function,
		 *  else `false`.
		 */
		function baseIsNative(value) {
		  if (!isObject(value) || isMasked(value)) {
		    return false;
		  }
		  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;
		  return pattern.test(toSource(value));
		}

		/**
		 * The base implementation of `_.isTypedArray` without Node.js optimizations.
		 *
		 * @private
		 * @param {*} value The value to check.
		 * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.
		 */
		function baseIsTypedArray(value) {
		  return isObjectLike(value) &&
		    isLength(value.length) && !!typedArrayTags[objectToString.call(value)];
		}

		/**
		 * The base implementation of `_.iteratee`.
		 *
		 * @private
		 * @param {*} [value=_.identity] The value to convert to an iteratee.
		 * @returns {Function} Returns the iteratee.
		 */
		function baseIteratee(value) {
		  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.
		  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.
		  if (typeof value == 'function') {
		    return value;
		  }
		  if (value == null) {
		    return identity;
		  }
		  if (typeof value == 'object') {
		    return isArray(value)
		      ? baseMatchesProperty(value[0], value[1])
		      : baseMatches(value);
		  }
		  return property(value);
		}

		/**
		 * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.
		 *
		 * @private
		 * @param {Object} object The object to query.
		 * @returns {Array} Returns the array of property names.
		 */
		function baseKeys(object) {
		  if (!isPrototype(object)) {
		    return nativeKeys(object);
		  }
		  var result = [];
		  for (var key in Object(object)) {
		    if (hasOwnProperty.call(object, key) && key != 'constructor') {
		      result.push(key);
		    }
		  }
		  return result;
		}

		/**
		 * The base implementation of `_.matches` which doesn't clone `source`.
		 *
		 * @private
		 * @param {Object} source The object of property values to match.
		 * @returns {Function} Returns the new spec function.
		 */
		function baseMatches(source) {
		  var matchData = getMatchData(source);
		  if (matchData.length == 1 && matchData[0][2]) {
		    return matchesStrictComparable(matchData[0][0], matchData[0][1]);
		  }
		  return function(object) {
		    return object === source || baseIsMatch(object, source, matchData);
		  };
		}

		/**
		 * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.
		 *
		 * @private
		 * @param {string} path The path of the property to get.
		 * @param {*} srcValue The value to match.
		 * @returns {Function} Returns the new spec function.
		 */
		function baseMatchesProperty(path, srcValue) {
		  if (isKey(path) && isStrictComparable(srcValue)) {
		    return matchesStrictComparable(toKey(path), srcValue);
		  }
		  return function(object) {
		    var objValue = get(object, path);
		    return (objValue === undefined && objValue === srcValue)
		      ? hasIn(object, path)
		      : baseIsEqual(srcValue, objValue, undefined, UNORDERED_COMPARE_FLAG | PARTIAL_COMPARE_FLAG);
		  };
		}

		/**
		 * A specialized version of `baseProperty` which supports deep paths.
		 *
		 * @private
		 * @param {Array|string} path The path of the property to get.
		 * @returns {Function} Returns the new accessor function.
		 */
		function basePropertyDeep(path) {
		  return function(object) {
		    return baseGet(object, path);
		  };
		}

		/**
		 * The base implementation of `_.toString` which doesn't convert nullish
		 * values to empty strings.
		 *
		 * @private
		 * @param {*} value The value to process.
		 * @returns {string} Returns the string.
		 */
		function baseToString(value) {
		  // Exit early for strings to avoid a performance hit in some environments.
		  if (typeof value == 'string') {
		    return value;
		  }
		  if (isSymbol(value)) {
		    return symbolToString ? symbolToString.call(value) : '';
		  }
		  var result = (value + '');
		  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;
		}

		/**
		 * Casts `value` to a path array if it's not one.
		 *
		 * @private
		 * @param {*} value The value to inspect.
		 * @returns {Array} Returns the cast property path array.
		 */
		function castPath(value) {
		  return isArray(value) ? value : stringToPath(value);
		}

		/**
		 * Creates a base function for methods like `_.forIn` and `_.forOwn`.
		 *
		 * @private
		 * @param {boolean} [fromRight] Specify iterating from right to left.
		 * @returns {Function} Returns the new base function.
		 */
		function createBaseFor(fromRight) {
		  return function(object, iteratee, keysFunc) {
		    var index = -1,
		        iterable = Object(object),
		        props = keysFunc(object),
		        length = props.length;

		    while (length--) {
		      var key = props[++index];
		      if (iteratee(iterable[key], key, iterable) === false) {
		        break;
		      }
		    }
		    return object;
		  };
		}

		/**
		 * A specialized version of `baseIsEqualDeep` for arrays with support for
		 * partial deep comparisons.
		 *
		 * @private
		 * @param {Array} array The array to compare.
		 * @param {Array} other The other array to compare.
		 * @param {Function} equalFunc The function to determine equivalents of values.
		 * @param {Function} customizer The function to customize comparisons.
		 * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`
		 *  for more details.
		 * @param {Object} stack Tracks traversed `array` and `other` objects.
		 * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.
		 */
		function equalArrays(array, other, equalFunc, customizer, bitmask, stack) {
		  var isPartial = bitmask & PARTIAL_COMPARE_FLAG,
		      arrLength = array.length,
		      othLength = other.length;

		  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {
		    return false;
		  }
		  // Assume cyclic values are equal.
		  var stacked = stack.get(array);
		  if (stacked && stack.get(other)) {
		    return stacked == other;
		  }
		  var index = -1,
		      result = true,
		      seen = (bitmask & UNORDERED_COMPARE_FLAG) ? new SetCache : undefined;

		  stack.set(array, other);
		  stack.set(other, array);

		  // Ignore non-index properties.
		  while (++index < arrLength) {
		    var arrValue = array[index],
		        othValue = other[index];

		    if (customizer) {
		      var compared = isPartial
		        ? customizer(othValue, arrValue, index, other, array, stack)
		        : customizer(arrValue, othValue, index, array, other, stack);
		    }
		    if (compared !== undefined) {
		      if (compared) {
		        continue;
		      }
		      result = false;
		      break;
		    }
		    // Recursively compare arrays (susceptible to call stack limits).
		    if (seen) {
		      if (!arraySome(other, function(othValue, othIndex) {
		            if (!seen.has(othIndex) &&
		                (arrValue === othValue || equalFunc(arrValue, othValue, customizer, bitmask, stack))) {
		              return seen.add(othIndex);
		            }
		          })) {
		        result = false;
		        break;
		      }
		    } else if (!(
		          arrValue === othValue ||
		            equalFunc(arrValue, othValue, customizer, bitmask, stack)
		        )) {
		      result = false;
		      break;
		    }
		  }
		  stack['delete'](array);
		  stack['delete'](other);
		  return result;
		}

		/**
		 * A specialized version of `baseIsEqualDeep` for comparing objects of
		 * the same `toStringTag`.
		 *
		 * **Note:** This function only supports comparing values with tags of
		 * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.
		 *
		 * @private
		 * @param {Object} object The object to compare.
		 * @param {Object} other The other object to compare.
		 * @param {string} tag The `toStringTag` of the objects to compare.
		 * @param {Function} equalFunc The function to determine equivalents of values.
		 * @param {Function} customizer The function to customize comparisons.
		 * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`
		 *  for more details.
		 * @param {Object} stack Tracks traversed `object` and `other` objects.
		 * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
		 */
		function equalByTag(object, other, tag, equalFunc, customizer, bitmask, stack) {
		  switch (tag) {
		    case dataViewTag:
		      if ((object.byteLength != other.byteLength) ||
		          (object.byteOffset != other.byteOffset)) {
		        return false;
		      }
		      object = object.buffer;
		      other = other.buffer;

		    case arrayBufferTag:
		      if ((object.byteLength != other.byteLength) ||
		          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {
		        return false;
		      }
		      return true;

		    case boolTag:
		    case dateTag:
		    case numberTag:
		      // Coerce booleans to `1` or `0` and dates to milliseconds.
		      // Invalid dates are coerced to `NaN`.
		      return eq(+object, +other);

		    case errorTag:
		      return object.name == other.name && object.message == other.message;

		    case regexpTag:
		    case stringTag:
		      // Coerce regexes to strings and treat strings, primitives and objects,
		      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring
		      // for more details.
		      return object == (other + '');

		    case mapTag:
		      var convert = mapToArray;

		    case setTag:
		      var isPartial = bitmask & PARTIAL_COMPARE_FLAG;
		      convert || (convert = setToArray);

		      if (object.size != other.size && !isPartial) {
		        return false;
		      }
		      // Assume cyclic values are equal.
		      var stacked = stack.get(object);
		      if (stacked) {
		        return stacked == other;
		      }
		      bitmask |= UNORDERED_COMPARE_FLAG;

		      // Recursively compare objects (susceptible to call stack limits).
		      stack.set(object, other);
		      var result = equalArrays(convert(object), convert(other), equalFunc, customizer, bitmask, stack);
		      stack['delete'](object);
		      return result;

		    case symbolTag:
		      if (symbolValueOf) {
		        return symbolValueOf.call(object) == symbolValueOf.call(other);
		      }
		  }
		  return false;
		}

		/**
		 * A specialized version of `baseIsEqualDeep` for objects with support for
		 * partial deep comparisons.
		 *
		 * @private
		 * @param {Object} object The object to compare.
		 * @param {Object} other The other object to compare.
		 * @param {Function} equalFunc The function to determine equivalents of values.
		 * @param {Function} customizer The function to customize comparisons.
		 * @param {number} bitmask The bitmask of comparison flags. See `baseIsEqual`
		 *  for more details.
		 * @param {Object} stack Tracks traversed `object` and `other` objects.
		 * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.
		 */
		function equalObjects(object, other, equalFunc, customizer, bitmask, stack) {
		  var isPartial = bitmask & PARTIAL_COMPARE_FLAG,
		      objProps = keys(object),
		      objLength = objProps.length,
		      othProps = keys(other),
		      othLength = othProps.length;

		  if (objLength != othLength && !isPartial) {
		    return false;
		  }
		  var index = objLength;
		  while (index--) {
		    var key = objProps[index];
		    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {
		      return false;
		    }
		  }
		  // Assume cyclic values are equal.
		  var stacked = stack.get(object);
		  if (stacked && stack.get(other)) {
		    return stacked == other;
		  }
		  var result = true;
		  stack.set(object, other);
		  stack.set(other, object);

		  var skipCtor = isPartial;
		  while (++index < objLength) {
		    key = objProps[index];
		    var objValue = object[key],
		        othValue = other[key];

		    if (customizer) {
		      var compared = isPartial
		        ? customizer(othValue, objValue, key, other, object, stack)
		        : customizer(objValue, othValue, key, object, other, stack);
		    }
		    // Recursively compare objects (susceptible to call stack limits).
		    if (!(compared === undefined
		          ? (objValue === othValue || equalFunc(objValue, othValue, customizer, bitmask, stack))
		          : compared
		        )) {
		      result = false;
		      break;
		    }
		    skipCtor || (skipCtor = key == 'constructor');
		  }
		  if (result && !skipCtor) {
		    var objCtor = object.constructor,
		        othCtor = other.constructor;

		    // Non `Object` object instances with different constructors are not equal.
		    if (objCtor != othCtor &&
		        ('constructor' in object && 'constructor' in other) &&
		        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&
		          typeof othCtor == 'function' && othCtor instanceof othCtor)) {
		      result = false;
		    }
		  }
		  stack['delete'](object);
		  stack['delete'](other);
		  return result;
		}

		/**
		 * Gets the data for `map`.
		 *
		 * @private
		 * @param {Object} map The map to query.
		 * @param {string} key The reference key.
		 * @returns {*} Returns the map data.
		 */
		function getMapData(map, key) {
		  var data = map.__data__;
		  return isKeyable(key)
		    ? data[typeof key == 'string' ? 'string' : 'hash']
		    : data.map;
		}

		/**
		 * Gets the property names, values, and compare flags of `object`.
		 *
		 * @private
		 * @param {Object} object The object to query.
		 * @returns {Array} Returns the match data of `object`.
		 */
		function getMatchData(object) {
		  var result = keys(object),
		      length = result.length;

		  while (length--) {
		    var key = result[length],
		        value = object[key];

		    result[length] = [key, value, isStrictComparable(value)];
		  }
		  return result;
		}

		/**
		 * Gets the native function at `key` of `object`.
		 *
		 * @private
		 * @param {Object} object The object to query.
		 * @param {string} key The key of the method to get.
		 * @returns {*} Returns the function if it's native, else `undefined`.
		 */
		function getNative(object, key) {
		  var value = getValue(object, key);
		  return baseIsNative(value) ? value : undefined;
		}

		/**
		 * Gets the `toStringTag` of `value`.
		 *
		 * @private
		 * @param {*} value The value to query.
		 * @returns {string} Returns the `toStringTag`.
		 */
		var getTag = baseGetTag;

		// Fallback for data views, maps, sets, and weak maps in IE 11,
		// for data views in Edge < 14, and promises in Node.js.
		if ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||
		    (Map && getTag(new Map) != mapTag) ||
		    (Promise && getTag(Promise.resolve()) != promiseTag) ||
		    (Set && getTag(new Set) != setTag) ||
		    (WeakMap && getTag(new WeakMap) != weakMapTag)) {
		  getTag = function(value) {
		    var result = objectToString.call(value),
		        Ctor = result == objectTag ? value.constructor : undefined,
		        ctorString = Ctor ? toSource(Ctor) : undefined;

		    if (ctorString) {
		      switch (ctorString) {
		        case dataViewCtorString: return dataViewTag;
		        case mapCtorString: return mapTag;
		        case promiseCtorString: return promiseTag;
		        case setCtorString: return setTag;
		        case weakMapCtorString: return weakMapTag;
		      }
		    }
		    return result;
		  };
		}

		/**
		 * Checks if `path` exists on `object`.
		 *
		 * @private
		 * @param {Object} object The object to query.
		 * @param {Array|string} path The path to check.
		 * @param {Function} hasFunc The function to check properties.
		 * @returns {boolean} Returns `true` if `path` exists, else `false`.
		 */
		function hasPath(object, path, hasFunc) {
		  path = isKey(path, object) ? [path] : castPath(path);

		  var result,
		      index = -1,
		      length = path.length;

		  while (++index < length) {
		    var key = toKey(path[index]);
		    if (!(result = object != null && hasFunc(object, key))) {
		      break;
		    }
		    object = object[key];
		  }
		  if (result) {
		    return result;
		  }
		  var length = object ? object.length : 0;
		  return !!length && isLength(length) && isIndex(key, length) &&
		    (isArray(object) || isArguments(object));
		}

		/**
		 * Checks if `value` is a valid array-like index.
		 *
		 * @private
		 * @param {*} value The value to check.
		 * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.
		 * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.
		 */
		function isIndex(value, length) {
		  length = length == null ? MAX_SAFE_INTEGER : length;
		  return !!length &&
		    (typeof value == 'number' || reIsUint.test(value)) &&
		    (value > -1 && value % 1 == 0 && value < length);
		}

		/**
		 * Checks if `value` is a property name and not a property path.
		 *
		 * @private
		 * @param {*} value The value to check.
		 * @param {Object} [object] The object to query keys on.
		 * @returns {boolean} Returns `true` if `value` is a property name, else `false`.
		 */
		function isKey(value, object) {
		  if (isArray(value)) {
		    return false;
		  }
		  var type = typeof value;
		  if (type == 'number' || type == 'symbol' || type == 'boolean' ||
		      value == null || isSymbol(value)) {
		    return true;
		  }
		  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||
		    (object != null && value in Object(object));
		}

		/**
		 * Checks if `value` is suitable for use as unique object key.
		 *
		 * @private
		 * @param {*} value The value to check.
		 * @returns {boolean} Returns `true` if `value` is suitable, else `false`.
		 */
		function isKeyable(value) {
		  var type = typeof value;
		  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')
		    ? (value !== '__proto__')
		    : (value === null);
		}

		/**
		 * Checks if `func` has its source masked.
		 *
		 * @private
		 * @param {Function} func The function to check.
		 * @returns {boolean} Returns `true` if `func` is masked, else `false`.
		 */
		function isMasked(func) {
		  return !!maskSrcKey && (maskSrcKey in func);
		}

		/**
		 * Checks if `value` is likely a prototype object.
		 *
		 * @private
		 * @param {*} value The value to check.
		 * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.
		 */
		function isPrototype(value) {
		  var Ctor = value && value.constructor,
		      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;

		  return value === proto;
		}

		/**
		 * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.
		 *
		 * @private
		 * @param {*} value The value to check.
		 * @returns {boolean} Returns `true` if `value` if suitable for strict
		 *  equality comparisons, else `false`.
		 */
		function isStrictComparable(value) {
		  return value === value && !isObject(value);
		}

		/**
		 * A specialized version of `matchesProperty` for source values suitable
		 * for strict equality comparisons, i.e. `===`.
		 *
		 * @private
		 * @param {string} key The key of the property to get.
		 * @param {*} srcValue The value to match.
		 * @returns {Function} Returns the new spec function.
		 */
		function matchesStrictComparable(key, srcValue) {
		  return function(object) {
		    if (object == null) {
		      return false;
		    }
		    return object[key] === srcValue &&
		      (srcValue !== undefined || (key in Object(object)));
		  };
		}

		/**
		 * Converts `string` to a property path array.
		 *
		 * @private
		 * @param {string} string The string to convert.
		 * @returns {Array} Returns the property path array.
		 */
		var stringToPath = memoize(function(string) {
		  string = toString(string);

		  var result = [];
		  if (reLeadingDot.test(string)) {
		    result.push('');
		  }
		  string.replace(rePropName, function(match, number, quote, string) {
		    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));
		  });
		  return result;
		});

		/**
		 * Converts `value` to a string key if it's not a string or symbol.
		 *
		 * @private
		 * @param {*} value The value to inspect.
		 * @returns {string|symbol} Returns the key.
		 */
		function toKey(value) {
		  if (typeof value == 'string' || isSymbol(value)) {
		    return value;
		  }
		  var result = (value + '');
		  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;
		}

		/**
		 * Converts `func` to its source code.
		 *
		 * @private
		 * @param {Function} func The function to process.
		 * @returns {string} Returns the source code.
		 */
		function toSource(func) {
		  if (func != null) {
		    try {
		      return funcToString.call(func);
		    } catch (e) {}
		    try {
		      return (func + '');
		    } catch (e) {}
		  }
		  return '';
		}

		/**
		 * Creates a function that memoizes the result of `func`. If `resolver` is
		 * provided, it determines the cache key for storing the result based on the
		 * arguments provided to the memoized function. By default, the first argument
		 * provided to the memoized function is used as the map cache key. The `func`
		 * is invoked with the `this` binding of the memoized function.
		 *
		 * **Note:** The cache is exposed as the `cache` property on the memoized
		 * function. Its creation may be customized by replacing the `_.memoize.Cache`
		 * constructor with one whose instances implement the
		 * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)
		 * method interface of `delete`, `get`, `has`, and `set`.
		 *
		 * @static
		 * @memberOf _
		 * @since 0.1.0
		 * @category Function
		 * @param {Function} func The function to have its output memoized.
		 * @param {Function} [resolver] The function to resolve the cache key.
		 * @returns {Function} Returns the new memoized function.
		 * @example
		 *
		 * var object = { 'a': 1, 'b': 2 };
		 * var other = { 'c': 3, 'd': 4 };
		 *
		 * var values = _.memoize(_.values);
		 * values(object);
		 * // => [1, 2]
		 *
		 * values(other);
		 * // => [3, 4]
		 *
		 * object.a = 2;
		 * values(object);
		 * // => [1, 2]
		 *
		 * // Modify the result cache.
		 * values.cache.set(object, ['a', 'b']);
		 * values(object);
		 * // => ['a', 'b']
		 *
		 * // Replace `_.memoize.Cache`.
		 * _.memoize.Cache = WeakMap;
		 */
		function memoize(func, resolver) {
		  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {
		    throw new TypeError(FUNC_ERROR_TEXT);
		  }
		  var memoized = function() {
		    var args = arguments,
		        key = resolver ? resolver.apply(this, args) : args[0],
		        cache = memoized.cache;

		    if (cache.has(key)) {
		      return cache.get(key);
		    }
		    var result = func.apply(this, args);
		    memoized.cache = cache.set(key, result);
		    return result;
		  };
		  memoized.cache = new (memoize.Cache || MapCache);
		  return memoized;
		}

		// Assign cache to `_.memoize`.
		memoize.Cache = MapCache;

		/**
		 * Performs a
		 * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
		 * comparison between two values to determine if they are equivalent.
		 *
		 * @static
		 * @memberOf _
		 * @since 4.0.0
		 * @category Lang
		 * @param {*} value The value to compare.
		 * @param {*} other The other value to compare.
		 * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
		 * @example
		 *
		 * var object = { 'a': 1 };
		 * var other = { 'a': 1 };
		 *
		 * _.eq(object, object);
		 * // => true
		 *
		 * _.eq(object, other);
		 * // => false
		 *
		 * _.eq('a', 'a');
		 * // => true
		 *
		 * _.eq('a', Object('a'));
		 * // => false
		 *
		 * _.eq(NaN, NaN);
		 * // => true
		 */
		function eq(value, other) {
		  return value === other || (value !== value && other !== other);
		}

		/**
		 * Checks if `value` is likely an `arguments` object.
		 *
		 * @static
		 * @memberOf _
		 * @since 0.1.0
		 * @category Lang
		 * @param {*} value The value to check.
		 * @returns {boolean} Returns `true` if `value` is an `arguments` object,
		 *  else `false`.
		 * @example
		 *
		 * _.isArguments(function() { return arguments; }());
		 * // => true
		 *
		 * _.isArguments([1, 2, 3]);
		 * // => false
		 */
		function isArguments(value) {
		  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.
		  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&
		    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);
		}

		/**
		 * Checks if `value` is classified as an `Array` object.
		 *
		 * @static
		 * @memberOf _
		 * @since 0.1.0
		 * @category Lang
		 * @param {*} value The value to check.
		 * @returns {boolean} Returns `true` if `value` is an array, else `false`.
		 * @example
		 *
		 * _.isArray([1, 2, 3]);
		 * // => true
		 *
		 * _.isArray(document.body.children);
		 * // => false
		 *
		 * _.isArray('abc');
		 * // => false
		 *
		 * _.isArray(_.noop);
		 * // => false
		 */
		var isArray = Array.isArray;

		/**
		 * Checks if `value` is array-like. A value is considered array-like if it's
		 * not a function and has a `value.length` that's an integer greater than or
		 * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.
		 *
		 * @static
		 * @memberOf _
		 * @since 4.0.0
		 * @category Lang
		 * @param {*} value The value to check.
		 * @returns {boolean} Returns `true` if `value` is array-like, else `false`.
		 * @example
		 *
		 * _.isArrayLike([1, 2, 3]);
		 * // => true
		 *
		 * _.isArrayLike(document.body.children);
		 * // => true
		 *
		 * _.isArrayLike('abc');
		 * // => true
		 *
		 * _.isArrayLike(_.noop);
		 * // => false
		 */
		function isArrayLike(value) {
		  return value != null && isLength(value.length) && !isFunction(value);
		}

		/**
		 * This method is like `_.isArrayLike` except that it also checks if `value`
		 * is an object.
		 *
		 * @static
		 * @memberOf _
		 * @since 4.0.0
		 * @category Lang
		 * @param {*} value The value to check.
		 * @returns {boolean} Returns `true` if `value` is an array-like object,
		 *  else `false`.
		 * @example
		 *
		 * _.isArrayLikeObject([1, 2, 3]);
		 * // => true
		 *
		 * _.isArrayLikeObject(document.body.children);
		 * // => true
		 *
		 * _.isArrayLikeObject('abc');
		 * // => false
		 *
		 * _.isArrayLikeObject(_.noop);
		 * // => false
		 */
		function isArrayLikeObject(value) {
		  return isObjectLike(value) && isArrayLike(value);
		}

		/**
		 * Checks if `value` is classified as a `Function` object.
		 *
		 * @static
		 * @memberOf _
		 * @since 0.1.0
		 * @category Lang
		 * @param {*} value The value to check.
		 * @returns {boolean} Returns `true` if `value` is a function, else `false`.
		 * @example
		 *
		 * _.isFunction(_);
		 * // => true
		 *
		 * _.isFunction(/abc/);
		 * // => false
		 */
		function isFunction(value) {
		  // The use of `Object#toString` avoids issues with the `typeof` operator
		  // in Safari 8-9 which returns 'object' for typed array and other constructors.
		  var tag = isObject(value) ? objectToString.call(value) : '';
		  return tag == funcTag || tag == genTag;
		}

		/**
		 * Checks if `value` is a valid array-like length.
		 *
		 * **Note:** This method is loosely based on
		 * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).
		 *
		 * @static
		 * @memberOf _
		 * @since 4.0.0
		 * @category Lang
		 * @param {*} value The value to check.
		 * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.
		 * @example
		 *
		 * _.isLength(3);
		 * // => true
		 *
		 * _.isLength(Number.MIN_VALUE);
		 * // => false
		 *
		 * _.isLength(Infinity);
		 * // => false
		 *
		 * _.isLength('3');
		 * // => false
		 */
		function isLength(value) {
		  return typeof value == 'number' &&
		    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
		}

		/**
		 * Checks if `value` is the
		 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
		 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
		 *
		 * @static
		 * @memberOf _
		 * @since 0.1.0
		 * @category Lang
		 * @param {*} value The value to check.
		 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
		 * @example
		 *
		 * _.isObject({});
		 * // => true
		 *
		 * _.isObject([1, 2, 3]);
		 * // => true
		 *
		 * _.isObject(_.noop);
		 * // => true
		 *
		 * _.isObject(null);
		 * // => false
		 */
		function isObject(value) {
		  var type = typeof value;
		  return !!value && (type == 'object' || type == 'function');
		}

		/**
		 * Checks if `value` is object-like. A value is object-like if it's not `null`
		 * and has a `typeof` result of "object".
		 *
		 * @static
		 * @memberOf _
		 * @since 4.0.0
		 * @category Lang
		 * @param {*} value The value to check.
		 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
		 * @example
		 *
		 * _.isObjectLike({});
		 * // => true
		 *
		 * _.isObjectLike([1, 2, 3]);
		 * // => true
		 *
		 * _.isObjectLike(_.noop);
		 * // => false
		 *
		 * _.isObjectLike(null);
		 * // => false
		 */
		function isObjectLike(value) {
		  return !!value && typeof value == 'object';
		}

		/**
		 * Checks if `value` is classified as a `Symbol` primitive or object.
		 *
		 * @static
		 * @memberOf _
		 * @since 4.0.0
		 * @category Lang
		 * @param {*} value The value to check.
		 * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
		 * @example
		 *
		 * _.isSymbol(Symbol.iterator);
		 * // => true
		 *
		 * _.isSymbol('abc');
		 * // => false
		 */
		function isSymbol(value) {
		  return typeof value == 'symbol' ||
		    (isObjectLike(value) && objectToString.call(value) == symbolTag);
		}

		/**
		 * Checks if `value` is classified as a typed array.
		 *
		 * @static
		 * @memberOf _
		 * @since 3.0.0
		 * @category Lang
		 * @param {*} value The value to check.
		 * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.
		 * @example
		 *
		 * _.isTypedArray(new Uint8Array);
		 * // => true
		 *
		 * _.isTypedArray([]);
		 * // => false
		 */
		var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;

		/**
		 * Converts `value` to a string. An empty string is returned for `null`
		 * and `undefined` values. The sign of `-0` is preserved.
		 *
		 * @static
		 * @memberOf _
		 * @since 4.0.0
		 * @category Lang
		 * @param {*} value The value to process.
		 * @returns {string} Returns the string.
		 * @example
		 *
		 * _.toString(null);
		 * // => ''
		 *
		 * _.toString(-0);
		 * // => '-0'
		 *
		 * _.toString([1, 2, 3]);
		 * // => '1,2,3'
		 */
		function toString(value) {
		  return value == null ? '' : baseToString(value);
		}

		/**
		 * Gets the value at `path` of `object`. If the resolved value is
		 * `undefined`, the `defaultValue` is returned in its place.
		 *
		 * @static
		 * @memberOf _
		 * @since 3.7.0
		 * @category Object
		 * @param {Object} object The object to query.
		 * @param {Array|string} path The path of the property to get.
		 * @param {*} [defaultValue] The value returned for `undefined` resolved values.
		 * @returns {*} Returns the resolved value.
		 * @example
		 *
		 * var object = { 'a': [{ 'b': { 'c': 3 } }] };
		 *
		 * _.get(object, 'a[0].b.c');
		 * // => 3
		 *
		 * _.get(object, ['a', '0', 'b', 'c']);
		 * // => 3
		 *
		 * _.get(object, 'a.b.c', 'default');
		 * // => 'default'
		 */
		function get(object, path, defaultValue) {
		  var result = object == null ? undefined : baseGet(object, path);
		  return result === undefined ? defaultValue : result;
		}

		/**
		 * Checks if `path` is a direct or inherited property of `object`.
		 *
		 * @static
		 * @memberOf _
		 * @since 4.0.0
		 * @category Object
		 * @param {Object} object The object to query.
		 * @param {Array|string} path The path to check.
		 * @returns {boolean} Returns `true` if `path` exists, else `false`.
		 * @example
		 *
		 * var object = _.create({ 'a': _.create({ 'b': 2 }) });
		 *
		 * _.hasIn(object, 'a');
		 * // => true
		 *
		 * _.hasIn(object, 'a.b');
		 * // => true
		 *
		 * _.hasIn(object, ['a', 'b']);
		 * // => true
		 *
		 * _.hasIn(object, 'b');
		 * // => false
		 */
		function hasIn(object, path) {
		  return object != null && hasPath(object, path, baseHasIn);
		}

		/**
		 * Creates an array of the own enumerable property names of `object`.
		 *
		 * **Note:** Non-object values are coerced to objects. See the
		 * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)
		 * for more details.
		 *
		 * @static
		 * @since 0.1.0
		 * @memberOf _
		 * @category Object
		 * @param {Object} object The object to query.
		 * @returns {Array} Returns the array of property names.
		 * @example
		 *
		 * function Foo() {
		 *   this.a = 1;
		 *   this.b = 2;
		 * }
		 *
		 * Foo.prototype.c = 3;
		 *
		 * _.keys(new Foo);
		 * // => ['a', 'b'] (iteration order is not guaranteed)
		 *
		 * _.keys('hi');
		 * // => ['0', '1']
		 */
		function keys(object) {
		  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);
		}

		/**
		 * An alternative to `_.reduce`; this method transforms `object` to a new
		 * `accumulator` object which is the result of running each of its own
		 * enumerable string keyed properties thru `iteratee`, with each invocation
		 * potentially mutating the `accumulator` object. If `accumulator` is not
		 * provided, a new object with the same `[[Prototype]]` will be used. The
		 * iteratee is invoked with four arguments: (accumulator, value, key, object).
		 * Iteratee functions may exit iteration early by explicitly returning `false`.
		 *
		 * @static
		 * @memberOf _
		 * @since 1.3.0
		 * @category Object
		 * @param {Object} object The object to iterate over.
		 * @param {Function} [iteratee=_.identity] The function invoked per iteration.
		 * @param {*} [accumulator] The custom accumulator value.
		 * @returns {*} Returns the accumulated value.
		 * @example
		 *
		 * _.transform([2, 3, 4], function(result, n) {
		 *   result.push(n *= n);
		 *   return n % 2 == 0;
		 * }, []);
		 * // => [4, 9]
		 *
		 * _.transform({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {
		 *   (result[value] || (result[value] = [])).push(key);
		 * }, {});
		 * // => { '1': ['a', 'c'], '2': ['b'] }
		 */
		function transform(object, iteratee, accumulator) {
		  var isArr = isArray(object) || isTypedArray(object);
		  iteratee = baseIteratee(iteratee);

		  if (accumulator == null) {
		    if (isArr || isObject(object)) {
		      var Ctor = object.constructor;
		      if (isArr) {
		        accumulator = isArray(object) ? new Ctor : [];
		      } else {
		        accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};
		      }
		    } else {
		      accumulator = {};
		    }
		  }
		  (isArr ? arrayEach : baseForOwn)(object, function(value, index, object) {
		    return iteratee(accumulator, value, index, object);
		  });
		  return accumulator;
		}

		/**
		 * This method returns the first argument it receives.
		 *
		 * @static
		 * @since 0.1.0
		 * @memberOf _
		 * @category Util
		 * @param {*} value Any value.
		 * @returns {*} Returns `value`.
		 * @example
		 *
		 * var object = { 'a': 1 };
		 *
		 * console.log(_.identity(object) === object);
		 * // => true
		 */
		function identity(value) {
		  return value;
		}

		/**
		 * Creates a function that returns the value at `path` of a given object.
		 *
		 * @static
		 * @memberOf _
		 * @since 2.4.0
		 * @category Util
		 * @param {Array|string} path The path of the property to get.
		 * @returns {Function} Returns the new accessor function.
		 * @example
		 *
		 * var objects = [
		 *   { 'a': { 'b': 2 } },
		 *   { 'a': { 'b': 1 } }
		 * ];
		 *
		 * _.map(objects, _.property('a.b'));
		 * // => [2, 1]
		 *
		 * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');
		 * // => [1, 2]
		 */
		function property(path) {
		  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);
		}

		module.exports = transform; 
	} (_virtual_index3_mjs__WEBPACK_IMPORTED_MODULE_1__.__module, _virtual_index3_mjs__WEBPACK_IMPORTED_MODULE_1__.__module.exports));
	return _virtual_index3_mjs__WEBPACK_IMPORTED_MODULE_1__.__module.exports;
}




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/lib/tslib/tslib.es6.mjs":
/*!*******************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/lib/tslib/tslib.es6.mjs ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __rest: () => (/* binding */ __rest)
/* harmony export */ });
/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/* global Reflect, Promise, SuppressedError, Symbol, Iterator */


function __rest(s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
}

typeof SuppressedError === "function" ? SuppressedError : function (error, suppressed, message) {
    var e = new Error(message);
    return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
};




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/lib/uuid/dist/esm-browser/native.mjs":
/*!********************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/lib/uuid/dist/esm-browser/native.mjs ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ native)
/* harmony export */ });
var randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);
var native = {
  randomUUID
};




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/lib/uuid/dist/esm-browser/rng.mjs":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/lib/uuid/dist/esm-browser/rng.mjs ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ rng)
/* harmony export */ });
// Unique ID creation requires a high quality random # generator. In the browser we therefore
// require the crypto API and do not support built-in fallback to lower quality random number
// generators (like Math.random()).

var getRandomValues;
var rnds8 = new Uint8Array(16);
function rng() {
  // lazy load so that environments that need to polyfill have a chance to do so
  if (!getRandomValues) {
    // getRandomValues needs to be invoked in a context where "this" is a Crypto implementation.
    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);
    if (!getRandomValues) {
      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');
    }
  }
  return getRandomValues(rnds8);
}




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/lib/uuid/dist/esm-browser/stringify.mjs":
/*!***********************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/lib/uuid/dist/esm-browser/stringify.mjs ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   unsafeStringify: () => (/* binding */ unsafeStringify)
/* harmony export */ });
/**
 * Convert array of 16 byte values to UUID string format of the form:
 * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
 */
var byteToHex = [];
for (var i = 0; i < 256; ++i) {
  byteToHex.push((i + 0x100).toString(16).slice(1));
}
function unsafeStringify(arr, offset = 0) {
  // Note: Be careful editing this code!  It's been tuned for performance
  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434
  //
  // Note to future-self: No, you can't remove the `toLowerCase()` call.
  // REF: https://github.com/uuidjs/uuid/pull/677#issuecomment-1757351351
  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();
}




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/lib/uuid/dist/esm-browser/v4.mjs":
/*!****************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/lib/uuid/dist/esm-browser/v4.mjs ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ v4)
/* harmony export */ });
/* harmony import */ var _native_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./native.mjs */ "./node_modules/@discord/embedded-app-sdk/output/lib/uuid/dist/esm-browser/native.mjs");
/* harmony import */ var _rng_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./rng.mjs */ "./node_modules/@discord/embedded-app-sdk/output/lib/uuid/dist/esm-browser/rng.mjs");
/* harmony import */ var _stringify_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./stringify.mjs */ "./node_modules/@discord/embedded-app-sdk/output/lib/uuid/dist/esm-browser/stringify.mjs");




function v4(options, buf, offset) {
  if (_native_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].randomUUID && !buf && !options) {
    return _native_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].randomUUID();
  }
  options = options || {};
  var rnds = options.random || (options.rng || _rng_mjs__WEBPACK_IMPORTED_MODULE_1__["default"])();

  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`
  rnds[6] = rnds[6] & 0x0f | 0x40;
  rnds[8] = rnds[8] & 0x3f | 0x80;
  return (0,_stringify_mjs__WEBPACK_IMPORTED_MODULE_2__.unsafeStringify)(rnds);
}




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/lib/zod/lib/index.mjs":
/*!*****************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/lib/zod/lib/index.mjs ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BRAND: () => (/* binding */ BRAND),
/* harmony export */   DIRTY: () => (/* binding */ DIRTY),
/* harmony export */   EMPTY_PATH: () => (/* binding */ EMPTY_PATH),
/* harmony export */   INVALID: () => (/* binding */ INVALID),
/* harmony export */   NEVER: () => (/* binding */ NEVER),
/* harmony export */   OK: () => (/* binding */ OK),
/* harmony export */   ParseStatus: () => (/* binding */ ParseStatus),
/* harmony export */   Schema: () => (/* binding */ ZodType),
/* harmony export */   ZodAny: () => (/* binding */ ZodAny),
/* harmony export */   ZodArray: () => (/* binding */ ZodArray),
/* harmony export */   ZodBigInt: () => (/* binding */ ZodBigInt),
/* harmony export */   ZodBoolean: () => (/* binding */ ZodBoolean),
/* harmony export */   ZodBranded: () => (/* binding */ ZodBranded),
/* harmony export */   ZodCatch: () => (/* binding */ ZodCatch),
/* harmony export */   ZodDate: () => (/* binding */ ZodDate),
/* harmony export */   ZodDefault: () => (/* binding */ ZodDefault),
/* harmony export */   ZodDiscriminatedUnion: () => (/* binding */ ZodDiscriminatedUnion),
/* harmony export */   ZodEffects: () => (/* binding */ ZodEffects),
/* harmony export */   ZodEnum: () => (/* binding */ ZodEnum),
/* harmony export */   ZodError: () => (/* binding */ ZodError),
/* harmony export */   ZodFirstPartyTypeKind: () => (/* binding */ ZodFirstPartyTypeKind),
/* harmony export */   ZodFunction: () => (/* binding */ ZodFunction),
/* harmony export */   ZodIntersection: () => (/* binding */ ZodIntersection),
/* harmony export */   ZodIssueCode: () => (/* binding */ ZodIssueCode),
/* harmony export */   ZodLazy: () => (/* binding */ ZodLazy),
/* harmony export */   ZodLiteral: () => (/* binding */ ZodLiteral),
/* harmony export */   ZodMap: () => (/* binding */ ZodMap),
/* harmony export */   ZodNaN: () => (/* binding */ ZodNaN),
/* harmony export */   ZodNativeEnum: () => (/* binding */ ZodNativeEnum),
/* harmony export */   ZodNever: () => (/* binding */ ZodNever),
/* harmony export */   ZodNull: () => (/* binding */ ZodNull),
/* harmony export */   ZodNullable: () => (/* binding */ ZodNullable),
/* harmony export */   ZodNumber: () => (/* binding */ ZodNumber),
/* harmony export */   ZodObject: () => (/* binding */ ZodObject),
/* harmony export */   ZodOptional: () => (/* binding */ ZodOptional),
/* harmony export */   ZodParsedType: () => (/* binding */ ZodParsedType),
/* harmony export */   ZodPipeline: () => (/* binding */ ZodPipeline),
/* harmony export */   ZodPromise: () => (/* binding */ ZodPromise),
/* harmony export */   ZodReadonly: () => (/* binding */ ZodReadonly),
/* harmony export */   ZodRecord: () => (/* binding */ ZodRecord),
/* harmony export */   ZodSchema: () => (/* binding */ ZodType),
/* harmony export */   ZodSet: () => (/* binding */ ZodSet),
/* harmony export */   ZodString: () => (/* binding */ ZodString),
/* harmony export */   ZodSymbol: () => (/* binding */ ZodSymbol),
/* harmony export */   ZodTransformer: () => (/* binding */ ZodEffects),
/* harmony export */   ZodTuple: () => (/* binding */ ZodTuple),
/* harmony export */   ZodType: () => (/* binding */ ZodType),
/* harmony export */   ZodUndefined: () => (/* binding */ ZodUndefined),
/* harmony export */   ZodUnion: () => (/* binding */ ZodUnion),
/* harmony export */   ZodUnknown: () => (/* binding */ ZodUnknown),
/* harmony export */   ZodVoid: () => (/* binding */ ZodVoid),
/* harmony export */   addIssueToContext: () => (/* binding */ addIssueToContext),
/* harmony export */   any: () => (/* binding */ anyType),
/* harmony export */   array: () => (/* binding */ arrayType),
/* harmony export */   bigint: () => (/* binding */ bigIntType),
/* harmony export */   boolean: () => (/* binding */ booleanType),
/* harmony export */   coerce: () => (/* binding */ coerce),
/* harmony export */   custom: () => (/* binding */ custom),
/* harmony export */   date: () => (/* binding */ dateType),
/* harmony export */   datetimeRegex: () => (/* binding */ datetimeRegex),
/* harmony export */   "default": () => (/* binding */ z),
/* harmony export */   defaultErrorMap: () => (/* binding */ errorMap),
/* harmony export */   discriminatedUnion: () => (/* binding */ discriminatedUnionType),
/* harmony export */   effect: () => (/* binding */ effectsType),
/* harmony export */   "enum": () => (/* binding */ enumType),
/* harmony export */   "function": () => (/* binding */ functionType),
/* harmony export */   getErrorMap: () => (/* binding */ getErrorMap),
/* harmony export */   getParsedType: () => (/* binding */ getParsedType),
/* harmony export */   "instanceof": () => (/* binding */ instanceOfType),
/* harmony export */   intersection: () => (/* binding */ intersectionType),
/* harmony export */   isAborted: () => (/* binding */ isAborted),
/* harmony export */   isAsync: () => (/* binding */ isAsync),
/* harmony export */   isDirty: () => (/* binding */ isDirty),
/* harmony export */   isValid: () => (/* binding */ isValid),
/* harmony export */   late: () => (/* binding */ late),
/* harmony export */   lazy: () => (/* binding */ lazyType),
/* harmony export */   literal: () => (/* binding */ literalType),
/* harmony export */   makeIssue: () => (/* binding */ makeIssue),
/* harmony export */   map: () => (/* binding */ mapType),
/* harmony export */   nan: () => (/* binding */ nanType),
/* harmony export */   nativeEnum: () => (/* binding */ nativeEnumType),
/* harmony export */   never: () => (/* binding */ neverType),
/* harmony export */   "null": () => (/* binding */ nullType),
/* harmony export */   nullable: () => (/* binding */ nullableType),
/* harmony export */   number: () => (/* binding */ numberType),
/* harmony export */   object: () => (/* binding */ objectType),
/* harmony export */   objectUtil: () => (/* binding */ objectUtil),
/* harmony export */   oboolean: () => (/* binding */ oboolean),
/* harmony export */   onumber: () => (/* binding */ onumber),
/* harmony export */   optional: () => (/* binding */ optionalType),
/* harmony export */   ostring: () => (/* binding */ ostring),
/* harmony export */   pipeline: () => (/* binding */ pipelineType),
/* harmony export */   preprocess: () => (/* binding */ preprocessType),
/* harmony export */   promise: () => (/* binding */ promiseType),
/* harmony export */   quotelessJson: () => (/* binding */ quotelessJson),
/* harmony export */   record: () => (/* binding */ recordType),
/* harmony export */   set: () => (/* binding */ setType),
/* harmony export */   setErrorMap: () => (/* binding */ setErrorMap),
/* harmony export */   strictObject: () => (/* binding */ strictObjectType),
/* harmony export */   string: () => (/* binding */ stringType),
/* harmony export */   symbol: () => (/* binding */ symbolType),
/* harmony export */   transformer: () => (/* binding */ effectsType),
/* harmony export */   tuple: () => (/* binding */ tupleType),
/* harmony export */   undefined: () => (/* binding */ undefinedType),
/* harmony export */   union: () => (/* binding */ unionType),
/* harmony export */   unknown: () => (/* binding */ unknownType),
/* harmony export */   util: () => (/* binding */ util),
/* harmony export */   "void": () => (/* binding */ voidType),
/* harmony export */   z: () => (/* binding */ z)
/* harmony export */ });
var util;
(function (util) {
    util.assertEqual = (val) => val;
    function assertIs(_arg) { }
    util.assertIs = assertIs;
    function assertNever(_x) {
        throw new Error();
    }
    util.assertNever = assertNever;
    util.arrayToEnum = (items) => {
        const obj = {};
        for (const item of items) {
            obj[item] = item;
        }
        return obj;
    };
    util.getValidEnumValues = (obj) => {
        const validKeys = util.objectKeys(obj).filter((k) => typeof obj[obj[k]] !== "number");
        const filtered = {};
        for (const k of validKeys) {
            filtered[k] = obj[k];
        }
        return util.objectValues(filtered);
    };
    util.objectValues = (obj) => {
        return util.objectKeys(obj).map(function (e) {
            return obj[e];
        });
    };
    util.objectKeys = typeof Object.keys === "function" // eslint-disable-line ban/ban
        ? (obj) => Object.keys(obj) // eslint-disable-line ban/ban
        : (object) => {
            const keys = [];
            for (const key in object) {
                if (Object.prototype.hasOwnProperty.call(object, key)) {
                    keys.push(key);
                }
            }
            return keys;
        };
    util.find = (arr, checker) => {
        for (const item of arr) {
            if (checker(item))
                return item;
        }
        return undefined;
    };
    util.isInteger = typeof Number.isInteger === "function"
        ? (val) => Number.isInteger(val) // eslint-disable-line ban/ban
        : (val) => typeof val === "number" && isFinite(val) && Math.floor(val) === val;
    function joinValues(array, separator = " | ") {
        return array
            .map((val) => (typeof val === "string" ? `'${val}'` : val))
            .join(separator);
    }
    util.joinValues = joinValues;
    util.jsonStringifyReplacer = (_, value) => {
        if (typeof value === "bigint") {
            return value.toString();
        }
        return value;
    };
})(util || (util = {}));
var objectUtil;
(function (objectUtil) {
    objectUtil.mergeShapes = (first, second) => {
        return {
            ...first,
            ...second, // second overwrites first
        };
    };
})(objectUtil || (objectUtil = {}));
const ZodParsedType = util.arrayToEnum([
    "string",
    "nan",
    "number",
    "integer",
    "float",
    "boolean",
    "date",
    "bigint",
    "symbol",
    "function",
    "undefined",
    "null",
    "array",
    "object",
    "unknown",
    "promise",
    "void",
    "never",
    "map",
    "set",
]);
const getParsedType = (data) => {
    const t = typeof data;
    switch (t) {
        case "undefined":
            return ZodParsedType.undefined;
        case "string":
            return ZodParsedType.string;
        case "number":
            return isNaN(data) ? ZodParsedType.nan : ZodParsedType.number;
        case "boolean":
            return ZodParsedType.boolean;
        case "function":
            return ZodParsedType.function;
        case "bigint":
            return ZodParsedType.bigint;
        case "symbol":
            return ZodParsedType.symbol;
        case "object":
            if (Array.isArray(data)) {
                return ZodParsedType.array;
            }
            if (data === null) {
                return ZodParsedType.null;
            }
            if (data.then &&
                typeof data.then === "function" &&
                data.catch &&
                typeof data.catch === "function") {
                return ZodParsedType.promise;
            }
            if (typeof Map !== "undefined" && data instanceof Map) {
                return ZodParsedType.map;
            }
            if (typeof Set !== "undefined" && data instanceof Set) {
                return ZodParsedType.set;
            }
            if (typeof Date !== "undefined" && data instanceof Date) {
                return ZodParsedType.date;
            }
            return ZodParsedType.object;
        default:
            return ZodParsedType.unknown;
    }
};

const ZodIssueCode = util.arrayToEnum([
    "invalid_type",
    "invalid_literal",
    "custom",
    "invalid_union",
    "invalid_union_discriminator",
    "invalid_enum_value",
    "unrecognized_keys",
    "invalid_arguments",
    "invalid_return_type",
    "invalid_date",
    "invalid_string",
    "too_small",
    "too_big",
    "invalid_intersection_types",
    "not_multiple_of",
    "not_finite",
]);
const quotelessJson = (obj) => {
    const json = JSON.stringify(obj, null, 2);
    return json.replace(/"([^"]+)":/g, "$1:");
};
class ZodError extends Error {
    constructor(issues) {
        super();
        this.issues = [];
        this.addIssue = (sub) => {
            this.issues = [...this.issues, sub];
        };
        this.addIssues = (subs = []) => {
            this.issues = [...this.issues, ...subs];
        };
        const actualProto = new.target.prototype;
        if (Object.setPrototypeOf) {
            // eslint-disable-next-line ban/ban
            Object.setPrototypeOf(this, actualProto);
        }
        else {
            this.__proto__ = actualProto;
        }
        this.name = "ZodError";
        this.issues = issues;
    }
    get errors() {
        return this.issues;
    }
    format(_mapper) {
        const mapper = _mapper ||
            function (issue) {
                return issue.message;
            };
        const fieldErrors = { _errors: [] };
        const processError = (error) => {
            for (const issue of error.issues) {
                if (issue.code === "invalid_union") {
                    issue.unionErrors.map(processError);
                }
                else if (issue.code === "invalid_return_type") {
                    processError(issue.returnTypeError);
                }
                else if (issue.code === "invalid_arguments") {
                    processError(issue.argumentsError);
                }
                else if (issue.path.length === 0) {
                    fieldErrors._errors.push(mapper(issue));
                }
                else {
                    let curr = fieldErrors;
                    let i = 0;
                    while (i < issue.path.length) {
                        const el = issue.path[i];
                        const terminal = i === issue.path.length - 1;
                        if (!terminal) {
                            curr[el] = curr[el] || { _errors: [] };
                            // if (typeof el === "string") {
                            //   curr[el] = curr[el] || { _errors: [] };
                            // } else if (typeof el === "number") {
                            //   const errorArray: any = [];
                            //   errorArray._errors = [];
                            //   curr[el] = curr[el] || errorArray;
                            // }
                        }
                        else {
                            curr[el] = curr[el] || { _errors: [] };
                            curr[el]._errors.push(mapper(issue));
                        }
                        curr = curr[el];
                        i++;
                    }
                }
            }
        };
        processError(this);
        return fieldErrors;
    }
    static assert(value) {
        if (!(value instanceof ZodError)) {
            throw new Error(`Not a ZodError: ${value}`);
        }
    }
    toString() {
        return this.message;
    }
    get message() {
        return JSON.stringify(this.issues, util.jsonStringifyReplacer, 2);
    }
    get isEmpty() {
        return this.issues.length === 0;
    }
    flatten(mapper = (issue) => issue.message) {
        const fieldErrors = {};
        const formErrors = [];
        for (const sub of this.issues) {
            if (sub.path.length > 0) {
                fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];
                fieldErrors[sub.path[0]].push(mapper(sub));
            }
            else {
                formErrors.push(mapper(sub));
            }
        }
        return { formErrors, fieldErrors };
    }
    get formErrors() {
        return this.flatten();
    }
}
ZodError.create = (issues) => {
    const error = new ZodError(issues);
    return error;
};

const errorMap = (issue, _ctx) => {
    let message;
    switch (issue.code) {
        case ZodIssueCode.invalid_type:
            if (issue.received === ZodParsedType.undefined) {
                message = "Required";
            }
            else {
                message = `Expected ${issue.expected}, received ${issue.received}`;
            }
            break;
        case ZodIssueCode.invalid_literal:
            message = `Invalid literal value, expected ${JSON.stringify(issue.expected, util.jsonStringifyReplacer)}`;
            break;
        case ZodIssueCode.unrecognized_keys:
            message = `Unrecognized key(s) in object: ${util.joinValues(issue.keys, ", ")}`;
            break;
        case ZodIssueCode.invalid_union:
            message = `Invalid input`;
            break;
        case ZodIssueCode.invalid_union_discriminator:
            message = `Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;
            break;
        case ZodIssueCode.invalid_enum_value:
            message = `Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;
            break;
        case ZodIssueCode.invalid_arguments:
            message = `Invalid function arguments`;
            break;
        case ZodIssueCode.invalid_return_type:
            message = `Invalid function return type`;
            break;
        case ZodIssueCode.invalid_date:
            message = `Invalid date`;
            break;
        case ZodIssueCode.invalid_string:
            if (typeof issue.validation === "object") {
                if ("includes" in issue.validation) {
                    message = `Invalid input: must include "${issue.validation.includes}"`;
                    if (typeof issue.validation.position === "number") {
                        message = `${message} at one or more positions greater than or equal to ${issue.validation.position}`;
                    }
                }
                else if ("startsWith" in issue.validation) {
                    message = `Invalid input: must start with "${issue.validation.startsWith}"`;
                }
                else if ("endsWith" in issue.validation) {
                    message = `Invalid input: must end with "${issue.validation.endsWith}"`;
                }
                else {
                    util.assertNever(issue.validation);
                }
            }
            else if (issue.validation !== "regex") {
                message = `Invalid ${issue.validation}`;
            }
            else {
                message = "Invalid";
            }
            break;
        case ZodIssueCode.too_small:
            if (issue.type === "array")
                message = `Array must contain ${issue.exact ? "exactly" : issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;
            else if (issue.type === "string")
                message = `String must contain ${issue.exact ? "exactly" : issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;
            else if (issue.type === "number")
                message = `Number must be ${issue.exact
                    ? `exactly equal to `
                    : issue.inclusive
                        ? `greater than or equal to `
                        : `greater than `}${issue.minimum}`;
            else if (issue.type === "date")
                message = `Date must be ${issue.exact
                    ? `exactly equal to `
                    : issue.inclusive
                        ? `greater than or equal to `
                        : `greater than `}${new Date(Number(issue.minimum))}`;
            else
                message = "Invalid input";
            break;
        case ZodIssueCode.too_big:
            if (issue.type === "array")
                message = `Array must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;
            else if (issue.type === "string")
                message = `String must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;
            else if (issue.type === "number")
                message = `Number must be ${issue.exact
                    ? `exactly`
                    : issue.inclusive
                        ? `less than or equal to`
                        : `less than`} ${issue.maximum}`;
            else if (issue.type === "bigint")
                message = `BigInt must be ${issue.exact
                    ? `exactly`
                    : issue.inclusive
                        ? `less than or equal to`
                        : `less than`} ${issue.maximum}`;
            else if (issue.type === "date")
                message = `Date must be ${issue.exact
                    ? `exactly`
                    : issue.inclusive
                        ? `smaller than or equal to`
                        : `smaller than`} ${new Date(Number(issue.maximum))}`;
            else
                message = "Invalid input";
            break;
        case ZodIssueCode.custom:
            message = `Invalid input`;
            break;
        case ZodIssueCode.invalid_intersection_types:
            message = `Intersection results could not be merged`;
            break;
        case ZodIssueCode.not_multiple_of:
            message = `Number must be a multiple of ${issue.multipleOf}`;
            break;
        case ZodIssueCode.not_finite:
            message = "Number must be finite";
            break;
        default:
            message = _ctx.defaultError;
            util.assertNever(issue);
    }
    return { message };
};

let overrideErrorMap = errorMap;
function setErrorMap(map) {
    overrideErrorMap = map;
}
function getErrorMap() {
    return overrideErrorMap;
}

const makeIssue = (params) => {
    const { data, path, errorMaps, issueData } = params;
    const fullPath = [...path, ...(issueData.path || [])];
    const fullIssue = {
        ...issueData,
        path: fullPath,
    };
    if (issueData.message !== undefined) {
        return {
            ...issueData,
            path: fullPath,
            message: issueData.message,
        };
    }
    let errorMessage = "";
    const maps = errorMaps
        .filter((m) => !!m)
        .slice()
        .reverse();
    for (const map of maps) {
        errorMessage = map(fullIssue, { data, defaultError: errorMessage }).message;
    }
    return {
        ...issueData,
        path: fullPath,
        message: errorMessage,
    };
};
const EMPTY_PATH = [];
function addIssueToContext(ctx, issueData) {
    const overrideMap = getErrorMap();
    const issue = makeIssue({
        issueData: issueData,
        data: ctx.data,
        path: ctx.path,
        errorMaps: [
            ctx.common.contextualErrorMap,
            ctx.schemaErrorMap,
            overrideMap,
            overrideMap === errorMap ? undefined : errorMap, // then global default map
        ].filter((x) => !!x),
    });
    ctx.common.issues.push(issue);
}
class ParseStatus {
    constructor() {
        this.value = "valid";
    }
    dirty() {
        if (this.value === "valid")
            this.value = "dirty";
    }
    abort() {
        if (this.value !== "aborted")
            this.value = "aborted";
    }
    static mergeArray(status, results) {
        const arrayValue = [];
        for (const s of results) {
            if (s.status === "aborted")
                return INVALID;
            if (s.status === "dirty")
                status.dirty();
            arrayValue.push(s.value);
        }
        return { status: status.value, value: arrayValue };
    }
    static async mergeObjectAsync(status, pairs) {
        const syncPairs = [];
        for (const pair of pairs) {
            const key = await pair.key;
            const value = await pair.value;
            syncPairs.push({
                key,
                value,
            });
        }
        return ParseStatus.mergeObjectSync(status, syncPairs);
    }
    static mergeObjectSync(status, pairs) {
        const finalObject = {};
        for (const pair of pairs) {
            const { key, value } = pair;
            if (key.status === "aborted")
                return INVALID;
            if (value.status === "aborted")
                return INVALID;
            if (key.status === "dirty")
                status.dirty();
            if (value.status === "dirty")
                status.dirty();
            if (key.value !== "__proto__" &&
                (typeof value.value !== "undefined" || pair.alwaysSet)) {
                finalObject[key.value] = value.value;
            }
        }
        return { status: status.value, value: finalObject };
    }
}
const INVALID = Object.freeze({
    status: "aborted",
});
const DIRTY = (value) => ({ status: "dirty", value });
const OK = (value) => ({ status: "valid", value });
const isAborted = (x) => x.status === "aborted";
const isDirty = (x) => x.status === "dirty";
const isValid = (x) => x.status === "valid";
const isAsync = (x) => typeof Promise !== "undefined" && x instanceof Promise;

/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __classPrivateFieldGet(receiver, state, kind, f) {
    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
    return state.get(receiver);
}

function __classPrivateFieldSet(receiver, state, value, kind, f) {
    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
    return (state.set(receiver, value)), value;
}

typeof SuppressedError === "function" ? SuppressedError : function (error, suppressed, message) {
    var e = new Error(message);
    return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
};

var errorUtil;
(function (errorUtil) {
    errorUtil.errToObj = (message) => typeof message === "string" ? { message } : message || {};
    errorUtil.toString = (message) => typeof message === "string" ? message : message === null || message === void 0 ? void 0 : message.message;
})(errorUtil || (errorUtil = {}));

var _ZodEnum_cache, _ZodNativeEnum_cache;
class ParseInputLazyPath {
    constructor(parent, value, path, key) {
        this._cachedPath = [];
        this.parent = parent;
        this.data = value;
        this._path = path;
        this._key = key;
    }
    get path() {
        if (!this._cachedPath.length) {
            if (this._key instanceof Array) {
                this._cachedPath.push(...this._path, ...this._key);
            }
            else {
                this._cachedPath.push(...this._path, this._key);
            }
        }
        return this._cachedPath;
    }
}
const handleResult = (ctx, result) => {
    if (isValid(result)) {
        return { success: true, data: result.value };
    }
    else {
        if (!ctx.common.issues.length) {
            throw new Error("Validation failed but no issues detected.");
        }
        return {
            success: false,
            get error() {
                if (this._error)
                    return this._error;
                const error = new ZodError(ctx.common.issues);
                this._error = error;
                return this._error;
            },
        };
    }
};
function processCreateParams(params) {
    if (!params)
        return {};
    const { errorMap, invalid_type_error, required_error, description } = params;
    if (errorMap && (invalid_type_error || required_error)) {
        throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);
    }
    if (errorMap)
        return { errorMap: errorMap, description };
    const customMap = (iss, ctx) => {
        var _a, _b;
        const { message } = params;
        if (iss.code === "invalid_enum_value") {
            return { message: message !== null && message !== void 0 ? message : ctx.defaultError };
        }
        if (typeof ctx.data === "undefined") {
            return { message: (_a = message !== null && message !== void 0 ? message : required_error) !== null && _a !== void 0 ? _a : ctx.defaultError };
        }
        if (iss.code !== "invalid_type")
            return { message: ctx.defaultError };
        return { message: (_b = message !== null && message !== void 0 ? message : invalid_type_error) !== null && _b !== void 0 ? _b : ctx.defaultError };
    };
    return { errorMap: customMap, description };
}
class ZodType {
    constructor(def) {
        /** Alias of safeParseAsync */
        this.spa = this.safeParseAsync;
        this._def = def;
        this.parse = this.parse.bind(this);
        this.safeParse = this.safeParse.bind(this);
        this.parseAsync = this.parseAsync.bind(this);
        this.safeParseAsync = this.safeParseAsync.bind(this);
        this.spa = this.spa.bind(this);
        this.refine = this.refine.bind(this);
        this.refinement = this.refinement.bind(this);
        this.superRefine = this.superRefine.bind(this);
        this.optional = this.optional.bind(this);
        this.nullable = this.nullable.bind(this);
        this.nullish = this.nullish.bind(this);
        this.array = this.array.bind(this);
        this.promise = this.promise.bind(this);
        this.or = this.or.bind(this);
        this.and = this.and.bind(this);
        this.transform = this.transform.bind(this);
        this.brand = this.brand.bind(this);
        this.default = this.default.bind(this);
        this.catch = this.catch.bind(this);
        this.describe = this.describe.bind(this);
        this.pipe = this.pipe.bind(this);
        this.readonly = this.readonly.bind(this);
        this.isNullable = this.isNullable.bind(this);
        this.isOptional = this.isOptional.bind(this);
    }
    get description() {
        return this._def.description;
    }
    _getType(input) {
        return getParsedType(input.data);
    }
    _getOrReturnCtx(input, ctx) {
        return (ctx || {
            common: input.parent.common,
            data: input.data,
            parsedType: getParsedType(input.data),
            schemaErrorMap: this._def.errorMap,
            path: input.path,
            parent: input.parent,
        });
    }
    _processInputParams(input) {
        return {
            status: new ParseStatus(),
            ctx: {
                common: input.parent.common,
                data: input.data,
                parsedType: getParsedType(input.data),
                schemaErrorMap: this._def.errorMap,
                path: input.path,
                parent: input.parent,
            },
        };
    }
    _parseSync(input) {
        const result = this._parse(input);
        if (isAsync(result)) {
            throw new Error("Synchronous parse encountered promise.");
        }
        return result;
    }
    _parseAsync(input) {
        const result = this._parse(input);
        return Promise.resolve(result);
    }
    parse(data, params) {
        const result = this.safeParse(data, params);
        if (result.success)
            return result.data;
        throw result.error;
    }
    safeParse(data, params) {
        var _a;
        const ctx = {
            common: {
                issues: [],
                async: (_a = params === null || params === void 0 ? void 0 : params.async) !== null && _a !== void 0 ? _a : false,
                contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap,
            },
            path: (params === null || params === void 0 ? void 0 : params.path) || [],
            schemaErrorMap: this._def.errorMap,
            parent: null,
            data,
            parsedType: getParsedType(data),
        };
        const result = this._parseSync({ data, path: ctx.path, parent: ctx });
        return handleResult(ctx, result);
    }
    async parseAsync(data, params) {
        const result = await this.safeParseAsync(data, params);
        if (result.success)
            return result.data;
        throw result.error;
    }
    async safeParseAsync(data, params) {
        const ctx = {
            common: {
                issues: [],
                contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap,
                async: true,
            },
            path: (params === null || params === void 0 ? void 0 : params.path) || [],
            schemaErrorMap: this._def.errorMap,
            parent: null,
            data,
            parsedType: getParsedType(data),
        };
        const maybeAsyncResult = this._parse({ data, path: ctx.path, parent: ctx });
        const result = await (isAsync(maybeAsyncResult)
            ? maybeAsyncResult
            : Promise.resolve(maybeAsyncResult));
        return handleResult(ctx, result);
    }
    refine(check, message) {
        const getIssueProperties = (val) => {
            if (typeof message === "string" || typeof message === "undefined") {
                return { message };
            }
            else if (typeof message === "function") {
                return message(val);
            }
            else {
                return message;
            }
        };
        return this._refinement((val, ctx) => {
            const result = check(val);
            const setError = () => ctx.addIssue({
                code: ZodIssueCode.custom,
                ...getIssueProperties(val),
            });
            if (typeof Promise !== "undefined" && result instanceof Promise) {
                return result.then((data) => {
                    if (!data) {
                        setError();
                        return false;
                    }
                    else {
                        return true;
                    }
                });
            }
            if (!result) {
                setError();
                return false;
            }
            else {
                return true;
            }
        });
    }
    refinement(check, refinementData) {
        return this._refinement((val, ctx) => {
            if (!check(val)) {
                ctx.addIssue(typeof refinementData === "function"
                    ? refinementData(val, ctx)
                    : refinementData);
                return false;
            }
            else {
                return true;
            }
        });
    }
    _refinement(refinement) {
        return new ZodEffects({
            schema: this,
            typeName: ZodFirstPartyTypeKind.ZodEffects,
            effect: { type: "refinement", refinement },
        });
    }
    superRefine(refinement) {
        return this._refinement(refinement);
    }
    optional() {
        return ZodOptional.create(this, this._def);
    }
    nullable() {
        return ZodNullable.create(this, this._def);
    }
    nullish() {
        return this.nullable().optional();
    }
    array() {
        return ZodArray.create(this, this._def);
    }
    promise() {
        return ZodPromise.create(this, this._def);
    }
    or(option) {
        return ZodUnion.create([this, option], this._def);
    }
    and(incoming) {
        return ZodIntersection.create(this, incoming, this._def);
    }
    transform(transform) {
        return new ZodEffects({
            ...processCreateParams(this._def),
            schema: this,
            typeName: ZodFirstPartyTypeKind.ZodEffects,
            effect: { type: "transform", transform },
        });
    }
    default(def) {
        const defaultValueFunc = typeof def === "function" ? def : () => def;
        return new ZodDefault({
            ...processCreateParams(this._def),
            innerType: this,
            defaultValue: defaultValueFunc,
            typeName: ZodFirstPartyTypeKind.ZodDefault,
        });
    }
    brand() {
        return new ZodBranded({
            typeName: ZodFirstPartyTypeKind.ZodBranded,
            type: this,
            ...processCreateParams(this._def),
        });
    }
    catch(def) {
        const catchValueFunc = typeof def === "function" ? def : () => def;
        return new ZodCatch({
            ...processCreateParams(this._def),
            innerType: this,
            catchValue: catchValueFunc,
            typeName: ZodFirstPartyTypeKind.ZodCatch,
        });
    }
    describe(description) {
        const This = this.constructor;
        return new This({
            ...this._def,
            description,
        });
    }
    pipe(target) {
        return ZodPipeline.create(this, target);
    }
    readonly() {
        return ZodReadonly.create(this);
    }
    isOptional() {
        return this.safeParse(undefined).success;
    }
    isNullable() {
        return this.safeParse(null).success;
    }
}
const cuidRegex = /^c[^\s-]{8,}$/i;
const cuid2Regex = /^[0-9a-z]+$/;
const ulidRegex = /^[0-9A-HJKMNP-TV-Z]{26}$/;
// const uuidRegex =
//   /^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i;
const uuidRegex = /^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i;
const nanoidRegex = /^[a-z0-9_-]{21}$/i;
const durationRegex = /^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/;
// from https://stackoverflow.com/a/46181/1550155
// old version: too slow, didn't support unicode
// const emailRegex = /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;
//old email regex
// const emailRegex = /^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@((?!-)([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{1,})[^-<>()[\].,;:\s@"]$/i;
// eslint-disable-next-line
// const emailRegex =
//   /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/;
// const emailRegex =
//   /^[a-zA-Z0-9\.\!\#\$\%\&\'\*\+\/\=\?\^\_\`\{\|\}\~\-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;
// const emailRegex =
//   /^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i;
const emailRegex = /^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;
// const emailRegex =
//   /^[a-z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-z0-9-]+(?:\.[a-z0-9\-]+)*$/i;
// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression
const _emojiRegex = `^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$`;
let emojiRegex;
// faster, simpler, safer
const ipv4Regex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;
const ipv6Regex = /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;
// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript
const base64Regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;
// simple
// const dateRegexSource = `\\d{4}-\\d{2}-\\d{2}`;
// no leap year validation
// const dateRegexSource = `\\d{4}-((0[13578]|10|12)-31|(0[13-9]|1[0-2])-30|(0[1-9]|1[0-2])-(0[1-9]|1\\d|2\\d))`;
// with leap year validation
const dateRegexSource = `((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))`;
const dateRegex = new RegExp(`^${dateRegexSource}$`);
function timeRegexSource(args) {
    // let regex = `\\d{2}:\\d{2}:\\d{2}`;
    let regex = `([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d`;
    if (args.precision) {
        regex = `${regex}\\.\\d{${args.precision}}`;
    }
    else if (args.precision == null) {
        regex = `${regex}(\\.\\d+)?`;
    }
    return regex;
}
function timeRegex(args) {
    return new RegExp(`^${timeRegexSource(args)}$`);
}
// Adapted from https://stackoverflow.com/a/3143231
function datetimeRegex(args) {
    let regex = `${dateRegexSource}T${timeRegexSource(args)}`;
    const opts = [];
    opts.push(args.local ? `Z?` : `Z`);
    if (args.offset)
        opts.push(`([+-]\\d{2}:?\\d{2})`);
    regex = `${regex}(${opts.join("|")})`;
    return new RegExp(`^${regex}$`);
}
function isValidIP(ip, version) {
    if ((version === "v4" || !version) && ipv4Regex.test(ip)) {
        return true;
    }
    if ((version === "v6" || !version) && ipv6Regex.test(ip)) {
        return true;
    }
    return false;
}
class ZodString extends ZodType {
    _parse(input) {
        if (this._def.coerce) {
            input.data = String(input.data);
        }
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.string) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.string,
                received: ctx.parsedType,
            });
            return INVALID;
        }
        const status = new ParseStatus();
        let ctx = undefined;
        for (const check of this._def.checks) {
            if (check.kind === "min") {
                if (input.data.length < check.value) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.too_small,
                        minimum: check.value,
                        type: "string",
                        inclusive: true,
                        exact: false,
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "max") {
                if (input.data.length > check.value) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.too_big,
                        maximum: check.value,
                        type: "string",
                        inclusive: true,
                        exact: false,
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "length") {
                const tooBig = input.data.length > check.value;
                const tooSmall = input.data.length < check.value;
                if (tooBig || tooSmall) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    if (tooBig) {
                        addIssueToContext(ctx, {
                            code: ZodIssueCode.too_big,
                            maximum: check.value,
                            type: "string",
                            inclusive: true,
                            exact: true,
                            message: check.message,
                        });
                    }
                    else if (tooSmall) {
                        addIssueToContext(ctx, {
                            code: ZodIssueCode.too_small,
                            minimum: check.value,
                            type: "string",
                            inclusive: true,
                            exact: true,
                            message: check.message,
                        });
                    }
                    status.dirty();
                }
            }
            else if (check.kind === "email") {
                if (!emailRegex.test(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        validation: "email",
                        code: ZodIssueCode.invalid_string,
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "emoji") {
                if (!emojiRegex) {
                    emojiRegex = new RegExp(_emojiRegex, "u");
                }
                if (!emojiRegex.test(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        validation: "emoji",
                        code: ZodIssueCode.invalid_string,
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "uuid") {
                if (!uuidRegex.test(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        validation: "uuid",
                        code: ZodIssueCode.invalid_string,
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "nanoid") {
                if (!nanoidRegex.test(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        validation: "nanoid",
                        code: ZodIssueCode.invalid_string,
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "cuid") {
                if (!cuidRegex.test(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        validation: "cuid",
                        code: ZodIssueCode.invalid_string,
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "cuid2") {
                if (!cuid2Regex.test(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        validation: "cuid2",
                        code: ZodIssueCode.invalid_string,
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "ulid") {
                if (!ulidRegex.test(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        validation: "ulid",
                        code: ZodIssueCode.invalid_string,
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "url") {
                try {
                    new URL(input.data);
                }
                catch (_a) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        validation: "url",
                        code: ZodIssueCode.invalid_string,
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "regex") {
                check.regex.lastIndex = 0;
                const testResult = check.regex.test(input.data);
                if (!testResult) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        validation: "regex",
                        code: ZodIssueCode.invalid_string,
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "trim") {
                input.data = input.data.trim();
            }
            else if (check.kind === "includes") {
                if (!input.data.includes(check.value, check.position)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.invalid_string,
                        validation: { includes: check.value, position: check.position },
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "toLowerCase") {
                input.data = input.data.toLowerCase();
            }
            else if (check.kind === "toUpperCase") {
                input.data = input.data.toUpperCase();
            }
            else if (check.kind === "startsWith") {
                if (!input.data.startsWith(check.value)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.invalid_string,
                        validation: { startsWith: check.value },
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "endsWith") {
                if (!input.data.endsWith(check.value)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.invalid_string,
                        validation: { endsWith: check.value },
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "datetime") {
                const regex = datetimeRegex(check);
                if (!regex.test(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.invalid_string,
                        validation: "datetime",
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "date") {
                const regex = dateRegex;
                if (!regex.test(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.invalid_string,
                        validation: "date",
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "time") {
                const regex = timeRegex(check);
                if (!regex.test(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.invalid_string,
                        validation: "time",
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "duration") {
                if (!durationRegex.test(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        validation: "duration",
                        code: ZodIssueCode.invalid_string,
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "ip") {
                if (!isValidIP(input.data, check.version)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        validation: "ip",
                        code: ZodIssueCode.invalid_string,
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "base64") {
                if (!base64Regex.test(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        validation: "base64",
                        code: ZodIssueCode.invalid_string,
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else {
                util.assertNever(check);
            }
        }
        return { status: status.value, value: input.data };
    }
    _regex(regex, validation, message) {
        return this.refinement((data) => regex.test(data), {
            validation,
            code: ZodIssueCode.invalid_string,
            ...errorUtil.errToObj(message),
        });
    }
    _addCheck(check) {
        return new ZodString({
            ...this._def,
            checks: [...this._def.checks, check],
        });
    }
    email(message) {
        return this._addCheck({ kind: "email", ...errorUtil.errToObj(message) });
    }
    url(message) {
        return this._addCheck({ kind: "url", ...errorUtil.errToObj(message) });
    }
    emoji(message) {
        return this._addCheck({ kind: "emoji", ...errorUtil.errToObj(message) });
    }
    uuid(message) {
        return this._addCheck({ kind: "uuid", ...errorUtil.errToObj(message) });
    }
    nanoid(message) {
        return this._addCheck({ kind: "nanoid", ...errorUtil.errToObj(message) });
    }
    cuid(message) {
        return this._addCheck({ kind: "cuid", ...errorUtil.errToObj(message) });
    }
    cuid2(message) {
        return this._addCheck({ kind: "cuid2", ...errorUtil.errToObj(message) });
    }
    ulid(message) {
        return this._addCheck({ kind: "ulid", ...errorUtil.errToObj(message) });
    }
    base64(message) {
        return this._addCheck({ kind: "base64", ...errorUtil.errToObj(message) });
    }
    ip(options) {
        return this._addCheck({ kind: "ip", ...errorUtil.errToObj(options) });
    }
    datetime(options) {
        var _a, _b;
        if (typeof options === "string") {
            return this._addCheck({
                kind: "datetime",
                precision: null,
                offset: false,
                local: false,
                message: options,
            });
        }
        return this._addCheck({
            kind: "datetime",
            precision: typeof (options === null || options === void 0 ? void 0 : options.precision) === "undefined" ? null : options === null || options === void 0 ? void 0 : options.precision,
            offset: (_a = options === null || options === void 0 ? void 0 : options.offset) !== null && _a !== void 0 ? _a : false,
            local: (_b = options === null || options === void 0 ? void 0 : options.local) !== null && _b !== void 0 ? _b : false,
            ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message),
        });
    }
    date(message) {
        return this._addCheck({ kind: "date", message });
    }
    time(options) {
        if (typeof options === "string") {
            return this._addCheck({
                kind: "time",
                precision: null,
                message: options,
            });
        }
        return this._addCheck({
            kind: "time",
            precision: typeof (options === null || options === void 0 ? void 0 : options.precision) === "undefined" ? null : options === null || options === void 0 ? void 0 : options.precision,
            ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message),
        });
    }
    duration(message) {
        return this._addCheck({ kind: "duration", ...errorUtil.errToObj(message) });
    }
    regex(regex, message) {
        return this._addCheck({
            kind: "regex",
            regex: regex,
            ...errorUtil.errToObj(message),
        });
    }
    includes(value, options) {
        return this._addCheck({
            kind: "includes",
            value: value,
            position: options === null || options === void 0 ? void 0 : options.position,
            ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message),
        });
    }
    startsWith(value, message) {
        return this._addCheck({
            kind: "startsWith",
            value: value,
            ...errorUtil.errToObj(message),
        });
    }
    endsWith(value, message) {
        return this._addCheck({
            kind: "endsWith",
            value: value,
            ...errorUtil.errToObj(message),
        });
    }
    min(minLength, message) {
        return this._addCheck({
            kind: "min",
            value: minLength,
            ...errorUtil.errToObj(message),
        });
    }
    max(maxLength, message) {
        return this._addCheck({
            kind: "max",
            value: maxLength,
            ...errorUtil.errToObj(message),
        });
    }
    length(len, message) {
        return this._addCheck({
            kind: "length",
            value: len,
            ...errorUtil.errToObj(message),
        });
    }
    /**
     * @deprecated Use z.string().min(1) instead.
     * @see {@link ZodString.min}
     */
    nonempty(message) {
        return this.min(1, errorUtil.errToObj(message));
    }
    trim() {
        return new ZodString({
            ...this._def,
            checks: [...this._def.checks, { kind: "trim" }],
        });
    }
    toLowerCase() {
        return new ZodString({
            ...this._def,
            checks: [...this._def.checks, { kind: "toLowerCase" }],
        });
    }
    toUpperCase() {
        return new ZodString({
            ...this._def,
            checks: [...this._def.checks, { kind: "toUpperCase" }],
        });
    }
    get isDatetime() {
        return !!this._def.checks.find((ch) => ch.kind === "datetime");
    }
    get isDate() {
        return !!this._def.checks.find((ch) => ch.kind === "date");
    }
    get isTime() {
        return !!this._def.checks.find((ch) => ch.kind === "time");
    }
    get isDuration() {
        return !!this._def.checks.find((ch) => ch.kind === "duration");
    }
    get isEmail() {
        return !!this._def.checks.find((ch) => ch.kind === "email");
    }
    get isURL() {
        return !!this._def.checks.find((ch) => ch.kind === "url");
    }
    get isEmoji() {
        return !!this._def.checks.find((ch) => ch.kind === "emoji");
    }
    get isUUID() {
        return !!this._def.checks.find((ch) => ch.kind === "uuid");
    }
    get isNANOID() {
        return !!this._def.checks.find((ch) => ch.kind === "nanoid");
    }
    get isCUID() {
        return !!this._def.checks.find((ch) => ch.kind === "cuid");
    }
    get isCUID2() {
        return !!this._def.checks.find((ch) => ch.kind === "cuid2");
    }
    get isULID() {
        return !!this._def.checks.find((ch) => ch.kind === "ulid");
    }
    get isIP() {
        return !!this._def.checks.find((ch) => ch.kind === "ip");
    }
    get isBase64() {
        return !!this._def.checks.find((ch) => ch.kind === "base64");
    }
    get minLength() {
        let min = null;
        for (const ch of this._def.checks) {
            if (ch.kind === "min") {
                if (min === null || ch.value > min)
                    min = ch.value;
            }
        }
        return min;
    }
    get maxLength() {
        let max = null;
        for (const ch of this._def.checks) {
            if (ch.kind === "max") {
                if (max === null || ch.value < max)
                    max = ch.value;
            }
        }
        return max;
    }
}
ZodString.create = (params) => {
    var _a;
    return new ZodString({
        checks: [],
        typeName: ZodFirstPartyTypeKind.ZodString,
        coerce: (_a = params === null || params === void 0 ? void 0 : params.coerce) !== null && _a !== void 0 ? _a : false,
        ...processCreateParams(params),
    });
};
// https://stackoverflow.com/questions/3966484/why-does-modulus-operator-return-fractional-number-in-javascript/31711034#31711034
function floatSafeRemainder(val, step) {
    const valDecCount = (val.toString().split(".")[1] || "").length;
    const stepDecCount = (step.toString().split(".")[1] || "").length;
    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;
    const valInt = parseInt(val.toFixed(decCount).replace(".", ""));
    const stepInt = parseInt(step.toFixed(decCount).replace(".", ""));
    return (valInt % stepInt) / Math.pow(10, decCount);
}
class ZodNumber extends ZodType {
    constructor() {
        super(...arguments);
        this.min = this.gte;
        this.max = this.lte;
        this.step = this.multipleOf;
    }
    _parse(input) {
        if (this._def.coerce) {
            input.data = Number(input.data);
        }
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.number) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.number,
                received: ctx.parsedType,
            });
            return INVALID;
        }
        let ctx = undefined;
        const status = new ParseStatus();
        for (const check of this._def.checks) {
            if (check.kind === "int") {
                if (!util.isInteger(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.invalid_type,
                        expected: "integer",
                        received: "float",
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "min") {
                const tooSmall = check.inclusive
                    ? input.data < check.value
                    : input.data <= check.value;
                if (tooSmall) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.too_small,
                        minimum: check.value,
                        type: "number",
                        inclusive: check.inclusive,
                        exact: false,
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "max") {
                const tooBig = check.inclusive
                    ? input.data > check.value
                    : input.data >= check.value;
                if (tooBig) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.too_big,
                        maximum: check.value,
                        type: "number",
                        inclusive: check.inclusive,
                        exact: false,
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "multipleOf") {
                if (floatSafeRemainder(input.data, check.value) !== 0) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.not_multiple_of,
                        multipleOf: check.value,
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "finite") {
                if (!Number.isFinite(input.data)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.not_finite,
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else {
                util.assertNever(check);
            }
        }
        return { status: status.value, value: input.data };
    }
    gte(value, message) {
        return this.setLimit("min", value, true, errorUtil.toString(message));
    }
    gt(value, message) {
        return this.setLimit("min", value, false, errorUtil.toString(message));
    }
    lte(value, message) {
        return this.setLimit("max", value, true, errorUtil.toString(message));
    }
    lt(value, message) {
        return this.setLimit("max", value, false, errorUtil.toString(message));
    }
    setLimit(kind, value, inclusive, message) {
        return new ZodNumber({
            ...this._def,
            checks: [
                ...this._def.checks,
                {
                    kind,
                    value,
                    inclusive,
                    message: errorUtil.toString(message),
                },
            ],
        });
    }
    _addCheck(check) {
        return new ZodNumber({
            ...this._def,
            checks: [...this._def.checks, check],
        });
    }
    int(message) {
        return this._addCheck({
            kind: "int",
            message: errorUtil.toString(message),
        });
    }
    positive(message) {
        return this._addCheck({
            kind: "min",
            value: 0,
            inclusive: false,
            message: errorUtil.toString(message),
        });
    }
    negative(message) {
        return this._addCheck({
            kind: "max",
            value: 0,
            inclusive: false,
            message: errorUtil.toString(message),
        });
    }
    nonpositive(message) {
        return this._addCheck({
            kind: "max",
            value: 0,
            inclusive: true,
            message: errorUtil.toString(message),
        });
    }
    nonnegative(message) {
        return this._addCheck({
            kind: "min",
            value: 0,
            inclusive: true,
            message: errorUtil.toString(message),
        });
    }
    multipleOf(value, message) {
        return this._addCheck({
            kind: "multipleOf",
            value: value,
            message: errorUtil.toString(message),
        });
    }
    finite(message) {
        return this._addCheck({
            kind: "finite",
            message: errorUtil.toString(message),
        });
    }
    safe(message) {
        return this._addCheck({
            kind: "min",
            inclusive: true,
            value: Number.MIN_SAFE_INTEGER,
            message: errorUtil.toString(message),
        })._addCheck({
            kind: "max",
            inclusive: true,
            value: Number.MAX_SAFE_INTEGER,
            message: errorUtil.toString(message),
        });
    }
    get minValue() {
        let min = null;
        for (const ch of this._def.checks) {
            if (ch.kind === "min") {
                if (min === null || ch.value > min)
                    min = ch.value;
            }
        }
        return min;
    }
    get maxValue() {
        let max = null;
        for (const ch of this._def.checks) {
            if (ch.kind === "max") {
                if (max === null || ch.value < max)
                    max = ch.value;
            }
        }
        return max;
    }
    get isInt() {
        return !!this._def.checks.find((ch) => ch.kind === "int" ||
            (ch.kind === "multipleOf" && util.isInteger(ch.value)));
    }
    get isFinite() {
        let max = null, min = null;
        for (const ch of this._def.checks) {
            if (ch.kind === "finite" ||
                ch.kind === "int" ||
                ch.kind === "multipleOf") {
                return true;
            }
            else if (ch.kind === "min") {
                if (min === null || ch.value > min)
                    min = ch.value;
            }
            else if (ch.kind === "max") {
                if (max === null || ch.value < max)
                    max = ch.value;
            }
        }
        return Number.isFinite(min) && Number.isFinite(max);
    }
}
ZodNumber.create = (params) => {
    return new ZodNumber({
        checks: [],
        typeName: ZodFirstPartyTypeKind.ZodNumber,
        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,
        ...processCreateParams(params),
    });
};
class ZodBigInt extends ZodType {
    constructor() {
        super(...arguments);
        this.min = this.gte;
        this.max = this.lte;
    }
    _parse(input) {
        if (this._def.coerce) {
            input.data = BigInt(input.data);
        }
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.bigint) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.bigint,
                received: ctx.parsedType,
            });
            return INVALID;
        }
        let ctx = undefined;
        const status = new ParseStatus();
        for (const check of this._def.checks) {
            if (check.kind === "min") {
                const tooSmall = check.inclusive
                    ? input.data < check.value
                    : input.data <= check.value;
                if (tooSmall) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.too_small,
                        type: "bigint",
                        minimum: check.value,
                        inclusive: check.inclusive,
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "max") {
                const tooBig = check.inclusive
                    ? input.data > check.value
                    : input.data >= check.value;
                if (tooBig) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.too_big,
                        type: "bigint",
                        maximum: check.value,
                        inclusive: check.inclusive,
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "multipleOf") {
                if (input.data % check.value !== BigInt(0)) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.not_multiple_of,
                        multipleOf: check.value,
                        message: check.message,
                    });
                    status.dirty();
                }
            }
            else {
                util.assertNever(check);
            }
        }
        return { status: status.value, value: input.data };
    }
    gte(value, message) {
        return this.setLimit("min", value, true, errorUtil.toString(message));
    }
    gt(value, message) {
        return this.setLimit("min", value, false, errorUtil.toString(message));
    }
    lte(value, message) {
        return this.setLimit("max", value, true, errorUtil.toString(message));
    }
    lt(value, message) {
        return this.setLimit("max", value, false, errorUtil.toString(message));
    }
    setLimit(kind, value, inclusive, message) {
        return new ZodBigInt({
            ...this._def,
            checks: [
                ...this._def.checks,
                {
                    kind,
                    value,
                    inclusive,
                    message: errorUtil.toString(message),
                },
            ],
        });
    }
    _addCheck(check) {
        return new ZodBigInt({
            ...this._def,
            checks: [...this._def.checks, check],
        });
    }
    positive(message) {
        return this._addCheck({
            kind: "min",
            value: BigInt(0),
            inclusive: false,
            message: errorUtil.toString(message),
        });
    }
    negative(message) {
        return this._addCheck({
            kind: "max",
            value: BigInt(0),
            inclusive: false,
            message: errorUtil.toString(message),
        });
    }
    nonpositive(message) {
        return this._addCheck({
            kind: "max",
            value: BigInt(0),
            inclusive: true,
            message: errorUtil.toString(message),
        });
    }
    nonnegative(message) {
        return this._addCheck({
            kind: "min",
            value: BigInt(0),
            inclusive: true,
            message: errorUtil.toString(message),
        });
    }
    multipleOf(value, message) {
        return this._addCheck({
            kind: "multipleOf",
            value,
            message: errorUtil.toString(message),
        });
    }
    get minValue() {
        let min = null;
        for (const ch of this._def.checks) {
            if (ch.kind === "min") {
                if (min === null || ch.value > min)
                    min = ch.value;
            }
        }
        return min;
    }
    get maxValue() {
        let max = null;
        for (const ch of this._def.checks) {
            if (ch.kind === "max") {
                if (max === null || ch.value < max)
                    max = ch.value;
            }
        }
        return max;
    }
}
ZodBigInt.create = (params) => {
    var _a;
    return new ZodBigInt({
        checks: [],
        typeName: ZodFirstPartyTypeKind.ZodBigInt,
        coerce: (_a = params === null || params === void 0 ? void 0 : params.coerce) !== null && _a !== void 0 ? _a : false,
        ...processCreateParams(params),
    });
};
class ZodBoolean extends ZodType {
    _parse(input) {
        if (this._def.coerce) {
            input.data = Boolean(input.data);
        }
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.boolean) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.boolean,
                received: ctx.parsedType,
            });
            return INVALID;
        }
        return OK(input.data);
    }
}
ZodBoolean.create = (params) => {
    return new ZodBoolean({
        typeName: ZodFirstPartyTypeKind.ZodBoolean,
        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,
        ...processCreateParams(params),
    });
};
class ZodDate extends ZodType {
    _parse(input) {
        if (this._def.coerce) {
            input.data = new Date(input.data);
        }
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.date) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.date,
                received: ctx.parsedType,
            });
            return INVALID;
        }
        if (isNaN(input.data.getTime())) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_date,
            });
            return INVALID;
        }
        const status = new ParseStatus();
        let ctx = undefined;
        for (const check of this._def.checks) {
            if (check.kind === "min") {
                if (input.data.getTime() < check.value) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.too_small,
                        message: check.message,
                        inclusive: true,
                        exact: false,
                        minimum: check.value,
                        type: "date",
                    });
                    status.dirty();
                }
            }
            else if (check.kind === "max") {
                if (input.data.getTime() > check.value) {
                    ctx = this._getOrReturnCtx(input, ctx);
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.too_big,
                        message: check.message,
                        inclusive: true,
                        exact: false,
                        maximum: check.value,
                        type: "date",
                    });
                    status.dirty();
                }
            }
            else {
                util.assertNever(check);
            }
        }
        return {
            status: status.value,
            value: new Date(input.data.getTime()),
        };
    }
    _addCheck(check) {
        return new ZodDate({
            ...this._def,
            checks: [...this._def.checks, check],
        });
    }
    min(minDate, message) {
        return this._addCheck({
            kind: "min",
            value: minDate.getTime(),
            message: errorUtil.toString(message),
        });
    }
    max(maxDate, message) {
        return this._addCheck({
            kind: "max",
            value: maxDate.getTime(),
            message: errorUtil.toString(message),
        });
    }
    get minDate() {
        let min = null;
        for (const ch of this._def.checks) {
            if (ch.kind === "min") {
                if (min === null || ch.value > min)
                    min = ch.value;
            }
        }
        return min != null ? new Date(min) : null;
    }
    get maxDate() {
        let max = null;
        for (const ch of this._def.checks) {
            if (ch.kind === "max") {
                if (max === null || ch.value < max)
                    max = ch.value;
            }
        }
        return max != null ? new Date(max) : null;
    }
}
ZodDate.create = (params) => {
    return new ZodDate({
        checks: [],
        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,
        typeName: ZodFirstPartyTypeKind.ZodDate,
        ...processCreateParams(params),
    });
};
class ZodSymbol extends ZodType {
    _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.symbol) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.symbol,
                received: ctx.parsedType,
            });
            return INVALID;
        }
        return OK(input.data);
    }
}
ZodSymbol.create = (params) => {
    return new ZodSymbol({
        typeName: ZodFirstPartyTypeKind.ZodSymbol,
        ...processCreateParams(params),
    });
};
class ZodUndefined extends ZodType {
    _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.undefined) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.undefined,
                received: ctx.parsedType,
            });
            return INVALID;
        }
        return OK(input.data);
    }
}
ZodUndefined.create = (params) => {
    return new ZodUndefined({
        typeName: ZodFirstPartyTypeKind.ZodUndefined,
        ...processCreateParams(params),
    });
};
class ZodNull extends ZodType {
    _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.null) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.null,
                received: ctx.parsedType,
            });
            return INVALID;
        }
        return OK(input.data);
    }
}
ZodNull.create = (params) => {
    return new ZodNull({
        typeName: ZodFirstPartyTypeKind.ZodNull,
        ...processCreateParams(params),
    });
};
class ZodAny extends ZodType {
    constructor() {
        super(...arguments);
        // to prevent instances of other classes from extending ZodAny. this causes issues with catchall in ZodObject.
        this._any = true;
    }
    _parse(input) {
        return OK(input.data);
    }
}
ZodAny.create = (params) => {
    return new ZodAny({
        typeName: ZodFirstPartyTypeKind.ZodAny,
        ...processCreateParams(params),
    });
};
class ZodUnknown extends ZodType {
    constructor() {
        super(...arguments);
        // required
        this._unknown = true;
    }
    _parse(input) {
        return OK(input.data);
    }
}
ZodUnknown.create = (params) => {
    return new ZodUnknown({
        typeName: ZodFirstPartyTypeKind.ZodUnknown,
        ...processCreateParams(params),
    });
};
class ZodNever extends ZodType {
    _parse(input) {
        const ctx = this._getOrReturnCtx(input);
        addIssueToContext(ctx, {
            code: ZodIssueCode.invalid_type,
            expected: ZodParsedType.never,
            received: ctx.parsedType,
        });
        return INVALID;
    }
}
ZodNever.create = (params) => {
    return new ZodNever({
        typeName: ZodFirstPartyTypeKind.ZodNever,
        ...processCreateParams(params),
    });
};
class ZodVoid extends ZodType {
    _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.undefined) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.void,
                received: ctx.parsedType,
            });
            return INVALID;
        }
        return OK(input.data);
    }
}
ZodVoid.create = (params) => {
    return new ZodVoid({
        typeName: ZodFirstPartyTypeKind.ZodVoid,
        ...processCreateParams(params),
    });
};
class ZodArray extends ZodType {
    _parse(input) {
        const { ctx, status } = this._processInputParams(input);
        const def = this._def;
        if (ctx.parsedType !== ZodParsedType.array) {
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.array,
                received: ctx.parsedType,
            });
            return INVALID;
        }
        if (def.exactLength !== null) {
            const tooBig = ctx.data.length > def.exactLength.value;
            const tooSmall = ctx.data.length < def.exactLength.value;
            if (tooBig || tooSmall) {
                addIssueToContext(ctx, {
                    code: tooBig ? ZodIssueCode.too_big : ZodIssueCode.too_small,
                    minimum: (tooSmall ? def.exactLength.value : undefined),
                    maximum: (tooBig ? def.exactLength.value : undefined),
                    type: "array",
                    inclusive: true,
                    exact: true,
                    message: def.exactLength.message,
                });
                status.dirty();
            }
        }
        if (def.minLength !== null) {
            if (ctx.data.length < def.minLength.value) {
                addIssueToContext(ctx, {
                    code: ZodIssueCode.too_small,
                    minimum: def.minLength.value,
                    type: "array",
                    inclusive: true,
                    exact: false,
                    message: def.minLength.message,
                });
                status.dirty();
            }
        }
        if (def.maxLength !== null) {
            if (ctx.data.length > def.maxLength.value) {
                addIssueToContext(ctx, {
                    code: ZodIssueCode.too_big,
                    maximum: def.maxLength.value,
                    type: "array",
                    inclusive: true,
                    exact: false,
                    message: def.maxLength.message,
                });
                status.dirty();
            }
        }
        if (ctx.common.async) {
            return Promise.all([...ctx.data].map((item, i) => {
                return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i));
            })).then((result) => {
                return ParseStatus.mergeArray(status, result);
            });
        }
        const result = [...ctx.data].map((item, i) => {
            return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i));
        });
        return ParseStatus.mergeArray(status, result);
    }
    get element() {
        return this._def.type;
    }
    min(minLength, message) {
        return new ZodArray({
            ...this._def,
            minLength: { value: minLength, message: errorUtil.toString(message) },
        });
    }
    max(maxLength, message) {
        return new ZodArray({
            ...this._def,
            maxLength: { value: maxLength, message: errorUtil.toString(message) },
        });
    }
    length(len, message) {
        return new ZodArray({
            ...this._def,
            exactLength: { value: len, message: errorUtil.toString(message) },
        });
    }
    nonempty(message) {
        return this.min(1, message);
    }
}
ZodArray.create = (schema, params) => {
    return new ZodArray({
        type: schema,
        minLength: null,
        maxLength: null,
        exactLength: null,
        typeName: ZodFirstPartyTypeKind.ZodArray,
        ...processCreateParams(params),
    });
};
function deepPartialify(schema) {
    if (schema instanceof ZodObject) {
        const newShape = {};
        for (const key in schema.shape) {
            const fieldSchema = schema.shape[key];
            newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));
        }
        return new ZodObject({
            ...schema._def,
            shape: () => newShape,
        });
    }
    else if (schema instanceof ZodArray) {
        return new ZodArray({
            ...schema._def,
            type: deepPartialify(schema.element),
        });
    }
    else if (schema instanceof ZodOptional) {
        return ZodOptional.create(deepPartialify(schema.unwrap()));
    }
    else if (schema instanceof ZodNullable) {
        return ZodNullable.create(deepPartialify(schema.unwrap()));
    }
    else if (schema instanceof ZodTuple) {
        return ZodTuple.create(schema.items.map((item) => deepPartialify(item)));
    }
    else {
        return schema;
    }
}
class ZodObject extends ZodType {
    constructor() {
        super(...arguments);
        this._cached = null;
        /**
         * @deprecated In most cases, this is no longer needed - unknown properties are now silently stripped.
         * If you want to pass through unknown properties, use `.passthrough()` instead.
         */
        this.nonstrict = this.passthrough;
        // extend<
        //   Augmentation extends ZodRawShape,
        //   NewOutput extends util.flatten<{
        //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation
        //       ? Augmentation[k]["_output"]
        //       : k extends keyof Output
        //       ? Output[k]
        //       : never;
        //   }>,
        //   NewInput extends util.flatten<{
        //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation
        //       ? Augmentation[k]["_input"]
        //       : k extends keyof Input
        //       ? Input[k]
        //       : never;
        //   }>
        // >(
        //   augmentation: Augmentation
        // ): ZodObject<
        //   extendShape<T, Augmentation>,
        //   UnknownKeys,
        //   Catchall,
        //   NewOutput,
        //   NewInput
        // > {
        //   return new ZodObject({
        //     ...this._def,
        //     shape: () => ({
        //       ...this._def.shape(),
        //       ...augmentation,
        //     }),
        //   }) as any;
        // }
        /**
         * @deprecated Use `.extend` instead
         *  */
        this.augment = this.extend;
    }
    _getCached() {
        if (this._cached !== null)
            return this._cached;
        const shape = this._def.shape();
        const keys = util.objectKeys(shape);
        return (this._cached = { shape, keys });
    }
    _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.object) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.object,
                received: ctx.parsedType,
            });
            return INVALID;
        }
        const { status, ctx } = this._processInputParams(input);
        const { shape, keys: shapeKeys } = this._getCached();
        const extraKeys = [];
        if (!(this._def.catchall instanceof ZodNever &&
            this._def.unknownKeys === "strip")) {
            for (const key in ctx.data) {
                if (!shapeKeys.includes(key)) {
                    extraKeys.push(key);
                }
            }
        }
        const pairs = [];
        for (const key of shapeKeys) {
            const keyValidator = shape[key];
            const value = ctx.data[key];
            pairs.push({
                key: { status: "valid", value: key },
                value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),
                alwaysSet: key in ctx.data,
            });
        }
        if (this._def.catchall instanceof ZodNever) {
            const unknownKeys = this._def.unknownKeys;
            if (unknownKeys === "passthrough") {
                for (const key of extraKeys) {
                    pairs.push({
                        key: { status: "valid", value: key },
                        value: { status: "valid", value: ctx.data[key] },
                    });
                }
            }
            else if (unknownKeys === "strict") {
                if (extraKeys.length > 0) {
                    addIssueToContext(ctx, {
                        code: ZodIssueCode.unrecognized_keys,
                        keys: extraKeys,
                    });
                    status.dirty();
                }
            }
            else if (unknownKeys === "strip") ;
            else {
                throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);
            }
        }
        else {
            // run catchall validation
            const catchall = this._def.catchall;
            for (const key of extraKeys) {
                const value = ctx.data[key];
                pairs.push({
                    key: { status: "valid", value: key },
                    value: catchall._parse(new ParseInputLazyPath(ctx, value, ctx.path, key) //, ctx.child(key), value, getParsedType(value)
                    ),
                    alwaysSet: key in ctx.data,
                });
            }
        }
        if (ctx.common.async) {
            return Promise.resolve()
                .then(async () => {
                const syncPairs = [];
                for (const pair of pairs) {
                    const key = await pair.key;
                    const value = await pair.value;
                    syncPairs.push({
                        key,
                        value,
                        alwaysSet: pair.alwaysSet,
                    });
                }
                return syncPairs;
            })
                .then((syncPairs) => {
                return ParseStatus.mergeObjectSync(status, syncPairs);
            });
        }
        else {
            return ParseStatus.mergeObjectSync(status, pairs);
        }
    }
    get shape() {
        return this._def.shape();
    }
    strict(message) {
        errorUtil.errToObj;
        return new ZodObject({
            ...this._def,
            unknownKeys: "strict",
            ...(message !== undefined
                ? {
                    errorMap: (issue, ctx) => {
                        var _a, _b, _c, _d;
                        const defaultError = (_c = (_b = (_a = this._def).errorMap) === null || _b === void 0 ? void 0 : _b.call(_a, issue, ctx).message) !== null && _c !== void 0 ? _c : ctx.defaultError;
                        if (issue.code === "unrecognized_keys")
                            return {
                                message: (_d = errorUtil.errToObj(message).message) !== null && _d !== void 0 ? _d : defaultError,
                            };
                        return {
                            message: defaultError,
                        };
                    },
                }
                : {}),
        });
    }
    strip() {
        return new ZodObject({
            ...this._def,
            unknownKeys: "strip",
        });
    }
    passthrough() {
        return new ZodObject({
            ...this._def,
            unknownKeys: "passthrough",
        });
    }
    // const AugmentFactory =
    //   <Def extends ZodObjectDef>(def: Def) =>
    //   <Augmentation extends ZodRawShape>(
    //     augmentation: Augmentation
    //   ): ZodObject<
    //     extendShape<ReturnType<Def["shape"]>, Augmentation>,
    //     Def["unknownKeys"],
    //     Def["catchall"]
    //   > => {
    //     return new ZodObject({
    //       ...def,
    //       shape: () => ({
    //         ...def.shape(),
    //         ...augmentation,
    //       }),
    //     }) as any;
    //   };
    extend(augmentation) {
        return new ZodObject({
            ...this._def,
            shape: () => ({
                ...this._def.shape(),
                ...augmentation,
            }),
        });
    }
    /**
     * Prior to zod@1.0.12 there was a bug in the
     * inferred type of merged objects. Please
     * upgrade if you are experiencing issues.
     */
    merge(merging) {
        const merged = new ZodObject({
            unknownKeys: merging._def.unknownKeys,
            catchall: merging._def.catchall,
            shape: () => ({
                ...this._def.shape(),
                ...merging._def.shape(),
            }),
            typeName: ZodFirstPartyTypeKind.ZodObject,
        });
        return merged;
    }
    // merge<
    //   Incoming extends AnyZodObject,
    //   Augmentation extends Incoming["shape"],
    //   NewOutput extends {
    //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation
    //       ? Augmentation[k]["_output"]
    //       : k extends keyof Output
    //       ? Output[k]
    //       : never;
    //   },
    //   NewInput extends {
    //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation
    //       ? Augmentation[k]["_input"]
    //       : k extends keyof Input
    //       ? Input[k]
    //       : never;
    //   }
    // >(
    //   merging: Incoming
    // ): ZodObject<
    //   extendShape<T, ReturnType<Incoming["_def"]["shape"]>>,
    //   Incoming["_def"]["unknownKeys"],
    //   Incoming["_def"]["catchall"],
    //   NewOutput,
    //   NewInput
    // > {
    //   const merged: any = new ZodObject({
    //     unknownKeys: merging._def.unknownKeys,
    //     catchall: merging._def.catchall,
    //     shape: () =>
    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),
    //     typeName: ZodFirstPartyTypeKind.ZodObject,
    //   }) as any;
    //   return merged;
    // }
    setKey(key, schema) {
        return this.augment({ [key]: schema });
    }
    // merge<Incoming extends AnyZodObject>(
    //   merging: Incoming
    // ): //ZodObject<T & Incoming["_shape"], UnknownKeys, Catchall> = (merging) => {
    // ZodObject<
    //   extendShape<T, ReturnType<Incoming["_def"]["shape"]>>,
    //   Incoming["_def"]["unknownKeys"],
    //   Incoming["_def"]["catchall"]
    // > {
    //   // const mergedShape = objectUtil.mergeShapes(
    //   //   this._def.shape(),
    //   //   merging._def.shape()
    //   // );
    //   const merged: any = new ZodObject({
    //     unknownKeys: merging._def.unknownKeys,
    //     catchall: merging._def.catchall,
    //     shape: () =>
    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),
    //     typeName: ZodFirstPartyTypeKind.ZodObject,
    //   }) as any;
    //   return merged;
    // }
    catchall(index) {
        return new ZodObject({
            ...this._def,
            catchall: index,
        });
    }
    pick(mask) {
        const shape = {};
        util.objectKeys(mask).forEach((key) => {
            if (mask[key] && this.shape[key]) {
                shape[key] = this.shape[key];
            }
        });
        return new ZodObject({
            ...this._def,
            shape: () => shape,
        });
    }
    omit(mask) {
        const shape = {};
        util.objectKeys(this.shape).forEach((key) => {
            if (!mask[key]) {
                shape[key] = this.shape[key];
            }
        });
        return new ZodObject({
            ...this._def,
            shape: () => shape,
        });
    }
    /**
     * @deprecated
     */
    deepPartial() {
        return deepPartialify(this);
    }
    partial(mask) {
        const newShape = {};
        util.objectKeys(this.shape).forEach((key) => {
            const fieldSchema = this.shape[key];
            if (mask && !mask[key]) {
                newShape[key] = fieldSchema;
            }
            else {
                newShape[key] = fieldSchema.optional();
            }
        });
        return new ZodObject({
            ...this._def,
            shape: () => newShape,
        });
    }
    required(mask) {
        const newShape = {};
        util.objectKeys(this.shape).forEach((key) => {
            if (mask && !mask[key]) {
                newShape[key] = this.shape[key];
            }
            else {
                const fieldSchema = this.shape[key];
                let newField = fieldSchema;
                while (newField instanceof ZodOptional) {
                    newField = newField._def.innerType;
                }
                newShape[key] = newField;
            }
        });
        return new ZodObject({
            ...this._def,
            shape: () => newShape,
        });
    }
    keyof() {
        return createZodEnum(util.objectKeys(this.shape));
    }
}
ZodObject.create = (shape, params) => {
    return new ZodObject({
        shape: () => shape,
        unknownKeys: "strip",
        catchall: ZodNever.create(),
        typeName: ZodFirstPartyTypeKind.ZodObject,
        ...processCreateParams(params),
    });
};
ZodObject.strictCreate = (shape, params) => {
    return new ZodObject({
        shape: () => shape,
        unknownKeys: "strict",
        catchall: ZodNever.create(),
        typeName: ZodFirstPartyTypeKind.ZodObject,
        ...processCreateParams(params),
    });
};
ZodObject.lazycreate = (shape, params) => {
    return new ZodObject({
        shape,
        unknownKeys: "strip",
        catchall: ZodNever.create(),
        typeName: ZodFirstPartyTypeKind.ZodObject,
        ...processCreateParams(params),
    });
};
class ZodUnion extends ZodType {
    _parse(input) {
        const { ctx } = this._processInputParams(input);
        const options = this._def.options;
        function handleResults(results) {
            // return first issue-free validation if it exists
            for (const result of results) {
                if (result.result.status === "valid") {
                    return result.result;
                }
            }
            for (const result of results) {
                if (result.result.status === "dirty") {
                    // add issues from dirty option
                    ctx.common.issues.push(...result.ctx.common.issues);
                    return result.result;
                }
            }
            // return invalid
            const unionErrors = results.map((result) => new ZodError(result.ctx.common.issues));
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_union,
                unionErrors,
            });
            return INVALID;
        }
        if (ctx.common.async) {
            return Promise.all(options.map(async (option) => {
                const childCtx = {
                    ...ctx,
                    common: {
                        ...ctx.common,
                        issues: [],
                    },
                    parent: null,
                };
                return {
                    result: await option._parseAsync({
                        data: ctx.data,
                        path: ctx.path,
                        parent: childCtx,
                    }),
                    ctx: childCtx,
                };
            })).then(handleResults);
        }
        else {
            let dirty = undefined;
            const issues = [];
            for (const option of options) {
                const childCtx = {
                    ...ctx,
                    common: {
                        ...ctx.common,
                        issues: [],
                    },
                    parent: null,
                };
                const result = option._parseSync({
                    data: ctx.data,
                    path: ctx.path,
                    parent: childCtx,
                });
                if (result.status === "valid") {
                    return result;
                }
                else if (result.status === "dirty" && !dirty) {
                    dirty = { result, ctx: childCtx };
                }
                if (childCtx.common.issues.length) {
                    issues.push(childCtx.common.issues);
                }
            }
            if (dirty) {
                ctx.common.issues.push(...dirty.ctx.common.issues);
                return dirty.result;
            }
            const unionErrors = issues.map((issues) => new ZodError(issues));
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_union,
                unionErrors,
            });
            return INVALID;
        }
    }
    get options() {
        return this._def.options;
    }
}
ZodUnion.create = (types, params) => {
    return new ZodUnion({
        options: types,
        typeName: ZodFirstPartyTypeKind.ZodUnion,
        ...processCreateParams(params),
    });
};
/////////////////////////////////////////////////////
/////////////////////////////////////////////////////
//////////                                 //////////
//////////      ZodDiscriminatedUnion      //////////
//////////                                 //////////
/////////////////////////////////////////////////////
/////////////////////////////////////////////////////
const getDiscriminator = (type) => {
    if (type instanceof ZodLazy) {
        return getDiscriminator(type.schema);
    }
    else if (type instanceof ZodEffects) {
        return getDiscriminator(type.innerType());
    }
    else if (type instanceof ZodLiteral) {
        return [type.value];
    }
    else if (type instanceof ZodEnum) {
        return type.options;
    }
    else if (type instanceof ZodNativeEnum) {
        // eslint-disable-next-line ban/ban
        return util.objectValues(type.enum);
    }
    else if (type instanceof ZodDefault) {
        return getDiscriminator(type._def.innerType);
    }
    else if (type instanceof ZodUndefined) {
        return [undefined];
    }
    else if (type instanceof ZodNull) {
        return [null];
    }
    else if (type instanceof ZodOptional) {
        return [undefined, ...getDiscriminator(type.unwrap())];
    }
    else if (type instanceof ZodNullable) {
        return [null, ...getDiscriminator(type.unwrap())];
    }
    else if (type instanceof ZodBranded) {
        return getDiscriminator(type.unwrap());
    }
    else if (type instanceof ZodReadonly) {
        return getDiscriminator(type.unwrap());
    }
    else if (type instanceof ZodCatch) {
        return getDiscriminator(type._def.innerType);
    }
    else {
        return [];
    }
};
class ZodDiscriminatedUnion extends ZodType {
    _parse(input) {
        const { ctx } = this._processInputParams(input);
        if (ctx.parsedType !== ZodParsedType.object) {
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.object,
                received: ctx.parsedType,
            });
            return INVALID;
        }
        const discriminator = this.discriminator;
        const discriminatorValue = ctx.data[discriminator];
        const option = this.optionsMap.get(discriminatorValue);
        if (!option) {
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_union_discriminator,
                options: Array.from(this.optionsMap.keys()),
                path: [discriminator],
            });
            return INVALID;
        }
        if (ctx.common.async) {
            return option._parseAsync({
                data: ctx.data,
                path: ctx.path,
                parent: ctx,
            });
        }
        else {
            return option._parseSync({
                data: ctx.data,
                path: ctx.path,
                parent: ctx,
            });
        }
    }
    get discriminator() {
        return this._def.discriminator;
    }
    get options() {
        return this._def.options;
    }
    get optionsMap() {
        return this._def.optionsMap;
    }
    /**
     * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.
     * However, it only allows a union of objects, all of which need to share a discriminator property. This property must
     * have a different value for each object in the union.
     * @param discriminator the name of the discriminator property
     * @param types an array of object schemas
     * @param params
     */
    static create(discriminator, options, params) {
        // Get all the valid discriminator values
        const optionsMap = new Map();
        // try {
        for (const type of options) {
            const discriminatorValues = getDiscriminator(type.shape[discriminator]);
            if (!discriminatorValues.length) {
                throw new Error(`A discriminator value for key \`${discriminator}\` could not be extracted from all schema options`);
            }
            for (const value of discriminatorValues) {
                if (optionsMap.has(value)) {
                    throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);
                }
                optionsMap.set(value, type);
            }
        }
        return new ZodDiscriminatedUnion({
            typeName: ZodFirstPartyTypeKind.ZodDiscriminatedUnion,
            discriminator,
            options,
            optionsMap,
            ...processCreateParams(params),
        });
    }
}
function mergeValues(a, b) {
    const aType = getParsedType(a);
    const bType = getParsedType(b);
    if (a === b) {
        return { valid: true, data: a };
    }
    else if (aType === ZodParsedType.object && bType === ZodParsedType.object) {
        const bKeys = util.objectKeys(b);
        const sharedKeys = util
            .objectKeys(a)
            .filter((key) => bKeys.indexOf(key) !== -1);
        const newObj = { ...a, ...b };
        for (const key of sharedKeys) {
            const sharedValue = mergeValues(a[key], b[key]);
            if (!sharedValue.valid) {
                return { valid: false };
            }
            newObj[key] = sharedValue.data;
        }
        return { valid: true, data: newObj };
    }
    else if (aType === ZodParsedType.array && bType === ZodParsedType.array) {
        if (a.length !== b.length) {
            return { valid: false };
        }
        const newArray = [];
        for (let index = 0; index < a.length; index++) {
            const itemA = a[index];
            const itemB = b[index];
            const sharedValue = mergeValues(itemA, itemB);
            if (!sharedValue.valid) {
                return { valid: false };
            }
            newArray.push(sharedValue.data);
        }
        return { valid: true, data: newArray };
    }
    else if (aType === ZodParsedType.date &&
        bType === ZodParsedType.date &&
        +a === +b) {
        return { valid: true, data: a };
    }
    else {
        return { valid: false };
    }
}
class ZodIntersection extends ZodType {
    _parse(input) {
        const { status, ctx } = this._processInputParams(input);
        const handleParsed = (parsedLeft, parsedRight) => {
            if (isAborted(parsedLeft) || isAborted(parsedRight)) {
                return INVALID;
            }
            const merged = mergeValues(parsedLeft.value, parsedRight.value);
            if (!merged.valid) {
                addIssueToContext(ctx, {
                    code: ZodIssueCode.invalid_intersection_types,
                });
                return INVALID;
            }
            if (isDirty(parsedLeft) || isDirty(parsedRight)) {
                status.dirty();
            }
            return { status: status.value, value: merged.data };
        };
        if (ctx.common.async) {
            return Promise.all([
                this._def.left._parseAsync({
                    data: ctx.data,
                    path: ctx.path,
                    parent: ctx,
                }),
                this._def.right._parseAsync({
                    data: ctx.data,
                    path: ctx.path,
                    parent: ctx,
                }),
            ]).then(([left, right]) => handleParsed(left, right));
        }
        else {
            return handleParsed(this._def.left._parseSync({
                data: ctx.data,
                path: ctx.path,
                parent: ctx,
            }), this._def.right._parseSync({
                data: ctx.data,
                path: ctx.path,
                parent: ctx,
            }));
        }
    }
}
ZodIntersection.create = (left, right, params) => {
    return new ZodIntersection({
        left: left,
        right: right,
        typeName: ZodFirstPartyTypeKind.ZodIntersection,
        ...processCreateParams(params),
    });
};
class ZodTuple extends ZodType {
    _parse(input) {
        const { status, ctx } = this._processInputParams(input);
        if (ctx.parsedType !== ZodParsedType.array) {
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.array,
                received: ctx.parsedType,
            });
            return INVALID;
        }
        if (ctx.data.length < this._def.items.length) {
            addIssueToContext(ctx, {
                code: ZodIssueCode.too_small,
                minimum: this._def.items.length,
                inclusive: true,
                exact: false,
                type: "array",
            });
            return INVALID;
        }
        const rest = this._def.rest;
        if (!rest && ctx.data.length > this._def.items.length) {
            addIssueToContext(ctx, {
                code: ZodIssueCode.too_big,
                maximum: this._def.items.length,
                inclusive: true,
                exact: false,
                type: "array",
            });
            status.dirty();
        }
        const items = [...ctx.data]
            .map((item, itemIndex) => {
            const schema = this._def.items[itemIndex] || this._def.rest;
            if (!schema)
                return null;
            return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));
        })
            .filter((x) => !!x); // filter nulls
        if (ctx.common.async) {
            return Promise.all(items).then((results) => {
                return ParseStatus.mergeArray(status, results);
            });
        }
        else {
            return ParseStatus.mergeArray(status, items);
        }
    }
    get items() {
        return this._def.items;
    }
    rest(rest) {
        return new ZodTuple({
            ...this._def,
            rest,
        });
    }
}
ZodTuple.create = (schemas, params) => {
    if (!Array.isArray(schemas)) {
        throw new Error("You must pass an array of schemas to z.tuple([ ... ])");
    }
    return new ZodTuple({
        items: schemas,
        typeName: ZodFirstPartyTypeKind.ZodTuple,
        rest: null,
        ...processCreateParams(params),
    });
};
class ZodRecord extends ZodType {
    get keySchema() {
        return this._def.keyType;
    }
    get valueSchema() {
        return this._def.valueType;
    }
    _parse(input) {
        const { status, ctx } = this._processInputParams(input);
        if (ctx.parsedType !== ZodParsedType.object) {
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.object,
                received: ctx.parsedType,
            });
            return INVALID;
        }
        const pairs = [];
        const keyType = this._def.keyType;
        const valueType = this._def.valueType;
        for (const key in ctx.data) {
            pairs.push({
                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, key)),
                value: valueType._parse(new ParseInputLazyPath(ctx, ctx.data[key], ctx.path, key)),
                alwaysSet: key in ctx.data,
            });
        }
        if (ctx.common.async) {
            return ParseStatus.mergeObjectAsync(status, pairs);
        }
        else {
            return ParseStatus.mergeObjectSync(status, pairs);
        }
    }
    get element() {
        return this._def.valueType;
    }
    static create(first, second, third) {
        if (second instanceof ZodType) {
            return new ZodRecord({
                keyType: first,
                valueType: second,
                typeName: ZodFirstPartyTypeKind.ZodRecord,
                ...processCreateParams(third),
            });
        }
        return new ZodRecord({
            keyType: ZodString.create(),
            valueType: first,
            typeName: ZodFirstPartyTypeKind.ZodRecord,
            ...processCreateParams(second),
        });
    }
}
class ZodMap extends ZodType {
    get keySchema() {
        return this._def.keyType;
    }
    get valueSchema() {
        return this._def.valueType;
    }
    _parse(input) {
        const { status, ctx } = this._processInputParams(input);
        if (ctx.parsedType !== ZodParsedType.map) {
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.map,
                received: ctx.parsedType,
            });
            return INVALID;
        }
        const keyType = this._def.keyType;
        const valueType = this._def.valueType;
        const pairs = [...ctx.data.entries()].map(([key, value], index) => {
            return {
                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [index, "key"])),
                value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [index, "value"])),
            };
        });
        if (ctx.common.async) {
            const finalMap = new Map();
            return Promise.resolve().then(async () => {
                for (const pair of pairs) {
                    const key = await pair.key;
                    const value = await pair.value;
                    if (key.status === "aborted" || value.status === "aborted") {
                        return INVALID;
                    }
                    if (key.status === "dirty" || value.status === "dirty") {
                        status.dirty();
                    }
                    finalMap.set(key.value, value.value);
                }
                return { status: status.value, value: finalMap };
            });
        }
        else {
            const finalMap = new Map();
            for (const pair of pairs) {
                const key = pair.key;
                const value = pair.value;
                if (key.status === "aborted" || value.status === "aborted") {
                    return INVALID;
                }
                if (key.status === "dirty" || value.status === "dirty") {
                    status.dirty();
                }
                finalMap.set(key.value, value.value);
            }
            return { status: status.value, value: finalMap };
        }
    }
}
ZodMap.create = (keyType, valueType, params) => {
    return new ZodMap({
        valueType,
        keyType,
        typeName: ZodFirstPartyTypeKind.ZodMap,
        ...processCreateParams(params),
    });
};
class ZodSet extends ZodType {
    _parse(input) {
        const { status, ctx } = this._processInputParams(input);
        if (ctx.parsedType !== ZodParsedType.set) {
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.set,
                received: ctx.parsedType,
            });
            return INVALID;
        }
        const def = this._def;
        if (def.minSize !== null) {
            if (ctx.data.size < def.minSize.value) {
                addIssueToContext(ctx, {
                    code: ZodIssueCode.too_small,
                    minimum: def.minSize.value,
                    type: "set",
                    inclusive: true,
                    exact: false,
                    message: def.minSize.message,
                });
                status.dirty();
            }
        }
        if (def.maxSize !== null) {
            if (ctx.data.size > def.maxSize.value) {
                addIssueToContext(ctx, {
                    code: ZodIssueCode.too_big,
                    maximum: def.maxSize.value,
                    type: "set",
                    inclusive: true,
                    exact: false,
                    message: def.maxSize.message,
                });
                status.dirty();
            }
        }
        const valueType = this._def.valueType;
        function finalizeSet(elements) {
            const parsedSet = new Set();
            for (const element of elements) {
                if (element.status === "aborted")
                    return INVALID;
                if (element.status === "dirty")
                    status.dirty();
                parsedSet.add(element.value);
            }
            return { status: status.value, value: parsedSet };
        }
        const elements = [...ctx.data.values()].map((item, i) => valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i)));
        if (ctx.common.async) {
            return Promise.all(elements).then((elements) => finalizeSet(elements));
        }
        else {
            return finalizeSet(elements);
        }
    }
    min(minSize, message) {
        return new ZodSet({
            ...this._def,
            minSize: { value: minSize, message: errorUtil.toString(message) },
        });
    }
    max(maxSize, message) {
        return new ZodSet({
            ...this._def,
            maxSize: { value: maxSize, message: errorUtil.toString(message) },
        });
    }
    size(size, message) {
        return this.min(size, message).max(size, message);
    }
    nonempty(message) {
        return this.min(1, message);
    }
}
ZodSet.create = (valueType, params) => {
    return new ZodSet({
        valueType,
        minSize: null,
        maxSize: null,
        typeName: ZodFirstPartyTypeKind.ZodSet,
        ...processCreateParams(params),
    });
};
class ZodFunction extends ZodType {
    constructor() {
        super(...arguments);
        this.validate = this.implement;
    }
    _parse(input) {
        const { ctx } = this._processInputParams(input);
        if (ctx.parsedType !== ZodParsedType.function) {
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.function,
                received: ctx.parsedType,
            });
            return INVALID;
        }
        function makeArgsIssue(args, error) {
            return makeIssue({
                data: args,
                path: ctx.path,
                errorMaps: [
                    ctx.common.contextualErrorMap,
                    ctx.schemaErrorMap,
                    getErrorMap(),
                    errorMap,
                ].filter((x) => !!x),
                issueData: {
                    code: ZodIssueCode.invalid_arguments,
                    argumentsError: error,
                },
            });
        }
        function makeReturnsIssue(returns, error) {
            return makeIssue({
                data: returns,
                path: ctx.path,
                errorMaps: [
                    ctx.common.contextualErrorMap,
                    ctx.schemaErrorMap,
                    getErrorMap(),
                    errorMap,
                ].filter((x) => !!x),
                issueData: {
                    code: ZodIssueCode.invalid_return_type,
                    returnTypeError: error,
                },
            });
        }
        const params = { errorMap: ctx.common.contextualErrorMap };
        const fn = ctx.data;
        if (this._def.returns instanceof ZodPromise) {
            // Would love a way to avoid disabling this rule, but we need
            // an alias (using an arrow function was what caused 2651).
            // eslint-disable-next-line @typescript-eslint/no-this-alias
            const me = this;
            return OK(async function (...args) {
                const error = new ZodError([]);
                const parsedArgs = await me._def.args
                    .parseAsync(args, params)
                    .catch((e) => {
                    error.addIssue(makeArgsIssue(args, e));
                    throw error;
                });
                const result = await Reflect.apply(fn, this, parsedArgs);
                const parsedReturns = await me._def.returns._def.type
                    .parseAsync(result, params)
                    .catch((e) => {
                    error.addIssue(makeReturnsIssue(result, e));
                    throw error;
                });
                return parsedReturns;
            });
        }
        else {
            // Would love a way to avoid disabling this rule, but we need
            // an alias (using an arrow function was what caused 2651).
            // eslint-disable-next-line @typescript-eslint/no-this-alias
            const me = this;
            return OK(function (...args) {
                const parsedArgs = me._def.args.safeParse(args, params);
                if (!parsedArgs.success) {
                    throw new ZodError([makeArgsIssue(args, parsedArgs.error)]);
                }
                const result = Reflect.apply(fn, this, parsedArgs.data);
                const parsedReturns = me._def.returns.safeParse(result, params);
                if (!parsedReturns.success) {
                    throw new ZodError([makeReturnsIssue(result, parsedReturns.error)]);
                }
                return parsedReturns.data;
            });
        }
    }
    parameters() {
        return this._def.args;
    }
    returnType() {
        return this._def.returns;
    }
    args(...items) {
        return new ZodFunction({
            ...this._def,
            args: ZodTuple.create(items).rest(ZodUnknown.create()),
        });
    }
    returns(returnType) {
        return new ZodFunction({
            ...this._def,
            returns: returnType,
        });
    }
    implement(func) {
        const validatedFunc = this.parse(func);
        return validatedFunc;
    }
    strictImplement(func) {
        const validatedFunc = this.parse(func);
        return validatedFunc;
    }
    static create(args, returns, params) {
        return new ZodFunction({
            args: (args
                ? args
                : ZodTuple.create([]).rest(ZodUnknown.create())),
            returns: returns || ZodUnknown.create(),
            typeName: ZodFirstPartyTypeKind.ZodFunction,
            ...processCreateParams(params),
        });
    }
}
class ZodLazy extends ZodType {
    get schema() {
        return this._def.getter();
    }
    _parse(input) {
        const { ctx } = this._processInputParams(input);
        const lazySchema = this._def.getter();
        return lazySchema._parse({ data: ctx.data, path: ctx.path, parent: ctx });
    }
}
ZodLazy.create = (getter, params) => {
    return new ZodLazy({
        getter: getter,
        typeName: ZodFirstPartyTypeKind.ZodLazy,
        ...processCreateParams(params),
    });
};
class ZodLiteral extends ZodType {
    _parse(input) {
        if (input.data !== this._def.value) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                received: ctx.data,
                code: ZodIssueCode.invalid_literal,
                expected: this._def.value,
            });
            return INVALID;
        }
        return { status: "valid", value: input.data };
    }
    get value() {
        return this._def.value;
    }
}
ZodLiteral.create = (value, params) => {
    return new ZodLiteral({
        value: value,
        typeName: ZodFirstPartyTypeKind.ZodLiteral,
        ...processCreateParams(params),
    });
};
function createZodEnum(values, params) {
    return new ZodEnum({
        values,
        typeName: ZodFirstPartyTypeKind.ZodEnum,
        ...processCreateParams(params),
    });
}
class ZodEnum extends ZodType {
    constructor() {
        super(...arguments);
        _ZodEnum_cache.set(this, void 0);
    }
    _parse(input) {
        if (typeof input.data !== "string") {
            const ctx = this._getOrReturnCtx(input);
            const expectedValues = this._def.values;
            addIssueToContext(ctx, {
                expected: util.joinValues(expectedValues),
                received: ctx.parsedType,
                code: ZodIssueCode.invalid_type,
            });
            return INVALID;
        }
        if (!__classPrivateFieldGet(this, _ZodEnum_cache)) {
            __classPrivateFieldSet(this, _ZodEnum_cache, new Set(this._def.values));
        }
        if (!__classPrivateFieldGet(this, _ZodEnum_cache).has(input.data)) {
            const ctx = this._getOrReturnCtx(input);
            const expectedValues = this._def.values;
            addIssueToContext(ctx, {
                received: ctx.data,
                code: ZodIssueCode.invalid_enum_value,
                options: expectedValues,
            });
            return INVALID;
        }
        return OK(input.data);
    }
    get options() {
        return this._def.values;
    }
    get enum() {
        const enumValues = {};
        for (const val of this._def.values) {
            enumValues[val] = val;
        }
        return enumValues;
    }
    get Values() {
        const enumValues = {};
        for (const val of this._def.values) {
            enumValues[val] = val;
        }
        return enumValues;
    }
    get Enum() {
        const enumValues = {};
        for (const val of this._def.values) {
            enumValues[val] = val;
        }
        return enumValues;
    }
    extract(values, newDef = this._def) {
        return ZodEnum.create(values, {
            ...this._def,
            ...newDef,
        });
    }
    exclude(values, newDef = this._def) {
        return ZodEnum.create(this.options.filter((opt) => !values.includes(opt)), {
            ...this._def,
            ...newDef,
        });
    }
}
_ZodEnum_cache = new WeakMap();
ZodEnum.create = createZodEnum;
class ZodNativeEnum extends ZodType {
    constructor() {
        super(...arguments);
        _ZodNativeEnum_cache.set(this, void 0);
    }
    _parse(input) {
        const nativeEnumValues = util.getValidEnumValues(this._def.values);
        const ctx = this._getOrReturnCtx(input);
        if (ctx.parsedType !== ZodParsedType.string &&
            ctx.parsedType !== ZodParsedType.number) {
            const expectedValues = util.objectValues(nativeEnumValues);
            addIssueToContext(ctx, {
                expected: util.joinValues(expectedValues),
                received: ctx.parsedType,
                code: ZodIssueCode.invalid_type,
            });
            return INVALID;
        }
        if (!__classPrivateFieldGet(this, _ZodNativeEnum_cache)) {
            __classPrivateFieldSet(this, _ZodNativeEnum_cache, new Set(util.getValidEnumValues(this._def.values)));
        }
        if (!__classPrivateFieldGet(this, _ZodNativeEnum_cache).has(input.data)) {
            const expectedValues = util.objectValues(nativeEnumValues);
            addIssueToContext(ctx, {
                received: ctx.data,
                code: ZodIssueCode.invalid_enum_value,
                options: expectedValues,
            });
            return INVALID;
        }
        return OK(input.data);
    }
    get enum() {
        return this._def.values;
    }
}
_ZodNativeEnum_cache = new WeakMap();
ZodNativeEnum.create = (values, params) => {
    return new ZodNativeEnum({
        values: values,
        typeName: ZodFirstPartyTypeKind.ZodNativeEnum,
        ...processCreateParams(params),
    });
};
class ZodPromise extends ZodType {
    unwrap() {
        return this._def.type;
    }
    _parse(input) {
        const { ctx } = this._processInputParams(input);
        if (ctx.parsedType !== ZodParsedType.promise &&
            ctx.common.async === false) {
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.promise,
                received: ctx.parsedType,
            });
            return INVALID;
        }
        const promisified = ctx.parsedType === ZodParsedType.promise
            ? ctx.data
            : Promise.resolve(ctx.data);
        return OK(promisified.then((data) => {
            return this._def.type.parseAsync(data, {
                path: ctx.path,
                errorMap: ctx.common.contextualErrorMap,
            });
        }));
    }
}
ZodPromise.create = (schema, params) => {
    return new ZodPromise({
        type: schema,
        typeName: ZodFirstPartyTypeKind.ZodPromise,
        ...processCreateParams(params),
    });
};
class ZodEffects extends ZodType {
    innerType() {
        return this._def.schema;
    }
    sourceType() {
        return this._def.schema._def.typeName === ZodFirstPartyTypeKind.ZodEffects
            ? this._def.schema.sourceType()
            : this._def.schema;
    }
    _parse(input) {
        const { status, ctx } = this._processInputParams(input);
        const effect = this._def.effect || null;
        const checkCtx = {
            addIssue: (arg) => {
                addIssueToContext(ctx, arg);
                if (arg.fatal) {
                    status.abort();
                }
                else {
                    status.dirty();
                }
            },
            get path() {
                return ctx.path;
            },
        };
        checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);
        if (effect.type === "preprocess") {
            const processed = effect.transform(ctx.data, checkCtx);
            if (ctx.common.async) {
                return Promise.resolve(processed).then(async (processed) => {
                    if (status.value === "aborted")
                        return INVALID;
                    const result = await this._def.schema._parseAsync({
                        data: processed,
                        path: ctx.path,
                        parent: ctx,
                    });
                    if (result.status === "aborted")
                        return INVALID;
                    if (result.status === "dirty")
                        return DIRTY(result.value);
                    if (status.value === "dirty")
                        return DIRTY(result.value);
                    return result;
                });
            }
            else {
                if (status.value === "aborted")
                    return INVALID;
                const result = this._def.schema._parseSync({
                    data: processed,
                    path: ctx.path,
                    parent: ctx,
                });
                if (result.status === "aborted")
                    return INVALID;
                if (result.status === "dirty")
                    return DIRTY(result.value);
                if (status.value === "dirty")
                    return DIRTY(result.value);
                return result;
            }
        }
        if (effect.type === "refinement") {
            const executeRefinement = (acc) => {
                const result = effect.refinement(acc, checkCtx);
                if (ctx.common.async) {
                    return Promise.resolve(result);
                }
                if (result instanceof Promise) {
                    throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");
                }
                return acc;
            };
            if (ctx.common.async === false) {
                const inner = this._def.schema._parseSync({
                    data: ctx.data,
                    path: ctx.path,
                    parent: ctx,
                });
                if (inner.status === "aborted")
                    return INVALID;
                if (inner.status === "dirty")
                    status.dirty();
                // return value is ignored
                executeRefinement(inner.value);
                return { status: status.value, value: inner.value };
            }
            else {
                return this._def.schema
                    ._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx })
                    .then((inner) => {
                    if (inner.status === "aborted")
                        return INVALID;
                    if (inner.status === "dirty")
                        status.dirty();
                    return executeRefinement(inner.value).then(() => {
                        return { status: status.value, value: inner.value };
                    });
                });
            }
        }
        if (effect.type === "transform") {
            if (ctx.common.async === false) {
                const base = this._def.schema._parseSync({
                    data: ctx.data,
                    path: ctx.path,
                    parent: ctx,
                });
                if (!isValid(base))
                    return base;
                const result = effect.transform(base.value, checkCtx);
                if (result instanceof Promise) {
                    throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);
                }
                return { status: status.value, value: result };
            }
            else {
                return this._def.schema
                    ._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx })
                    .then((base) => {
                    if (!isValid(base))
                        return base;
                    return Promise.resolve(effect.transform(base.value, checkCtx)).then((result) => ({ status: status.value, value: result }));
                });
            }
        }
        util.assertNever(effect);
    }
}
ZodEffects.create = (schema, effect, params) => {
    return new ZodEffects({
        schema,
        typeName: ZodFirstPartyTypeKind.ZodEffects,
        effect,
        ...processCreateParams(params),
    });
};
ZodEffects.createWithPreprocess = (preprocess, schema, params) => {
    return new ZodEffects({
        schema,
        effect: { type: "preprocess", transform: preprocess },
        typeName: ZodFirstPartyTypeKind.ZodEffects,
        ...processCreateParams(params),
    });
};
class ZodOptional extends ZodType {
    _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType === ZodParsedType.undefined) {
            return OK(undefined);
        }
        return this._def.innerType._parse(input);
    }
    unwrap() {
        return this._def.innerType;
    }
}
ZodOptional.create = (type, params) => {
    return new ZodOptional({
        innerType: type,
        typeName: ZodFirstPartyTypeKind.ZodOptional,
        ...processCreateParams(params),
    });
};
class ZodNullable extends ZodType {
    _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType === ZodParsedType.null) {
            return OK(null);
        }
        return this._def.innerType._parse(input);
    }
    unwrap() {
        return this._def.innerType;
    }
}
ZodNullable.create = (type, params) => {
    return new ZodNullable({
        innerType: type,
        typeName: ZodFirstPartyTypeKind.ZodNullable,
        ...processCreateParams(params),
    });
};
class ZodDefault extends ZodType {
    _parse(input) {
        const { ctx } = this._processInputParams(input);
        let data = ctx.data;
        if (ctx.parsedType === ZodParsedType.undefined) {
            data = this._def.defaultValue();
        }
        return this._def.innerType._parse({
            data,
            path: ctx.path,
            parent: ctx,
        });
    }
    removeDefault() {
        return this._def.innerType;
    }
}
ZodDefault.create = (type, params) => {
    return new ZodDefault({
        innerType: type,
        typeName: ZodFirstPartyTypeKind.ZodDefault,
        defaultValue: typeof params.default === "function"
            ? params.default
            : () => params.default,
        ...processCreateParams(params),
    });
};
class ZodCatch extends ZodType {
    _parse(input) {
        const { ctx } = this._processInputParams(input);
        // newCtx is used to not collect issues from inner types in ctx
        const newCtx = {
            ...ctx,
            common: {
                ...ctx.common,
                issues: [],
            },
        };
        const result = this._def.innerType._parse({
            data: newCtx.data,
            path: newCtx.path,
            parent: {
                ...newCtx,
            },
        });
        if (isAsync(result)) {
            return result.then((result) => {
                return {
                    status: "valid",
                    value: result.status === "valid"
                        ? result.value
                        : this._def.catchValue({
                            get error() {
                                return new ZodError(newCtx.common.issues);
                            },
                            input: newCtx.data,
                        }),
                };
            });
        }
        else {
            return {
                status: "valid",
                value: result.status === "valid"
                    ? result.value
                    : this._def.catchValue({
                        get error() {
                            return new ZodError(newCtx.common.issues);
                        },
                        input: newCtx.data,
                    }),
            };
        }
    }
    removeCatch() {
        return this._def.innerType;
    }
}
ZodCatch.create = (type, params) => {
    return new ZodCatch({
        innerType: type,
        typeName: ZodFirstPartyTypeKind.ZodCatch,
        catchValue: typeof params.catch === "function" ? params.catch : () => params.catch,
        ...processCreateParams(params),
    });
};
class ZodNaN extends ZodType {
    _parse(input) {
        const parsedType = this._getType(input);
        if (parsedType !== ZodParsedType.nan) {
            const ctx = this._getOrReturnCtx(input);
            addIssueToContext(ctx, {
                code: ZodIssueCode.invalid_type,
                expected: ZodParsedType.nan,
                received: ctx.parsedType,
            });
            return INVALID;
        }
        return { status: "valid", value: input.data };
    }
}
ZodNaN.create = (params) => {
    return new ZodNaN({
        typeName: ZodFirstPartyTypeKind.ZodNaN,
        ...processCreateParams(params),
    });
};
const BRAND = Symbol("zod_brand");
class ZodBranded extends ZodType {
    _parse(input) {
        const { ctx } = this._processInputParams(input);
        const data = ctx.data;
        return this._def.type._parse({
            data,
            path: ctx.path,
            parent: ctx,
        });
    }
    unwrap() {
        return this._def.type;
    }
}
class ZodPipeline extends ZodType {
    _parse(input) {
        const { status, ctx } = this._processInputParams(input);
        if (ctx.common.async) {
            const handleAsync = async () => {
                const inResult = await this._def.in._parseAsync({
                    data: ctx.data,
                    path: ctx.path,
                    parent: ctx,
                });
                if (inResult.status === "aborted")
                    return INVALID;
                if (inResult.status === "dirty") {
                    status.dirty();
                    return DIRTY(inResult.value);
                }
                else {
                    return this._def.out._parseAsync({
                        data: inResult.value,
                        path: ctx.path,
                        parent: ctx,
                    });
                }
            };
            return handleAsync();
        }
        else {
            const inResult = this._def.in._parseSync({
                data: ctx.data,
                path: ctx.path,
                parent: ctx,
            });
            if (inResult.status === "aborted")
                return INVALID;
            if (inResult.status === "dirty") {
                status.dirty();
                return {
                    status: "dirty",
                    value: inResult.value,
                };
            }
            else {
                return this._def.out._parseSync({
                    data: inResult.value,
                    path: ctx.path,
                    parent: ctx,
                });
            }
        }
    }
    static create(a, b) {
        return new ZodPipeline({
            in: a,
            out: b,
            typeName: ZodFirstPartyTypeKind.ZodPipeline,
        });
    }
}
class ZodReadonly extends ZodType {
    _parse(input) {
        const result = this._def.innerType._parse(input);
        const freeze = (data) => {
            if (isValid(data)) {
                data.value = Object.freeze(data.value);
            }
            return data;
        };
        return isAsync(result)
            ? result.then((data) => freeze(data))
            : freeze(result);
    }
    unwrap() {
        return this._def.innerType;
    }
}
ZodReadonly.create = (type, params) => {
    return new ZodReadonly({
        innerType: type,
        typeName: ZodFirstPartyTypeKind.ZodReadonly,
        ...processCreateParams(params),
    });
};
function custom(check, params = {}, 
/**
 * @deprecated
 *
 * Pass `fatal` into the params object instead:
 *
 * ```ts
 * z.string().custom((val) => val.length > 5, { fatal: false })
 * ```
 *
 */
fatal) {
    if (check)
        return ZodAny.create().superRefine((data, ctx) => {
            var _a, _b;
            if (!check(data)) {
                const p = typeof params === "function"
                    ? params(data)
                    : typeof params === "string"
                        ? { message: params }
                        : params;
                const _fatal = (_b = (_a = p.fatal) !== null && _a !== void 0 ? _a : fatal) !== null && _b !== void 0 ? _b : true;
                const p2 = typeof p === "string" ? { message: p } : p;
                ctx.addIssue({ code: "custom", ...p2, fatal: _fatal });
            }
        });
    return ZodAny.create();
}
const late = {
    object: ZodObject.lazycreate,
};
var ZodFirstPartyTypeKind;
(function (ZodFirstPartyTypeKind) {
    ZodFirstPartyTypeKind["ZodString"] = "ZodString";
    ZodFirstPartyTypeKind["ZodNumber"] = "ZodNumber";
    ZodFirstPartyTypeKind["ZodNaN"] = "ZodNaN";
    ZodFirstPartyTypeKind["ZodBigInt"] = "ZodBigInt";
    ZodFirstPartyTypeKind["ZodBoolean"] = "ZodBoolean";
    ZodFirstPartyTypeKind["ZodDate"] = "ZodDate";
    ZodFirstPartyTypeKind["ZodSymbol"] = "ZodSymbol";
    ZodFirstPartyTypeKind["ZodUndefined"] = "ZodUndefined";
    ZodFirstPartyTypeKind["ZodNull"] = "ZodNull";
    ZodFirstPartyTypeKind["ZodAny"] = "ZodAny";
    ZodFirstPartyTypeKind["ZodUnknown"] = "ZodUnknown";
    ZodFirstPartyTypeKind["ZodNever"] = "ZodNever";
    ZodFirstPartyTypeKind["ZodVoid"] = "ZodVoid";
    ZodFirstPartyTypeKind["ZodArray"] = "ZodArray";
    ZodFirstPartyTypeKind["ZodObject"] = "ZodObject";
    ZodFirstPartyTypeKind["ZodUnion"] = "ZodUnion";
    ZodFirstPartyTypeKind["ZodDiscriminatedUnion"] = "ZodDiscriminatedUnion";
    ZodFirstPartyTypeKind["ZodIntersection"] = "ZodIntersection";
    ZodFirstPartyTypeKind["ZodTuple"] = "ZodTuple";
    ZodFirstPartyTypeKind["ZodRecord"] = "ZodRecord";
    ZodFirstPartyTypeKind["ZodMap"] = "ZodMap";
    ZodFirstPartyTypeKind["ZodSet"] = "ZodSet";
    ZodFirstPartyTypeKind["ZodFunction"] = "ZodFunction";
    ZodFirstPartyTypeKind["ZodLazy"] = "ZodLazy";
    ZodFirstPartyTypeKind["ZodLiteral"] = "ZodLiteral";
    ZodFirstPartyTypeKind["ZodEnum"] = "ZodEnum";
    ZodFirstPartyTypeKind["ZodEffects"] = "ZodEffects";
    ZodFirstPartyTypeKind["ZodNativeEnum"] = "ZodNativeEnum";
    ZodFirstPartyTypeKind["ZodOptional"] = "ZodOptional";
    ZodFirstPartyTypeKind["ZodNullable"] = "ZodNullable";
    ZodFirstPartyTypeKind["ZodDefault"] = "ZodDefault";
    ZodFirstPartyTypeKind["ZodCatch"] = "ZodCatch";
    ZodFirstPartyTypeKind["ZodPromise"] = "ZodPromise";
    ZodFirstPartyTypeKind["ZodBranded"] = "ZodBranded";
    ZodFirstPartyTypeKind["ZodPipeline"] = "ZodPipeline";
    ZodFirstPartyTypeKind["ZodReadonly"] = "ZodReadonly";
})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));
const instanceOfType = (
// const instanceOfType = <T extends new (...args: any[]) => any>(
cls, params = {
    message: `Input not instance of ${cls.name}`,
}) => custom((data) => data instanceof cls, params);
const stringType = ZodString.create;
const numberType = ZodNumber.create;
const nanType = ZodNaN.create;
const bigIntType = ZodBigInt.create;
const booleanType = ZodBoolean.create;
const dateType = ZodDate.create;
const symbolType = ZodSymbol.create;
const undefinedType = ZodUndefined.create;
const nullType = ZodNull.create;
const anyType = ZodAny.create;
const unknownType = ZodUnknown.create;
const neverType = ZodNever.create;
const voidType = ZodVoid.create;
const arrayType = ZodArray.create;
const objectType = ZodObject.create;
const strictObjectType = ZodObject.strictCreate;
const unionType = ZodUnion.create;
const discriminatedUnionType = ZodDiscriminatedUnion.create;
const intersectionType = ZodIntersection.create;
const tupleType = ZodTuple.create;
const recordType = ZodRecord.create;
const mapType = ZodMap.create;
const setType = ZodSet.create;
const functionType = ZodFunction.create;
const lazyType = ZodLazy.create;
const literalType = ZodLiteral.create;
const enumType = ZodEnum.create;
const nativeEnumType = ZodNativeEnum.create;
const promiseType = ZodPromise.create;
const effectsType = ZodEffects.create;
const optionalType = ZodOptional.create;
const nullableType = ZodNullable.create;
const preprocessType = ZodEffects.createWithPreprocess;
const pipelineType = ZodPipeline.create;
const ostring = () => stringType().optional();
const onumber = () => numberType().optional();
const oboolean = () => booleanType().optional();
const coerce = {
    string: ((arg) => ZodString.create({ ...arg, coerce: true })),
    number: ((arg) => ZodNumber.create({ ...arg, coerce: true })),
    boolean: ((arg) => ZodBoolean.create({
        ...arg,
        coerce: true,
    })),
    bigint: ((arg) => ZodBigInt.create({ ...arg, coerce: true })),
    date: ((arg) => ZodDate.create({ ...arg, coerce: true })),
};
const NEVER = INVALID;

var z = /*#__PURE__*/Object.freeze({
    __proto__: null,
    defaultErrorMap: errorMap,
    setErrorMap: setErrorMap,
    getErrorMap: getErrorMap,
    makeIssue: makeIssue,
    EMPTY_PATH: EMPTY_PATH,
    addIssueToContext: addIssueToContext,
    ParseStatus: ParseStatus,
    INVALID: INVALID,
    DIRTY: DIRTY,
    OK: OK,
    isAborted: isAborted,
    isDirty: isDirty,
    isValid: isValid,
    isAsync: isAsync,
    get util () { return util; },
    get objectUtil () { return objectUtil; },
    ZodParsedType: ZodParsedType,
    getParsedType: getParsedType,
    ZodType: ZodType,
    datetimeRegex: datetimeRegex,
    ZodString: ZodString,
    ZodNumber: ZodNumber,
    ZodBigInt: ZodBigInt,
    ZodBoolean: ZodBoolean,
    ZodDate: ZodDate,
    ZodSymbol: ZodSymbol,
    ZodUndefined: ZodUndefined,
    ZodNull: ZodNull,
    ZodAny: ZodAny,
    ZodUnknown: ZodUnknown,
    ZodNever: ZodNever,
    ZodVoid: ZodVoid,
    ZodArray: ZodArray,
    ZodObject: ZodObject,
    ZodUnion: ZodUnion,
    ZodDiscriminatedUnion: ZodDiscriminatedUnion,
    ZodIntersection: ZodIntersection,
    ZodTuple: ZodTuple,
    ZodRecord: ZodRecord,
    ZodMap: ZodMap,
    ZodSet: ZodSet,
    ZodFunction: ZodFunction,
    ZodLazy: ZodLazy,
    ZodLiteral: ZodLiteral,
    ZodEnum: ZodEnum,
    ZodNativeEnum: ZodNativeEnum,
    ZodPromise: ZodPromise,
    ZodEffects: ZodEffects,
    ZodTransformer: ZodEffects,
    ZodOptional: ZodOptional,
    ZodNullable: ZodNullable,
    ZodDefault: ZodDefault,
    ZodCatch: ZodCatch,
    ZodNaN: ZodNaN,
    BRAND: BRAND,
    ZodBranded: ZodBranded,
    ZodPipeline: ZodPipeline,
    ZodReadonly: ZodReadonly,
    custom: custom,
    Schema: ZodType,
    ZodSchema: ZodType,
    late: late,
    get ZodFirstPartyTypeKind () { return ZodFirstPartyTypeKind; },
    coerce: coerce,
    any: anyType,
    array: arrayType,
    bigint: bigIntType,
    boolean: booleanType,
    date: dateType,
    discriminatedUnion: discriminatedUnionType,
    effect: effectsType,
    'enum': enumType,
    'function': functionType,
    'instanceof': instanceOfType,
    intersection: intersectionType,
    lazy: lazyType,
    literal: literalType,
    map: mapType,
    nan: nanType,
    nativeEnum: nativeEnumType,
    never: neverType,
    'null': nullType,
    nullable: nullableType,
    number: numberType,
    object: objectType,
    oboolean: oboolean,
    onumber: onumber,
    optional: optionalType,
    ostring: ostring,
    pipeline: pipelineType,
    preprocess: preprocessType,
    promise: promiseType,
    record: recordType,
    set: setType,
    strictObject: strictObjectType,
    string: stringType,
    symbol: symbolType,
    transformer: effectsType,
    tuple: tupleType,
    'undefined': undefinedType,
    union: unionType,
    unknown: unknownType,
    'void': voidType,
    NEVER: NEVER,
    ZodIssueCode: ZodIssueCode,
    quotelessJson: quotelessJson,
    ZodError: ZodError
});




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/mock.mjs":
/*!****************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/mock.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DiscordSDKMock: () => (/* binding */ DiscordSDKMock),
/* harmony export */   commandsMockDefault: () => (/* binding */ commandsMockDefault)
/* harmony export */ });
/* harmony import */ var _virtual_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_virtual/index.mjs */ "./node_modules/@discord/embedded-app-sdk/output/_virtual/index.mjs");
/* harmony import */ var _virtual_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_virtual/BigInteger.mjs */ "./node_modules/@discord/embedded-app-sdk/output/_virtual/BigInteger.mjs");
/* harmony import */ var _virtual_index2_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_virtual/index2.mjs */ "./node_modules/@discord/embedded-app-sdk/output/_virtual/index2.mjs");
/* harmony import */ var _Constants_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Constants.mjs */ "./node_modules/@discord/embedded-app-sdk/output/Constants.mjs");
/* harmony import */ var _utils_getDefaultSdkConfiguration_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/getDefaultSdkConfiguration.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/getDefaultSdkConfiguration.mjs");
/* harmony import */ var _schema_common_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./schema/common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");







class DiscordSDKMock {
    constructor(clientId, guildId, channelId, locationId) {
        this.platform = _Constants_mjs__WEBPACK_IMPORTED_MODULE_3__.Platform.DESKTOP;
        this.instanceId = '123456789012345678';
        this.configuration = (0,_utils_getDefaultSdkConfiguration_mjs__WEBPACK_IMPORTED_MODULE_4__["default"])();
        this.source = null;
        this.sourceOrigin = '';
        this.sdkVersion = 'mock';
        this.mobileAppVersion = 'unknown';
        this.frameId = 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa';
        this.eventBus = new _virtual_index_mjs__WEBPACK_IMPORTED_MODULE_0__["default"]();
        this.clientId = clientId;
        this.commands = this._updateCommandMocks({});
        this.guildId = guildId;
        this.channelId = channelId;
        this.locationId = locationId;
        this.customId = null;
        this.referrerId = null;
    }
    _updateCommandMocks(newCommands) {
        // Wrap all the command functions with logging
        this.commands = (0,_virtual_index2_mjs__WEBPACK_IMPORTED_MODULE_2__["default"])(Object.assign({}, commandsMockDefault, newCommands), (mock, func, name) => {
            mock[name] = async (...args) => {
                console.info(`DiscordSDKMock: ${String(name)}(${JSON.stringify(args)})`);
                return await func(...args);
            };
        });
        // redundant return here to satisfy the constructor defining commands
        return this.commands;
    }
    emitReady() {
        this.emitEvent('READY', undefined);
    }
    close(...args) {
        console.info(`DiscordSDKMock: close(${JSON.stringify(args)})`);
    }
    ready() {
        return Promise.resolve();
    }
    async subscribe(event, listener, ..._subscribeArgs) {
        return await this.eventBus.on(event, listener);
    }
    async unsubscribe(event, listener, ..._unsubscribeArgs) {
        return await this.eventBus.off(event, listener);
    }
    emitEvent(event, data) {
        this.eventBus.emit(event, data);
    }
}
/** Default return values for all discord SDK commands */
const commandsMockDefault = {
    authorize: () => Promise.resolve({ code: 'mock_code' }),
    authenticate: () => Promise.resolve({
        access_token: 'mock_token',
        user: {
            username: 'mock_user_username',
            discriminator: 'mock_user_discriminator',
            id: 'mock_user_id',
            avatar: null,
            public_flags: 1,
        },
        scopes: [],
        expires: new Date(2121, 1, 1).toString(),
        application: {
            description: 'mock_app_description',
            icon: 'mock_app_icon',
            id: 'mock_app_id',
            name: 'mock_app_name',
        },
    }),
    setActivity: () => Promise.resolve({
        name: 'mock_activity_name',
        type: 0,
    }),
    getChannel: () => Promise.resolve({
        id: 'mock_channel_id',
        name: 'mock_channel_name',
        type: _schema_common_mjs__WEBPACK_IMPORTED_MODULE_5__.ChannelTypesObject.GUILD_TEXT,
        voice_states: [],
        messages: [],
    }),
    getSkus: () => Promise.resolve({ skus: [] }),
    getEntitlements: () => Promise.resolve({ entitlements: [] }),
    startPurchase: () => Promise.resolve([]),
    setConfig: () => Promise.resolve({ use_interactive_pip: false }),
    userSettingsGetLocale: () => Promise.resolve({ locale: '' }),
    openExternalLink: () => Promise.resolve({ opened: false }),
    encourageHardwareAcceleration: () => Promise.resolve({ enabled: true }),
    captureLog: () => Promise.resolve(null),
    setOrientationLockState: () => Promise.resolve(null),
    openInviteDialog: () => Promise.resolve(null),
    getPlatformBehaviors: () => Promise.resolve({
        iosKeyboardResizesView: true,
    }),
    getChannelPermissions: () => Promise.resolve({ permissions: (0,_virtual_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_1__["default"])(1234567890) }),
    openShareMomentDialog: () => Promise.resolve(null),
    shareLink: () => Promise.resolve({ success: false, didSendMessage: false, didCopyLink: false }),
    initiateImageUpload: () => Promise.resolve({
        image_url: 'https://assets-global.website-files.com/6257adef93867e50d84d30e2/636e0b52aa9e99b832574a53_full_logo_blurple_RGB.png',
    }),
    getInstanceConnectedParticipants: () => Promise.resolve({ participants: [] }),
    getRelationships: () => Promise.resolve({
        relationships: [
            {
                type: 1,
                user: {
                    username: 'mock_friend_username',
                    flags: 0,
                    bot: false,
                    discriminator: 'mock_friend_discriminator',
                    id: 'mock_friend_id_1',
                    avatar: null,
                },
            },
            {
                type: 1,
                user: {
                    username: 'mock_friend_username_with_nickname',
                    flags: 0,
                    bot: false,
                    discriminator: 'mock_friend_discriminator_with_nickname',
                    id: 'mock_friend_id_2',
                    avatar: null,
                },
                nickname: 'mock_friend_nickname_for_user',
            },
            {
                type: 1,
                user: {
                    username: 'mock_friend_username_with_since',
                    flags: 0,
                    bot: false,
                    discriminator: 'mock_friend_discriminator_with_since',
                    id: 'mock_friend_id_3',
                    avatar: null,
                },
                since: '2021-06-29T00:32:37.180813+00:00',
            },
        ],
    }),
    inviteUserEmbedded: () => Promise.resolve(null),
    getUser: () => {
        return Promise.resolve({
            username: 'mock_friend_username',
            flags: 0,
            bot: false,
            discriminator: 'mock_friend_discriminator',
            id: 'mock_friend_id_1',
            avatar: null,
        });
    },
};




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/package.json.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/package.json.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   version: () => (/* binding */ version)
/* harmony export */ });
var version = "2.0.0";




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Activity: () => (/* binding */ Activity),
/* harmony export */   Attachment: () => (/* binding */ Attachment),
/* harmony export */   CertifiedDevice: () => (/* binding */ CertifiedDevice),
/* harmony export */   CertifiedDeviceTypeObject: () => (/* binding */ CertifiedDeviceTypeObject),
/* harmony export */   Channel: () => (/* binding */ Channel),
/* harmony export */   ChannelMention: () => (/* binding */ ChannelMention),
/* harmony export */   ChannelTypesObject: () => (/* binding */ ChannelTypesObject),
/* harmony export */   Commands: () => (/* binding */ Commands),
/* harmony export */   DISPATCH: () => (/* binding */ DISPATCH),
/* harmony export */   Embed: () => (/* binding */ Embed),
/* harmony export */   EmbedAuthor: () => (/* binding */ EmbedAuthor),
/* harmony export */   EmbedField: () => (/* binding */ EmbedField),
/* harmony export */   EmbedFooter: () => (/* binding */ EmbedFooter),
/* harmony export */   EmbedProvider: () => (/* binding */ EmbedProvider),
/* harmony export */   Emoji: () => (/* binding */ Emoji),
/* harmony export */   Entitlement: () => (/* binding */ Entitlement),
/* harmony export */   EntitlementTypesObject: () => (/* binding */ EntitlementTypesObject),
/* harmony export */   Guild: () => (/* binding */ Guild),
/* harmony export */   GuildMember: () => (/* binding */ GuildMember),
/* harmony export */   GuildMemberRPC: () => (/* binding */ GuildMemberRPC),
/* harmony export */   Image: () => (/* binding */ Image),
/* harmony export */   KeyTypesObject: () => (/* binding */ KeyTypesObject),
/* harmony export */   LayoutMode: () => (/* binding */ LayoutMode),
/* harmony export */   LayoutModeTypeObject: () => (/* binding */ LayoutModeTypeObject),
/* harmony export */   Message: () => (/* binding */ Message),
/* harmony export */   MessageActivity: () => (/* binding */ MessageActivity),
/* harmony export */   MessageApplication: () => (/* binding */ MessageApplication),
/* harmony export */   MessageReference: () => (/* binding */ MessageReference),
/* harmony export */   Orientation: () => (/* binding */ Orientation),
/* harmony export */   OrientationLockState: () => (/* binding */ OrientationLockState),
/* harmony export */   OrientationLockStateTypeObject: () => (/* binding */ OrientationLockStateTypeObject),
/* harmony export */   OrientationTypeObject: () => (/* binding */ OrientationTypeObject),
/* harmony export */   PermissionOverwrite: () => (/* binding */ PermissionOverwrite),
/* harmony export */   PermissionOverwriteTypeObject: () => (/* binding */ PermissionOverwriteTypeObject),
/* harmony export */   PresenceUpdate: () => (/* binding */ PresenceUpdate),
/* harmony export */   Reaction: () => (/* binding */ Reaction),
/* harmony export */   ReceiveFramePayload: () => (/* binding */ ReceiveFramePayload),
/* harmony export */   Relationship: () => (/* binding */ Relationship),
/* harmony export */   Role: () => (/* binding */ Role),
/* harmony export */   Scopes: () => (/* binding */ Scopes),
/* harmony export */   ScopesObject: () => (/* binding */ ScopesObject),
/* harmony export */   ShortcutKey: () => (/* binding */ ShortcutKey),
/* harmony export */   Sku: () => (/* binding */ Sku),
/* harmony export */   SkuTypeObject: () => (/* binding */ SkuTypeObject),
/* harmony export */   Status: () => (/* binding */ Status),
/* harmony export */   StatusObject: () => (/* binding */ StatusObject),
/* harmony export */   ThermalState: () => (/* binding */ ThermalState),
/* harmony export */   ThermalStateTypeObject: () => (/* binding */ ThermalStateTypeObject),
/* harmony export */   User: () => (/* binding */ User),
/* harmony export */   UserVoiceState: () => (/* binding */ UserVoiceState),
/* harmony export */   Video: () => (/* binding */ Video),
/* harmony export */   VoiceDevice: () => (/* binding */ VoiceDevice),
/* harmony export */   VoiceSettingModeTypeObject: () => (/* binding */ VoiceSettingModeTypeObject),
/* harmony export */   VoiceSettingsIO: () => (/* binding */ VoiceSettingsIO),
/* harmony export */   VoiceSettingsMode: () => (/* binding */ VoiceSettingsMode),
/* harmony export */   VoiceState: () => (/* binding */ VoiceState)
/* harmony export */ });
/* harmony import */ var _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/zod/lib/index.mjs */ "./node_modules/@discord/embedded-app-sdk/output/lib/zod/lib/index.mjs");
/* harmony import */ var _utils_zodUtils_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/zodUtils.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/zodUtils.mjs");
/* harmony import */ var _generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../generated/schemas.mjs */ "./node_modules/@discord/embedded-app-sdk/output/generated/schemas.mjs");




// DISPATCH is sent as cmd but is a special case, so is excluded from Commands enum
const DISPATCH = 'DISPATCH';
var Commands;
(function (Commands) {
    Commands["AUTHORIZE"] = "AUTHORIZE";
    Commands["AUTHENTICATE"] = "AUTHENTICATE";
    Commands["GET_GUILDS"] = "GET_GUILDS";
    Commands["GET_GUILD"] = "GET_GUILD";
    Commands["GET_CHANNEL"] = "GET_CHANNEL";
    Commands["GET_CHANNELS"] = "GET_CHANNELS";
    Commands["SELECT_VOICE_CHANNEL"] = "SELECT_VOICE_CHANNEL";
    Commands["SELECT_TEXT_CHANNEL"] = "SELECT_TEXT_CHANNEL";
    Commands["SUBSCRIBE"] = "SUBSCRIBE";
    Commands["UNSUBSCRIBE"] = "UNSUBSCRIBE";
    Commands["CAPTURE_SHORTCUT"] = "CAPTURE_SHORTCUT";
    Commands["SET_CERTIFIED_DEVICES"] = "SET_CERTIFIED_DEVICES";
    Commands["SET_ACTIVITY"] = "SET_ACTIVITY";
    Commands["GET_SKUS"] = "GET_SKUS";
    Commands["GET_ENTITLEMENTS"] = "GET_ENTITLEMENTS";
    Commands["GET_SKUS_EMBEDDED"] = "GET_SKUS_EMBEDDED";
    Commands["GET_ENTITLEMENTS_EMBEDDED"] = "GET_ENTITLEMENTS_EMBEDDED";
    Commands["START_PURCHASE"] = "START_PURCHASE";
    Commands["SET_CONFIG"] = "SET_CONFIG";
    Commands["SEND_ANALYTICS_EVENT"] = "SEND_ANALYTICS_EVENT";
    Commands["USER_SETTINGS_GET_LOCALE"] = "USER_SETTINGS_GET_LOCALE";
    Commands["OPEN_EXTERNAL_LINK"] = "OPEN_EXTERNAL_LINK";
    Commands["ENCOURAGE_HW_ACCELERATION"] = "ENCOURAGE_HW_ACCELERATION";
    Commands["CAPTURE_LOG"] = "CAPTURE_LOG";
    Commands["SET_ORIENTATION_LOCK_STATE"] = "SET_ORIENTATION_LOCK_STATE";
    Commands["OPEN_INVITE_DIALOG"] = "OPEN_INVITE_DIALOG";
    Commands["GET_PLATFORM_BEHAVIORS"] = "GET_PLATFORM_BEHAVIORS";
    Commands["GET_CHANNEL_PERMISSIONS"] = "GET_CHANNEL_PERMISSIONS";
    Commands["OPEN_SHARE_MOMENT_DIALOG"] = "OPEN_SHARE_MOMENT_DIALOG";
    Commands["INITIATE_IMAGE_UPLOAD"] = "INITIATE_IMAGE_UPLOAD";
    Commands["GET_ACTIVITY_INSTANCE_CONNECTED_PARTICIPANTS"] = "GET_ACTIVITY_INSTANCE_CONNECTED_PARTICIPANTS";
    Commands["SHARE_LINK"] = "SHARE_LINK";
    Commands["GET_RELATIONSHIPS"] = "GET_RELATIONSHIPS";
    Commands["INVITE_USER_EMBEDDED"] = "INVITE_USER_EMBEDDED";
    Commands["GET_USER"] = "GET_USER";
})(Commands || (Commands = {}));
const ReceiveFramePayload = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    cmd: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    data: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.unknown)(),
    evt: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["null"])(),
    nonce: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
})
    .passthrough();
// TODO afgiel -- next breaking change release
// remove Scopes and ScopesObject in favor of Types.OAuthScopes
const ScopesObject = Object.assign(Object.assign({}, _generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_2__.AuthenticateResponseSchema.shape.scopes.element.overlayType._def.innerType.options[0].Values), { UNHANDLED: -1 });
const Scopes = (0,_utils_zodUtils_mjs__WEBPACK_IMPORTED_MODULE_1__.zodCoerceUnhandledValue)(ScopesObject);
const Relationship = _generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_2__.GetRelationshipsResponseSchema.shape.relationships.element;
const User = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    username: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    discriminator: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    global_name: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    avatar: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    avatar_decoration_data: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
        asset: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
        sku_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional(),
    })
        .nullable(),
    bot: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
    flags: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
    premium_type: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
});
const GuildMember = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    user: User,
    nick: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    roles: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)((0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)()),
    joined_at: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    deaf: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
    mute: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
});
const GuildMemberRPC = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    user_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    nick: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    guild_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    avatar: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    avatar_decoration_data: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
        asset: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
        sku_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    })
        .optional()
        .nullable(),
    color_string: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
});
const Emoji = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    name: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    roles: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)((0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)()).optional().nullable(),
    user: User.optional().nullable(),
    require_colons: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)().optional().nullable(),
    managed: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)().optional().nullable(),
    animated: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)().optional().nullable(),
    available: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)().optional().nullable(),
});
const VoiceState = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    mute: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
    deaf: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
    self_mute: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
    self_deaf: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
    suppress: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
});
const UserVoiceState = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    mute: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
    nick: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    user: User,
    voice_state: VoiceState,
    volume: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
});
const StatusObject = {
    UNHANDLED: -1,
    IDLE: 'idle',
    DND: 'dnd',
    ONLINE: 'online',
    OFFLINE: 'offline',
};
const Status = (0,_utils_zodUtils_mjs__WEBPACK_IMPORTED_MODULE_1__.zodCoerceUnhandledValue)(StatusObject);
const Activity = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    name: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    type: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
    url: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    created_at: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
    timestamps: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
        start: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
        end: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
    })
        .partial()
        .optional()
        .nullable(),
    application_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    details: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    state: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    emoji: Emoji.optional().nullable(),
    party: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
        id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
        size: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)((0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)()).optional().nullable(),
    })
        .optional()
        .nullable(),
    assets: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
        large_image: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable(),
        large_text: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable(),
        small_image: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable(),
        small_text: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable(),
    })
        .partial()
        .optional()
        .nullable(),
    secrets: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
        join: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
        match: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    })
        .partial()
        .optional()
        .nullable(),
    instance: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)().optional().nullable(),
    flags: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
});
const PermissionOverwriteTypeObject = {
    UNHANDLED: -1,
    ROLE: 0,
    MEMBER: 1,
};
const PermissionOverwrite = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    type: (0,_utils_zodUtils_mjs__WEBPACK_IMPORTED_MODULE_1__.zodCoerceUnhandledValue)(PermissionOverwriteTypeObject),
    allow: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    deny: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
});
const ChannelTypesObject = {
    UNHANDLED: -1,
    DM: 1,
    GROUP_DM: 3,
    GUILD_TEXT: 0,
    GUILD_VOICE: 2,
    GUILD_CATEGORY: 4,
    GUILD_ANNOUNCEMENT: 5,
    GUILD_STORE: 6,
    ANNOUNCEMENT_THREAD: 10,
    PUBLIC_THREAD: 11,
    PRIVATE_THREAD: 12,
    GUILD_STAGE_VOICE: 13,
    GUILD_DIRECTORY: 14,
    GUILD_FORUM: 15,
};
const Channel = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    type: (0,_utils_zodUtils_mjs__WEBPACK_IMPORTED_MODULE_1__.zodCoerceUnhandledValue)(ChannelTypesObject),
    guild_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    position: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
    permission_overwrites: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(PermissionOverwrite).optional().nullable(),
    name: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    topic: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    nsfw: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)().optional().nullable(),
    last_message_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    bitrate: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
    user_limit: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
    rate_limit_per_user: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
    recipients: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(User).optional().nullable(),
    icon: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    owner_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    application_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    parent_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    last_pin_timestamp: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
});
const PresenceUpdate = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    user: User,
    guild_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    status: Status,
    activities: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(Activity),
    client_status: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
        desktop: Status,
        mobile: Status,
        web: Status,
    })
        .partial(),
});
const Role = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    name: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    color: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
    hoist: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
    position: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
    permissions: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    managed: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
    mentionable: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
});
const Guild = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    name: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    owner_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    icon: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable(),
    icon_hash: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    splash: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable(),
    discovery_splash: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable(),
    owner: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)().optional().nullable(),
    permissions: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    region: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    afk_channel_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable(),
    afk_timeout: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
    widget_enabled: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)().optional().nullable(),
    widget_channel_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    verification_level: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
    default_message_notifications: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
    explicit_content_filter: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
    roles: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(Role),
    emojis: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(Emoji),
    features: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)((0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)()),
    mfa_level: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
    application_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable(),
    system_channel_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable(),
    system_channel_flags: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
    rules_channel_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable(),
    joined_at: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    large: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)().optional().nullable(),
    unavailable: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)().optional().nullable(),
    member_count: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
    voice_states: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(VoiceState).optional().nullable(),
    members: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(GuildMember).optional().nullable(),
    channels: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(Channel).optional().nullable(),
    presences: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(PresenceUpdate).optional().nullable(),
    max_presences: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
    max_members: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
    vanity_url_code: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable(),
    description: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable(),
    banner: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable(),
    premium_tier: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
    premium_subscription_count: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
    preferred_locale: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    public_updates_channel_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable(),
    max_video_channel_users: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
    approximate_member_count: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
    approximate_presence_count: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
});
const ChannelMention = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    guild_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    type: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
    name: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
});
const Attachment = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    filename: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    size: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
    url: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    proxy_url: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    height: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
    width: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
});
const EmbedFooter = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    text: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    icon_url: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    proxy_icon_url: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
});
const Image = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    url: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    proxy_url: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    height: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
    width: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
});
const Video = Image.omit({ proxy_url: true });
const EmbedProvider = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    name: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    url: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
});
const EmbedAuthor = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    name: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    url: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    icon_url: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    proxy_icon_url: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
});
const EmbedField = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    name: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    value: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    inline: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
});
const Embed = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    title: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    type: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    description: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    url: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    timestamp: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    color: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
    footer: EmbedFooter.optional().nullable(),
    image: Image.optional().nullable(),
    thumbnail: Image.optional().nullable(),
    video: Video.optional().nullable(),
    provider: EmbedProvider.optional().nullable(),
    author: EmbedAuthor.optional().nullable(),
    fields: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(EmbedField).optional().nullable(),
});
const Reaction = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    count: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
    me: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
    emoji: Emoji,
});
const MessageActivity = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    type: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
    party_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
});
const MessageApplication = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    cover_image: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    description: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    icon: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    name: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
});
const MessageReference = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    message_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    channel_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    guild_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
});
const Message = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    channel_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    guild_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    author: User.optional().nullable(),
    member: GuildMember.optional().nullable(),
    content: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    timestamp: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    edited_timestamp: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    tts: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
    mention_everyone: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
    mentions: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(User),
    mention_roles: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)((0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)()),
    mention_channels: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(ChannelMention),
    attachments: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(Attachment),
    embeds: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(Embed),
    reactions: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(Reaction).optional().nullable(),
    nonce: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.union)([(0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(), (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)()]).optional().nullable(),
    pinned: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
    webhook_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    type: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
    activity: MessageActivity.optional().nullable(),
    application: MessageApplication.optional().nullable(),
    message_reference: MessageReference.optional().nullable(),
    flags: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
    stickers: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)((0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.unknown)()).optional().nullable(),
    // Cannot self reference, but this is possibly a Message
    referenced_message: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.unknown)().optional().nullable(),
});
const VoiceDevice = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    name: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
});
const KeyTypesObject = {
    UNHANDLED: -1,
    KEYBOARD_KEY: 0,
    MOUSE_BUTTON: 1,
    KEYBOARD_MODIFIER_KEY: 2,
    GAMEPAD_BUTTON: 3,
};
const ShortcutKey = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    type: (0,_utils_zodUtils_mjs__WEBPACK_IMPORTED_MODULE_1__.zodCoerceUnhandledValue)(KeyTypesObject),
    code: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
    name: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
});
const VoiceSettingModeTypeObject = {
    UNHANDLED: -1,
    PUSH_TO_TALK: 'PUSH_TO_TALK',
    VOICE_ACTIVITY: 'VOICE_ACTIVITY',
};
const VoiceSettingsMode = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    type: (0,_utils_zodUtils_mjs__WEBPACK_IMPORTED_MODULE_1__.zodCoerceUnhandledValue)(VoiceSettingModeTypeObject),
    auto_threshold: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
    threshold: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
    shortcut: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(ShortcutKey),
    delay: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
});
const VoiceSettingsIO = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    device_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    volume: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
    available_devices: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(VoiceDevice),
});
const CertifiedDeviceTypeObject = {
    UNHANDLED: -1,
    AUDIO_INPUT: 'AUDIO_INPUT',
    AUDIO_OUTPUT: 'AUDIO_OUTPUT',
    VIDEO_INPUT: 'VIDEO_INPUT',
};
const CertifiedDevice = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    type: (0,_utils_zodUtils_mjs__WEBPACK_IMPORTED_MODULE_1__.zodCoerceUnhandledValue)(CertifiedDeviceTypeObject),
    id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    vendor: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
        name: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
        url: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    }),
    model: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
        name: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
        url: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    }),
    related: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)((0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)()),
    echo_cancellation: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)().optional().nullable(),
    noise_suppression: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)().optional().nullable(),
    automatic_gain_control: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)().optional().nullable(),
    hardware_mute: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)().optional().nullable(),
});
const SkuTypeObject = {
    UNHANDLED: -1,
    APPLICATION: 1,
    DLC: 2,
    CONSUMABLE: 3,
    BUNDLE: 4,
    SUBSCRIPTION: 5,
};
const Sku = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    name: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    type: (0,_utils_zodUtils_mjs__WEBPACK_IMPORTED_MODULE_1__.zodCoerceUnhandledValue)(SkuTypeObject),
    price: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
        amount: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
        currency: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    }),
    application_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    flags: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
    release_date: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable(),
});
const EntitlementTypesObject = {
    UNHANDLED: -1,
    PURCHASE: 1,
    PREMIUM_SUBSCRIPTION: 2,
    DEVELOPER_GIFT: 3,
    TEST_MODE_PURCHASE: 4,
    FREE_PURCHASE: 5,
    USER_GIFT: 6,
    PREMIUM_PURCHASE: 7,
};
const Entitlement = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    sku_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    application_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    user_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    gift_code_flags: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
    type: (0,_utils_zodUtils_mjs__WEBPACK_IMPORTED_MODULE_1__.zodCoerceUnhandledValue)(EntitlementTypesObject),
    gifter_user_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    branches: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)((0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)()).optional().nullable(),
    starts_at: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(), // ISO string
    ends_at: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(), // ISO string
    parent_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    consumed: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)().optional().nullable(),
    deleted: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)().optional().nullable(),
    gift_code_batch_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
});
const OrientationLockStateTypeObject = {
    UNHANDLED: -1,
    UNLOCKED: 1,
    PORTRAIT: 2,
    LANDSCAPE: 3,
};
const OrientationLockState = (0,_utils_zodUtils_mjs__WEBPACK_IMPORTED_MODULE_1__.zodCoerceUnhandledValue)(OrientationLockStateTypeObject);
const ThermalStateTypeObject = {
    UNHANDLED: -1,
    NOMINAL: 0,
    FAIR: 1,
    SERIOUS: 2,
    CRITICAL: 3,
};
const ThermalState = (0,_utils_zodUtils_mjs__WEBPACK_IMPORTED_MODULE_1__.zodCoerceUnhandledValue)(ThermalStateTypeObject);
const OrientationTypeObject = {
    UNHANDLED: -1,
    PORTRAIT: 0,
    LANDSCAPE: 1,
};
const Orientation = (0,_utils_zodUtils_mjs__WEBPACK_IMPORTED_MODULE_1__.zodCoerceUnhandledValue)(OrientationTypeObject);
const LayoutModeTypeObject = {
    UNHANDLED: -1,
    FOCUSED: 0,
    PIP: 1,
    GRID: 2,
};
const LayoutMode = (0,_utils_zodUtils_mjs__WEBPACK_IMPORTED_MODULE_1__.zodCoerceUnhandledValue)(LayoutModeTypeObject);




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/schema/events.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/schema/events.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DispatchEventFrame: () => (/* binding */ DispatchEventFrame),
/* harmony export */   ERROR: () => (/* binding */ ERROR),
/* harmony export */   ErrorEvent: () => (/* binding */ ErrorEvent),
/* harmony export */   EventFrame: () => (/* binding */ EventFrame),
/* harmony export */   EventSchema: () => (/* binding */ EventSchema),
/* harmony export */   Events: () => (/* binding */ Events),
/* harmony export */   OtherEvent: () => (/* binding */ OtherEvent),
/* harmony export */   parseEventPayload: () => (/* binding */ parseEventPayload)
/* harmony export */ });
/* harmony import */ var _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/zod/lib/index.mjs */ "./node_modules/@discord/embedded-app-sdk/output/lib/zod/lib/index.mjs");
/* harmony import */ var _Constants_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Constants.mjs */ "./node_modules/@discord/embedded-app-sdk/output/Constants.mjs");
/* harmony import */ var _common_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");
/* harmony import */ var _utils_zodUtils_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/zodUtils.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/zodUtils.mjs");
/* harmony import */ var _generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../generated/schemas.mjs */ "./node_modules/@discord/embedded-app-sdk/output/generated/schemas.mjs");






// ERROR is sent as evt but is a special case, so is excluded from Events enum
const ERROR = 'ERROR';
var Events;
(function (Events) {
    Events["READY"] = "READY";
    Events["VOICE_STATE_UPDATE"] = "VOICE_STATE_UPDATE";
    Events["SPEAKING_START"] = "SPEAKING_START";
    Events["SPEAKING_STOP"] = "SPEAKING_STOP";
    Events["ACTIVITY_LAYOUT_MODE_UPDATE"] = "ACTIVITY_LAYOUT_MODE_UPDATE";
    Events["ORIENTATION_UPDATE"] = "ORIENTATION_UPDATE";
    Events["CURRENT_USER_UPDATE"] = "CURRENT_USER_UPDATE";
    Events["CURRENT_GUILD_MEMBER_UPDATE"] = "CURRENT_GUILD_MEMBER_UPDATE";
    Events["ENTITLEMENT_CREATE"] = "ENTITLEMENT_CREATE";
    Events["THERMAL_STATE_UPDATE"] = "THERMAL_STATE_UPDATE";
    Events["ACTIVITY_INSTANCE_PARTICIPANTS_UPDATE"] = "ACTIVITY_INSTANCE_PARTICIPANTS_UPDATE";
    Events["RELATIONSHIP_UPDATE"] = "RELATIONSHIP_UPDATE";
})(Events || (Events = {}));
const DispatchEventFrame = _common_mjs__WEBPACK_IMPORTED_MODULE_2__.ReceiveFramePayload.extend({
    evt: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.nativeEnum)(Events),
    nonce: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable(),
    cmd: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.literal)(_common_mjs__WEBPACK_IMPORTED_MODULE_2__.DISPATCH),
    data: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({}).passthrough(),
});
const ErrorEvent = _common_mjs__WEBPACK_IMPORTED_MODULE_2__.ReceiveFramePayload.extend({
    evt: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.literal)(ERROR),
    data: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
        code: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
        message: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional(),
    })
        .passthrough(),
    cmd: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.nativeEnum)(_common_mjs__WEBPACK_IMPORTED_MODULE_2__.Commands),
    nonce: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable(),
});
const OtherEvent = DispatchEventFrame.extend({
    evt: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
});
const EventFrame = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.union)([DispatchEventFrame, OtherEvent, ErrorEvent]);
function parseEventPayload(data) {
    const event = data.evt;
    if (!(event in Events)) {
        throw new Error(`Unrecognized event type ${data.evt}`);
    }
    const eventSchema = EventSchema[event];
    return eventSchema.payload.parse(data);
}
const EventSchema = {
    /**
     * @description
     * The READY event is emitted by Discord's RPC server in reply to a client
     * initiating the RPC handshake. The event includes information about
     * - the rpc server version
     * - the discord client configuration
     * - the (basic) user object
     *
     * Unlike other events, READY will only be omitted once, immediately after the
     * Embedded App SDK is initialized
     *
     * # Supported Platforms
     * | Web | iOS | Android |
     * |-----|-----|---------|
     * | ✅  | ✅  | ✅      |
     *
     * Required scopes: []
     *
     */
    [Events.READY]: {
        payload: DispatchEventFrame.extend({
            evt: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.literal)(Events.READY),
            data: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
                v: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
                config: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
                    cdn_host: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional(),
                    api_endpoint: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
                    environment: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
                }),
                user: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
                    id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
                    username: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
                    discriminator: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
                    avatar: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional(),
                })
                    .optional(),
            }),
        }),
    },
    [Events.VOICE_STATE_UPDATE]: {
        payload: DispatchEventFrame.extend({
            evt: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.literal)(Events.VOICE_STATE_UPDATE),
            data: _common_mjs__WEBPACK_IMPORTED_MODULE_2__.UserVoiceState,
        }),
        subscribeArgs: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
            channel_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
        }),
    },
    [Events.SPEAKING_START]: {
        payload: DispatchEventFrame.extend({
            evt: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.literal)(Events.SPEAKING_START),
            data: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
                lobby_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional(),
                channel_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional(),
                user_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
            }),
        }),
        subscribeArgs: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
            lobby_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable().optional(),
            channel_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable().optional(),
        }),
    },
    [Events.SPEAKING_STOP]: {
        payload: DispatchEventFrame.extend({
            evt: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.literal)(Events.SPEAKING_STOP),
            data: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
                lobby_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional(),
                channel_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional(),
                user_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
            }),
        }),
        subscribeArgs: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
            lobby_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable().optional(),
            channel_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable().optional(),
        }),
    },
    [Events.ACTIVITY_LAYOUT_MODE_UPDATE]: {
        payload: DispatchEventFrame.extend({
            evt: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.literal)(Events.ACTIVITY_LAYOUT_MODE_UPDATE),
            data: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
                layout_mode: (0,_utils_zodUtils_mjs__WEBPACK_IMPORTED_MODULE_3__.zodCoerceUnhandledValue)(_common_mjs__WEBPACK_IMPORTED_MODULE_2__.LayoutModeTypeObject),
            }),
        }),
    },
    [Events.ORIENTATION_UPDATE]: {
        payload: DispatchEventFrame.extend({
            evt: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.literal)(Events.ORIENTATION_UPDATE),
            data: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
                screen_orientation: (0,_utils_zodUtils_mjs__WEBPACK_IMPORTED_MODULE_3__.zodCoerceUnhandledValue)(_common_mjs__WEBPACK_IMPORTED_MODULE_2__.OrientationTypeObject),
                /**
                 * @deprecated use screen_orientation instead
                 */
                orientation: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.nativeEnum)(_Constants_mjs__WEBPACK_IMPORTED_MODULE_1__.Orientation),
            }),
        }),
    },
    [Events.CURRENT_USER_UPDATE]: {
        payload: DispatchEventFrame.extend({
            evt: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.literal)(Events.CURRENT_USER_UPDATE),
            data: _common_mjs__WEBPACK_IMPORTED_MODULE_2__.User,
        }),
    },
    [Events.CURRENT_GUILD_MEMBER_UPDATE]: {
        payload: DispatchEventFrame.extend({
            evt: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.literal)(Events.CURRENT_GUILD_MEMBER_UPDATE),
            data: _common_mjs__WEBPACK_IMPORTED_MODULE_2__.GuildMemberRPC,
        }),
        subscribeArgs: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
            guild_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
        }),
    },
    [Events.ENTITLEMENT_CREATE]: {
        payload: DispatchEventFrame.extend({
            evt: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.literal)(Events.ENTITLEMENT_CREATE),
            data: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({ entitlement: _common_mjs__WEBPACK_IMPORTED_MODULE_2__.Entitlement }),
        }),
    },
    [Events.THERMAL_STATE_UPDATE]: {
        payload: DispatchEventFrame.extend({
            evt: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.literal)(Events.THERMAL_STATE_UPDATE),
            data: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({ thermal_state: _common_mjs__WEBPACK_IMPORTED_MODULE_2__.ThermalState }),
        }),
    },
    [Events.ACTIVITY_INSTANCE_PARTICIPANTS_UPDATE]: {
        payload: DispatchEventFrame.extend({
            evt: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.literal)(Events.ACTIVITY_INSTANCE_PARTICIPANTS_UPDATE),
            data: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
                participants: _generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_4__.GetActivityInstanceConnectedParticipantsResponseSchema.shape.participants,
            }),
        }),
    },
    [Events.RELATIONSHIP_UPDATE]: {
        payload: DispatchEventFrame.extend({
            evt: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.literal)(Events.RELATIONSHIP_UPDATE),
            data: _common_mjs__WEBPACK_IMPORTED_MODULE_2__.Relationship,
        }),
    },
};




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/schema/index.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/schema/index.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ClosePayload: () => (/* binding */ ClosePayload),
/* harmony export */   Common: () => (/* reexport module object */ _common_mjs__WEBPACK_IMPORTED_MODULE_3__),
/* harmony export */   IncomingPayload: () => (/* binding */ IncomingPayload),
/* harmony export */   Responses: () => (/* reexport module object */ _responses_mjs__WEBPACK_IMPORTED_MODULE_2__),
/* harmony export */   parseIncomingPayload: () => (/* binding */ parseIncomingPayload)
/* harmony export */ });
/* harmony import */ var _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/zod/lib/index.mjs */ "./node_modules/@discord/embedded-app-sdk/output/lib/zod/lib/index.mjs");
/* harmony import */ var _events_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./events.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/events.mjs");
/* harmony import */ var _responses_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./responses.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/responses.mjs");
/* harmony import */ var _common_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");
/* harmony import */ var _Constants_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Constants.mjs */ "./node_modules/@discord/embedded-app-sdk/output/Constants.mjs");









(0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    frame_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    platform: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.nativeEnum)(_Constants_mjs__WEBPACK_IMPORTED_MODULE_4__.Platform).optional().nullable(),
});
(0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    v: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.literal)(1),
    encoding: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.literal)('json').optional(),
    client_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    frame_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
});
const ClosePayload = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    code: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)(),
    message: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional(),
});
const IncomingPayload = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    evt: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable(),
    nonce: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().nullable(),
    data: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.unknown)().nullable(),
    cmd: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
})
    .passthrough();
function parseIncomingPayload(payload) {
    const incoming = IncomingPayload.parse(payload);
    if (incoming.evt != null) {
        if (incoming.evt === _events_mjs__WEBPACK_IMPORTED_MODULE_1__.ERROR) {
            return _events_mjs__WEBPACK_IMPORTED_MODULE_1__.ErrorEvent.parse(incoming);
        }
        return (0,_events_mjs__WEBPACK_IMPORTED_MODULE_1__.parseEventPayload)(_events_mjs__WEBPACK_IMPORTED_MODULE_1__.EventFrame.parse(incoming));
    }
    else {
        return (0,_responses_mjs__WEBPACK_IMPORTED_MODULE_2__.parseResponsePayload)(_responses_mjs__WEBPACK_IMPORTED_MODULE_2__.ResponseFrame.passthrough().parse(incoming));
    }
}




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/schema/responses.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/schema/responses.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AuthenticateResponse: () => (/* reexport safe */ _generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_3__.AuthenticateResponseSchema),
/* harmony export */   AuthorizeResponse: () => (/* binding */ AuthorizeResponse),
/* harmony export */   CaptureShortcutResponse: () => (/* binding */ CaptureShortcutResponse),
/* harmony export */   EmptyResponse: () => (/* binding */ EmptyResponse),
/* harmony export */   EncourageHardwareAccelerationResponse: () => (/* binding */ EncourageHardwareAccelerationResponse),
/* harmony export */   GetChannelPermissionsResponse: () => (/* binding */ GetChannelPermissionsResponse),
/* harmony export */   GetChannelResponse: () => (/* binding */ GetChannelResponse),
/* harmony export */   GetChannelsResponse: () => (/* binding */ GetChannelsResponse),
/* harmony export */   GetEntitlementsResponse: () => (/* binding */ GetEntitlementsResponse),
/* harmony export */   GetGuildResponse: () => (/* binding */ GetGuildResponse),
/* harmony export */   GetGuildsResponse: () => (/* binding */ GetGuildsResponse),
/* harmony export */   GetPlatformBehaviorsResponse: () => (/* binding */ GetPlatformBehaviorsResponse),
/* harmony export */   GetSkusResponse: () => (/* binding */ GetSkusResponse),
/* harmony export */   InitiateImageUploadResponse: () => (/* reexport safe */ _generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_3__.InitiateImageUploadResponseSchema),
/* harmony export */   NullableChannelResponse: () => (/* binding */ NullableChannelResponse),
/* harmony export */   OpenExternalLinkResponse: () => (/* binding */ OpenExternalLinkResponse),
/* harmony export */   ResponseFrame: () => (/* binding */ ResponseFrame),
/* harmony export */   SelectTextChannelResponse: () => (/* binding */ SelectTextChannelResponse),
/* harmony export */   SelectVoiceChannelResponse: () => (/* binding */ SelectVoiceChannelResponse),
/* harmony export */   SetActivityResponse: () => (/* binding */ SetActivityResponse),
/* harmony export */   SetConfigResponse: () => (/* binding */ SetConfigResponse),
/* harmony export */   StartPurchaseResponse: () => (/* binding */ StartPurchaseResponse),
/* harmony export */   SubscribeResponse: () => (/* binding */ SubscribeResponse),
/* harmony export */   UserSettingsGetLocaleResponse: () => (/* binding */ UserSettingsGetLocaleResponse),
/* harmony export */   VoiceSettingsResponse: () => (/* binding */ VoiceSettingsResponse),
/* harmony export */   parseResponsePayload: () => (/* binding */ parseResponsePayload)
/* harmony export */ });
/* harmony import */ var _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/zod/lib/index.mjs */ "./node_modules/@discord/embedded-app-sdk/output/lib/zod/lib/index.mjs");
/* harmony import */ var _common_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");
/* harmony import */ var _utils_zodUtils_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/zodUtils.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/zodUtils.mjs");
/* harmony import */ var _generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../generated/schemas.mjs */ "./node_modules/@discord/embedded-app-sdk/output/generated/schemas.mjs");
/* harmony import */ var _utils_assertUnreachable_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/assertUnreachable.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/assertUnreachable.mjs");







const EmptyResponse = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({}).nullable();
const AuthorizeResponse = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    code: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
});
const GetGuildsResponse = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    guilds: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)((0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
        id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
        name: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    })),
});
const GetGuildResponse = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    name: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    icon_url: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional(),
    members: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(_common_mjs__WEBPACK_IMPORTED_MODULE_1__.GuildMember),
});
const GetChannelResponse = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
    type: (0,_utils_zodUtils_mjs__WEBPACK_IMPORTED_MODULE_2__.zodCoerceUnhandledValue)(_common_mjs__WEBPACK_IMPORTED_MODULE_1__.ChannelTypesObject),
    guild_id: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    name: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    topic: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().optional().nullable(),
    bitrate: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
    user_limit: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
    position: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)().optional().nullable(),
    voice_states: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(_common_mjs__WEBPACK_IMPORTED_MODULE_1__.UserVoiceState),
    messages: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(_common_mjs__WEBPACK_IMPORTED_MODULE_1__.Message),
});
const GetChannelsResponse = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    channels: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(_common_mjs__WEBPACK_IMPORTED_MODULE_1__.Channel),
});
const NullableChannelResponse = GetChannelResponse.nullable();
const SelectVoiceChannelResponse = GetChannelResponse.nullable();
const SelectTextChannelResponse = GetChannelResponse.nullable();
const VoiceSettingsResponse = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    input: _common_mjs__WEBPACK_IMPORTED_MODULE_1__.VoiceSettingsIO,
    output: _common_mjs__WEBPACK_IMPORTED_MODULE_1__.VoiceSettingsIO,
    mode: _common_mjs__WEBPACK_IMPORTED_MODULE_1__.VoiceSettingsMode,
    automatic_gain_control: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
    echo_cancellation: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
    noise_suppression: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
    qos: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
    silence_warning: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
    deaf: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
    mute: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
});
const SubscribeResponse = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    evt: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
});
const CaptureShortcutResponse = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({ shortcut: _common_mjs__WEBPACK_IMPORTED_MODULE_1__.ShortcutKey });
const SetActivityResponse = _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Activity;
const GetSkusResponse = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({ skus: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(_common_mjs__WEBPACK_IMPORTED_MODULE_1__.Sku) });
const GetEntitlementsResponse = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({ entitlements: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(_common_mjs__WEBPACK_IMPORTED_MODULE_1__.Entitlement) });
const StartPurchaseResponse = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.array)(_common_mjs__WEBPACK_IMPORTED_MODULE_1__.Entitlement).nullable();
const SetConfigResponse = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    use_interactive_pip: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
});
const UserSettingsGetLocaleResponse = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    locale: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)(),
});
const EncourageHardwareAccelerationResponse = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    enabled: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)(),
});
const GetChannelPermissionsResponse = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    permissions: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.bigint)().or((0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)()),
});
const OpenExternalLinkResponse = (0,_utils_zodUtils_mjs__WEBPACK_IMPORTED_MODULE_2__.fallbackToDefault)((0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({ opened: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)().or((0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["null"])()) }).default({ opened: null }));
/**
 * Because of the nature of Platform Behavior changes
 * every key/value is optional and may eventually be removed
 */
const GetPlatformBehaviorsResponse = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.object)({
    iosKeyboardResizesView: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.optional)((0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.boolean)()),
});
const ResponseFrame = _common_mjs__WEBPACK_IMPORTED_MODULE_1__.ReceiveFramePayload.extend({
    cmd: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.nativeEnum)(_common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands),
    evt: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__["null"])(),
});
function parseResponseData({ cmd, data }) {
    switch (cmd) {
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.AUTHORIZE:
            return AuthorizeResponse.parse(data);
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.CAPTURE_SHORTCUT:
            return CaptureShortcutResponse.parse(data);
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.ENCOURAGE_HW_ACCELERATION:
            return EncourageHardwareAccelerationResponse.parse(data);
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.GET_CHANNEL:
            return GetChannelResponse.parse(data);
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.GET_CHANNELS:
            return GetChannelsResponse.parse(data);
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.GET_CHANNEL_PERMISSIONS:
            return GetChannelPermissionsResponse.parse(data);
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.GET_GUILD:
            return GetGuildResponse.parse(data);
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.GET_GUILDS:
            return GetGuildsResponse.parse(data);
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.GET_PLATFORM_BEHAVIORS:
            return GetPlatformBehaviorsResponse.parse(data);
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.GET_CHANNEL:
            return GetChannelResponse.parse(data);
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.SELECT_TEXT_CHANNEL:
            return SelectTextChannelResponse.parse(data);
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.SELECT_VOICE_CHANNEL:
            return SelectVoiceChannelResponse.parse(data);
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.SET_ACTIVITY:
            return SetActivityResponse.parse(data);
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.GET_SKUS_EMBEDDED:
            return GetSkusResponse.parse(data);
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.GET_ENTITLEMENTS_EMBEDDED:
            return GetEntitlementsResponse.parse(data);
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.SET_CONFIG:
            return SetConfigResponse.parse(data);
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.START_PURCHASE:
            return StartPurchaseResponse.parse(data);
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.SUBSCRIBE:
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.UNSUBSCRIBE:
            return SubscribeResponse.parse(data);
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.USER_SETTINGS_GET_LOCALE:
            return UserSettingsGetLocaleResponse.parse(data);
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.OPEN_EXTERNAL_LINK:
            return OpenExternalLinkResponse.parse(data);
        // Empty Responses
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.SET_ORIENTATION_LOCK_STATE:
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.SET_CERTIFIED_DEVICES:
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.SEND_ANALYTICS_EVENT:
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.OPEN_INVITE_DIALOG:
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.CAPTURE_LOG:
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.GET_SKUS:
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.GET_ENTITLEMENTS:
            return EmptyResponse.parse(data);
        // Generated Responses
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.AUTHENTICATE:
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.INITIATE_IMAGE_UPLOAD:
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.OPEN_SHARE_MOMENT_DIALOG:
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.GET_ACTIVITY_INSTANCE_CONNECTED_PARTICIPANTS:
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.SHARE_LINK:
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.GET_RELATIONSHIPS:
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.INVITE_USER_EMBEDDED:
        case _common_mjs__WEBPACK_IMPORTED_MODULE_1__.Commands.GET_USER:
            const { response } = _generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_3__.Schemas[cmd];
            return response.parse(data);
        default:
            (0,_utils_assertUnreachable_mjs__WEBPACK_IMPORTED_MODULE_4__["default"])(cmd, new Error(`Unrecognized command ${cmd}`));
    }
}
function parseResponsePayload(payload) {
    return Object.assign(Object.assign({}, payload), { data: parseResponseData(payload) });
}




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/utils/BigFlagUtils.mjs":
/*!******************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/utils/BigFlagUtils.mjs ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BigFlagUtils)
/* harmony export */ });
/* harmony import */ var _virtual_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../_virtual/BigInteger.mjs */ "./node_modules/@discord/embedded-app-sdk/output/_virtual/BigInteger.mjs");


/**
 * Context: Due to Discord supporting more than 32 permissions, permission calculation has become more complicated than naive
 * bit operations on `number`s. To support this generically, we have created BigFlagUtils to work with bit-flags greater
 * than 32-bits in size.
 *
 * Ideally, we would like to use BigInt, which is pretty efficient, but some JavaScript engines do not support it.
 *
 * This file is intended to be a set of lower-level operators that act directly on "BigFlags".
 *
 * If you're working with permissions, in most cases you can probably use PermissionUtils.
 */
const MAX_BIG_INT = 64;
const SMALL_INT = 16;
const PARTS = MAX_BIG_INT / SMALL_INT;
function checkBrowserSupportsBigInt() {
    try {
        // eslint-disable-next-line @typescript-eslint/no-unused-expressions
        BigInt;
        return true;
    }
    catch (_a) {
        return false;
    }
}
/**
 * Takes the sliced output of `toHexReverseArray` and converts hex to decimal.
 */
function fromHexReverseArray(hexValues, start, size) {
    let value = 0;
    for (let i = 0; i < size; i++) {
        const byte = hexValues[start + i];
        if (byte === undefined) {
            break;
        }
        value += byte * 16 ** i;
    }
    return value;
}
/**
 * Converts a number string to array of hex bytes based on the implementation found at
 * https://stackoverflow.com/questions/18626844/convert-a-large-integer-to-a-hex-string-in-javascript
 *
 * To avoid extra allocations it returns the values in reverse.
 */
function toHexReverseArray(value) {
    const sum = [];
    for (let i = 0; i < value.length; i++) {
        let s = Number(value[i]);
        for (let j = 0; s || j < sum.length; j++) {
            s += (sum[j] || 0) * 10;
            sum[j] = s % 16;
            s = (s - sum[j]) / 16;
        }
    }
    return sum;
}
/**
 * Splits a big integers into array of small integers to perform fast bitwise operations.
 */
function splitBigInt(value) {
    const sum = toHexReverseArray(value);
    const parts = Array(PARTS);
    for (let i = 0; i < PARTS; i++) {
        // Highest bits to lowest bits.
        parts[PARTS - 1 - i] = fromHexReverseArray(sum, i * PARTS, PARTS);
    }
    return parts;
}
class HighLow {
    static fromString(value) {
        return new HighLow(splitBigInt(value), value);
    }
    static fromBit(index) {
        const parts = Array(PARTS);
        const offset = Math.floor(index / SMALL_INT);
        for (let i = 0; i < PARTS; i++) {
            // Highest bits to lowest bits.
            parts[PARTS - 1 - i] = i === offset ? 1 << (index - offset * SMALL_INT) : 0;
        }
        return new HighLow(parts);
    }
    constructor(parts, str) {
        this.parts = parts;
        this.str = str;
    }
    and({ parts }) {
        return new HighLow(this.parts.map((v, i) => v & parts[i]));
    }
    or({ parts }) {
        return new HighLow(this.parts.map((v, i) => v | parts[i]));
    }
    xor({ parts }) {
        return new HighLow(this.parts.map((v, i) => v ^ parts[i]));
    }
    not() {
        return new HighLow(this.parts.map((v) => ~v));
    }
    equals({ parts }) {
        return this.parts.every((v, i) => v === parts[i]);
    }
    /**
     * For the average case the string representation is provided, but
     * when we need to convert high and low to string we just let the
     * slower big-integer library do it.
     */
    toString() {
        if (this.str != null) {
            return this.str;
        }
        const array = new Array(MAX_BIG_INT / 4);
        this.parts.forEach((value, offset) => {
            const hex = toHexReverseArray(value.toString());
            for (let i = 0; i < 4; i++) {
                array[i + offset * 4] = hex[4 - 1 - i] || 0;
            }
        });
        return (this.str = _virtual_BigInteger_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].fromArray(array, 16).toString());
    }
    toJSON() {
        return this.toString();
    }
}
const SUPPORTS_BIGINT = checkBrowserSupportsBigInt();
// Polyfill toJSON on BigInt if necessary.
if (SUPPORTS_BIGINT && BigInt.prototype.toJSON == null) {
    BigInt.prototype.toJSON = function () {
        return this.toString();
    };
}
const HIGH_LOW_CACHE = {};
const convertToBigFlag = SUPPORTS_BIGINT
    ? function convertToBigFlagBigInt(value) {
        return BigInt(value);
    }
    : function convertToBigFlagHighLow(value) {
        if (value instanceof HighLow) {
            return value;
        }
        if (typeof value === 'number') {
            value = value.toString();
        }
        // These type assertions are ugly, but there doesn't seem to be a
        // runtime costless way to do a type assertion above.
        if (HIGH_LOW_CACHE[value] != null) {
            return HIGH_LOW_CACHE[value];
        }
        HIGH_LOW_CACHE[value] = HighLow.fromString(value);
        return HIGH_LOW_CACHE[value];
    };
const EMPTY_FLAG = convertToBigFlag(0);
const flagAnd = SUPPORTS_BIGINT
    ? function flagAndBigInt(first = EMPTY_FLAG, second = EMPTY_FLAG) {
        return first & second;
    }
    : function flagAndHighLow(first = EMPTY_FLAG, second = EMPTY_FLAG) {
        return first.and(second);
    };
const flagOr = SUPPORTS_BIGINT
    ? function flagOrBigInt(first = EMPTY_FLAG, second = EMPTY_FLAG) {
        return first | second;
    }
    : function flagOrHighLow(first = EMPTY_FLAG, second = EMPTY_FLAG) {
        return first.or(second);
    };
const flagXor = SUPPORTS_BIGINT
    ? function flagXorBigInt(first = EMPTY_FLAG, second = EMPTY_FLAG) {
        return first ^ second;
    }
    : function flagXorHighLow(first = EMPTY_FLAG, second = EMPTY_FLAG) {
        return first.xor(second);
    };
const flagNot = SUPPORTS_BIGINT
    ? function flagNotBigInt(first = EMPTY_FLAG) {
        return ~first;
    }
    : function flagNotHighLow(first = EMPTY_FLAG) {
        return first.not();
    };
const flagEquals = SUPPORTS_BIGINT
    ? function flagEqualsBigInt(first, second) {
        return first === second;
    }
    : function flagEqualsHighLow(first, second) {
        if (first == null || second == null) {
            // eslint-disable-next-line eqeqeq
            return first == second;
        }
        return first.equals(second);
    };
function flagOrMultiple(...flags) {
    let result = flags[0];
    for (let i = 1; i < flags.length; i++) {
        result = flagOr(result, flags[i]);
    }
    return result;
}
function flagHas(base, flag) {
    return flagEquals(flagAnd(base, flag), flag);
}
function flagHasAny(base, flag) {
    return !flagEquals(flagAnd(base, flag), EMPTY_FLAG);
}
function flagAdd(base, flag) {
    return flag === EMPTY_FLAG ? base : flagOr(base, flag);
}
function flagRemove(base, flag) {
    return flag === EMPTY_FLAG ? base : flagXor(base, flagAnd(base, flag));
}
const getFlag = SUPPORTS_BIGINT
    ? function getFlagBigInt(index) {
        return BigInt(1) << BigInt(index);
    }
    : function getFlagHighLow(index) {
        return HighLow.fromBit(index);
    };
var BigFlagUtils = {
    combine: flagOrMultiple,
    add: flagAdd,
    remove: flagRemove,
    filter: flagAnd,
    invert: flagNot,
    has: flagHas,
    hasAny: flagHasAny,
    equals: flagEquals,
    deserialize: convertToBigFlag,
    getFlag: getFlag,
};




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/utils/PermissionUtils.mjs":
/*!*********************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/utils/PermissionUtils.mjs ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ PermissionUtils)
/* harmony export */ });
/* harmony import */ var _BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BigFlagUtils.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/BigFlagUtils.mjs");


function can(permission, permissions) {
    return _BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].has(_BigFlagUtils_mjs__WEBPACK_IMPORTED_MODULE_0__["default"].deserialize(permissions), permission);
}
var PermissionUtils = {
    can,
};




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/utils/PriceConstants.mjs":
/*!********************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/utils/PriceConstants.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CurrencyCodes: () => (/* binding */ CurrencyCodes),
/* harmony export */   CurrencyExponents: () => (/* binding */ CurrencyExponents)
/* harmony export */ });
var CurrencyCodes;
(function (CurrencyCodes) {
    CurrencyCodes["AED"] = "aed";
    CurrencyCodes["AFN"] = "afn";
    CurrencyCodes["ALL"] = "all";
    CurrencyCodes["AMD"] = "amd";
    CurrencyCodes["ANG"] = "ang";
    CurrencyCodes["AOA"] = "aoa";
    CurrencyCodes["ARS"] = "ars";
    CurrencyCodes["AUD"] = "aud";
    CurrencyCodes["AWG"] = "awg";
    CurrencyCodes["AZN"] = "azn";
    CurrencyCodes["BAM"] = "bam";
    CurrencyCodes["BBD"] = "bbd";
    CurrencyCodes["BDT"] = "bdt";
    CurrencyCodes["BGN"] = "bgn";
    CurrencyCodes["BHD"] = "bhd";
    CurrencyCodes["BIF"] = "bif";
    CurrencyCodes["BMD"] = "bmd";
    CurrencyCodes["BND"] = "bnd";
    CurrencyCodes["BOB"] = "bob";
    CurrencyCodes["BOV"] = "bov";
    CurrencyCodes["BRL"] = "brl";
    CurrencyCodes["BSD"] = "bsd";
    CurrencyCodes["BTN"] = "btn";
    CurrencyCodes["BWP"] = "bwp";
    CurrencyCodes["BYN"] = "byn";
    CurrencyCodes["BYR"] = "byr";
    CurrencyCodes["BZD"] = "bzd";
    CurrencyCodes["CAD"] = "cad";
    CurrencyCodes["CDF"] = "cdf";
    CurrencyCodes["CHE"] = "che";
    CurrencyCodes["CHF"] = "chf";
    CurrencyCodes["CHW"] = "chw";
    CurrencyCodes["CLF"] = "clf";
    CurrencyCodes["CLP"] = "clp";
    CurrencyCodes["CNY"] = "cny";
    CurrencyCodes["COP"] = "cop";
    CurrencyCodes["COU"] = "cou";
    CurrencyCodes["CRC"] = "crc";
    CurrencyCodes["CUC"] = "cuc";
    CurrencyCodes["CUP"] = "cup";
    CurrencyCodes["CVE"] = "cve";
    CurrencyCodes["CZK"] = "czk";
    CurrencyCodes["DJF"] = "djf";
    CurrencyCodes["DKK"] = "dkk";
    CurrencyCodes["DOP"] = "dop";
    CurrencyCodes["DZD"] = "dzd";
    CurrencyCodes["EGP"] = "egp";
    CurrencyCodes["ERN"] = "ern";
    CurrencyCodes["ETB"] = "etb";
    CurrencyCodes["EUR"] = "eur";
    CurrencyCodes["FJD"] = "fjd";
    CurrencyCodes["FKP"] = "fkp";
    CurrencyCodes["GBP"] = "gbp";
    CurrencyCodes["GEL"] = "gel";
    CurrencyCodes["GHS"] = "ghs";
    CurrencyCodes["GIP"] = "gip";
    CurrencyCodes["GMD"] = "gmd";
    CurrencyCodes["GNF"] = "gnf";
    CurrencyCodes["GTQ"] = "gtq";
    CurrencyCodes["GYD"] = "gyd";
    CurrencyCodes["HKD"] = "hkd";
    CurrencyCodes["HNL"] = "hnl";
    CurrencyCodes["HRK"] = "hrk";
    CurrencyCodes["HTG"] = "htg";
    CurrencyCodes["HUF"] = "huf";
    CurrencyCodes["IDR"] = "idr";
    CurrencyCodes["ILS"] = "ils";
    CurrencyCodes["INR"] = "inr";
    CurrencyCodes["IQD"] = "iqd";
    CurrencyCodes["IRR"] = "irr";
    CurrencyCodes["ISK"] = "isk";
    CurrencyCodes["JMD"] = "jmd";
    CurrencyCodes["JOD"] = "jod";
    CurrencyCodes["JPY"] = "jpy";
    CurrencyCodes["KES"] = "kes";
    CurrencyCodes["KGS"] = "kgs";
    CurrencyCodes["KHR"] = "khr";
    CurrencyCodes["KMF"] = "kmf";
    CurrencyCodes["KPW"] = "kpw";
    CurrencyCodes["KRW"] = "krw";
    CurrencyCodes["KWD"] = "kwd";
    CurrencyCodes["KYD"] = "kyd";
    CurrencyCodes["KZT"] = "kzt";
    CurrencyCodes["LAK"] = "lak";
    CurrencyCodes["LBP"] = "lbp";
    CurrencyCodes["LKR"] = "lkr";
    CurrencyCodes["LRD"] = "lrd";
    CurrencyCodes["LSL"] = "lsl";
    CurrencyCodes["LTL"] = "ltl";
    CurrencyCodes["LVL"] = "lvl";
    CurrencyCodes["LYD"] = "lyd";
    CurrencyCodes["MAD"] = "mad";
    CurrencyCodes["MDL"] = "mdl";
    CurrencyCodes["MGA"] = "mga";
    CurrencyCodes["MKD"] = "mkd";
    CurrencyCodes["MMK"] = "mmk";
    CurrencyCodes["MNT"] = "mnt";
    CurrencyCodes["MOP"] = "mop";
    CurrencyCodes["MRO"] = "mro";
    CurrencyCodes["MUR"] = "mur";
    CurrencyCodes["MVR"] = "mvr";
    CurrencyCodes["MWK"] = "mwk";
    CurrencyCodes["MXN"] = "mxn";
    CurrencyCodes["MXV"] = "mxv";
    CurrencyCodes["MYR"] = "myr";
    CurrencyCodes["MZN"] = "mzn";
    CurrencyCodes["NAD"] = "nad";
    CurrencyCodes["NGN"] = "ngn";
    CurrencyCodes["NIO"] = "nio";
    CurrencyCodes["NOK"] = "nok";
    CurrencyCodes["NPR"] = "npr";
    CurrencyCodes["NZD"] = "nzd";
    CurrencyCodes["OMR"] = "omr";
    CurrencyCodes["PAB"] = "pab";
    CurrencyCodes["PEN"] = "pen";
    CurrencyCodes["PGK"] = "pgk";
    CurrencyCodes["PHP"] = "php";
    CurrencyCodes["PKR"] = "pkr";
    CurrencyCodes["PLN"] = "pln";
    CurrencyCodes["PYG"] = "pyg";
    CurrencyCodes["QAR"] = "qar";
    CurrencyCodes["RON"] = "ron";
    CurrencyCodes["RSD"] = "rsd";
    CurrencyCodes["RUB"] = "rub";
    CurrencyCodes["RWF"] = "rwf";
    CurrencyCodes["SAR"] = "sar";
    CurrencyCodes["SBD"] = "sbd";
    CurrencyCodes["SCR"] = "scr";
    CurrencyCodes["SDG"] = "sdg";
    CurrencyCodes["SEK"] = "sek";
    CurrencyCodes["SGD"] = "sgd";
    CurrencyCodes["SHP"] = "shp";
    CurrencyCodes["SLL"] = "sll";
    CurrencyCodes["SOS"] = "sos";
    CurrencyCodes["SRD"] = "srd";
    CurrencyCodes["SSP"] = "ssp";
    CurrencyCodes["STD"] = "std";
    CurrencyCodes["SVC"] = "svc";
    CurrencyCodes["SYP"] = "syp";
    CurrencyCodes["SZL"] = "szl";
    CurrencyCodes["THB"] = "thb";
    CurrencyCodes["TJS"] = "tjs";
    CurrencyCodes["TMT"] = "tmt";
    CurrencyCodes["TND"] = "tnd";
    CurrencyCodes["TOP"] = "top";
    CurrencyCodes["TRY"] = "try";
    CurrencyCodes["TTD"] = "ttd";
    CurrencyCodes["TWD"] = "twd";
    CurrencyCodes["TZS"] = "tzs";
    CurrencyCodes["UAH"] = "uah";
    CurrencyCodes["UGX"] = "ugx";
    CurrencyCodes["USD"] = "usd";
    CurrencyCodes["USN"] = "usn";
    CurrencyCodes["USS"] = "uss";
    CurrencyCodes["UYI"] = "uyi";
    CurrencyCodes["UYU"] = "uyu";
    CurrencyCodes["UZS"] = "uzs";
    CurrencyCodes["VEF"] = "vef";
    CurrencyCodes["VND"] = "vnd";
    CurrencyCodes["VUV"] = "vuv";
    CurrencyCodes["WST"] = "wst";
    CurrencyCodes["XAF"] = "xaf";
    CurrencyCodes["XAG"] = "xag";
    CurrencyCodes["XAU"] = "xau";
    CurrencyCodes["XBA"] = "xba";
    CurrencyCodes["XBB"] = "xbb";
    CurrencyCodes["XBC"] = "xbc";
    CurrencyCodes["XBD"] = "xbd";
    CurrencyCodes["XCD"] = "xcd";
    CurrencyCodes["XDR"] = "xdr";
    CurrencyCodes["XFU"] = "xfu";
    CurrencyCodes["XOF"] = "xof";
    CurrencyCodes["XPD"] = "xpd";
    CurrencyCodes["XPF"] = "xpf";
    CurrencyCodes["XPT"] = "xpt";
    CurrencyCodes["XSU"] = "xsu";
    CurrencyCodes["XTS"] = "xts";
    CurrencyCodes["XUA"] = "xua";
    CurrencyCodes["YER"] = "yer";
    CurrencyCodes["ZAR"] = "zar";
    CurrencyCodes["ZMW"] = "zmw";
    CurrencyCodes["ZWL"] = "zwl";
})(CurrencyCodes || (CurrencyCodes = {}));
const CurrencyExponents = {
    [CurrencyCodes.AED]: 2,
    [CurrencyCodes.AFN]: 2,
    [CurrencyCodes.ALL]: 2,
    [CurrencyCodes.AMD]: 2,
    [CurrencyCodes.ANG]: 2,
    [CurrencyCodes.AOA]: 2,
    [CurrencyCodes.ARS]: 2,
    [CurrencyCodes.AUD]: 2,
    [CurrencyCodes.AWG]: 2,
    [CurrencyCodes.AZN]: 2,
    [CurrencyCodes.BAM]: 2,
    [CurrencyCodes.BBD]: 2,
    [CurrencyCodes.BDT]: 2,
    [CurrencyCodes.BGN]: 2,
    [CurrencyCodes.BHD]: 3,
    [CurrencyCodes.BIF]: 0,
    [CurrencyCodes.BMD]: 2,
    [CurrencyCodes.BND]: 2,
    [CurrencyCodes.BOB]: 2,
    [CurrencyCodes.BOV]: 2,
    [CurrencyCodes.BRL]: 2,
    [CurrencyCodes.BSD]: 2,
    [CurrencyCodes.BTN]: 2,
    [CurrencyCodes.BWP]: 2,
    [CurrencyCodes.BYR]: 0,
    [CurrencyCodes.BYN]: 2,
    [CurrencyCodes.BZD]: 2,
    [CurrencyCodes.CAD]: 2,
    [CurrencyCodes.CDF]: 2,
    [CurrencyCodes.CHE]: 2,
    [CurrencyCodes.CHF]: 2,
    [CurrencyCodes.CHW]: 2,
    [CurrencyCodes.CLF]: 0,
    [CurrencyCodes.CLP]: 0,
    [CurrencyCodes.CNY]: 2,
    [CurrencyCodes.COP]: 2,
    [CurrencyCodes.COU]: 2,
    [CurrencyCodes.CRC]: 2,
    [CurrencyCodes.CUC]: 2,
    [CurrencyCodes.CUP]: 2,
    [CurrencyCodes.CVE]: 2,
    [CurrencyCodes.CZK]: 2,
    [CurrencyCodes.DJF]: 0,
    [CurrencyCodes.DKK]: 2,
    [CurrencyCodes.DOP]: 2,
    [CurrencyCodes.DZD]: 2,
    [CurrencyCodes.EGP]: 2,
    [CurrencyCodes.ERN]: 2,
    [CurrencyCodes.ETB]: 2,
    [CurrencyCodes.EUR]: 2,
    [CurrencyCodes.FJD]: 2,
    [CurrencyCodes.FKP]: 2,
    [CurrencyCodes.GBP]: 2,
    [CurrencyCodes.GEL]: 2,
    [CurrencyCodes.GHS]: 2,
    [CurrencyCodes.GIP]: 2,
    [CurrencyCodes.GMD]: 2,
    [CurrencyCodes.GNF]: 0,
    [CurrencyCodes.GTQ]: 2,
    [CurrencyCodes.GYD]: 2,
    [CurrencyCodes.HKD]: 2,
    [CurrencyCodes.HNL]: 2,
    [CurrencyCodes.HRK]: 2,
    [CurrencyCodes.HTG]: 2,
    [CurrencyCodes.HUF]: 2,
    [CurrencyCodes.IDR]: 2,
    [CurrencyCodes.ILS]: 2,
    [CurrencyCodes.INR]: 2,
    [CurrencyCodes.IQD]: 3,
    [CurrencyCodes.IRR]: 2,
    [CurrencyCodes.ISK]: 0,
    [CurrencyCodes.JMD]: 2,
    [CurrencyCodes.JOD]: 3,
    [CurrencyCodes.JPY]: 0,
    [CurrencyCodes.KES]: 2,
    [CurrencyCodes.KGS]: 2,
    [CurrencyCodes.KHR]: 2,
    [CurrencyCodes.KMF]: 0,
    [CurrencyCodes.KPW]: 2,
    [CurrencyCodes.KRW]: 0,
    [CurrencyCodes.KWD]: 3,
    [CurrencyCodes.KYD]: 2,
    [CurrencyCodes.KZT]: 2,
    [CurrencyCodes.LAK]: 2,
    [CurrencyCodes.LBP]: 2,
    [CurrencyCodes.LKR]: 2,
    [CurrencyCodes.LRD]: 2,
    [CurrencyCodes.LSL]: 2,
    [CurrencyCodes.LTL]: 2,
    [CurrencyCodes.LVL]: 2,
    [CurrencyCodes.LYD]: 3,
    [CurrencyCodes.MAD]: 2,
    [CurrencyCodes.MDL]: 2,
    [CurrencyCodes.MGA]: 2,
    [CurrencyCodes.MKD]: 2,
    [CurrencyCodes.MMK]: 2,
    [CurrencyCodes.MNT]: 2,
    [CurrencyCodes.MOP]: 2,
    [CurrencyCodes.MRO]: 2,
    [CurrencyCodes.MUR]: 2,
    [CurrencyCodes.MVR]: 2,
    [CurrencyCodes.MWK]: 2,
    [CurrencyCodes.MXN]: 2,
    [CurrencyCodes.MXV]: 2,
    [CurrencyCodes.MYR]: 2,
    [CurrencyCodes.MZN]: 2,
    [CurrencyCodes.NAD]: 2,
    [CurrencyCodes.NGN]: 2,
    [CurrencyCodes.NIO]: 2,
    [CurrencyCodes.NOK]: 2,
    [CurrencyCodes.NPR]: 2,
    [CurrencyCodes.NZD]: 2,
    [CurrencyCodes.OMR]: 3,
    [CurrencyCodes.PAB]: 2,
    [CurrencyCodes.PEN]: 2,
    [CurrencyCodes.PGK]: 2,
    [CurrencyCodes.PHP]: 2,
    [CurrencyCodes.PKR]: 2,
    [CurrencyCodes.PLN]: 2,
    [CurrencyCodes.PYG]: 0,
    [CurrencyCodes.QAR]: 2,
    [CurrencyCodes.RON]: 2,
    [CurrencyCodes.RSD]: 2,
    [CurrencyCodes.RUB]: 2,
    [CurrencyCodes.RWF]: 0,
    [CurrencyCodes.SAR]: 2,
    [CurrencyCodes.SBD]: 2,
    [CurrencyCodes.SCR]: 2,
    [CurrencyCodes.SDG]: 2,
    [CurrencyCodes.SEK]: 2,
    [CurrencyCodes.SGD]: 2,
    [CurrencyCodes.SHP]: 2,
    [CurrencyCodes.SLL]: 2,
    [CurrencyCodes.SOS]: 2,
    [CurrencyCodes.SRD]: 2,
    [CurrencyCodes.SSP]: 2,
    [CurrencyCodes.STD]: 2,
    [CurrencyCodes.SVC]: 2,
    [CurrencyCodes.SYP]: 2,
    [CurrencyCodes.SZL]: 2,
    [CurrencyCodes.THB]: 2,
    [CurrencyCodes.TJS]: 2,
    [CurrencyCodes.TMT]: 2,
    [CurrencyCodes.TND]: 3,
    [CurrencyCodes.TOP]: 2,
    [CurrencyCodes.TRY]: 2,
    [CurrencyCodes.TTD]: 2,
    [CurrencyCodes.TWD]: 2,
    [CurrencyCodes.TZS]: 2,
    [CurrencyCodes.UAH]: 2,
    [CurrencyCodes.UGX]: 0,
    [CurrencyCodes.USD]: 2,
    [CurrencyCodes.USN]: 2,
    [CurrencyCodes.USS]: 2,
    [CurrencyCodes.UYI]: 0,
    [CurrencyCodes.UYU]: 2,
    [CurrencyCodes.UZS]: 2,
    [CurrencyCodes.VEF]: 2,
    [CurrencyCodes.VND]: 0,
    [CurrencyCodes.VUV]: 0,
    [CurrencyCodes.WST]: 2,
    [CurrencyCodes.XAF]: 0,
    [CurrencyCodes.XAG]: 0,
    [CurrencyCodes.XAU]: 0,
    [CurrencyCodes.XBA]: 0,
    [CurrencyCodes.XBB]: 0,
    [CurrencyCodes.XBC]: 0,
    [CurrencyCodes.XBD]: 0,
    [CurrencyCodes.XCD]: 2,
    [CurrencyCodes.XDR]: 0,
    [CurrencyCodes.XFU]: 0,
    [CurrencyCodes.XOF]: 0,
    [CurrencyCodes.XPD]: 0,
    [CurrencyCodes.XPF]: 0,
    [CurrencyCodes.XPT]: 0,
    [CurrencyCodes.XSU]: 0,
    [CurrencyCodes.XTS]: 0,
    [CurrencyCodes.XUA]: 0,
    [CurrencyCodes.YER]: 2,
    [CurrencyCodes.ZAR]: 2,
    [CurrencyCodes.ZMW]: 2,
    [CurrencyCodes.ZWL]: 2,
};




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/utils/PriceUtils.mjs":
/*!****************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/utils/PriceUtils.mjs ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ PriceUtils)
/* harmony export */ });
/* harmony import */ var _lib_decimal_js_light_decimal_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/decimal.js-light/decimal.mjs */ "./node_modules/@discord/embedded-app-sdk/output/lib/decimal.js-light/decimal.mjs");
/* harmony import */ var _PriceConstants_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./PriceConstants.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/PriceConstants.mjs");



function formatPrice(price, locale = 'en-US') {
    const { amount, currency } = price;
    const formatter = Intl.NumberFormat(locale, { style: 'currency', currency });
    return formatter.format(convertToMajorCurrencyUnits(amount, currency));
}
function convertToMajorCurrencyUnits(minorUnitValue, currency) {
    const exponent = _PriceConstants_mjs__WEBPACK_IMPORTED_MODULE_1__.CurrencyExponents[currency];
    if (exponent == null) {
        console.warn(`Unexpected currency ${currency}`);
        return minorUnitValue;
    }
    const minorUnit = new _lib_decimal_js_light_decimal_mjs__WEBPACK_IMPORTED_MODULE_0__["default"](minorUnitValue);
    return minorUnit.dividedBy(10 ** exponent).toNumber();
}
var PriceUtils = {
    formatPrice,
};




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/utils/assertUnreachable.mjs":
/*!***********************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/utils/assertUnreachable.mjs ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ assertUnreachable)
/* harmony export */ });
/**
 * Assets x is statically unreachable at build-time,
 * and throws at runtime if data is dynamic.
 */
function assertUnreachable(_x, runtimeError) {
    throw runtimeError;
}




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs":
/*!********************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/utils/commandFactory.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   commandFactory: () => (/* binding */ commandFactory),
/* harmony export */   schemaCommandFactory: () => (/* binding */ schemaCommandFactory)
/* harmony export */ });
/* harmony import */ var _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/zod/lib/index.mjs */ "./node_modules/@discord/embedded-app-sdk/output/lib/zod/lib/index.mjs");
/* harmony import */ var _schema_common_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../schema/common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");
/* harmony import */ var _generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../generated/schemas.mjs */ "./node_modules/@discord/embedded-app-sdk/output/generated/schemas.mjs");




function commandFactory(sendCommand, cmd, response, transferTransform = () => undefined) {
    const payload = _schema_common_mjs__WEBPACK_IMPORTED_MODULE_1__.ReceiveFramePayload.extend({
        cmd: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.literal)(cmd),
        data: response,
    });
    return async (args) => {
        const reply = await sendCommand({ cmd, args, transfer: transferTransform(args) });
        const parsed = payload.parse(reply);
        return parsed.data;
    };
}
function schemaCommandFactory(cmd, transferTransform = () => undefined) {
    const response = _generated_schemas_mjs__WEBPACK_IMPORTED_MODULE_2__.Schemas[cmd].response;
    const payload = _schema_common_mjs__WEBPACK_IMPORTED_MODULE_1__.ReceiveFramePayload.extend({
        cmd: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.literal)(cmd),
        data: response,
    });
    return (sendCommand) => async (args) => {
        const reply = await sendCommand({
            // @ts-expect-error - Merge commands
            cmd: cmd,
            args,
            transfer: transferTransform(args),
        });
        const parsed = payload.parse(reply);
        return parsed.data;
    };
}




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/utils/compatCommandFactory.mjs":
/*!**************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/utils/compatCommandFactory.mjs ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ compatCommandFactory)
/* harmony export */ });
/* harmony import */ var _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/zod/lib/index.mjs */ "./node_modules/@discord/embedded-app-sdk/output/lib/zod/lib/index.mjs");
/* harmony import */ var _Constants_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Constants.mjs */ "./node_modules/@discord/embedded-app-sdk/output/Constants.mjs");
/* harmony import */ var _schema_common_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../schema/common.mjs */ "./node_modules/@discord/embedded-app-sdk/output/schema/common.mjs");




/**
 * @args - the primary args to send with the command.
 * @fallbackArgs - the args to try the command with in the case where an old Discord
 *  client doesn't support one of the new args.
 */
function compatCommandFactory({ sendCommand, cmd, response, fallbackTransform, transferTransform = () => undefined, }) {
    const payload = _schema_common_mjs__WEBPACK_IMPORTED_MODULE_2__.ReceiveFramePayload.extend({
        cmd: (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.literal)(cmd),
        data: response,
    });
    return async (args) => {
        try {
            const reply = await sendCommand({ cmd, args, transfer: transferTransform(args) });
            const parsed = payload.parse(reply);
            return parsed.data;
        }
        catch (error) {
            if (error.code === _Constants_mjs__WEBPACK_IMPORTED_MODULE_1__.RPCErrorCodes.INVALID_PAYLOAD) {
                const fallbackArgs = fallbackTransform(args);
                const reply = await sendCommand({ cmd, args: fallbackArgs, transfer: transferTransform(fallbackArgs) });
                const parsed = payload.parse(reply);
                return parsed.data;
            }
            else {
                throw error;
            }
        }
    };
}




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/utils/console.mjs":
/*!*************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/utils/console.mjs ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   consoleLevels: () => (/* binding */ consoleLevels),
/* harmony export */   wrapConsoleMethod: () => (/* binding */ wrapConsoleMethod)
/* harmony export */ });
const consoleLevels = ['log', 'warn', 'debug', 'info', 'error'];
function wrapConsoleMethod(console, level, callback) {
    const _consoleMethod = console[level];
    const _console = console;
    if (!_consoleMethod) {
        return;
    }
    console[level] = function () {
        const args = [].slice.call(arguments);
        const message = '' + args.join(' ');
        callback(level, message);
        _consoleMethod.apply(_console, args);
    };
}




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/utils/getDefaultSdkConfiguration.mjs":
/*!********************************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/utils/getDefaultSdkConfiguration.mjs ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ getDefaultSdkConfiguration)
/* harmony export */ });
function getDefaultSdkConfiguration() {
    return {
        disableConsoleLogOverride: false,
    };
}




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/utils/patchUrlMappings.mjs":
/*!**********************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/utils/patchUrlMappings.mjs ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   attemptRemap: () => (/* binding */ attemptRemap),
/* harmony export */   patchUrlMappings: () => (/* binding */ patchUrlMappings)
/* harmony export */ });
/* harmony import */ var _lib_tslib_tslib_es6_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/tslib/tslib.es6.mjs */ "./node_modules/@discord/embedded-app-sdk/output/lib/tslib/tslib.es6.mjs");
/* harmony import */ var _url_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./url.mjs */ "./node_modules/@discord/embedded-app-sdk/output/utils/url.mjs");



function patchUrlMappings(mappings, { patchFetch = true, patchWebSocket = true, patchXhr = true, patchSrcAttributes = false } = {}) {
    // Bail out if we're not in a browser
    if (typeof window === 'undefined')
        return;
    if (patchFetch) {
        const fetchImpl = window.fetch;
        // fetch is a duplex, but this is consistent
        window.fetch = function (input, init) {
            // If fetch has Request as input, we need to resolve any stream
            // before we create a new request with the mapped url
            if (input instanceof Request) {
                const newUrl = attemptRemap({ url: (0,_url_mjs__WEBPACK_IMPORTED_MODULE_1__.absoluteURL)(input.url), mappings });
                // eslint-disable-next-line @typescript-eslint/no-unused-vars
                const _a = (init !== null && init !== void 0 ? init : {}), newInit = (0,_lib_tslib_tslib_es6_mjs__WEBPACK_IMPORTED_MODULE_0__.__rest)(_a, ["url"]);
                Object.keys(Request.prototype).forEach((value) => {
                    if (value === 'url')
                        return;
                    try {
                        // @ts-expect-error
                        newInit[value] = input[value];
                    }
                    catch (ex) {
                        console.warn(`Remapping fetch request key "${value}" failed`, ex);
                    }
                });
                return new Promise((resolve, reject) => {
                    try {
                        input.blob().then((blob) => {
                            if (input.method.toUpperCase() !== 'HEAD' && input.method.toUpperCase() !== 'GET' && blob.size > 0) {
                                newInit.body = blob;
                            }
                            resolve(fetchImpl(new Request(newUrl, newInit)));
                        });
                    }
                    catch (ex) {
                        reject(ex);
                    }
                });
            }
            // Assuming a generic url or string
            const remapped = attemptRemap({ url: input instanceof URL ? input : (0,_url_mjs__WEBPACK_IMPORTED_MODULE_1__.absoluteURL)(input), mappings });
            return fetchImpl(remapped, init);
        };
    }
    if (patchWebSocket) {
        class WebSocketProxy extends WebSocket {
            constructor(url, protocols) {
                const remapped = attemptRemap({ url: url instanceof URL ? url : (0,_url_mjs__WEBPACK_IMPORTED_MODULE_1__.absoluteURL)(url), mappings });
                super(remapped, protocols);
            }
        }
        window.WebSocket = WebSocketProxy;
    }
    if (patchXhr) {
        const openImpl = XMLHttpRequest.prototype.open;
        // @ts-expect-error - the ts interface exports two 'open' methods
        XMLHttpRequest.prototype.open = function (method, url, async, username, password) {
            const remapped = attemptRemap({ url: (0,_url_mjs__WEBPACK_IMPORTED_MODULE_1__.absoluteURL)(url), mappings });
            openImpl.apply(this, [method, remapped, async, username, password]);
        };
    }
    if (patchSrcAttributes) {
        const callback = function (mutationsList) {
            for (const mutation of mutationsList) {
                if (mutation.type === 'attributes' && mutation.attributeName === 'src') {
                    attemptSetNodeSrc(mutation.target, mappings);
                }
                else if (mutation.type === 'childList') {
                    mutation.addedNodes.forEach((node) => {
                        attemptSetNodeSrc(node, mappings);
                        recursivelyRemapChildNodes(node, mappings);
                    });
                }
            }
        };
        const observer = new MutationObserver(callback);
        const config = {
            attributeFilter: ['src'],
            childList: true,
            subtree: true,
        };
        observer.observe(window.document, config);
        window.document.querySelectorAll('[src]').forEach((node) => {
            attemptSetNodeSrc(node, mappings);
        });
    }
}
function recursivelyRemapChildNodes(node, mappings) {
    if (node.hasChildNodes()) {
        node.childNodes.forEach((child) => {
            attemptSetNodeSrc(child, mappings);
            recursivelyRemapChildNodes(child, mappings);
        });
    }
}
function attemptSetNodeSrc(node, mappings) {
    if (node instanceof HTMLElement && node.hasAttribute('src')) {
        const rawSrc = node.getAttribute('src');
        const url = (0,_url_mjs__WEBPACK_IMPORTED_MODULE_1__.absoluteURL)(rawSrc !== null && rawSrc !== void 0 ? rawSrc : '');
        if (url.host === window.location.host)
            return;
        if (node.tagName.toLowerCase() === 'script') {
            // Scripts are a special case, and need to be wholly recreated since
            // modifying a script tag doesn't refetch.
            attemptRecreateScriptNode(node, { url, mappings });
        }
        else {
            const newSrc = attemptRemap({ url, mappings }).toString();
            // Only apply the remapping if we actually remapped the value
            if (newSrc !== rawSrc) {
                node.setAttribute('src', newSrc);
            }
        }
    }
}
function attemptRecreateScriptNode(node, { url, mappings }) {
    const newUrl = attemptRemap({ url, mappings });
    if (url.toString() !== newUrl.toString()) {
        // Note: Script tags cannot be duplicated via `node.clone()` because their internal 'already started'
        // state prevents the new one from being fetched. We must manually recreate the duplicate tag instead.
        const newNode = document.createElement(node.tagName);
        newNode.innerHTML = node.innerHTML;
        for (const attr of node.attributes) {
            newNode.setAttribute(attr.name, attr.value);
        }
        newNode.setAttribute('src', attemptRemap({ url, mappings }).toString());
        node.after(newNode);
        node.remove();
    }
}
function attemptRemap({ url, mappings }) {
    const newURL = new URL(url.toString());
    if ((newURL.hostname.includes('discordsays.com') || newURL.hostname.includes('discordsez.com')) &&
        // Only apply proxy prefix once
        !newURL.pathname.startsWith(_url_mjs__WEBPACK_IMPORTED_MODULE_1__.PROXY_PREFIX)) {
        newURL.pathname = _url_mjs__WEBPACK_IMPORTED_MODULE_1__.PROXY_PREFIX + newURL.pathname;
    }
    for (const mapping of mappings) {
        const mapped = (0,_url_mjs__WEBPACK_IMPORTED_MODULE_1__.matchAndRewriteURL)({
            originalURL: newURL,
            prefix: mapping.prefix,
            target: mapping.target,
            prefixHost: window.location.host,
        });
        if (mapped != null && (mapped === null || mapped === void 0 ? void 0 : mapped.toString()) !== url.toString()) {
            return mapped;
        }
    }
    return newURL;
}




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/utils/url.mjs":
/*!*********************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/utils/url.mjs ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PROXY_PREFIX: () => (/* binding */ PROXY_PREFIX),
/* harmony export */   absoluteURL: () => (/* binding */ absoluteURL),
/* harmony export */   matchAndRewriteURL: () => (/* binding */ matchAndRewriteURL)
/* harmony export */ });
const PROXY_PREFIX = '/.proxy';
/**
 * Creates a regular expression from a target string. The target string
 * may contain `{name}` tokens which will end up being translated to
 * a named group match for a series of word characters with the group named `name`
 * The substitution pattern is {a-z} because the named groups must be valid JS identifiers,
 * making items like {0} invalid.
 *
 * @returns a RegExp object
 **/
const SUBSTITUTION_REGEX = /\{([a-z]+)\}/g;
function regexFromTarget(target) {
    const regexString = target.replace(SUBSTITUTION_REGEX, (match, name) => `(?<${name}>[\\w-]+)`);
    return new RegExp(`${regexString}(/|$)`);
}
/**
 *
 * Attempts to map the actual url (i.e. google.com) to a url path, per the url
 * mappings set up in the embedded application. If the target contains `{foo}`
 * tokens, they will be replace with the values contained in the original URL,
 * via the pattern described in the prefix
 *
 * @returns  null if URL doesn't match prefix, otherwise return rewritten URL
 */
function matchAndRewriteURL({ originalURL, prefix, prefixHost, target }) {
    // coerce url with filler https protocol so we can retrieve host and pathname from target
    const targetURL = new URL(`https://${target}`);
    // Depending on the environment, the URL constructor may turn `{` and `}` into `%7B` and `%7D`, respectively
    const targetRegEx = regexFromTarget(targetURL.host.replace(/%7B/g, '{').replace(/%7D/g, '}'));
    const match = originalURL.toString().match(targetRegEx);
    // Null match indicates that this target is not relevant
    if (match == null)
        return originalURL;
    const newURL = new URL(originalURL.toString());
    newURL.host = prefixHost;
    newURL.pathname = prefix.replace(SUBSTITUTION_REGEX, (_, matchName) => {
        var _a;
        const replaceValue = (_a = match.groups) === null || _a === void 0 ? void 0 : _a[matchName];
        if (replaceValue == null)
            throw new Error('Misconfigured route.');
        return replaceValue;
    });
    // Append the original path
    newURL.pathname += newURL.pathname === '/' ? originalURL.pathname.slice(1) : originalURL.pathname;
    // prepend /.proxy/ to path if using discord activities proxy
    if ((newURL.hostname.includes('discordsays.com') || newURL.hostname.includes('discordsez.com')) &&
        !newURL.pathname.startsWith(PROXY_PREFIX)) {
        newURL.pathname = PROXY_PREFIX + newURL.pathname;
    }
    // Remove the target's path from the new url path
    newURL.pathname = newURL.pathname.replace(targetURL.pathname, '');
    // Add a trailing slash if original url had it, and if it doesn't already have one or if matches filename regex
    if (originalURL.pathname.endsWith('/') && !newURL.pathname.endsWith('/')) {
        newURL.pathname += '/';
    }
    return newURL;
}
function absoluteURL(url, protocol = window.location.protocol, host = window.location.host) {
    // If the first arg is a complete url, it will ignore the second arg
    // This call structure lets us set relative urls to have a full url with the proper protocol and host
    return new URL(url, `${protocol}//${host}`);
}




/***/ }),

/***/ "./node_modules/@discord/embedded-app-sdk/output/utils/zodUtils.mjs":
/*!**************************************************************************!*\
  !*** ./node_modules/@discord/embedded-app-sdk/output/utils/zodUtils.mjs ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fallbackToDefault: () => (/* binding */ fallbackToDefault),
/* harmony export */   zodCoerceUnhandledValue: () => (/* binding */ zodCoerceUnhandledValue)
/* harmony export */ });
/* harmony import */ var _lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/zod/lib/index.mjs */ "./node_modules/@discord/embedded-app-sdk/output/lib/zod/lib/index.mjs");


/**
 * This is a helper function which coerces an unsupported arg value to the key/value UNHANDLED: -1
 * This is necessary to handle a scenario where a new enum value is added in the Discord Client,
 * so that the sdk will not throw an error when given a (newly) valid enum value.
 *
 * To remove the requirement for consumers of this sdk to import an enum when parsing data,
 * we instead use an object cast as const (readonly). This maintains parity with the previous
 * schema (which used zod.enum), and behaves more like a union type, i.e. 'foo' | 'bar' | -1
 *
 * @param inputObject This object must include the key/value pair UNHANDLED = -1
 */
function zodCoerceUnhandledValue(inputObject) {
    return (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.preprocess)((arg) => {
        var _a;
        const [objectKey] = (_a = Object.entries(inputObject).find(([, value]) => value === arg)) !== null && _a !== void 0 ? _a : [];
        if (arg != null && objectKey === undefined) {
            return inputObject.UNHANDLED;
        }
        return arg;
    }, (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.string)().or((0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.number)()));
}
/**
 * Fallback to the default zod value if parsing fails.
 */
function fallbackToDefault(schema) {
    const transform = (0,_lib_zod_lib_index_mjs__WEBPACK_IMPORTED_MODULE_0__.custom)().transform((data) => {
        const res = schema.safeParse(data);
        if (res.success) {
            return res.data;
        }
        return schema._def.defaultValue();
    });
    // Must set this inner schema so inspection works correctly
    transform.overlayType = schema;
    // transform._def.schema = schema;
    return transform;
}




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfZGlzY29yZF9lbWJlZGRlZC1hcHAtc2RrX291dHB1dF9pbmRleF9tanMuaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBb0Q7O0FBRXBEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHNDQUFzQztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHNDQUFzQztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsa0NBQWtDO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw0QkFBNEI7QUFDN0I7QUFDQTtBQUNBLDJCQUEyQiwrREFBWTtBQUN2QyxrQkFBa0IsK0RBQVk7QUFDOUIsaUJBQWlCLCtEQUFZO0FBQzdCLG1CQUFtQiwrREFBWTtBQUMvQixxQkFBcUIsK0RBQVk7QUFDakMsa0JBQWtCLCtEQUFZO0FBQzlCLG1CQUFtQiwrREFBWTtBQUMvQixvQkFBb0IsK0RBQVk7QUFDaEMsc0JBQXNCLCtEQUFZO0FBQ2xDLFlBQVksK0RBQVk7QUFDeEIsa0JBQWtCLCtEQUFZO0FBQzlCLG1CQUFtQiwrREFBWTtBQUMvQix1QkFBdUIsK0RBQVk7QUFDbkMscUJBQXFCLCtEQUFZO0FBQ2pDLGlCQUFpQiwrREFBWTtBQUM3QixrQkFBa0IsK0RBQVk7QUFDOUIsMEJBQTBCLCtEQUFZO0FBQ3RDLHNCQUFzQiwrREFBWTtBQUNsQyx5QkFBeUIsK0RBQVk7QUFDckMseUJBQXlCLCtEQUFZO0FBQ3JDLGFBQWEsK0RBQVk7QUFDekIsV0FBVywrREFBWTtBQUN2QixrQkFBa0IsK0RBQVk7QUFDOUIsb0JBQW9CLCtEQUFZO0FBQ2hDLGtCQUFrQiwrREFBWTtBQUM5QixhQUFhLCtEQUFZO0FBQ3pCLHFCQUFxQiwrREFBWTtBQUNqQyxzQkFBc0IsK0RBQVk7QUFDbEMsa0JBQWtCLCtEQUFZO0FB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLE9BQU87QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLFNBQVM7QUFDL0I7QUFDQSw4QkFBOEIsU0FBUztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsT0FBTztBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1EO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixPQUFPO0FBQzdCO0FBQ0E7QUFDQSw4QkFBOEIsT0FBTztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxZQUFZO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsT0FBTztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixPQUFPO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLFFBQVE7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxRQUFRO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsY0FBYztBQUMxQztBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsUUFBUTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxPQUFPO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsT0FBTztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsVUFBVTtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHLENBQUMsOERBQVU7QUFDZCxRQUFRLDhEQUFVO0FBQ2xCOztBQUUwQzs7Ozs7Ozs7Ozs7Ozs7OztBQ2o3QzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixlQUFlLEVBQUU7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLE9BQU87QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsYUFBYTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHVCQUF1QjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxnQkFBZ0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsYUFBYTtBQUN4QjtBQUNBO0FBQ0EscUJBQXFCLFNBQVM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLElBQUk7QUFDbkI7QUFDQTtBQUNBLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0Esc0JBQXNCLE1BQU07QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxTQUFTO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLFFBQVE7QUFDakIsU0FBUyxRQUFRO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxRQUFRO0FBQ2pCLFNBQVMsUUFBUTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsUUFBUTtBQUNqQixTQUFTLFFBQVE7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU0sdUJBQXVCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxRQUFRO0FBQ2pCLFNBQVMsUUFBUTtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsUUFBUTtBQUNqQixTQUFTLFFBQVE7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLElBQUk7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsRUFBRTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGVBQWU7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixxQkFBcUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGFBQWE7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsSUFBSTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sc0JBQXNCLFFBQVE7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsS0FBSztBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHNCQUFzQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHVCQUF1QjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsdUJBQXVCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsVUFBVTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLFNBQVM7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxJQUFJO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMseUJBQXlCO0FBQ3ZDO0FBQ0E7QUFDQSx5QkFBeUIsK0JBQStCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsUUFBUTtBQUNwQztBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLFdBQVcsSUFBSTtBQUNmO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsU0FBUztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsU0FBUztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixjQUFjO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxRQUFRO0FBQ3JCLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsZUFBZSxHQUFHO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsR0FBRztBQUNoQixlQUFlLFFBQVE7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTtBQUNB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QTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGFBQWEsUUFBUTtBQUNyQixhQUFhLFVBQVU7QUFDdkIsYUFBYSxVQUFVO0FBQ3ZCLGFBQWEsUUFBUTtBQUNyQjtBQUNBLGFBQWEsUUFBUTtBQUNyQixlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsUUFBUTtBQUNyQixhQUFhLFFBQVE7QUFDckIsZUFBZSxHQUFHO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxRQUFRO0FBQ3JCLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFEO0FBQ3JEO0FBQ0EsMERBQTBEO0FBQzFELGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQ7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsTUFBTTtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxpREFBaUQ7QUFDdkY7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyx5QkFBeUI7QUFDL0Q7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyx1QkFBdUI7QUFDN0Q7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGdDQUFnQywrQ0FBK0M7QUFDL0U7QUFDQTtBQUNBLGdDQUFnQyw2Q0FBNkM7QUFDN0U7QUFDQTtBQUNBLGdDQUFnQywrQ0FBK0M7QUFDL0U7QUFDQTtBQUNBLGdDQUFnQyw4Q0FBOEM7QUFDOUU7QUFDQTtBQUNBLGdDQUFnQyxnREFBZ0Q7QUFDaEY7QUFDQTtBQUNBLGdDQUFnQyw4Q0FBOEM7QUFDOUU7QUFDQTtBQUNBLGdDQUFnQywrQ0FBK0M7QUFDL0U7QUFDQTtBQUNBLGdDQUFnQyw4Q0FBOEM7QUFDOUU7QUFDQTtBQUNBLGdDQUFnQyxnREFBZ0Q7QUFDaEY7QUFDQTtBQUNBLGdDQUFnQyw0Q0FBNEM7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGdDQUFnQyx1QkFBdUI7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZ0NBQWdDLGtEQUFrRDtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsY0FBYztBQUMxRCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMscUJBQXFCO0FBQ2pFLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QyxxQkFBcUI7QUFDakUsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixjQUFjO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FB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O0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZCxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGVBQWU7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixNQUFNO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixNQUFNO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRUFBbUUsY0FBYztBQUNqRjtBQUNBO0FBQ0E7QUFDQSw4REFBOEQsdUJBQXVCLHNCQUFzQixjQUFjO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLDRCQUE0QixrQkFBa0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsY0FBYztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsY0FBYztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGNBQWM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGNBQWM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGNBQWM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixzREFBc0Q7QUFDN0UsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHNEQUFzRDtBQUM3RSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLE1BQU07QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsTUFBTTtBQUN0QjtBQUNBLG1DQUFtQyw2Q0FBNkM7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLE1B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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGtCQUFrQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVtQzs7Ozs7Ozs7Ozs7Ozs7OztBQ3RPVzs7QUFFOUM7QUFDQSxXQUFXLHlEQUFZLEtBQUsseURBQVk7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7O0FBRXNDOzs7Ozs7Ozs7Ozs7Ozs7O0FDVHRDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxzQ0FBc0M7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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Y29yZC9lbWJlZGRlZC1hcHAtc2RrL291dHB1dC9Db25zdGFudHMubWpzIiwid2VicGFjazovL3RocmVlanMtZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9AZGlzY29yZC9lbWJlZGRlZC1hcHAtc2RrL291dHB1dC9EaXNjb3JkLm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvX3ZpcnR1YWwvQmlnSW50ZWdlci5tanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BkaXNjb3JkL2VtYmVkZGVkLWFwcC1zZGsvb3V0cHV0L192aXJ0dWFsL0JpZ0ludGVnZXIyLm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvX3ZpcnR1YWwvX2NvbW1vbmpzSGVscGVycy5tanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BkaXNjb3JkL2VtYmVkZGVkLWFwcC1zZGsvb3V0cHV0L192aXJ0dWFsL2luZGV4Lm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvX3ZpcnR1YWwvaW5kZXgyLm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvX3ZpcnR1YWwvaW5kZXgzLm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvX3ZpcnR1YWwvaW5kZXg0Lm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvY29tbWFuZHMvYXV0aGVudGljYXRlLm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvY29tbWFuZHMvYXV0aG9yaXplLm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvY29tbWFuZHMvY2FwdHVyZUxvZy5tanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BkaXNjb3JkL2VtYmVkZGVkLWFwcC1zZGsvb3V0cHV0L2NvbW1hbmRzL2VuY291cmFnZUhhcmR3YXJlQWNjZWxlcmF0aW9uLm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvY29tbWFuZHMvZ2V0Q2hhbm5lbC5tanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BkaXNjb3JkL2VtYmVkZGVkLWFwcC1zZGsvb3V0cHV0L2NvbW1hbmRzL2dldENoYW5uZWxQZXJtaXNzaW9ucy5tanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BkaXNjb3JkL2VtYmVkZGVkLWFwcC1zZGsvb3V0cHV0L2NvbW1hbmRzL2dldEVudGl0bGVtZW50cy5tanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BkaXNjb3JkL2VtYmVkZGVkLWFwcC1zZGsvb3V0cHV0L2NvbW1hbmRzL2dldEluc3RhbmNlQ29ubmVjdGVkUGFydGljaXBhbnRzLm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvY29tbWFuZHMvZ2V0UGxhdGZvcm1CZWhhdmlvcnMubWpzIiwid2VicGFjazovL3RocmVlanMtZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9AZGlzY29yZC9lbWJlZGRlZC1hcHAtc2RrL291dHB1dC9jb21tYW5kcy9nZXRSZWxhdGlvbnNoaXBzLm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvY29tbWFuZHMvZ2V0U2t1cy5tanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BkaXNjb3JkL2VtYmVkZGVkLWFwcC1zZGsvb3V0cHV0L2NvbW1hbmRzL2dldFVzZXIubWpzIiwid2VicGFjazovL3RocmVlanMtZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9AZGlzY29yZC9lbWJlZGRlZC1hcHAtc2RrL291dHB1dC9jb21tYW5kcy9pbmRleC5tanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BkaXNjb3JkL2VtYmVkZGVkLWFwcC1zZGsvb3V0cHV0L2NvbW1hbmRzL2luaXRpYXRlSW1hZ2VVcGxvYWQubWpzIiwid2VicGFjazovL3RocmVlanMtZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9AZGlzY29yZC9lbWJlZGRlZC1hcHAtc2RrL291dHB1dC9jb21tYW5kcy9pbnZpdGVVc2VyRW1iZWRkZWQubWpzIiwid2VicGFjazovL3RocmVlanMtZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9AZGlzY29yZC9lbWJlZGRlZC1hcHAtc2RrL291dHB1dC9jb21tYW5kcy9vcGVuRXh0ZXJuYWxMaW5rLm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvY29tbWFuZHMvb3Blbkludml0ZURpYWxvZy5tanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BkaXNjb3JkL2VtYmVkZGVkLWFwcC1zZGsvb3V0cHV0L2NvbW1hbmRzL29wZW5TaGFyZU1vbWVudERpYWxvZy5tanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BkaXNjb3JkL2VtYmVkZGVkLWFwcC1zZGsvb3V0cHV0L2NvbW1hbmRzL3NldEFjdGl2aXR5Lm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvY29tbWFuZHMvc2V0Q29uZmlnLm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvY29tbWFuZHMvc2V0T3JpZW50YXRpb25Mb2NrU3RhdGUubWpzIiwid2VicGFjazovL3RocmVlanMtZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9AZGlzY29yZC9lbWJlZGRlZC1hcHAtc2RrL291dHB1dC9jb21tYW5kcy9zaGFyZUxpbmsubWpzIiwid2VicGFjazovL3RocmVlanMtZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9AZGlzY29yZC9lbWJlZGRlZC1hcHAtc2RrL291dHB1dC9jb21tYW5kcy9zdGFydFB1cmNoYXNlLm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvY29tbWFuZHMvdXNlclNldHRpbmdzR2V0TG9jYWxlLm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvZXJyb3IubWpzIiwid2VicGFjazovL3RocmVlanMtZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9AZGlzY29yZC9lbWJlZGRlZC1hcHAtc2RrL291dHB1dC9nZW5lcmF0ZWQvc2NoZW1hcy5tanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BkaXNjb3JkL2VtYmVkZGVkLWFwcC1zZGsvb3V0cHV0L2luZGV4Lm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvbGliL2JpZy1pbnRlZ2VyL0JpZ0ludGVnZXIubWpzIiwid2VicGFjazovL3RocmVlanMtZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9AZGlzY29yZC9lbWJlZGRlZC1hcHAtc2RrL291dHB1dC9saWIvZGVjaW1hbC5qcy1saWdodC9kZWNpbWFsLm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvbGliL2V2ZW50ZW1pdHRlcjMvaW5kZXgyLm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvbGliL2xvZGFzaC50cmFuc2Zvcm0vaW5kZXgubWpzIiwid2VicGFjazovL3RocmVlanMtZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9AZGlzY29yZC9lbWJlZGRlZC1hcHAtc2RrL291dHB1dC9saWIvdHNsaWIvdHNsaWIuZXM2Lm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvbGliL3V1aWQvZGlzdC9lc20tYnJvd3Nlci9uYXRpdmUubWpzIiwid2VicGFjazovL3RocmVlanMtZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9AZGlzY29yZC9lbWJlZGRlZC1hcHAtc2RrL291dHB1dC9saWIvdXVpZC9kaXN0L2VzbS1icm93c2VyL3JuZy5tanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BkaXNjb3JkL2VtYmVkZGVkLWFwcC1zZGsvb3V0cHV0L2xpYi91dWlkL2Rpc3QvZXNtLWJyb3dzZXIvc3RyaW5naWZ5Lm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvbGliL3V1aWQvZGlzdC9lc20tYnJvd3Nlci92NC5tanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BkaXNjb3JkL2VtYmVkZGVkLWFwcC1zZGsvb3V0cHV0L2xpYi96b2QvbGliL2luZGV4Lm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvbW9jay5tanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BkaXNjb3JkL2VtYmVkZGVkLWFwcC1zZGsvb3V0cHV0L3BhY2thZ2UuanNvbi5tanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BkaXNjb3JkL2VtYmVkZGVkLWFwcC1zZGsvb3V0cHV0L3NjaGVtYS9jb21tb24ubWpzIiwid2VicGFjazovL3RocmVlanMtZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9AZGlzY29yZC9lbWJlZGRlZC1hcHAtc2RrL291dHB1dC9zY2hlbWEvZXZlbnRzLm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvc2NoZW1hL2luZGV4Lm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvc2NoZW1hL3Jlc3BvbnNlcy5tanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BkaXNjb3JkL2VtYmVkZGVkLWFwcC1zZGsvb3V0cHV0L3V0aWxzL0JpZ0ZsYWdVdGlscy5tanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BkaXNjb3JkL2VtYmVkZGVkLWFwcC1zZGsvb3V0cHV0L3V0aWxzL1Blcm1pc3Npb25VdGlscy5tanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BkaXNjb3JkL2VtYmVkZGVkLWFwcC1zZGsvb3V0cHV0L3V0aWxzL1ByaWNlQ29uc3RhbnRzLm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvdXRpbHMvUHJpY2VVdGlscy5tanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BkaXNjb3JkL2VtYmVkZGVkLWFwcC1zZGsvb3V0cHV0L3V0aWxzL2Fzc2VydFVucmVhY2hhYmxlLm1qcyIsIndlYnBhY2s6Ly90aHJlZWpzLWV4YW1wbGUvLi9ub2RlX21vZHVsZXMvQGRpc2NvcmQvZW1iZWRkZWQtYXBwLXNkay9vdXRwdXQvdXRpbHMvY29tbWFuZEZhY3RvcnkubWpzIiwid2VicGFjazovL3RocmVlanMtZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9AZGlzY29yZC9lbWJlZGRlZC1hcHAtc2RrL291dHB1dC91dGlscy9jb21wYXRDb21tYW5kRmFjdG9yeS5tanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BkaXNjb3JkL2VtYmVkZGVkLWFwcC1zZGsvb3V0cHV0L3V0aWxzL2NvbnNvbGUubWpzIiwid2VicGFjazovL3RocmVlanMtZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9AZGlzY29yZC9lbWJlZGRlZC1hcHAtc2RrL291dHB1dC91dGlscy9nZXREZWZhdWx0U2RrQ29uZmlndXJhdGlvbi5tanMiLCJ3ZWJwYWNrOi8vdGhyZWVqcy1leGFtcGxlLy4vbm9kZV9tb2R1bGVzL0BkaXNjb3JkL2VtYmVkZGVkLWFwcC1zZGsvb3V0cHV0L3V0aWxzL3BhdGNoVXJsTWFwcGluZ3MubWpzIiwid2VicGFjazovL3RocmVlanMtZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9AZGlzY29yZC9lbWJlZGRlZC1hcHAtc2RrL291dHB1dC91dGlscy91cmwubWpzIiwid2VicGFjazovL3RocmVlanMtZXhhbXBsZS8uL25vZGVfbW9kdWxlcy9AZGlzY29yZC9lbWJlZGRlZC1hcHAtc2RrL291dHB1dC91dGlscy96b2RVdGlscy5tanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJpZ0ZsYWdVdGlscyBmcm9tICcuL3V0aWxzL0JpZ0ZsYWdVdGlscy5tanMnO1xuXG52YXIgUlBDQ2xvc2VDb2RlcztcbihmdW5jdGlvbiAoUlBDQ2xvc2VDb2Rlcykge1xuICAgIFJQQ0Nsb3NlQ29kZXNbUlBDQ2xvc2VDb2Rlc1tcIkNMT1NFX05PUk1BTFwiXSA9IDEwMDBdID0gXCJDTE9TRV9OT1JNQUxcIjtcbiAgICBSUENDbG9zZUNvZGVzW1JQQ0Nsb3NlQ29kZXNbXCJDTE9TRV9VTlNVUFBPUlRFRFwiXSA9IDEwMDNdID0gXCJDTE9TRV9VTlNVUFBPUlRFRFwiO1xuICAgIFJQQ0Nsb3NlQ29kZXNbUlBDQ2xvc2VDb2Rlc1tcIkNMT1NFX0FCTk9STUFMXCJdID0gMTAwNl0gPSBcIkNMT1NFX0FCTk9STUFMXCI7XG4gICAgUlBDQ2xvc2VDb2Rlc1tSUENDbG9zZUNvZGVzW1wiSU5WQUxJRF9DTElFTlRJRFwiXSA9IDQwMDBdID0gXCJJTlZBTElEX0NMSUVOVElEXCI7XG4gICAgUlBDQ2xvc2VDb2Rlc1tSUENDbG9zZUNvZGVzW1wiSU5WQUxJRF9PUklHSU5cIl0gPSA0MDAxXSA9IFwiSU5WQUxJRF9PUklHSU5cIjtcbiAgICBSUENDbG9zZUNvZGVzW1JQQ0Nsb3NlQ29kZXNbXCJSQVRFTElNSVRFRFwiXSA9IDQwMDJdID0gXCJSQVRFTElNSVRFRFwiO1xuICAgIFJQQ0Nsb3NlQ29kZXNbUlBDQ2xvc2VDb2Rlc1tcIlRPS0VOX1JFVk9LRURcIl0gPSA0MDAzXSA9IFwiVE9LRU5fUkVWT0tFRFwiO1xuICAgIFJQQ0Nsb3NlQ29kZXNbUlBDQ2xvc2VDb2Rlc1tcIklOVkFMSURfVkVSU0lPTlwiXSA9IDQwMDRdID0gXCJJTlZBTElEX1ZFUlNJT05cIjtcbiAgICBSUENDbG9zZUNvZGVzW1JQQ0Nsb3NlQ29kZXNbXCJJTlZBTElEX0VOQ09ESU5HXCJdID0gNDAwNV0gPSBcIklOVkFMSURfRU5DT0RJTkdcIjtcbn0pKFJQQ0Nsb3NlQ29kZXMgfHwgKFJQQ0Nsb3NlQ29kZXMgPSB7fSkpO1xudmFyIFJQQ0Vycm9yQ29kZXM7XG4oZnVuY3Rpb24gKFJQQ0Vycm9yQ29kZXMpIHtcbiAgICBSUENFcnJvckNvZGVzW1JQQ0Vycm9yQ29kZXNbXCJJTlZBTElEX1BBWUxPQURcIl0gPSA0MDAwXSA9IFwiSU5WQUxJRF9QQVlMT0FEXCI7XG4gICAgUlBDRXJyb3JDb2Rlc1tSUENFcnJvckNvZGVzW1wiSU5WQUxJRF9DT01NQU5EXCJdID0gNDAwMl0gPSBcIklOVkFMSURfQ09NTUFORFwiO1xuICAgIFJQQ0Vycm9yQ29kZXNbUlBDRXJyb3JDb2Rlc1tcIklOVkFMSURfRVZFTlRcIl0gPSA0MDA0XSA9IFwiSU5WQUxJRF9FVkVOVFwiO1xuICAgIFJQQ0Vycm9yQ29kZXNbUlBDRXJyb3JDb2Rlc1tcIklOVkFMSURfUEVSTUlTU0lPTlNcIl0gPSA0MDA2XSA9IFwiSU5WQUxJRF9QRVJNSVNTSU9OU1wiO1xufSkoUlBDRXJyb3JDb2RlcyB8fCAoUlBDRXJyb3JDb2RlcyA9IHt9KSk7XG4vKipcbiAqIEBkZXByZWNhdGVkIHVzZSBPcmllbnRhdGlvblR5cGVPYmplY3QgaW5zdGVhZFxuICovXG52YXIgT3JpZW50YXRpb247XG4oZnVuY3Rpb24gKE9yaWVudGF0aW9uKSB7XG4gICAgT3JpZW50YXRpb25bXCJMQU5EU0NBUEVcIl0gPSBcImxhbmRzY2FwZVwiO1xuICAgIE9yaWVudGF0aW9uW1wiUE9SVFJBSVRcIl0gPSBcInBvcnRyYWl0XCI7XG59KShPcmllbnRhdGlvbiB8fCAoT3JpZW50YXRpb24gPSB7fSkpO1xudmFyIFBsYXRmb3JtO1xuKGZ1bmN0aW9uIChQbGF0Zm9ybSkge1xuICAgIFBsYXRmb3JtW1wiTU9CSUxFXCJdID0gXCJtb2JpbGVcIjtcbiAgICBQbGF0Zm9ybVtcIkRFU0tUT1BcIl0gPSBcImRlc2t0b3BcIjtcbn0pKFBsYXRmb3JtIHx8IChQbGF0Zm9ybSA9IHt9KSk7XG4vKiogU2VlIGh0dHBzOi8vZGlzY29yZC5jb20vZGV2ZWxvcGVycy9kb2NzL3RvcGljcy9wZXJtaXNzaW9ucyNwZXJtaXNzaW9ucy1iaXR3aXNlLXBlcm1pc3Npb24tZmxhZ3MgZm9yIG1vcmUgUGVybWlzc2lvbnMgZGV0YWlscyAqL1xuY29uc3QgUGVybWlzc2lvbnMgPSBPYmplY3QuZnJlZXplKHtcbiAgICBDUkVBVEVfSU5TVEFOVF9JTlZJVEU6IEJpZ0ZsYWdVdGlscy5nZXRGbGFnKDApLFxuICAgIEtJQ0tfTUVNQkVSUzogQmlnRmxhZ1V0aWxzLmdldEZsYWcoMSksXG4gICAgQkFOX01FTUJFUlM6IEJpZ0ZsYWdVdGlscy5nZXRGbGFnKDIpLFxuICAgIEFETUlOSVNUUkFUT1I6IEJpZ0ZsYWdVdGlscy5nZXRGbGFnKDMpLFxuICAgIE1BTkFHRV9DSEFOTkVMUzogQmlnRmxhZ1V0aWxzLmdldEZsYWcoNCksXG4gICAgTUFOQUdFX0dVSUxEOiBCaWdGbGFnVXRpbHMuZ2V0RmxhZyg1KSxcbiAgICBBRERfUkVBQ1RJT05TOiBCaWdGbGFnVXRpbHMuZ2V0RmxhZyg2KSxcbiAgICBWSUVXX0FVRElUX0xPRzogQmlnRmxhZ1V0aWxzLmdldEZsYWcoNyksXG4gICAgUFJJT1JJVFlfU1BFQUtFUjogQmlnRmxhZ1V0aWxzLmdldEZsYWcoOCksXG4gICAgU1RSRUFNOiBCaWdGbGFnVXRpbHMuZ2V0RmxhZyg5KSxcbiAgICBWSUVXX0NIQU5ORUw6IEJpZ0ZsYWdVdGlscy5nZXRGbGFnKDEwKSxcbiAgICBTRU5EX01FU1NBR0VTOiBCaWdGbGFnVXRpbHMuZ2V0RmxhZygxMSksXG4gICAgU0VORF9UVFNfTUVTU0FHRVM6IEJpZ0ZsYWdVdGlscy5nZXRGbGFnKDEyKSxcbiAgICBNQU5BR0VfTUVTU0FHRVM6IEJpZ0ZsYWdVdGlscy5nZXRGbGFnKDEzKSxcbiAgICBFTUJFRF9MSU5LUzogQmlnRmxhZ1V0aWxzLmdldEZsYWcoMTQpLFxuICAgIEFUVEFDSF9GSUxFUzogQmlnRmxhZ1V0aWxzLmdldEZsYWcoMTUpLFxuICAgIFJFQURfTUVTU0FHRV9ISVNUT1JZOiBCaWdGbGFnVXRpbHMuZ2V0RmxhZygxNiksXG4gICAgTUVOVElPTl9FVkVSWU9ORTogQmlnRmxhZ1V0aWxzLmdldEZsYWcoMTcpLFxuICAgIFVTRV9FWFRFUk5BTF9FTU9KSVM6IEJpZ0ZsYWdVdGlscy5nZXRGbGFnKDE4KSxcbiAgICBWSUVXX0dVSUxEX0lOU0lHSFRTOiBCaWdGbGFnVXRpbHMuZ2V0RmxhZygxOSksXG4gICAgQ09OTkVDVDogQmlnRmxhZ1V0aWxzLmdldEZsYWcoMjApLFxuICAgIFNQRUFLOiBCaWdGbGFnVXRpbHMuZ2V0RmxhZygyMSksXG4gICAgTVVURV9NRU1CRVJTOiBCaWdGbGFnVXRpbHMuZ2V0RmxhZygyMiksXG4gICAgREVBRkVOX01FTUJFUlM6IEJpZ0ZsYWdVdGlscy5nZXRGbGFnKDIzKSxcbiAgICBNT1ZFX01FTUJFUlM6IEJpZ0ZsYWdVdGlscy5nZXRGbGFnKDI0KSxcbiAgICBVU0VfVkFEOiBCaWdGbGFnVXRpbHMuZ2V0RmxhZygyNSksXG4gICAgQ0hBTkdFX05JQ0tOQU1FOiBCaWdGbGFnVXRpbHMuZ2V0RmxhZygyNiksXG4gICAgTUFOQUdFX05JQ0tOQU1FUzogQmlnRmxhZ1V0aWxzLmdldEZsYWcoMjcpLFxuICAgIE1BTkFHRV9ST0xFUzogQmlnRmxhZ1V0aWxzLmdldEZsYWcoMjgpLFxuICAgIE1BTkFHRV9XRUJIT09LUzogQmlnRmxhZ1V0aWxzLmdldEZsYWcoMjkpLFxuICAgIE1BTkFHRV9HVUlMRF9FWFBSRVNTSU9OUzogQmlnRmxhZ1V0aWxzLmdldEZsYWcoMzApLFxuICAgIFVTRV9BUFBMSUNBVElPTl9DT01NQU5EUzogQmlnRmxhZ1V0aWxzLmdldEZsYWcoMzEpLFxuICAgIFJFUVVFU1RfVE9fU1BFQUs6IEJpZ0ZsYWdVdGlscy5nZXRGbGFnKDMyKSxcbiAgICBNQU5BR0VfRVZFTlRTOiBCaWdGbGFnVXRpbHMuZ2V0RmxhZygzMyksXG4gICAgTUFOQUdFX1RIUkVBRFM6IEJpZ0ZsYWdVdGlscy5nZXRGbGFnKDM0KSxcbiAgICBDUkVBVEVfUFVCTElDX1RIUkVBRFM6IEJpZ0ZsYWdVdGlscy5nZXRGbGFnKDM1KSxcbiAgICBDUkVBVEVfUFJJVkFURV9USFJFQURTOiBCaWdGbGFnVXRpbHMuZ2V0RmxhZygzNiksXG4gICAgVVNFX0VYVEVSTkFMX1NUSUNLRVJTOiBCaWdGbGFnVXRpbHMuZ2V0RmxhZygzNyksXG4gICAgU0VORF9NRVNTQUdFU19JTl9USFJFQURTOiBCaWdGbGFnVXRpbHMuZ2V0RmxhZygzOCksXG4gICAgVVNFX0VNQkVEREVEX0FDVElWSVRJRVM6IEJpZ0ZsYWdVdGlscy5nZXRGbGFnKDM5KSxcbiAgICBNT0RFUkFURV9NRU1CRVJTOiBCaWdGbGFnVXRpbHMuZ2V0RmxhZyg0MCksXG4gICAgVklFV19DUkVBVE9SX01PTkVUSVpBVElPTl9BTkFMWVRJQ1M6IEJpZ0ZsYWdVdGlscy5nZXRGbGFnKDQxKSxcbiAgICBVU0VfU09VTkRCT0FSRDogQmlnRmxhZ1V0aWxzLmdldEZsYWcoNDIpLFxuICAgIENSRUFURV9HVUlMRF9FWFBSRVNTSU9OUzogQmlnRmxhZ1V0aWxzLmdldEZsYWcoNDMpLFxuICAgIENSRUFURV9FVkVOVFM6IEJpZ0ZsYWdVdGlscy5nZXRGbGFnKDQ0KSxcbiAgICBVU0VfRVhURVJOQUxfU09VTkRTOiBCaWdGbGFnVXRpbHMuZ2V0RmxhZyg0NSksXG4gICAgU0VORF9WT0lDRV9NRVNTQUdFUzogQmlnRmxhZ1V0aWxzLmdldEZsYWcoNDYpLFxuICAgIFNFTkRfUE9MTFM6IEJpZ0ZsYWdVdGlscy5nZXRGbGFnKDQ5KSxcbiAgICBVU0VfRVhURVJOQUxfQVBQUzogQmlnRmxhZ1V0aWxzLmdldEZsYWcoNTApLFxufSk7XG5jb25zdCBVTktOT1dOX1ZFUlNJT05fTlVNQkVSID0gLTE7XG5jb25zdCBIQU5EU0hBS0VfU0RLX1ZFUlNJT05fTUlOSU1VTV9NT0JJTEVfVkVSU0lPTiA9IDI1MDtcblxuZXhwb3J0IHsgSEFORFNIQUtFX1NES19WRVJTSU9OX01JTklNVU1fTU9CSUxFX1ZFUlNJT04sIE9yaWVudGF0aW9uLCBQZXJtaXNzaW9ucywgUGxhdGZvcm0sIFJQQ0Nsb3NlQ29kZXMsIFJQQ0Vycm9yQ29kZXMsIFVOS05PV05fVkVSU0lPTl9OVU1CRVIgfTtcbiIsImltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSAnLi9fdmlydHVhbC9pbmRleC5tanMnO1xuaW1wb3J0IHsgQ2xvc2VQYXlsb2FkLCBwYXJzZUluY29taW5nUGF5bG9hZCB9IGZyb20gJy4vc2NoZW1hL2luZGV4Lm1qcyc7XG5pbXBvcnQgY29tbWFuZHMgZnJvbSAnLi9jb21tYW5kcy9pbmRleC5tanMnO1xuaW1wb3J0IHsgU0RLRXJyb3IgfSBmcm9tICcuL2Vycm9yLm1qcyc7XG5pbXBvcnQgeyBFdmVudHMsIEVSUk9SIH0gZnJvbSAnLi9zY2hlbWEvZXZlbnRzLm1qcyc7XG5pbXBvcnQgeyBQbGF0Zm9ybSwgVU5LTk9XTl9WRVJTSU9OX05VTUJFUiwgSEFORFNIQUtFX1NES19WRVJTSU9OX01JTklNVU1fTU9CSUxFX1ZFUlNJT04gfSBmcm9tICcuL0NvbnN0YW50cy5tanMnO1xuaW1wb3J0IGdldERlZmF1bHRTZGtDb25maWd1cmF0aW9uIGZyb20gJy4vdXRpbHMvZ2V0RGVmYXVsdFNka0NvbmZpZ3VyYXRpb24ubWpzJztcbmltcG9ydCB7IGNvbnNvbGVMZXZlbHMsIHdyYXBDb25zb2xlTWV0aG9kIH0gZnJvbSAnLi91dGlscy9jb25zb2xlLm1qcyc7XG5pbXBvcnQgeyB2ZXJzaW9uIH0gZnJvbSAnLi9wYWNrYWdlLmpzb24ubWpzJztcbmltcG9ydCB7IENvbW1hbmRzIH0gZnJvbSAnLi9zY2hlbWEvY29tbW9uLm1qcyc7XG5pbXBvcnQgdjQgZnJvbSAnLi9saWIvdXVpZC9kaXN0L2VzbS1icm93c2VyL3Y0Lm1qcyc7XG5cbnZhciBPcGNvZGVzO1xuKGZ1bmN0aW9uIChPcGNvZGVzKSB7XG4gICAgT3Bjb2Rlc1tPcGNvZGVzW1wiSEFORFNIQUtFXCJdID0gMF0gPSBcIkhBTkRTSEFLRVwiO1xuICAgIE9wY29kZXNbT3Bjb2Rlc1tcIkZSQU1FXCJdID0gMV0gPSBcIkZSQU1FXCI7XG4gICAgT3Bjb2Rlc1tPcGNvZGVzW1wiQ0xPU0VcIl0gPSAyXSA9IFwiQ0xPU0VcIjtcbiAgICBPcGNvZGVzW09wY29kZXNbXCJIRUxMT1wiXSA9IDNdID0gXCJIRUxMT1wiO1xufSkoT3Bjb2RlcyB8fCAoT3Bjb2RlcyA9IHt9KSk7XG5jb25zdCBBTExPV0VEX09SSUdJTlMgPSBuZXcgU2V0KGdldEFsbG93ZWRPcmlnaW5zKCkpO1xuZnVuY3Rpb24gZ2V0QWxsb3dlZE9yaWdpbnMoKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKVxuICAgICAgICByZXR1cm4gW107XG4gICAgcmV0dXJuIFtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLm9yaWdpbixcbiAgICAgICAgJ2h0dHBzOi8vZGlzY29yZC5jb20nLFxuICAgICAgICAnaHR0cHM6Ly9kaXNjb3JkYXBwLmNvbScsXG4gICAgICAgICdodHRwczovL3B0Yi5kaXNjb3JkLmNvbScsXG4gICAgICAgICdodHRwczovL3B0Yi5kaXNjb3JkYXBwLmNvbScsXG4gICAgICAgICdodHRwczovL2NhbmFyeS5kaXNjb3JkLmNvbScsXG4gICAgICAgICdodHRwczovL2NhbmFyeS5kaXNjb3JkYXBwLmNvbScsXG4gICAgICAgICdodHRwczovL3N0YWdpbmcuZGlzY29yZC5jbycsXG4gICAgICAgICdodHRwOi8vbG9jYWxob3N0OjMzMzMnLFxuICAgICAgICAnaHR0cHM6Ly9wYXguZGlzY29yZC5jb20nLFxuICAgICAgICAnbnVsbCcsXG4gICAgXTtcbn1cbi8qKlxuICogVGhlIGVtYmVkZGVkIGFwcGxpY2F0aW9uIGlzIHJ1bm5pbmcgaW4gYW4gSUZyYW1lIGVpdGhlciB3aXRoaW4gdGhlIG1haW4gRGlzY29yZCBjbGllbnQgd2luZG93IG9yIGluIGEgcG9wb3V0LiBUaGUgUlBDIHNlcnZlciBpcyBhbHdheXMgcnVubmluZyBpbiB0aGUgbWFpbiBEaXNjb3JkIGNsaWVudCB3aW5kb3cuIEluIGVpdGhlciBjYXNlLCB0aGUgcmVmZXJyZXIgaXMgdGhlIGNvcnJlY3Qgb3JpZ2luLlxuICovXG5mdW5jdGlvbiBnZXRSUENTZXJ2ZXJTb3VyY2UoKSB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiBbKF9hID0gd2luZG93LnBhcmVudC5vcGVuZXIpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHdpbmRvdy5wYXJlbnQsICEhZG9jdW1lbnQucmVmZXJyZXIgPyBkb2N1bWVudC5yZWZlcnJlciA6ICcqJ107XG59XG5jbGFzcyBEaXNjb3JkU0RLIHtcbiAgICBnZXRUcmFuc2ZlcihwYXlsb2FkKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgc3dpdGNoIChwYXlsb2FkLmNtZCkge1xuICAgICAgICAgICAgY2FzZSBDb21tYW5kcy5TVUJTQ1JJQkU6XG4gICAgICAgICAgICBjYXNlIENvbW1hbmRzLlVOU1VCU0NSSUJFOlxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiAoX2EgPSBwYXlsb2FkLnRyYW5zZmVyKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3RydWN0b3IoY2xpZW50SWQsIGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgdGhpcy5zZGtWZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgICAgdGhpcy5tb2JpbGVBcHBWZXJzaW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBudWxsO1xuICAgICAgICB0aGlzLnNvdXJjZU9yaWdpbiA9ICcnO1xuICAgICAgICB0aGlzLmV2ZW50QnVzID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLnBlbmRpbmdDb21tYW5kcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5zZW5kQ29tbWFuZCA9IChwYXlsb2FkKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBpZiAodGhpcy5zb3VyY2UgPT0gbnVsbClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0F0dGVtcHRpbmcgdG8gc2VuZCBtZXNzYWdlIGJlZm9yZSBpbml0aWFsaXphdGlvbicpO1xuICAgICAgICAgICAgY29uc3Qgbm9uY2UgPSB2NCgpO1xuICAgICAgICAgICAgKF9hID0gdGhpcy5zb3VyY2UpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wb3N0TWVzc2FnZShbT3Bjb2Rlcy5GUkFNRSwgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwYXlsb2FkKSwgeyBub25jZSB9KV0sIHRoaXMuc291cmNlT3JpZ2luLCB0aGlzLmdldFRyYW5zZmVyKHBheWxvYWQpKTtcbiAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5wZW5kaW5nQ29tbWFuZHMuc2V0KG5vbmNlLCB7IHJlc29sdmUsIHJlamVjdCB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY29tbWFuZHMgPSBjb21tYW5kcyh0aGlzLnNlbmRDb21tYW5kKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdBUk5JTkcgLSBBbGwgXCJjb25zb2xlXCIgbG9ncyBhcmUgZW1pdHRlZCBhcyBtZXNzYWdlcyB0byB0aGUgRGlzY29yZCBjbGllbnRcbiAgICAgICAgICogIElmIHlvdSB3cml0ZSBcImNvbnNvbGUubG9nXCIgYW55d2hlcmUgaW4gaGFuZGxlTWVzc2FnZSBvciBzdWJzZXF1ZW50IG1lc3NhZ2UgaGFuZGxpbmdcbiAgICAgICAgICogdGhlcmUgaXMgYSBnb29kIGNoYW5jZSB5b3Ugd2lsbCBjYXVzZSBhbiBpbmZpbml0ZSBsb29wIHdoZXJlIHlvdSByZWNlaXZlIGEgbWVzc2FnZVxuICAgICAgICAgKiB3aGljaCBjYXVzZXMgXCJjb25zb2xlLmxvZ1wiIHdoaWNoIHNlbmRzIGEgbWVzc2FnZSwgd2hpY2ggY2F1c2VzIHRoZSBkaXNjb3JkIGNsaWVudCB0b1xuICAgICAgICAgKiBzZW5kIGEgcmVwbHkgd2hpY2ggY2F1c2VzIGhhbmRsZU1lc3NhZ2UgdG8gZmlyZSBhZ2FpbiwgYW5kIGFnYWluIHRvIGluaWZpbml0eVxuICAgICAgICAgKlxuICAgICAgICAgKiBJZiB5b3UgbmVlZCB0byBsb2cgd2l0aGluIGhhbmRsZU1lc3NhZ2UsIGNvbnNpZGVyIHNldHRpbmdcbiAgICAgICAgICogY29uZmlnLmRpc2FibGVDb25zb2xlTG9nT3ZlcnJpZGUgdG8gdHJ1ZSB3aGVuIGluaXRpYWxpemluZyB0aGUgU0RLXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhhbmRsZU1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICghQUxMT1dFRF9PUklHSU5TLmhhcyhldmVudC5vcmlnaW4pKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IHR1cGxlID0gZXZlbnQuZGF0YTtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh0dXBsZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBbb3Bjb2RlLCBkYXRhXSA9IHR1cGxlO1xuICAgICAgICAgICAgc3dpdGNoIChvcGNvZGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIE9wY29kZXMuSEVMTE86XG4gICAgICAgICAgICAgICAgICAgIC8vIGJhY2t3YXJkcyBjb21wYXQ7IHRoZSBEaXNjb3JkIGNsaWVudCB3aWxsIHN0aWxsIHNlbmQgSEVMTE9zIGZvciBvbGQgYXBwbGljYXRpb25zLlxuICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBmaWd1cmUgb3V0IGNvbXBhdGliaWxpdHkgYXBwcm9hY2g7IGl0IHdvdWxkIGJlIGVhc2llciB0byBtYWludGFpbiBjb21wYXRpYmlsaXR5IGF0IHRoZSBTREsgbGV2ZWwsIG5vdCB0aGUgdW5kZXJseWluZyBSUEMgcHJvdG9jb2wgbGV2ZWwuLi5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGNhc2UgT3Bjb2Rlcy5DTE9TRTpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlQ2xvc2UoZGF0YSk7XG4gICAgICAgICAgICAgICAgY2FzZSBPcGNvZGVzLkhBTkRTSEFLRTpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlSGFuZHNoYWtlKCk7XG4gICAgICAgICAgICAgICAgY2FzZSBPcGNvZGVzLkZSQU1FOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVGcmFtZShkYXRhKTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgbWVzc2FnZSBmb3JtYXQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5pc1JlYWR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSBjbGllbnRJZDtcbiAgICAgICAgdGhpcy5jb25maWd1cmF0aW9uID0gY29uZmlndXJhdGlvbiAhPT0gbnVsbCAmJiBjb25maWd1cmF0aW9uICE9PSB2b2lkIDAgPyBjb25maWd1cmF0aW9uIDogZ2V0RGVmYXVsdFNka0NvbmZpZ3VyYXRpb24oKTtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuaGFuZGxlTWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLmZyYW1lSWQgPSAnJztcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VJZCA9ICcnO1xuICAgICAgICAgICAgdGhpcy5jdXN0b21JZCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnJlZmVycmVySWQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5wbGF0Zm9ybSA9IFBsYXRmb3JtLkRFU0tUT1A7XG4gICAgICAgICAgICB0aGlzLmd1aWxkSWQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5jaGFubmVsSWQgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5sb2NhdGlvbklkID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBTVEFSVCBDYXB0dXJlIFVSTCBRdWVyeSBQYXJhbXNcbiAgICAgICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh0aGlzLl9nZXRTZWFyY2goKSk7XG4gICAgICAgIGNvbnN0IGZyYW1lSWQgPSB1cmxQYXJhbXMuZ2V0KCdmcmFtZV9pZCcpO1xuICAgICAgICBpZiAoIWZyYW1lSWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignZnJhbWVfaWQgcXVlcnkgcGFyYW0gaXMgbm90IGRlZmluZWQnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZyYW1lSWQgPSBmcmFtZUlkO1xuICAgICAgICBjb25zdCBpbnN0YW5jZUlkID0gdXJsUGFyYW1zLmdldCgnaW5zdGFuY2VfaWQnKTtcbiAgICAgICAgaWYgKCFpbnN0YW5jZUlkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2luc3RhbmNlX2lkIHF1ZXJ5IHBhcmFtIGlzIG5vdCBkZWZpbmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbnN0YW5jZUlkID0gaW5zdGFuY2VJZDtcbiAgICAgICAgY29uc3QgcGxhdGZvcm0gPSB1cmxQYXJhbXMuZ2V0KCdwbGF0Zm9ybScpO1xuICAgICAgICBpZiAoIXBsYXRmb3JtKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BsYXRmb3JtIHF1ZXJ5IHBhcmFtIGlzIG5vdCBkZWZpbmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGxhdGZvcm0gIT09IFBsYXRmb3JtLkRFU0tUT1AgJiYgcGxhdGZvcm0gIT09IFBsYXRmb3JtLk1PQklMRSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHF1ZXJ5IHBhcmFtIFwicGxhdGZvcm1cIiBvZiBcIiR7cGxhdGZvcm19XCIuIFZhbGlkIHZhbHVlcyBhcmUgXCIke1BsYXRmb3JtLkRFU0tUT1B9XCIgb3IgXCIke1BsYXRmb3JtLk1PQklMRX1cImApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGxhdGZvcm0gPSBwbGF0Zm9ybTtcbiAgICAgICAgdGhpcy5jdXN0b21JZCA9IHVybFBhcmFtcy5nZXQoJ2N1c3RvbV9pZCcpO1xuICAgICAgICB0aGlzLnJlZmVycmVySWQgPSB1cmxQYXJhbXMuZ2V0KCdyZWZlcnJlcl9pZCcpO1xuICAgICAgICB0aGlzLmd1aWxkSWQgPSB1cmxQYXJhbXMuZ2V0KCdndWlsZF9pZCcpO1xuICAgICAgICB0aGlzLmNoYW5uZWxJZCA9IHVybFBhcmFtcy5nZXQoJ2NoYW5uZWxfaWQnKTtcbiAgICAgICAgdGhpcy5sb2NhdGlvbklkID0gdXJsUGFyYW1zLmdldCgnbG9jYXRpb25faWQnKTtcbiAgICAgICAgdGhpcy5tb2JpbGVBcHBWZXJzaW9uID0gdXJsUGFyYW1zLmdldCgnbW9iaWxlX2FwcF92ZXJzaW9uJyk7XG4gICAgICAgIC8vIEVORCBDYXB0dXJlIFVSTCBRdWVyeSBQYXJhbXNcbiAgICAgICAgW3RoaXMuc291cmNlLCB0aGlzLnNvdXJjZU9yaWdpbl0gPSBnZXRSUENTZXJ2ZXJTb3VyY2UoKTtcbiAgICAgICAgdGhpcy5hZGRPblJlYWR5TGlzdGVuZXIoKTtcbiAgICAgICAgdGhpcy5oYW5kc2hha2UoKTtcbiAgICB9XG4gICAgY2xvc2UoY29kZSwgbWVzc2FnZSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgdGhpcy5oYW5kbGVNZXNzYWdlKTtcbiAgICAgICAgY29uc3Qgbm9uY2UgPSB2NCgpO1xuICAgICAgICAoX2EgPSB0aGlzLnNvdXJjZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBvc3RNZXNzYWdlKFtPcGNvZGVzLkNMT1NFLCB7IGNvZGUsIG1lc3NhZ2UsIG5vbmNlIH1dLCB0aGlzLnNvdXJjZU9yaWdpbik7XG4gICAgfVxuICAgIGFzeW5jIHN1YnNjcmliZShldmVudCwgbGlzdGVuZXIsIC4uLnJlc3QpIHtcbiAgICAgICAgY29uc3QgW3N1YnNjcmliZUFyZ3NdID0gcmVzdDtcbiAgICAgICAgY29uc3QgbGlzdGVuZXJDb3VudCA9IHRoaXMuZXZlbnRCdXMubGlzdGVuZXJDb3VudChldmVudCk7XG4gICAgICAgIGNvbnN0IGVtaXR0ZXIgPSB0aGlzLmV2ZW50QnVzLm9uKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgICAgIC8vIElmIGZpcnN0IHN1YnNjcmlwdGlvbiwgc3Vic2NyaWJlIHZpYSBSUENcbiAgICAgICAgaWYgKE9iamVjdC52YWx1ZXMoRXZlbnRzKS5pbmNsdWRlcyhldmVudCkgJiYgZXZlbnQgIT09IEV2ZW50cy5SRUFEWSAmJiBsaXN0ZW5lckNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNlbmRDb21tYW5kKHtcbiAgICAgICAgICAgICAgICBjbWQ6IENvbW1hbmRzLlNVQlNDUklCRSxcbiAgICAgICAgICAgICAgICBhcmdzOiBzdWJzY3JpYmVBcmdzLFxuICAgICAgICAgICAgICAgIGV2dDogZXZlbnQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW1pdHRlcjtcbiAgICB9XG4gICAgYXN5bmMgdW5zdWJzY3JpYmUoZXZlbnQsIGxpc3RlbmVyLCAuLi5yZXN0KSB7XG4gICAgICAgIGNvbnN0IFt1bnN1YnNjcmliZUFyZ3NdID0gcmVzdDtcbiAgICAgICAgaWYgKGV2ZW50ICE9PSBFdmVudHMuUkVBRFkgJiYgdGhpcy5ldmVudEJ1cy5saXN0ZW5lckNvdW50KGV2ZW50KSA9PT0gMSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZW5kQ29tbWFuZCh7XG4gICAgICAgICAgICAgICAgY21kOiBDb21tYW5kcy5VTlNVQlNDUklCRSxcbiAgICAgICAgICAgICAgICBldnQ6IGV2ZW50LFxuICAgICAgICAgICAgICAgIGFyZ3M6IHVuc3Vic2NyaWJlQXJncyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50QnVzLm9mZihldmVudCwgbGlzdGVuZXIpO1xuICAgIH1cbiAgICBhc3luYyByZWFkeSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSZWFkeSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50QnVzLm9uY2UoRXZlbnRzLlJFQURZLCByZXNvbHZlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHBhcnNlTWFqb3JNb2JpbGVWZXJzaW9uKCkge1xuICAgICAgICBpZiAodGhpcy5tb2JpbGVBcHBWZXJzaW9uICYmIHRoaXMubW9iaWxlQXBwVmVyc2lvbi5pbmNsdWRlcygnLicpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZUludCh0aGlzLm1vYmlsZUFwcFZlcnNpb24uc3BsaXQoJy4nKVswXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gVU5LTk9XTl9WRVJTSU9OX05VTUJFUjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gVU5LTk9XTl9WRVJTSU9OX05VTUJFUjtcbiAgICB9XG4gICAgaGFuZHNoYWtlKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IGhhbmRzaGFrZVBheWxvYWQgPSB7XG4gICAgICAgICAgICB2OiAxLFxuICAgICAgICAgICAgZW5jb2Rpbmc6ICdqc29uJyxcbiAgICAgICAgICAgIGNsaWVudF9pZDogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgIGZyYW1lX2lkOiB0aGlzLmZyYW1lSWQsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG1ham9yTW9iaWxlVmVyc2lvbiA9IHRoaXMucGFyc2VNYWpvck1vYmlsZVZlcnNpb24oKTtcbiAgICAgICAgaWYgKHRoaXMucGxhdGZvcm0gPT09IFBsYXRmb3JtLkRFU0tUT1AgfHwgbWFqb3JNb2JpbGVWZXJzaW9uID49IEhBTkRTSEFLRV9TREtfVkVSU0lPTl9NSU5JTVVNX01PQklMRV9WRVJTSU9OKSB7XG4gICAgICAgICAgICBoYW5kc2hha2VQYXlsb2FkWydzZGtfdmVyc2lvbiddID0gdGhpcy5zZGtWZXJzaW9uO1xuICAgICAgICB9XG4gICAgICAgIChfYSA9IHRoaXMuc291cmNlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucG9zdE1lc3NhZ2UoW09wY29kZXMuSEFORFNIQUtFLCBoYW5kc2hha2VQYXlsb2FkXSwgdGhpcy5zb3VyY2VPcmlnaW4pO1xuICAgIH1cbiAgICBhZGRPblJlYWR5TGlzdGVuZXIoKSB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMub25jZShFdmVudHMuUkVBRFksICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub3ZlcnJpZGVDb25zb2xlTG9nZ2luZygpO1xuICAgICAgICAgICAgdGhpcy5pc1JlYWR5ID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG92ZXJyaWRlQ29uc29sZUxvZ2dpbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZ3VyYXRpb24uZGlzYWJsZUNvbnNvbGVMb2dPdmVycmlkZSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3Qgc2VuZENhcHR1cmVMb2dDb21tYW5kID0gKGxldmVsLCBtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbW1hbmRzLmNhcHR1cmVMb2coe1xuICAgICAgICAgICAgICAgIGxldmVsLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc29sZUxldmVscy5mb3JFYWNoKChsZXZlbCkgPT4ge1xuICAgICAgICAgICAgd3JhcENvbnNvbGVNZXRob2QoY29uc29sZSwgbGV2ZWwsIHNlbmRDYXB0dXJlTG9nQ29tbWFuZCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBoYW5kbGVDbG9zZShkYXRhKSB7XG4gICAgICAgIENsb3NlUGF5bG9hZC5wYXJzZShkYXRhKTtcbiAgICB9XG4gICAgaGFuZGxlSGFuZHNoYWtlKCkgeyB9XG4gICAgaGFuZGxlRnJhbWUocGF5bG9hZCkge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBsZXQgcGFyc2VkO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcGFyc2VkID0gcGFyc2VJbmNvbWluZ1BheWxvYWQocGF5bG9hZCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBwYXJzZScsIHBheWxvYWQpO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VkLmNtZCA9PT0gJ0RJU1BBVENIJykge1xuICAgICAgICAgICAgdGhpcy5ldmVudEJ1cy5lbWl0KHBhcnNlZC5ldnQsIHBhcnNlZC5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChwYXJzZWQuZXZ0ID09PSBFUlJPUikge1xuICAgICAgICAgICAgICAgIC8vIEluIHJlc3BvbnNlIHRvIGEgY29tbWFuZFxuICAgICAgICAgICAgICAgIGlmIChwYXJzZWQubm9uY2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAoX2EgPSB0aGlzLnBlbmRpbmdDb21tYW5kcy5nZXQocGFyc2VkLm5vbmNlKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnJlamVjdChwYXJzZWQuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ0NvbW1hbmRzLmRlbGV0ZShwYXJzZWQubm9uY2UpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEdlbmVyYWwgZXJyb3JcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50QnVzLmVtaXQoJ2Vycm9yJywgbmV3IFNES0Vycm9yKHBhcnNlZC5kYXRhLmNvZGUsIHBhcnNlZC5kYXRhLm1lc3NhZ2UpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJzZWQubm9uY2UgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01pc3Npbmcgbm9uY2UnLCBwYXlsb2FkKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAoX2IgPSB0aGlzLnBlbmRpbmdDb21tYW5kcy5nZXQocGFyc2VkLm5vbmNlKSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnJlc29sdmUocGFyc2VkKTtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ0NvbW1hbmRzLmRlbGV0ZShwYXJzZWQubm9uY2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9nZXRTZWFyY2goKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyA/ICcnIDogd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcbiAgICB9XG59XG5cbmV4cG9ydCB7IERpc2NvcmRTREssIE9wY29kZXMgfTtcbiIsImltcG9ydCB7IGdldERlZmF1bHRFeHBvcnRGcm9tQ2pzIH0gZnJvbSAnLi9fY29tbW9uanNIZWxwZXJzLm1qcyc7XG5pbXBvcnQgeyBfX3JlcXVpcmUgYXMgcmVxdWlyZUJpZ0ludGVnZXIgfSBmcm9tICcuLi9saWIvYmlnLWludGVnZXIvQmlnSW50ZWdlci5tanMnO1xuXG52YXIgQmlnSW50ZWdlckV4cG9ydHMgPSByZXF1aXJlQmlnSW50ZWdlcigpO1xudmFyIGJpZ0ludCA9IC8qQF9fUFVSRV9fKi9nZXREZWZhdWx0RXhwb3J0RnJvbUNqcyhCaWdJbnRlZ2VyRXhwb3J0cyk7XG5cbmV4cG9ydCB7IGJpZ0ludCBhcyBkZWZhdWx0IH07XG4iLCJ2YXIgQmlnSW50ZWdlciA9IHtleHBvcnRzOiB7fX07XG5cbmV4cG9ydCB7IEJpZ0ludGVnZXIgYXMgX19tb2R1bGUgfTtcbiIsInZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9O1xuXG5mdW5jdGlvbiBnZXREZWZhdWx0RXhwb3J0RnJvbUNqcyAoeCkge1xuXHRyZXR1cm4geCAmJiB4Ll9fZXNNb2R1bGUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHgsICdkZWZhdWx0JykgPyB4WydkZWZhdWx0J10gOiB4O1xufVxuXG5leHBvcnQgeyBjb21tb25qc0dsb2JhbCwgZ2V0RGVmYXVsdEV4cG9ydEZyb21DanMgfTtcbiIsImltcG9ydCB7IGdldERlZmF1bHRFeHBvcnRGcm9tQ2pzIH0gZnJvbSAnLi9fY29tbW9uanNIZWxwZXJzLm1qcyc7XG5pbXBvcnQgeyBfX3JlcXVpcmUgYXMgcmVxdWlyZUV2ZW50ZW1pdHRlcjMgfSBmcm9tICcuLi9saWIvZXZlbnRlbWl0dGVyMy9pbmRleDIubWpzJztcblxudmFyIGV2ZW50ZW1pdHRlcjNFeHBvcnRzID0gcmVxdWlyZUV2ZW50ZW1pdHRlcjMoKTtcbnZhciBFdmVudEVtaXR0ZXIgPSAvKkBfX1BVUkVfXyovZ2V0RGVmYXVsdEV4cG9ydEZyb21DanMoZXZlbnRlbWl0dGVyM0V4cG9ydHMpO1xuXG5leHBvcnQgeyBFdmVudEVtaXR0ZXIgYXMgZGVmYXVsdCB9O1xuIiwiaW1wb3J0IHsgZ2V0RGVmYXVsdEV4cG9ydEZyb21DanMgfSBmcm9tICcuL19jb21tb25qc0hlbHBlcnMubWpzJztcbmltcG9ydCB7IF9fcmVxdWlyZSBhcyByZXF1aXJlTG9kYXNoX3RyYW5zZm9ybSB9IGZyb20gJy4uL2xpYi9sb2Rhc2gudHJhbnNmb3JtL2luZGV4Lm1qcyc7XG5cbnZhciBsb2Rhc2hfdHJhbnNmb3JtRXhwb3J0cyA9IHJlcXVpcmVMb2Rhc2hfdHJhbnNmb3JtKCk7XG52YXIgdHJhbnNmb3JtID0gLypAX19QVVJFX18qL2dldERlZmF1bHRFeHBvcnRGcm9tQ2pzKGxvZGFzaF90cmFuc2Zvcm1FeHBvcnRzKTtcblxuZXhwb3J0IHsgdHJhbnNmb3JtIGFzIGRlZmF1bHQgfTtcbiIsInZhciBsb2Rhc2hfdHJhbnNmb3JtID0ge2V4cG9ydHM6IHt9fTtcblxuZXhwb3J0IHsgbG9kYXNoX3RyYW5zZm9ybSBhcyBfX21vZHVsZSB9O1xuIiwidmFyIGV2ZW50ZW1pdHRlcjMgPSB7ZXhwb3J0czoge319O1xuXG5leHBvcnQgeyBldmVudGVtaXR0ZXIzIGFzIF9fbW9kdWxlIH07XG4iLCJpbXBvcnQgeyBDb21tYW5kIH0gZnJvbSAnLi4vZ2VuZXJhdGVkL3NjaGVtYXMubWpzJztcbmltcG9ydCB7IHNjaGVtYUNvbW1hbmRGYWN0b3J5IH0gZnJvbSAnLi4vdXRpbHMvY29tbWFuZEZhY3RvcnkubWpzJztcblxuLyoqXG4gKiBBdXRoZW50aWNhdGUgQWN0aXZpdHlcbiAqL1xuY29uc3QgYXV0aGVudGljYXRlID0gc2NoZW1hQ29tbWFuZEZhY3RvcnkoQ29tbWFuZC5BVVRIRU5USUNBVEUpO1xuXG5leHBvcnQgeyBhdXRoZW50aWNhdGUgfTtcbiIsImltcG9ydCB7IENvbW1hbmRzIH0gZnJvbSAnLi4vc2NoZW1hL2NvbW1vbi5tanMnO1xuaW1wb3J0IHsgQXV0aG9yaXplUmVzcG9uc2UgfSBmcm9tICcuLi9zY2hlbWEvcmVzcG9uc2VzLm1qcyc7XG5pbXBvcnQgeyBjb21tYW5kRmFjdG9yeSB9IGZyb20gJy4uL3V0aWxzL2NvbW1hbmRGYWN0b3J5Lm1qcyc7XG5cbi8qKlxuICogU2hvdWxkIGJlIGNhbGxlZCBkaXJlY3RseSBhZnRlciBhIGByZWFkeWAgcGF5bG9hZCBpcyByZWNlaXZlZCBmcm9tIHRoZVxuICogRGlzY29yZCBjbGllbnQuIEl0IGluY2x1ZGVzIGEgbGlzdCBvZiBhbGwgc2NvcGVzIHRoYXQgeW91ciBhY3Rpdml0eSB3b3VsZFxuICogbGlrZSB0byBiZSBhdXRob3JpemVkIHRvIHVzZS4gSWYgdGhlIHVzZXIgZG9lcyBub3QgeWV0IGhhdmUgYSB2YWxpZCB0b2tlblxuICogZm9yIGFsbCBzY29wZXMgcmVxdWVzdGVkLCB0aGlzIGNvbW1hbmQgd2lsbCBvcGVuIGFuIE9BdXRoIG1vZGFsLiBPbmNlIGFuXG4gKiBhdXRob3JpemVkIHRva2VuIGlzIGF2YWlsYWJsZSwgaXQgd2lsbCBiZSByZXR1cm5lZCBpbiB0aGUgY29tbWFuZCByZXNwb25zZS5cbiAqL1xuY29uc3QgYXV0aG9yaXplID0gKHNlbmRDb21tYW5kKSA9PiBjb21tYW5kRmFjdG9yeShzZW5kQ29tbWFuZCwgQ29tbWFuZHMuQVVUSE9SSVpFLCBBdXRob3JpemVSZXNwb25zZSk7XG5cbmV4cG9ydCB7IGF1dGhvcml6ZSB9O1xuIiwiaW1wb3J0IHsgQ29tbWFuZHMgfSBmcm9tICcuLi9zY2hlbWEvY29tbW9uLm1qcyc7XG5pbXBvcnQgeyBFbXB0eVJlc3BvbnNlIH0gZnJvbSAnLi4vc2NoZW1hL3Jlc3BvbnNlcy5tanMnO1xuaW1wb3J0IHsgY29tbWFuZEZhY3RvcnkgfSBmcm9tICcuLi91dGlscy9jb21tYW5kRmFjdG9yeS5tanMnO1xuXG4vKipcbiAqXG4gKi9cbmNvbnN0IGNhcHR1cmVMb2cgPSAoc2VuZENvbW1hbmQpID0+IGNvbW1hbmRGYWN0b3J5KHNlbmRDb21tYW5kLCBDb21tYW5kcy5DQVBUVVJFX0xPRywgRW1wdHlSZXNwb25zZSk7XG5cbmV4cG9ydCB7IGNhcHR1cmVMb2cgfTtcbiIsImltcG9ydCB7IENvbW1hbmRzIH0gZnJvbSAnLi4vc2NoZW1hL2NvbW1vbi5tanMnO1xuaW1wb3J0IHsgRW5jb3VyYWdlSGFyZHdhcmVBY2NlbGVyYXRpb25SZXNwb25zZSB9IGZyb20gJy4uL3NjaGVtYS9yZXNwb25zZXMubWpzJztcbmltcG9ydCB7IGNvbW1hbmRGYWN0b3J5IH0gZnJvbSAnLi4vdXRpbHMvY29tbWFuZEZhY3RvcnkubWpzJztcblxuLyoqXG4gKlxuICovXG5jb25zdCBlbmNvdXJhZ2VIYXJkd2FyZUFjY2VsZXJhdGlvbiA9IChzZW5kQ29tbWFuZCkgPT4gY29tbWFuZEZhY3Rvcnkoc2VuZENvbW1hbmQsIENvbW1hbmRzLkVOQ09VUkFHRV9IV19BQ0NFTEVSQVRJT04sIEVuY291cmFnZUhhcmR3YXJlQWNjZWxlcmF0aW9uUmVzcG9uc2UpO1xuXG5leHBvcnQgeyBlbmNvdXJhZ2VIYXJkd2FyZUFjY2VsZXJhdGlvbiB9O1xuIiwiaW1wb3J0IHsgQ29tbWFuZHMgfSBmcm9tICcuLi9zY2hlbWEvY29tbW9uLm1qcyc7XG5pbXBvcnQgeyBHZXRDaGFubmVsUmVzcG9uc2UgfSBmcm9tICcuLi9zY2hlbWEvcmVzcG9uc2VzLm1qcyc7XG5pbXBvcnQgeyBjb21tYW5kRmFjdG9yeSB9IGZyb20gJy4uL3V0aWxzL2NvbW1hbmRGYWN0b3J5Lm1qcyc7XG5cbi8qKlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUlBDIGRvY3VtZW50YXRpb24gaGVyZTogaHR0cHM6Ly9kaXNjb3JkLmNvbS9kZXZlbG9wZXJzL2RvY3MvdG9waWNzL3JwYyNnZXRjaGFubmVsXG4gKiBDYWxsaW5nIGdldENoYW5uZWwgZ2V0cyBpbmZvIGFib3V0IHRoZSByZXF1ZXN0ZWQgY2hhbm5lbCBzdWNoIGFzIHRoZSBjaGFubmVsIG5hbWUuXG4gKlxuICogU3VwcG9ydGVkIFBsYXRmb3Jtc1xuICogfCBXZWIgfCBpT1MgfCBBbmRyb2lkIHxcbiAqIHwtLS0tLXwtLS0tLXwtLS0tLS0tLS18XG4gKiB8IOKchSAgfCDinIUgIHwg4pyFICAgICAgfFxuICpcbiAqIFJlcXVpcmVkIHNjb3BlczpcbiAqIC0gW2d1aWxkc10gZm9yIGd1aWxkIGNoYW5uZWxzXG4gKiAtIFtndWlsZHMsIGRtX2NoYW5uZWxzLnJlYWRdIGZvciBHRE0gY2hhbm5lbHMuIGRtX2NoYW5uZWxzLnJlYWQgcmVxdWlyZXMgYXBwcm92YWwgZnJvbSBEaXNjb3JkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBhd2FpdCBkaXNjb3JkU2RrLmNvbW1hbmRzLmdldEFjdGl2aXR5KHtcbiAqICAgY2hhbm5lbF9pZDogZGlzY29yZFNkay5jaGFubmVsSWQsXG4gKiB9KTtcbiAqL1xuY29uc3QgZ2V0Q2hhbm5lbCA9IChzZW5kQ29tbWFuZCkgPT4gY29tbWFuZEZhY3Rvcnkoc2VuZENvbW1hbmQsIENvbW1hbmRzLkdFVF9DSEFOTkVMLCBHZXRDaGFubmVsUmVzcG9uc2UpO1xuXG5leHBvcnQgeyBnZXRDaGFubmVsIH07XG4iLCJpbXBvcnQgeyBDb21tYW5kcyB9IGZyb20gJy4uL3NjaGVtYS9jb21tb24ubWpzJztcbmltcG9ydCB7IEdldENoYW5uZWxQZXJtaXNzaW9uc1Jlc3BvbnNlIH0gZnJvbSAnLi4vc2NoZW1hL3Jlc3BvbnNlcy5tanMnO1xuaW1wb3J0IHsgY29tbWFuZEZhY3RvcnkgfSBmcm9tICcuLi91dGlscy9jb21tYW5kRmFjdG9yeS5tanMnO1xuXG4vKipcbiAqIFJldHVybnMgYSBiaWdpbnQgcmVwcmVzZW50aW5nIFBlcm1pc3Npb25zIGZvciB0aGUgY3VycmVudCB1c2VyIGluIHRoZSBjdXJyZW50bHkgY29ubmVjdGVkIGNoYW5uZWwuIFVzZSBQZXJtaXNzaW9uc1V0aWxzIHRvIGNhbGN1bGF0ZSBpZiBhIHVzZXIgaGFzIGEgcGFydGljdWxhciBwZXJtaXNzaW9uLlxuICogQWx3YXlzIHJldHVybnMgYDBuYCAobm8gdmFsaWQgcGVybWlzc2lvbnMpIGluIGEgKEcpRE0gY29udGV4dCwgc28gaXMgdW5uZWNlc3NhcnkgdG8gY2FsbCB3aGVuIGRpc2NvcmRTZGsuZ3VpbGRJZCA9PSBudWxsLlxuICovXG5jb25zdCBnZXRDaGFubmVsUGVybWlzc2lvbnMgPSAoc2VuZENvbW1hbmQpID0+IGNvbW1hbmRGYWN0b3J5KHNlbmRDb21tYW5kLCBDb21tYW5kcy5HRVRfQ0hBTk5FTF9QRVJNSVNTSU9OUywgR2V0Q2hhbm5lbFBlcm1pc3Npb25zUmVzcG9uc2UpO1xuXG5leHBvcnQgeyBnZXRDaGFubmVsUGVybWlzc2lvbnMgfTtcbiIsImltcG9ydCB7IENvbW1hbmRzIH0gZnJvbSAnLi4vc2NoZW1hL2NvbW1vbi5tanMnO1xuaW1wb3J0IHsgR2V0RW50aXRsZW1lbnRzUmVzcG9uc2UgfSBmcm9tICcuLi9zY2hlbWEvcmVzcG9uc2VzLm1qcyc7XG5pbXBvcnQgeyBjb21tYW5kRmFjdG9yeSB9IGZyb20gJy4uL3V0aWxzL2NvbW1hbmRGYWN0b3J5Lm1qcyc7XG5cbi8qKlxuICpcbiAqL1xuY29uc3QgZ2V0RW50aXRsZW1lbnRzID0gKHNlbmRDb21tYW5kKSA9PiBjb21tYW5kRmFjdG9yeShzZW5kQ29tbWFuZCwgQ29tbWFuZHMuR0VUX0VOVElUTEVNRU5UU19FTUJFRERFRCwgR2V0RW50aXRsZW1lbnRzUmVzcG9uc2UpO1xuXG5leHBvcnQgeyBnZXRFbnRpdGxlbWVudHMgfTtcbiIsImltcG9ydCB7IENvbW1hbmQgfSBmcm9tICcuLi9nZW5lcmF0ZWQvc2NoZW1hcy5tanMnO1xuaW1wb3J0IHsgc2NoZW1hQ29tbWFuZEZhY3RvcnkgfSBmcm9tICcuLi91dGlscy9jb21tYW5kRmFjdG9yeS5tanMnO1xuXG4vKipcbiAqIEdldHMgYWxsIHBhcnRpY2lwYW50cyBjb25uZWN0ZWQgdG8gdGhlIGluc3RhbmNlXG4gKi9cbmNvbnN0IGdldEluc3RhbmNlQ29ubmVjdGVkUGFydGljaXBhbnRzID0gc2NoZW1hQ29tbWFuZEZhY3RvcnkoQ29tbWFuZC5HRVRfQUNUSVZJVFlfSU5TVEFOQ0VfQ09OTkVDVEVEX1BBUlRJQ0lQQU5UUyk7XG5cbmV4cG9ydCB7IGdldEluc3RhbmNlQ29ubmVjdGVkUGFydGljaXBhbnRzIH07XG4iLCJpbXBvcnQgeyBDb21tYW5kcyB9IGZyb20gJy4uL3NjaGVtYS9jb21tb24ubWpzJztcbmltcG9ydCB7IEdldFBsYXRmb3JtQmVoYXZpb3JzUmVzcG9uc2UgfSBmcm9tICcuLi9zY2hlbWEvcmVzcG9uc2VzLm1qcyc7XG5pbXBvcnQgeyBjb21tYW5kRmFjdG9yeSB9IGZyb20gJy4uL3V0aWxzL2NvbW1hbmRGYWN0b3J5Lm1qcyc7XG5cbi8qKlxuICogUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBpbmZvcm1hdGlvbiBhYm91dCBwbGF0Zm9ybSBiZWhhdmlvcnNcbiAqIFRoaXMgY29tbWFuZCBjYW4gYmUgdXRpbGl6ZWQgdG8gaW5mb3JtIGFuZCByZWFjdCB0byBhIGJyZWFraW5nIGNoYW5nZSBpbiBwbGF0Zm9ybSBiZWhhdmlvclxuICpcbiAqIEByZXR1cm5zIHtHZXRQbGF0Zm9ybUJlaGF2aW9yc1BheWxvYWR9IHBheWxvYWQgLSBUaGUgY29tbWFuZCByZXR1cm4gdmFsdWVcbiAqIEByZXR1cm5zIHtib29sZWFufSBwYXlsb2FkLmRhdGEuaW9zS2V5Ym9hcmRSZXNpemVzVmlldyAtIElmIG9uIGlPUyB0aGUgd2VidmlldyBpcyByZXNpemVkIHdoZW4gdGhlIGtleWJvYXJkIGlzIG9wZW5lZFxuICovXG5jb25zdCBnZXRQbGF0Zm9ybUJlaGF2aW9ycyA9IChzZW5kQ29tbWFuZCkgPT4gY29tbWFuZEZhY3Rvcnkoc2VuZENvbW1hbmQsIENvbW1hbmRzLkdFVF9QTEFURk9STV9CRUhBVklPUlMsIEdldFBsYXRmb3JtQmVoYXZpb3JzUmVzcG9uc2UpO1xuXG5leHBvcnQgeyBnZXRQbGF0Zm9ybUJlaGF2aW9ycyB9O1xuIiwiaW1wb3J0IHsgc2NoZW1hQ29tbWFuZEZhY3RvcnkgfSBmcm9tICcuLi91dGlscy9jb21tYW5kRmFjdG9yeS5tanMnO1xuaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gJy4uL2dlbmVyYXRlZC9zY2hlbWFzLm1qcyc7XG5cbmNvbnN0IGdldFJlbGF0aW9uc2hpcHMgPSBzY2hlbWFDb21tYW5kRmFjdG9yeShDb21tYW5kLkdFVF9SRUxBVElPTlNISVBTKTtcblxuZXhwb3J0IHsgZ2V0UmVsYXRpb25zaGlwcyB9O1xuIiwiaW1wb3J0IHsgQ29tbWFuZHMgfSBmcm9tICcuLi9zY2hlbWEvY29tbW9uLm1qcyc7XG5pbXBvcnQgeyBHZXRTa3VzUmVzcG9uc2UgfSBmcm9tICcuLi9zY2hlbWEvcmVzcG9uc2VzLm1qcyc7XG5pbXBvcnQgeyBjb21tYW5kRmFjdG9yeSB9IGZyb20gJy4uL3V0aWxzL2NvbW1hbmRGYWN0b3J5Lm1qcyc7XG5cbi8qXG4gKlxuICovXG5jb25zdCBnZXRTa3VzID0gKHNlbmRDb21tYW5kKSA9PiBjb21tYW5kRmFjdG9yeShzZW5kQ29tbWFuZCwgQ29tbWFuZHMuR0VUX1NLVVNfRU1CRURERUQsIEdldFNrdXNSZXNwb25zZSk7XG5cbmV4cG9ydCB7IGdldFNrdXMgfTtcbiIsImltcG9ydCB7IHNjaGVtYUNvbW1hbmRGYWN0b3J5IH0gZnJvbSAnLi4vdXRpbHMvY29tbWFuZEZhY3RvcnkubWpzJztcbmltcG9ydCB7IENvbW1hbmQgfSBmcm9tICcuLi9nZW5lcmF0ZWQvc2NoZW1hcy5tanMnO1xuXG5jb25zdCBnZXRVc2VyID0gc2NoZW1hQ29tbWFuZEZhY3RvcnkoQ29tbWFuZC5HRVRfVVNFUik7XG5cbmV4cG9ydCB7IGdldFVzZXIgfTtcbiIsImV4cG9ydCB7IENvbW1hbmRzIH0gZnJvbSAnLi4vc2NoZW1hL2NvbW1vbi5tanMnO1xuaW1wb3J0IHsgYXV0aGVudGljYXRlIH0gZnJvbSAnLi9hdXRoZW50aWNhdGUubWpzJztcbmltcG9ydCB7IGF1dGhvcml6ZSB9IGZyb20gJy4vYXV0aG9yaXplLm1qcyc7XG5pbXBvcnQgeyBjYXB0dXJlTG9nIH0gZnJvbSAnLi9jYXB0dXJlTG9nLm1qcyc7XG5pbXBvcnQgeyBlbmNvdXJhZ2VIYXJkd2FyZUFjY2VsZXJhdGlvbiB9IGZyb20gJy4vZW5jb3VyYWdlSGFyZHdhcmVBY2NlbGVyYXRpb24ubWpzJztcbmltcG9ydCB7IGdldEVudGl0bGVtZW50cyB9IGZyb20gJy4vZ2V0RW50aXRsZW1lbnRzLm1qcyc7XG5pbXBvcnQgeyBnZXRTa3VzIH0gZnJvbSAnLi9nZXRTa3VzLm1qcyc7XG5pbXBvcnQgeyBnZXRDaGFubmVsUGVybWlzc2lvbnMgfSBmcm9tICcuL2dldENoYW5uZWxQZXJtaXNzaW9ucy5tanMnO1xuaW1wb3J0IHsgZ2V0UGxhdGZvcm1CZWhhdmlvcnMgfSBmcm9tICcuL2dldFBsYXRmb3JtQmVoYXZpb3JzLm1qcyc7XG5pbXBvcnQgeyBvcGVuRXh0ZXJuYWxMaW5rIH0gZnJvbSAnLi9vcGVuRXh0ZXJuYWxMaW5rLm1qcyc7XG5pbXBvcnQgeyBvcGVuSW52aXRlRGlhbG9nIH0gZnJvbSAnLi9vcGVuSW52aXRlRGlhbG9nLm1qcyc7XG5pbXBvcnQgeyBvcGVuU2hhcmVNb21lbnREaWFsb2cgfSBmcm9tICcuL29wZW5TaGFyZU1vbWVudERpYWxvZy5tanMnO1xuaW1wb3J0IHsgc2V0QWN0aXZpdHkgfSBmcm9tICcuL3NldEFjdGl2aXR5Lm1qcyc7XG5pbXBvcnQgeyBzZXRDb25maWcgfSBmcm9tICcuL3NldENvbmZpZy5tanMnO1xuaW1wb3J0IHsgc2V0T3JpZW50YXRpb25Mb2NrU3RhdGUgfSBmcm9tICcuL3NldE9yaWVudGF0aW9uTG9ja1N0YXRlLm1qcyc7XG5pbXBvcnQgeyBzaGFyZUxpbmsgfSBmcm9tICcuL3NoYXJlTGluay5tanMnO1xuaW1wb3J0IHsgc3RhcnRQdXJjaGFzZSB9IGZyb20gJy4vc3RhcnRQdXJjaGFzZS5tanMnO1xuaW1wb3J0IHsgdXNlclNldHRpbmdzR2V0TG9jYWxlIH0gZnJvbSAnLi91c2VyU2V0dGluZ3NHZXRMb2NhbGUubWpzJztcbmltcG9ydCB7IGluaXRpYXRlSW1hZ2VVcGxvYWQgfSBmcm9tICcuL2luaXRpYXRlSW1hZ2VVcGxvYWQubWpzJztcbmltcG9ydCB7IGdldENoYW5uZWwgfSBmcm9tICcuL2dldENoYW5uZWwubWpzJztcbmltcG9ydCB7IGdldEluc3RhbmNlQ29ubmVjdGVkUGFydGljaXBhbnRzIH0gZnJvbSAnLi9nZXRJbnN0YW5jZUNvbm5lY3RlZFBhcnRpY2lwYW50cy5tanMnO1xuaW1wb3J0IHsgZ2V0UmVsYXRpb25zaGlwcyB9IGZyb20gJy4vZ2V0UmVsYXRpb25zaGlwcy5tanMnO1xuaW1wb3J0IHsgaW52aXRlVXNlckVtYmVkZGVkIH0gZnJvbSAnLi9pbnZpdGVVc2VyRW1iZWRkZWQubWpzJztcbmltcG9ydCB7IGdldFVzZXIgfSBmcm9tICcuL2dldFVzZXIubWpzJztcblxuZnVuY3Rpb24gY29tbWFuZHMoc2VuZENvbW1hbmQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBhdXRoZW50aWNhdGU6IGF1dGhlbnRpY2F0ZShzZW5kQ29tbWFuZCksXG4gICAgICAgIGF1dGhvcml6ZTogYXV0aG9yaXplKHNlbmRDb21tYW5kKSxcbiAgICAgICAgY2FwdHVyZUxvZzogY2FwdHVyZUxvZyhzZW5kQ29tbWFuZCksXG4gICAgICAgIGVuY291cmFnZUhhcmR3YXJlQWNjZWxlcmF0aW9uOiBlbmNvdXJhZ2VIYXJkd2FyZUFjY2VsZXJhdGlvbihzZW5kQ29tbWFuZCksXG4gICAgICAgIGdldENoYW5uZWw6IGdldENoYW5uZWwoc2VuZENvbW1hbmQpLFxuICAgICAgICBnZXRDaGFubmVsUGVybWlzc2lvbnM6IGdldENoYW5uZWxQZXJtaXNzaW9ucyhzZW5kQ29tbWFuZCksXG4gICAgICAgIGdldEVudGl0bGVtZW50czogZ2V0RW50aXRsZW1lbnRzKHNlbmRDb21tYW5kKSxcbiAgICAgICAgZ2V0UGxhdGZvcm1CZWhhdmlvcnM6IGdldFBsYXRmb3JtQmVoYXZpb3JzKHNlbmRDb21tYW5kKSxcbiAgICAgICAgZ2V0U2t1czogZ2V0U2t1cyhzZW5kQ29tbWFuZCksXG4gICAgICAgIG9wZW5FeHRlcm5hbExpbms6IG9wZW5FeHRlcm5hbExpbmsoc2VuZENvbW1hbmQpLFxuICAgICAgICBvcGVuSW52aXRlRGlhbG9nOiBvcGVuSW52aXRlRGlhbG9nKHNlbmRDb21tYW5kKSxcbiAgICAgICAgb3BlblNoYXJlTW9tZW50RGlhbG9nOiBvcGVuU2hhcmVNb21lbnREaWFsb2coc2VuZENvbW1hbmQpLFxuICAgICAgICBzZXRBY3Rpdml0eTogc2V0QWN0aXZpdHkoc2VuZENvbW1hbmQpLFxuICAgICAgICBzZXRDb25maWc6IHNldENvbmZpZyhzZW5kQ29tbWFuZCksXG4gICAgICAgIHNldE9yaWVudGF0aW9uTG9ja1N0YXRlOiBzZXRPcmllbnRhdGlvbkxvY2tTdGF0ZShzZW5kQ29tbWFuZCksXG4gICAgICAgIHNoYXJlTGluazogc2hhcmVMaW5rKHNlbmRDb21tYW5kKSxcbiAgICAgICAgc3RhcnRQdXJjaGFzZTogc3RhcnRQdXJjaGFzZShzZW5kQ29tbWFuZCksXG4gICAgICAgIHVzZXJTZXR0aW5nc0dldExvY2FsZTogdXNlclNldHRpbmdzR2V0TG9jYWxlKHNlbmRDb21tYW5kKSxcbiAgICAgICAgaW5pdGlhdGVJbWFnZVVwbG9hZDogaW5pdGlhdGVJbWFnZVVwbG9hZChzZW5kQ29tbWFuZCksXG4gICAgICAgIGdldEluc3RhbmNlQ29ubmVjdGVkUGFydGljaXBhbnRzOiBnZXRJbnN0YW5jZUNvbm5lY3RlZFBhcnRpY2lwYW50cyhzZW5kQ29tbWFuZCksXG4gICAgICAgIGdldFJlbGF0aW9uc2hpcHM6IGdldFJlbGF0aW9uc2hpcHMoc2VuZENvbW1hbmQpLFxuICAgICAgICBpbnZpdGVVc2VyRW1iZWRkZWQ6IGludml0ZVVzZXJFbWJlZGRlZChzZW5kQ29tbWFuZCksXG4gICAgICAgIGdldFVzZXI6IGdldFVzZXIoc2VuZENvbW1hbmQpLFxuICAgIH07XG59XG5cbmV4cG9ydCB7IGNvbW1hbmRzIGFzIGRlZmF1bHQgfTtcbiIsImltcG9ydCB7IENvbW1hbmQgfSBmcm9tICcuLi9nZW5lcmF0ZWQvc2NoZW1hcy5tanMnO1xuaW1wb3J0IHsgc2NoZW1hQ29tbWFuZEZhY3RvcnkgfSBmcm9tICcuLi91dGlscy9jb21tYW5kRmFjdG9yeS5tanMnO1xuXG4vKipcbiAqIFRyaWdnZXJzIHRoZSBmaWxlIHVwbG9hZCBmbG93IGluIHRoZSBEaXNjb3JkIGFwcC4gVGhlIHVzZXIgd2lsbCBiZSBwcm9tcHRlZCB0byBzZWxlY3QgYSB2YWxpZCBpbWFnZSBmaWxlXG4gKiBhbmQgdGhlbiBpdCB3aWxsIGJlIHVwbG9hZGVkIG9uIHRoZSBhcHAgc2lkZSB0byB0aGUgRGlzY29yZCBDRE4uXG4gKlxuICogTk9URTogVGhlIFVSTCBwcm92aWRlZCBieSB0aGUgQVBJIGlzIGFuIGVwaGVtZXJhbCBhdHRhY2htZW50IFVSTCwgc28gdGhlIGltYWdlIHdpbGwgbm90IGJlIHBlcm1hbmVudGx5XG4gKiBhY2Nlc3NpYmxlIGF0IHRoZSBsaW5rIHByb3ZpZGVkLlxuICpcbiAqIEByZXR1cm5zIHtQcm9taXNlPHtpbWFnZV91cmw6IHN0cmluZ30+fVxuICovXG5jb25zdCBpbml0aWF0ZUltYWdlVXBsb2FkID0gc2NoZW1hQ29tbWFuZEZhY3RvcnkoQ29tbWFuZC5JTklUSUFURV9JTUFHRV9VUExPQUQpO1xuXG5leHBvcnQgeyBpbml0aWF0ZUltYWdlVXBsb2FkIH07XG4iLCJpbXBvcnQgeyBzY2hlbWFDb21tYW5kRmFjdG9yeSB9IGZyb20gJy4uL3V0aWxzL2NvbW1hbmRGYWN0b3J5Lm1qcyc7XG5pbXBvcnQgeyBDb21tYW5kIH0gZnJvbSAnLi4vZ2VuZXJhdGVkL3NjaGVtYXMubWpzJztcblxuY29uc3QgaW52aXRlVXNlckVtYmVkZGVkID0gc2NoZW1hQ29tbWFuZEZhY3RvcnkoQ29tbWFuZC5JTlZJVEVfVVNFUl9FTUJFRERFRCk7XG5cbmV4cG9ydCB7IGludml0ZVVzZXJFbWJlZGRlZCB9O1xuIiwiaW1wb3J0IHsgQ29tbWFuZHMgfSBmcm9tICcuLi9zY2hlbWEvY29tbW9uLm1qcyc7XG5pbXBvcnQgeyBPcGVuRXh0ZXJuYWxMaW5rUmVzcG9uc2UgfSBmcm9tICcuLi9zY2hlbWEvcmVzcG9uc2VzLm1qcyc7XG5pbXBvcnQgeyBjb21tYW5kRmFjdG9yeSB9IGZyb20gJy4uL3V0aWxzL2NvbW1hbmRGYWN0b3J5Lm1qcyc7XG5cbi8qKlxuICpcbiAqL1xuY29uc3Qgb3BlbkV4dGVybmFsTGluayA9IChzZW5kQ29tbWFuZCkgPT4gY29tbWFuZEZhY3Rvcnkoc2VuZENvbW1hbmQsIENvbW1hbmRzLk9QRU5fRVhURVJOQUxfTElOSywgT3BlbkV4dGVybmFsTGlua1Jlc3BvbnNlKTtcblxuZXhwb3J0IHsgb3BlbkV4dGVybmFsTGluayB9O1xuIiwiaW1wb3J0IHsgQ29tbWFuZHMgfSBmcm9tICcuLi9zY2hlbWEvY29tbW9uLm1qcyc7XG5pbXBvcnQgeyBFbXB0eVJlc3BvbnNlIH0gZnJvbSAnLi4vc2NoZW1hL3Jlc3BvbnNlcy5tanMnO1xuaW1wb3J0IHsgY29tbWFuZEZhY3RvcnkgfSBmcm9tICcuLi91dGlscy9jb21tYW5kRmFjdG9yeS5tanMnO1xuXG4vKipcbiAqIE9wZW5zIHRoZSBpbnZpdGUgZGlhbG9nIHdpdGhpbiB0aGUgZGlzY29yZCBjbGllbnQsIGFsbG93aW5nIHVzZXJzIHRvIHNoYXJlIGludml0ZSBsaW5rcyB0byBmcmllbmRzLlxuICogRG9lcyBub3Qgd29yayBpbiAoRylETSBjb250ZXh0cyAodGhyb3dzIFJQQ0Vycm9yLklOVkFMSURfQ0hBTk5FTCksIHNvIHNob3VsZCBub3QgYmUgY2FsbGVkIGlmIGRpc2NvcmRTZGsuZ3VpbGRJZCA9PSBudWxsXG4gKiBTaW1pbGFybHksIGlmIHRoZSB1c2VyIGRvZXMgbm90IGhhdmUgUGVybWlzc2lvbnMuQ1JFQVRFX0lOU1RBTlRfSU5WSVRFIHRoaXMgY29tbWFuZCB0aHJvd3MgUlBDRXJyb3JzLklOVkFMSURfUEVSTUlTU0lPTlMsIHNvIGNoZWNraW5nIHRoZSB1c2VyJ3MgcGVybWlzc2lvbnMgdmlhIGdldENoYW5uZWxQZXJtaXNzaW9ucyBpcyBoaWdobHkgcmVjb21tZW5kZWQuXG4gKi9cbmNvbnN0IG9wZW5JbnZpdGVEaWFsb2cgPSAoc2VuZENvbW1hbmQpID0+IGNvbW1hbmRGYWN0b3J5KHNlbmRDb21tYW5kLCBDb21tYW5kcy5PUEVOX0lOVklURV9ESUFMT0csIEVtcHR5UmVzcG9uc2UpO1xuXG5leHBvcnQgeyBvcGVuSW52aXRlRGlhbG9nIH07XG4iLCJpbXBvcnQgeyBDb21tYW5kIH0gZnJvbSAnLi4vZ2VuZXJhdGVkL3NjaGVtYXMubWpzJztcbmltcG9ydCB7IHNjaGVtYUNvbW1hbmRGYWN0b3J5IH0gZnJvbSAnLi4vdXRpbHMvY29tbWFuZEZhY3RvcnkubWpzJztcblxuLyoqXG4gKiBPcGVucyB0aGUgU2hhcmUgTW9tZW50IERpYWxvZyBpbiB0aGUgdXNlcidzIGNsaWVudCwgYWxsb3dpbmcgdGhlbSB0byBzaGFyZSB0aGUgbWVkaWEgYXQgbWVkaWFVcmwgYXMgYSBtZXNzYWdlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZWRpYVVybCAtIGEgRGlzY29yZCBDRE4gVVJMIGZvciB0aGUgcGllY2Ugb2YgbWVkaWEgdG8gYmUgc2hhcmVkLlxuICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XG4gKi9cbmNvbnN0IG9wZW5TaGFyZU1vbWVudERpYWxvZyA9IHNjaGVtYUNvbW1hbmRGYWN0b3J5KENvbW1hbmQuT1BFTl9TSEFSRV9NT01FTlRfRElBTE9HKTtcblxuZXhwb3J0IHsgb3BlblNoYXJlTW9tZW50RGlhbG9nIH07XG4iLCJpbXBvcnQgeyBBY3Rpdml0eSwgQ29tbWFuZHMgfSBmcm9tICcuLi9zY2hlbWEvY29tbW9uLm1qcyc7XG5pbXBvcnQgeyBTZXRBY3Rpdml0eVJlc3BvbnNlIH0gZnJvbSAnLi4vc2NoZW1hL3Jlc3BvbnNlcy5tanMnO1xuaW1wb3J0IHsgY29tbWFuZEZhY3RvcnkgfSBmcm9tICcuLi91dGlscy9jb21tYW5kRmFjdG9yeS5tanMnO1xuXG5BY3Rpdml0eS5waWNrKHtcbiAgICBzdGF0ZTogdHJ1ZSxcbiAgICBkZXRhaWxzOiB0cnVlLFxuICAgIHRpbWVzdGFtcHM6IHRydWUsXG4gICAgYXNzZXRzOiB0cnVlLFxuICAgIHBhcnR5OiB0cnVlLFxuICAgIHNlY3JldHM6IHRydWUsXG4gICAgaW5zdGFuY2U6IHRydWUsXG4gICAgdHlwZTogdHJ1ZSxcbn0pXG4gICAgLmV4dGVuZCh7XG4gICAgdHlwZTogQWN0aXZpdHkuc2hhcGUudHlwZS5vcHRpb25hbCgpLFxuICAgIGluc3RhbmNlOiBBY3Rpdml0eS5zaGFwZS5pbnN0YW5jZS5vcHRpb25hbCgpLFxufSlcbiAgICAubnVsbGFibGUoKTtcbi8qKlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUlBDIGRvY3VtZW50YXRpb24gaGVyZTogaHR0cHM6Ly9kaXNjb3JkLmNvbS9kZXZlbG9wZXJzL2RvY3MvdG9waWNzL3JwYyNzZXRhY3Rpdml0eVxuICogQ2FsbGluZyBzZXRBY3Rpdml0eSBhbGxvd3MgbW9kaWZ5aW5nIGhvdyB5b3VyIGFjdGl2aXR5J3MgcmljaCBwcmVzZW5jZSBpcyBkaXNwbGF5ZWQgaW4gdGhlIERpc2NvcmQgQXBwXG4gKlxuICogU3VwcG9ydGVkIFBsYXRmb3Jtc1xuICogfCBXZWIgfCBpT1MgfCBBbmRyb2lkIHxcbiAqIHwtLS0tLXwtLS0tLXwtLS0tLS0tLS18XG4gKiB8IOKchSAgfCDinIUgIHwg4pyFICAgICAgfFxuICpcbiAqIFJlcXVpcmVkIHNjb3BlczogW3JwYy5hY3Rpdml0aWVzLndyaXRlXVxuICpcbiAqIEBleGFtcGxlXG4gKiBhd2FpdCBkaXNjb3JkU2RrLmNvbW1hbmRzLnNldEFjdGl2aXR5KHtcbiAqICAgYWN0aXZpdHk6IHtcbiAqICAgICB0eXBlOiAwLFxuICogICAgIGRldGFpbHM6ICdEZXRhaWxzJyxcbiAqICAgICBzdGF0ZTogJ1BsYXlpbmcnLFxuICogICB9LFxuICogfSk7XG4gKi9cbmNvbnN0IHNldEFjdGl2aXR5ID0gKHNlbmRDb21tYW5kKSA9PiBjb21tYW5kRmFjdG9yeShzZW5kQ29tbWFuZCwgQ29tbWFuZHMuU0VUX0FDVElWSVRZLCBTZXRBY3Rpdml0eVJlc3BvbnNlKTtcblxuZXhwb3J0IHsgc2V0QWN0aXZpdHkgfTtcbiIsImltcG9ydCB7IENvbW1hbmRzIH0gZnJvbSAnLi4vc2NoZW1hL2NvbW1vbi5tanMnO1xuaW1wb3J0IHsgU2V0Q29uZmlnUmVzcG9uc2UgfSBmcm9tICcuLi9zY2hlbWEvcmVzcG9uc2VzLm1qcyc7XG5pbXBvcnQgeyBjb21tYW5kRmFjdG9yeSB9IGZyb20gJy4uL3V0aWxzL2NvbW1hbmRGYWN0b3J5Lm1qcyc7XG5cbi8qKlxuICpcbiAqL1xuY29uc3Qgc2V0Q29uZmlnID0gKHNlbmRDb21tYW5kKSA9PiBjb21tYW5kRmFjdG9yeShzZW5kQ29tbWFuZCwgQ29tbWFuZHMuU0VUX0NPTkZJRywgU2V0Q29uZmlnUmVzcG9uc2UpO1xuXG5leHBvcnQgeyBzZXRDb25maWcgfTtcbiIsImltcG9ydCB7IENvbW1hbmRzIH0gZnJvbSAnLi4vc2NoZW1hL2NvbW1vbi5tanMnO1xuaW1wb3J0IHsgRW1wdHlSZXNwb25zZSB9IGZyb20gJy4uL3NjaGVtYS9yZXNwb25zZXMubWpzJztcbmltcG9ydCBjb21wYXRDb21tYW5kRmFjdG9yeSBmcm9tICcuLi91dGlscy9jb21wYXRDb21tYW5kRmFjdG9yeS5tanMnO1xuXG5jb25zdCBmYWxsYmFja1RyYW5zZm9ybSA9IChhcmdzKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbG9ja19zdGF0ZTogYXJncy5sb2NrX3N0YXRlLFxuICAgICAgICBwaWN0dXJlX2luX3BpY3R1cmVfbG9ja19zdGF0ZTogYXJncy5waWN0dXJlX2luX3BpY3R1cmVfbG9ja19zdGF0ZSxcbiAgICB9O1xufTtcbmNvbnN0IHNldE9yaWVudGF0aW9uTG9ja1N0YXRlID0gKHNlbmRDb21tYW5kKSA9PiBjb21wYXRDb21tYW5kRmFjdG9yeSh7XG4gICAgc2VuZENvbW1hbmQsXG4gICAgY21kOiBDb21tYW5kcy5TRVRfT1JJRU5UQVRJT05fTE9DS19TVEFURSxcbiAgICByZXNwb25zZTogRW1wdHlSZXNwb25zZSxcbiAgICBmYWxsYmFja1RyYW5zZm9ybSxcbn0pO1xuXG5leHBvcnQgeyBzZXRPcmllbnRhdGlvbkxvY2tTdGF0ZSB9O1xuIiwiaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gJy4uL2dlbmVyYXRlZC9zY2hlbWFzLm1qcyc7XG5pbXBvcnQgeyBzY2hlbWFDb21tYW5kRmFjdG9yeSB9IGZyb20gJy4uL3V0aWxzL2NvbW1hbmRGYWN0b3J5Lm1qcyc7XG5cbi8qKlxuICogT3BlbnMgYSBtb2RhbCBpbiB0aGUgdXNlcidzIGNsaWVudCB0byBzaGFyZSB0aGUgQWN0aXZpdHkgbGluay5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVmZXJyZXJfaWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBjdXN0b21faWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIC0gbWVzc2FnZSBzZW50IGFsb25nc2lkZSBsaW5rIHdoZW4gc2hhcmVkLlxuICogQHJldHVybnMge1Byb21pc2U8e3N1Y2Nlc3M6IGJvb2xlYW4+fSB3aGV0aGVyIG9yIG5vdCB0aGUgdXNlciBzaGFyZWQgdGhlIGxpbmsgdG8gc29tZW9uZVxuICovXG5jb25zdCBzaGFyZUxpbmsgPSBzY2hlbWFDb21tYW5kRmFjdG9yeShDb21tYW5kLlNIQVJFX0xJTkspO1xuXG5leHBvcnQgeyBzaGFyZUxpbmsgfTtcbiIsImltcG9ydCB7IENvbW1hbmRzIH0gZnJvbSAnLi4vc2NoZW1hL2NvbW1vbi5tanMnO1xuaW1wb3J0IHsgU3RhcnRQdXJjaGFzZVJlc3BvbnNlIH0gZnJvbSAnLi4vc2NoZW1hL3Jlc3BvbnNlcy5tanMnO1xuaW1wb3J0IHsgY29tbWFuZEZhY3RvcnkgfSBmcm9tICcuLi91dGlscy9jb21tYW5kRmFjdG9yeS5tanMnO1xuXG4vKipcbiAqXG4gKi9cbmNvbnN0IHN0YXJ0UHVyY2hhc2UgPSAoc2VuZENvbW1hbmQpID0+IGNvbW1hbmRGYWN0b3J5KHNlbmRDb21tYW5kLCBDb21tYW5kcy5TVEFSVF9QVVJDSEFTRSwgU3RhcnRQdXJjaGFzZVJlc3BvbnNlKTtcblxuZXhwb3J0IHsgc3RhcnRQdXJjaGFzZSB9O1xuIiwiaW1wb3J0IHsgQ29tbWFuZHMgfSBmcm9tICcuLi9zY2hlbWEvY29tbW9uLm1qcyc7XG5pbXBvcnQgeyBVc2VyU2V0dGluZ3NHZXRMb2NhbGVSZXNwb25zZSB9IGZyb20gJy4uL3NjaGVtYS9yZXNwb25zZXMubWpzJztcbmltcG9ydCB7IGNvbW1hbmRGYWN0b3J5IH0gZnJvbSAnLi4vdXRpbHMvY29tbWFuZEZhY3RvcnkubWpzJztcblxuLyoqXG4gKlxuICovXG5jb25zdCB1c2VyU2V0dGluZ3NHZXRMb2NhbGUgPSAoc2VuZENvbW1hbmQpID0+IGNvbW1hbmRGYWN0b3J5KHNlbmRDb21tYW5kLCBDb21tYW5kcy5VU0VSX1NFVFRJTkdTX0dFVF9MT0NBTEUsIFVzZXJTZXR0aW5nc0dldExvY2FsZVJlc3BvbnNlKTtcblxuZXhwb3J0IHsgdXNlclNldHRpbmdzR2V0TG9jYWxlIH07XG4iLCJjbGFzcyBTREtFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3Rvcihjb2RlLCBtZXNzYWdlID0gJycpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMubmFtZSA9ICdEaXNjb3JkIFNESyBFcnJvcic7XG4gICAgfVxufVxuXG5leHBvcnQgeyBTREtFcnJvciB9O1xuIiwiaW1wb3J0IHogZnJvbSAnLi4vbGliL3pvZC9saWIvaW5kZXgubWpzJztcbmltcG9ydCB7IGZhbGxiYWNrVG9EZWZhdWx0IH0gZnJvbSAnLi4vdXRpbHMvem9kVXRpbHMubWpzJztcblxuLyoqXG4gKiBUaGlzIGZpbGUgaXMgZ2VuZXJhdGVkLlxuICogUnVuIFwibnBtIHJ1biBzeW5jXCIgdG8gcmVnZW5lcmF0ZSBmaWxlLlxuICogQGdlbmVyYXRlZFxuICovXG4vLyBJTklUSUFURV9JTUFHRV9VUExPQURcbmNvbnN0IEluaXRpYXRlSW1hZ2VVcGxvYWRSZXNwb25zZVNjaGVtYSA9IHoub2JqZWN0KHsgaW1hZ2VfdXJsOiB6LnN0cmluZygpIH0pO1xuLy8gT1BFTl9TSEFSRV9NT01FTlRfRElBTE9HXG5jb25zdCBPcGVuU2hhcmVNb21lbnREaWFsb2dSZXF1ZXN0U2NoZW1hID0gei5vYmplY3QoeyBtZWRpYVVybDogei5zdHJpbmcoKS5tYXgoMTAyNCkgfSk7XG4vLyBBVVRIRU5USUNBVEVcbmNvbnN0IEF1dGhlbnRpY2F0ZVJlcXVlc3RTY2hlbWEgPSB6Lm9iamVjdCh7IGFjY2Vzc190b2tlbjogei51bmlvbihbei5zdHJpbmcoKSwgei5udWxsKCldKS5vcHRpb25hbCgpIH0pO1xuY29uc3QgQXV0aGVudGljYXRlUmVzcG9uc2VTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgYWNjZXNzX3Rva2VuOiB6LnN0cmluZygpLFxuICAgIHVzZXI6IHoub2JqZWN0KHtcbiAgICAgICAgdXNlcm5hbWU6IHouc3RyaW5nKCksXG4gICAgICAgIGRpc2NyaW1pbmF0b3I6IHouc3RyaW5nKCksXG4gICAgICAgIGlkOiB6LnN0cmluZygpLFxuICAgICAgICBhdmF0YXI6IHoudW5pb24oW3ouc3RyaW5nKCksIHoubnVsbCgpXSkub3B0aW9uYWwoKSxcbiAgICAgICAgcHVibGljX2ZsYWdzOiB6Lm51bWJlcigpLFxuICAgICAgICBnbG9iYWxfbmFtZTogei51bmlvbihbei5zdHJpbmcoKSwgei5udWxsKCldKS5vcHRpb25hbCgpLFxuICAgIH0pLFxuICAgIHNjb3Blczogei5hcnJheShmYWxsYmFja1RvRGVmYXVsdCh6XG4gICAgICAgIC5lbnVtKFtcbiAgICAgICAgJ2lkZW50aWZ5JyxcbiAgICAgICAgJ2VtYWlsJyxcbiAgICAgICAgJ2Nvbm5lY3Rpb25zJyxcbiAgICAgICAgJ2d1aWxkcycsXG4gICAgICAgICdndWlsZHMuam9pbicsXG4gICAgICAgICdndWlsZHMubWVtYmVycy5yZWFkJyxcbiAgICAgICAgJ2d1aWxkcy5jaGFubmVscy5yZWFkJyxcbiAgICAgICAgJ2dkbS5qb2luJyxcbiAgICAgICAgJ2JvdCcsXG4gICAgICAgICdycGMnLFxuICAgICAgICAncnBjLm5vdGlmaWNhdGlvbnMucmVhZCcsXG4gICAgICAgICdycGMudm9pY2UucmVhZCcsXG4gICAgICAgICdycGMudm9pY2Uud3JpdGUnLFxuICAgICAgICAncnBjLnZpZGVvLnJlYWQnLFxuICAgICAgICAncnBjLnZpZGVvLndyaXRlJyxcbiAgICAgICAgJ3JwYy5zY3JlZW5zaGFyZS5yZWFkJyxcbiAgICAgICAgJ3JwYy5zY3JlZW5zaGFyZS53cml0ZScsXG4gICAgICAgICdycGMuYWN0aXZpdGllcy53cml0ZScsXG4gICAgICAgICd3ZWJob29rLmluY29taW5nJyxcbiAgICAgICAgJ21lc3NhZ2VzLnJlYWQnLFxuICAgICAgICAnYXBwbGljYXRpb25zLmJ1aWxkcy51cGxvYWQnLFxuICAgICAgICAnYXBwbGljYXRpb25zLmJ1aWxkcy5yZWFkJyxcbiAgICAgICAgJ2FwcGxpY2F0aW9ucy5jb21tYW5kcycsXG4gICAgICAgICdhcHBsaWNhdGlvbnMuY29tbWFuZHMucGVybWlzc2lvbnMudXBkYXRlJyxcbiAgICAgICAgJ2FwcGxpY2F0aW9ucy5jb21tYW5kcy51cGRhdGUnLFxuICAgICAgICAnYXBwbGljYXRpb25zLnN0b3JlLnVwZGF0ZScsXG4gICAgICAgICdhcHBsaWNhdGlvbnMuZW50aXRsZW1lbnRzJyxcbiAgICAgICAgJ2FjdGl2aXRpZXMucmVhZCcsXG4gICAgICAgICdhY3Rpdml0aWVzLndyaXRlJyxcbiAgICAgICAgJ2FjdGl2aXRpZXMuaW52aXRlcy53cml0ZScsXG4gICAgICAgICdyZWxhdGlvbnNoaXBzLnJlYWQnLFxuICAgICAgICAncmVsYXRpb25zaGlwcy53cml0ZScsXG4gICAgICAgICd2b2ljZScsXG4gICAgICAgICdkbV9jaGFubmVscy5yZWFkJyxcbiAgICAgICAgJ3JvbGVfY29ubmVjdGlvbnMud3JpdGUnLFxuICAgICAgICAncHJlc2VuY2VzLnJlYWQnLFxuICAgICAgICAncHJlc2VuY2VzLndyaXRlJyxcbiAgICAgICAgJ29wZW5pZCcsXG4gICAgICAgICdkbV9jaGFubmVscy5tZXNzYWdlcy5yZWFkJyxcbiAgICAgICAgJ2RtX2NoYW5uZWxzLm1lc3NhZ2VzLndyaXRlJyxcbiAgICAgICAgJ2dhdGV3YXkuY29ubmVjdCcsXG4gICAgICAgICdhY2NvdW50Lmdsb2JhbF9uYW1lLnVwZGF0ZScsXG4gICAgICAgICdwYXltZW50X3NvdXJjZXMuY291bnRyeV9jb2RlJyxcbiAgICAgICAgJ3Nkay5zb2NpYWxfbGF5ZXJfcHJlc2VuY2UnLFxuICAgICAgICAnc2RrLnNvY2lhbF9sYXllcicsXG4gICAgICAgICdsb2JiaWVzLndyaXRlJyxcbiAgICBdKVxuICAgICAgICAub3Ioei5saXRlcmFsKC0xKSlcbiAgICAgICAgLmRlZmF1bHQoLTEpKSksXG4gICAgZXhwaXJlczogei5zdHJpbmcoKSxcbiAgICBhcHBsaWNhdGlvbjogei5vYmplY3Qoe1xuICAgICAgICBkZXNjcmlwdGlvbjogei5zdHJpbmcoKSxcbiAgICAgICAgaWNvbjogei51bmlvbihbei5zdHJpbmcoKSwgei5udWxsKCldKS5vcHRpb25hbCgpLFxuICAgICAgICBpZDogei5zdHJpbmcoKSxcbiAgICAgICAgcnBjX29yaWdpbnM6IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbiAgICAgICAgbmFtZTogei5zdHJpbmcoKSxcbiAgICB9KSxcbn0pO1xuLy8gR0VUX0FDVElWSVRZX0lOU1RBTkNFX0NPTk5FQ1RFRF9QQVJUSUNJUEFOVFNcbmNvbnN0IEdldEFjdGl2aXR5SW5zdGFuY2VDb25uZWN0ZWRQYXJ0aWNpcGFudHNSZXNwb25zZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBwYXJ0aWNpcGFudHM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICBpZDogei5zdHJpbmcoKSxcbiAgICAgICAgdXNlcm5hbWU6IHouc3RyaW5nKCksXG4gICAgICAgIGdsb2JhbF9uYW1lOiB6LnVuaW9uKFt6LnN0cmluZygpLCB6Lm51bGwoKV0pLm9wdGlvbmFsKCksXG4gICAgICAgIGRpc2NyaW1pbmF0b3I6IHouc3RyaW5nKCksXG4gICAgICAgIGF2YXRhcjogei51bmlvbihbei5zdHJpbmcoKSwgei5udWxsKCldKS5vcHRpb25hbCgpLFxuICAgICAgICBmbGFnczogei5udW1iZXIoKSxcbiAgICAgICAgYm90OiB6LmJvb2xlYW4oKSxcbiAgICAgICAgYXZhdGFyX2RlY29yYXRpb25fZGF0YTogelxuICAgICAgICAgICAgLnVuaW9uKFtcbiAgICAgICAgICAgIHoub2JqZWN0KHsgYXNzZXQ6IHouc3RyaW5nKCksIHNrdUlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksIGV4cGlyZXNBdDogei5udW1iZXIoKS5vcHRpb25hbCgpIH0pLFxuICAgICAgICAgICAgei5udWxsKCksXG4gICAgICAgIF0pXG4gICAgICAgICAgICAub3B0aW9uYWwoKSxcbiAgICAgICAgcHJlbWl1bV90eXBlOiB6LnVuaW9uKFt6Lm51bWJlcigpLCB6Lm51bGwoKV0pLm9wdGlvbmFsKCksXG4gICAgICAgIG5pY2tuYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgfSkpLFxufSk7XG4vLyBTSEFSRV9JTlRFUkFDVElPTlxuY29uc3QgU2hhcmVJbnRlcmFjdGlvblJlcXVlc3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgY29tbWFuZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50OiB6LnN0cmluZygpLm1heCgyMDAwKS5vcHRpb25hbCgpLFxuICAgIHJlcXVpcmVfbGF1bmNoX2NoYW5uZWw6IHouYm9vbGVhbigpLm9wdGlvbmFsKCksXG4gICAgcHJldmlld19pbWFnZTogei5vYmplY3QoeyBoZWlnaHQ6IHoubnVtYmVyKCksIHVybDogei5zdHJpbmcoKSwgd2lkdGg6IHoubnVtYmVyKCkgfSkub3B0aW9uYWwoKSxcbiAgICBjb21wb25lbnRzOiB6XG4gICAgICAgIC5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgIHR5cGU6IHoubGl0ZXJhbCgxKSxcbiAgICAgICAgY29tcG9uZW50czogelxuICAgICAgICAgICAgLmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgICAgIHR5cGU6IHoubGl0ZXJhbCgyKSxcbiAgICAgICAgICAgIHN0eWxlOiB6Lm51bWJlcigpLmd0ZSgxKS5sdGUoNSksXG4gICAgICAgICAgICBsYWJlbDogei5zdHJpbmcoKS5tYXgoODApLm9wdGlvbmFsKCksXG4gICAgICAgICAgICBjdXN0b21faWQ6IHpcbiAgICAgICAgICAgICAgICAuc3RyaW5nKClcbiAgICAgICAgICAgICAgICAubWF4KDEwMClcbiAgICAgICAgICAgICAgICAuZGVzY3JpYmUoJ0RldmVsb3Blci1kZWZpbmVkIGlkZW50aWZpZXIgZm9yIHRoZSBidXR0b247IG1heCAxMDAgY2hhcmFjdGVycycpXG4gICAgICAgICAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgICAgIH0pKVxuICAgICAgICAgICAgLm1heCg1KVxuICAgICAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgfSkpXG4gICAgICAgIC5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBTaGFyZUludGVyYWN0aW9uUmVzcG9uc2VTY2hlbWEgPSB6Lm9iamVjdCh7IHN1Y2Nlc3M6IHouYm9vbGVhbigpIH0pO1xuLy8gU0hBUkVfTElOS1xuY29uc3QgU2hhcmVMaW5rUmVxdWVzdFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBjdXN0b21faWQ6IHouc3RyaW5nKCkubWF4KDY0KS5vcHRpb25hbCgpLFxuICAgIG1lc3NhZ2U6IHouc3RyaW5nKCkubWF4KDEwMDApLFxuICAgIGxpbmtfaWQ6IHouc3RyaW5nKCkubWF4KDY0KS5vcHRpb25hbCgpLFxufSk7XG5jb25zdCBTaGFyZUxpbmtSZXNwb25zZVNjaGVtYSA9IHoub2JqZWN0KHtcbiAgICBzdWNjZXNzOiB6LmJvb2xlYW4oKSxcbiAgICBkaWRDb3B5TGluazogei5ib29sZWFuKCksXG4gICAgZGlkU2VuZE1lc3NhZ2U6IHouYm9vbGVhbigpLFxufSk7XG4vLyBHRVRfUkVMQVRJT05TSElQU1xuY29uc3QgR2V0UmVsYXRpb25zaGlwc1Jlc3BvbnNlU2NoZW1hID0gei5vYmplY3Qoe1xuICAgIHJlbGF0aW9uc2hpcHM6IHouYXJyYXkoei5vYmplY3Qoe1xuICAgICAgICB0eXBlOiB6Lm51bWJlcigpLFxuICAgICAgICB1c2VyOiB6Lm9iamVjdCh7XG4gICAgICAgICAgICBpZDogei5zdHJpbmcoKSxcbiAgICAgICAgICAgIHVzZXJuYW1lOiB6LnN0cmluZygpLFxuICAgICAgICAgICAgZ2xvYmFsX25hbWU6IHoudW5pb24oW3ouc3RyaW5nKCksIHoubnVsbCgpXSkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgIGRpc2NyaW1pbmF0b3I6IHouc3RyaW5nKCksXG4gICAgICAgICAgICBhdmF0YXI6IHoudW5pb24oW3ouc3RyaW5nKCksIHoubnVsbCgpXSkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgIGZsYWdzOiB6Lm51bWJlcigpLFxuICAgICAgICAgICAgYm90OiB6LmJvb2xlYW4oKSxcbiAgICAgICAgICAgIGF2YXRhcl9kZWNvcmF0aW9uX2RhdGE6IHpcbiAgICAgICAgICAgICAgICAudW5pb24oW1xuICAgICAgICAgICAgICAgIHoub2JqZWN0KHsgYXNzZXQ6IHouc3RyaW5nKCksIHNrdUlkOiB6LnN0cmluZygpLm9wdGlvbmFsKCksIGV4cGlyZXNBdDogei5udW1iZXIoKS5vcHRpb25hbCgpIH0pLFxuICAgICAgICAgICAgICAgIHoubnVsbCgpLFxuICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAub3B0aW9uYWwoKSxcbiAgICAgICAgICAgIHByZW1pdW1fdHlwZTogei51bmlvbihbei5udW1iZXIoKSwgei5udWxsKCldKS5vcHRpb25hbCgpLFxuICAgICAgICB9KSxcbiAgICAgICAgcHJlc2VuY2U6IHpcbiAgICAgICAgICAgIC5vYmplY3Qoe1xuICAgICAgICAgICAgc3RhdHVzOiB6LnN0cmluZygpLFxuICAgICAgICAgICAgYWN0aXZpdHk6IHpcbiAgICAgICAgICAgICAgICAudW5pb24oW1xuICAgICAgICAgICAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbl9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiB6Lm51bWJlcigpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgIHVybDogei51bmlvbihbei5zdHJpbmcoKSwgei5udWxsKCldKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbl9pZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgICAgICBzdGF0ZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgICAgICBkZXRhaWxzOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgICAgIGVtb2ppOiB6XG4gICAgICAgICAgICAgICAgICAgICAgICAudW5pb24oW1xuICAgICAgICAgICAgICAgICAgICAgICAgei5vYmplY3Qoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHouc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHoudW5pb24oW3ouc3RyaW5nKCksIHoubnVsbCgpXSkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRlZDogei51bmlvbihbei5ib29sZWFuKCksIHoubnVsbCgpXSkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgei5udWxsKCksXG4gICAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRzOiB6XG4gICAgICAgICAgICAgICAgICAgICAgICAub2JqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhcmdlX2ltYWdlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXJnZV90ZXh0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBzbWFsbF9pbWFnZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgc21hbGxfdGV4dDogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcHM6IHoub2JqZWN0KHsgc3RhcnQ6IHoubnVtYmVyKCkub3B0aW9uYWwoKSwgZW5kOiB6Lm51bWJlcigpLm9wdGlvbmFsKCkgfSkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICAgICAgcGFydHk6IHpcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vYmplY3Qoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IHouYXJyYXkoei5udW1iZXIoKSkubWluKDIpLm1heCgyKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpdmFjeTogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgICAgIHNlY3JldHM6IHoub2JqZWN0KHsgbWF0Y2g6IHouc3RyaW5nKCkub3B0aW9uYWwoKSwgam9pbjogei5zdHJpbmcoKS5vcHRpb25hbCgpIH0pLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgICAgIHN5bmNfaWQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZF9hdDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZTogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICAgICAgZmxhZ3M6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IHoub2JqZWN0KHt9KS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgICAgICBwbGF0Zm9ybTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgICAgICBzdXBwb3J0ZWRfcGxhdGZvcm1zOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbnM6IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICAgICAgaGFuZ1N0YXR1czogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHoubnVsbCgpLFxuICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAub3B0aW9uYWwoKSxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5vcHRpb25hbCgpLFxuICAgIH0pKSxcbn0pO1xuLy8gSU5WSVRFX1VTRVJfRU1CRURERURcbmNvbnN0IEludml0ZVVzZXJFbWJlZGRlZFJlcXVlc3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gICAgdXNlcl9pZDogei5zdHJpbmcoKSxcbiAgICBjb250ZW50OiB6LnN0cmluZygpLm1pbigwKS5tYXgoMTAyNCkub3B0aW9uYWwoKSxcbn0pO1xuLy8gR0VUX1VTRVJcbmNvbnN0IEdldFVzZXJSZXF1ZXN0U2NoZW1hID0gei5vYmplY3QoeyBpZDogei5zdHJpbmcoKS5tYXgoNjQpIH0pO1xuY29uc3QgR2V0VXNlclJlc3BvbnNlU2NoZW1hID0gei51bmlvbihbXG4gICAgei5vYmplY3Qoe1xuICAgICAgICBpZDogei5zdHJpbmcoKSxcbiAgICAgICAgdXNlcm5hbWU6IHouc3RyaW5nKCksXG4gICAgICAgIGdsb2JhbF9uYW1lOiB6LnVuaW9uKFt6LnN0cmluZygpLCB6Lm51bGwoKV0pLm9wdGlvbmFsKCksXG4gICAgICAgIGRpc2NyaW1pbmF0b3I6IHouc3RyaW5nKCksXG4gICAgICAgIGF2YXRhcjogei51bmlvbihbei5zdHJpbmcoKSwgei5udWxsKCldKS5vcHRpb25hbCgpLFxuICAgICAgICBmbGFnczogei5udW1iZXIoKSxcbiAgICAgICAgYm90OiB6LmJvb2xlYW4oKSxcbiAgICAgICAgYXZhdGFyX2RlY29yYXRpb25fZGF0YTogelxuICAgICAgICAgICAgLnVuaW9uKFt6Lm9iamVjdCh7IGFzc2V0OiB6LnN0cmluZygpLCBza3VJZDogei5zdHJpbmcoKS5vcHRpb25hbCgpLCBleHBpcmVzQXQ6IHoubnVtYmVyKCkub3B0aW9uYWwoKSB9KSwgei5udWxsKCldKVxuICAgICAgICAgICAgLm9wdGlvbmFsKCksXG4gICAgICAgIHByZW1pdW1fdHlwZTogei51bmlvbihbei5udW1iZXIoKSwgei5udWxsKCldKS5vcHRpb25hbCgpLFxuICAgIH0pLFxuICAgIHoubnVsbCgpLFxuXSk7XG4vKipcbiAqIFJQQyBDb21tYW5kcyB3aGljaCBzdXBwb3J0IHNjaGVtYXMuXG4gKi9cbnZhciBDb21tYW5kO1xuKGZ1bmN0aW9uIChDb21tYW5kKSB7XG4gICAgQ29tbWFuZFtcIklOSVRJQVRFX0lNQUdFX1VQTE9BRFwiXSA9IFwiSU5JVElBVEVfSU1BR0VfVVBMT0FEXCI7XG4gICAgQ29tbWFuZFtcIk9QRU5fU0hBUkVfTU9NRU5UX0RJQUxPR1wiXSA9IFwiT1BFTl9TSEFSRV9NT01FTlRfRElBTE9HXCI7XG4gICAgQ29tbWFuZFtcIkFVVEhFTlRJQ0FURVwiXSA9IFwiQVVUSEVOVElDQVRFXCI7XG4gICAgQ29tbWFuZFtcIkdFVF9BQ1RJVklUWV9JTlNUQU5DRV9DT05ORUNURURfUEFSVElDSVBBTlRTXCJdID0gXCJHRVRfQUNUSVZJVFlfSU5TVEFOQ0VfQ09OTkVDVEVEX1BBUlRJQ0lQQU5UU1wiO1xuICAgIENvbW1hbmRbXCJTSEFSRV9JTlRFUkFDVElPTlwiXSA9IFwiU0hBUkVfSU5URVJBQ1RJT05cIjtcbiAgICBDb21tYW5kW1wiU0hBUkVfTElOS1wiXSA9IFwiU0hBUkVfTElOS1wiO1xuICAgIENvbW1hbmRbXCJHRVRfUkVMQVRJT05TSElQU1wiXSA9IFwiR0VUX1JFTEFUSU9OU0hJUFNcIjtcbiAgICBDb21tYW5kW1wiSU5WSVRFX1VTRVJfRU1CRURERURcIl0gPSBcIklOVklURV9VU0VSX0VNQkVEREVEXCI7XG4gICAgQ29tbWFuZFtcIkdFVF9VU0VSXCJdID0gXCJHRVRfVVNFUlwiO1xufSkoQ29tbWFuZCB8fCAoQ29tbWFuZCA9IHt9KSk7XG5jb25zdCBlbXB0eVJlc3BvbnNlU2NoZW1hID0gei5vYmplY3Qoe30pLm9wdGlvbmFsKCkubnVsbGFibGUoKTtcbmNvbnN0IGVtcHR5UmVxdWVzdFNjaGVtYSA9IHoudm9pZCgpO1xuLyoqXG4gKiBSZXF1ZXN0ICYgUmVzcG9uc2Ugc2NoZW1hcyBmb3IgZWFjaCBzdXBwb3J0ZWQgUlBDIENvbW1hbmQuXG4gKi9cbmNvbnN0IFNjaGVtYXMgPSB7XG4gICAgW0NvbW1hbmQuSU5JVElBVEVfSU1BR0VfVVBMT0FEXToge1xuICAgICAgICByZXF1ZXN0OiBlbXB0eVJlcXVlc3RTY2hlbWEsXG4gICAgICAgIHJlc3BvbnNlOiBJbml0aWF0ZUltYWdlVXBsb2FkUmVzcG9uc2VTY2hlbWEsXG4gICAgfSxcbiAgICBbQ29tbWFuZC5PUEVOX1NIQVJFX01PTUVOVF9ESUFMT0ddOiB7XG4gICAgICAgIHJlcXVlc3Q6IE9wZW5TaGFyZU1vbWVudERpYWxvZ1JlcXVlc3RTY2hlbWEsXG4gICAgICAgIHJlc3BvbnNlOiBlbXB0eVJlc3BvbnNlU2NoZW1hLFxuICAgIH0sXG4gICAgW0NvbW1hbmQuQVVUSEVOVElDQVRFXToge1xuICAgICAgICByZXF1ZXN0OiBBdXRoZW50aWNhdGVSZXF1ZXN0U2NoZW1hLFxuICAgICAgICByZXNwb25zZTogQXV0aGVudGljYXRlUmVzcG9uc2VTY2hlbWEsXG4gICAgfSxcbiAgICBbQ29tbWFuZC5HRVRfQUNUSVZJVFlfSU5TVEFOQ0VfQ09OTkVDVEVEX1BBUlRJQ0lQQU5UU106IHtcbiAgICAgICAgcmVxdWVzdDogZW1wdHlSZXF1ZXN0U2NoZW1hLFxuICAgICAgICByZXNwb25zZTogR2V0QWN0aXZpdHlJbnN0YW5jZUNvbm5lY3RlZFBhcnRpY2lwYW50c1Jlc3BvbnNlU2NoZW1hLFxuICAgIH0sXG4gICAgW0NvbW1hbmQuU0hBUkVfSU5URVJBQ1RJT05dOiB7XG4gICAgICAgIHJlcXVlc3Q6IFNoYXJlSW50ZXJhY3Rpb25SZXF1ZXN0U2NoZW1hLFxuICAgICAgICByZXNwb25zZTogU2hhcmVJbnRlcmFjdGlvblJlc3BvbnNlU2NoZW1hLFxuICAgIH0sXG4gICAgW0NvbW1hbmQuU0hBUkVfTElOS106IHtcbiAgICAgICAgcmVxdWVzdDogU2hhcmVMaW5rUmVxdWVzdFNjaGVtYSxcbiAgICAgICAgcmVzcG9uc2U6IFNoYXJlTGlua1Jlc3BvbnNlU2NoZW1hLFxuICAgIH0sXG4gICAgW0NvbW1hbmQuR0VUX1JFTEFUSU9OU0hJUFNdOiB7XG4gICAgICAgIHJlcXVlc3Q6IGVtcHR5UmVxdWVzdFNjaGVtYSxcbiAgICAgICAgcmVzcG9uc2U6IEdldFJlbGF0aW9uc2hpcHNSZXNwb25zZVNjaGVtYSxcbiAgICB9LFxuICAgIFtDb21tYW5kLklOVklURV9VU0VSX0VNQkVEREVEXToge1xuICAgICAgICByZXF1ZXN0OiBJbnZpdGVVc2VyRW1iZWRkZWRSZXF1ZXN0U2NoZW1hLFxuICAgICAgICByZXNwb25zZTogZW1wdHlSZXNwb25zZVNjaGVtYSxcbiAgICB9LFxuICAgIFtDb21tYW5kLkdFVF9VU0VSXToge1xuICAgICAgICByZXF1ZXN0OiBHZXRVc2VyUmVxdWVzdFNjaGVtYSxcbiAgICAgICAgcmVzcG9uc2U6IEdldFVzZXJSZXNwb25zZVNjaGVtYSxcbiAgICB9LFxufTtcblxuZXhwb3J0IHsgQXV0aGVudGljYXRlUmVxdWVzdFNjaGVtYSwgQXV0aGVudGljYXRlUmVzcG9uc2VTY2hlbWEsIENvbW1hbmQsIEdldEFjdGl2aXR5SW5zdGFuY2VDb25uZWN0ZWRQYXJ0aWNpcGFudHNSZXNwb25zZVNjaGVtYSwgR2V0UmVsYXRpb25zaGlwc1Jlc3BvbnNlU2NoZW1hLCBHZXRVc2VyUmVxdWVzdFNjaGVtYSwgR2V0VXNlclJlc3BvbnNlU2NoZW1hLCBJbml0aWF0ZUltYWdlVXBsb2FkUmVzcG9uc2VTY2hlbWEsIEludml0ZVVzZXJFbWJlZGRlZFJlcXVlc3RTY2hlbWEsIE9wZW5TaGFyZU1vbWVudERpYWxvZ1JlcXVlc3RTY2hlbWEsIFNjaGVtYXMsIFNoYXJlSW50ZXJhY3Rpb25SZXF1ZXN0U2NoZW1hLCBTaGFyZUludGVyYWN0aW9uUmVzcG9uc2VTY2hlbWEsIFNoYXJlTGlua1JlcXVlc3RTY2hlbWEsIFNoYXJlTGlua1Jlc3BvbnNlU2NoZW1hIH07XG4iLCJleHBvcnQgeyBEaXNjb3JkU0RLIH0gZnJvbSAnLi9EaXNjb3JkLm1qcyc7XG5leHBvcnQgeyBFdmVudHMgfSBmcm9tICcuL3NjaGVtYS9ldmVudHMubWpzJztcbmltcG9ydCAqIGFzIGNvbW1vbiBmcm9tICcuL3NjaGVtYS9jb21tb24ubWpzJztcbmltcG9ydCAqIGFzIHJlc3BvbnNlcyBmcm9tICcuL3NjaGVtYS9yZXNwb25zZXMubWpzJztcbmV4cG9ydCB7IHJlc3BvbnNlcyBhcyBSZXNwb25zZXMgfTtcbmV4cG9ydCB7IE9yaWVudGF0aW9uLCBQZXJtaXNzaW9ucywgUGxhdGZvcm0sIFJQQ0Nsb3NlQ29kZXMsIFJQQ0Vycm9yQ29kZXMgfSBmcm9tICcuL0NvbnN0YW50cy5tanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBQZXJtaXNzaW9uVXRpbHMgfSBmcm9tICcuL3V0aWxzL1Blcm1pc3Npb25VdGlscy5tanMnO1xuZXhwb3J0IHsgZGVmYXVsdCBhcyBQcmljZVV0aWxzIH0gZnJvbSAnLi91dGlscy9QcmljZVV0aWxzLm1qcyc7XG5leHBvcnQgeyBEaXNjb3JkU0RLTW9jayB9IGZyb20gJy4vbW9jay5tanMnO1xuZXhwb3J0IHsgYXR0ZW1wdFJlbWFwLCBwYXRjaFVybE1hcHBpbmdzIH0gZnJvbSAnLi91dGlscy9wYXRjaFVybE1hcHBpbmdzLm1qcyc7XG5cbmNvbnN0IHsgQ29tbWFuZHMgfSA9IGNvbW1vbjtcblxuZXhwb3J0IHsgQ29tbWFuZHMsIGNvbW1vbiBhcyBDb21tb24gfTtcbiIsImltcG9ydCB7IF9fbW9kdWxlIGFzIEJpZ0ludGVnZXIgfSBmcm9tICcuLi8uLi9fdmlydHVhbC9CaWdJbnRlZ2VyMi5tanMnO1xuXG52YXIgaGFzUmVxdWlyZWRCaWdJbnRlZ2VyO1xuXG5mdW5jdGlvbiByZXF1aXJlQmlnSW50ZWdlciAoKSB7XG5cdGlmIChoYXNSZXF1aXJlZEJpZ0ludGVnZXIpIHJldHVybiBCaWdJbnRlZ2VyLmV4cG9ydHM7XG5cdGhhc1JlcXVpcmVkQmlnSW50ZWdlciA9IDE7XG5cdChmdW5jdGlvbiAobW9kdWxlKSB7XG5cdFx0dmFyIGJpZ0ludCA9IChmdW5jdGlvbiAodW5kZWZpbmVkJDEpIHtcclxuXHJcblx0XHQgICAgdmFyIEJBU0UgPSAxZTcsXHJcblx0XHQgICAgICAgIExPR19CQVNFID0gNyxcclxuXHRcdCAgICAgICAgTUFYX0lOVCA9IDkwMDcxOTkyNTQ3NDA5OTIsXHJcblx0XHQgICAgICAgIE1BWF9JTlRfQVJSID0gc21hbGxUb0FycmF5KE1BWF9JTlQpLFxyXG5cdFx0ICAgICAgICBERUZBVUxUX0FMUEhBQkVUID0gXCIwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpcIjtcclxuXHJcblx0XHQgICAgdmFyIHN1cHBvcnRzTmF0aXZlQmlnSW50ID0gdHlwZW9mIEJpZ0ludCA9PT0gXCJmdW5jdGlvblwiO1xyXG5cclxuXHRcdCAgICBmdW5jdGlvbiBJbnRlZ2VyKHYsIHJhZGl4LCBhbHBoYWJldCwgY2FzZVNlbnNpdGl2ZSkge1xyXG5cdFx0ICAgICAgICBpZiAodHlwZW9mIHYgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBJbnRlZ2VyWzBdO1xyXG5cdFx0ICAgICAgICBpZiAodHlwZW9mIHJhZGl4ICE9PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gK3JhZGl4ID09PSAxMCAmJiAhYWxwaGFiZXQgPyBwYXJzZVZhbHVlKHYpIDogcGFyc2VCYXNlKHYsIHJhZGl4LCBhbHBoYWJldCwgY2FzZVNlbnNpdGl2ZSk7XHJcblx0XHQgICAgICAgIHJldHVybiBwYXJzZVZhbHVlKHYpO1xyXG5cdFx0ICAgIH1cclxuXHJcblx0XHQgICAgZnVuY3Rpb24gQmlnSW50ZWdlcih2YWx1ZSwgc2lnbikge1xyXG5cdFx0ICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcblx0XHQgICAgICAgIHRoaXMuc2lnbiA9IHNpZ247XHJcblx0XHQgICAgICAgIHRoaXMuaXNTbWFsbCA9IGZhbHNlO1xyXG5cdFx0ICAgIH1cclxuXHRcdCAgICBCaWdJbnRlZ2VyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSW50ZWdlci5wcm90b3R5cGUpO1xyXG5cclxuXHRcdCAgICBmdW5jdGlvbiBTbWFsbEludGVnZXIodmFsdWUpIHtcclxuXHRcdCAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG5cdFx0ICAgICAgICB0aGlzLnNpZ24gPSB2YWx1ZSA8IDA7XHJcblx0XHQgICAgICAgIHRoaXMuaXNTbWFsbCA9IHRydWU7XHJcblx0XHQgICAgfVxyXG5cdFx0ICAgIFNtYWxsSW50ZWdlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEludGVnZXIucHJvdG90eXBlKTtcclxuXHJcblx0XHQgICAgZnVuY3Rpb24gTmF0aXZlQmlnSW50KHZhbHVlKSB7XHJcblx0XHQgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuXHRcdCAgICB9XHJcblx0XHQgICAgTmF0aXZlQmlnSW50LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSW50ZWdlci5wcm90b3R5cGUpO1xyXG5cclxuXHRcdCAgICBmdW5jdGlvbiBpc1ByZWNpc2Uobikge1xyXG5cdFx0ICAgICAgICByZXR1cm4gLU1BWF9JTlQgPCBuICYmIG4gPCBNQVhfSU5UO1xyXG5cdFx0ICAgIH1cclxuXHJcblx0XHQgICAgZnVuY3Rpb24gc21hbGxUb0FycmF5KG4pIHsgLy8gRm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMgZG9lc24ndCByZWZlcmVuY2UgQkFTRSwgbmVlZCB0byBjaGFuZ2UgdGhpcyBmdW5jdGlvbiBpZiBCQVNFIGNoYW5nZXNcclxuXHRcdCAgICAgICAgaWYgKG4gPCAxZTcpXHJcblx0XHQgICAgICAgICAgICByZXR1cm4gW25dO1xyXG5cdFx0ICAgICAgICBpZiAobiA8IDFlMTQpXHJcblx0XHQgICAgICAgICAgICByZXR1cm4gW24gJSAxZTcsIE1hdGguZmxvb3IobiAvIDFlNyldO1xyXG5cdFx0ICAgICAgICByZXR1cm4gW24gJSAxZTcsIE1hdGguZmxvb3IobiAvIDFlNykgJSAxZTcsIE1hdGguZmxvb3IobiAvIDFlMTQpXTtcclxuXHRcdCAgICB9XHJcblxyXG5cdFx0ICAgIGZ1bmN0aW9uIGFycmF5VG9TbWFsbChhcnIpIHsgLy8gSWYgQkFTRSBjaGFuZ2VzIHRoaXMgZnVuY3Rpb24gbWF5IG5lZWQgdG8gY2hhbmdlXHJcblx0XHQgICAgICAgIHRyaW0oYXJyKTtcclxuXHRcdCAgICAgICAgdmFyIGxlbmd0aCA9IGFyci5sZW5ndGg7XHJcblx0XHQgICAgICAgIGlmIChsZW5ndGggPCA0ICYmIGNvbXBhcmVBYnMoYXJyLCBNQVhfSU5UX0FSUikgPCAwKSB7XHJcblx0XHQgICAgICAgICAgICBzd2l0Y2ggKGxlbmd0aCkge1xyXG5cdFx0ICAgICAgICAgICAgICAgIGNhc2UgMDogcmV0dXJuIDA7XHJcblx0XHQgICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gYXJyWzBdO1xyXG5cdFx0ICAgICAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIGFyclswXSArIGFyclsxXSAqIEJBU0U7XHJcblx0XHQgICAgICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuIGFyclswXSArIChhcnJbMV0gKyBhcnJbMl0gKiBCQVNFKSAqIEJBU0U7XHJcblx0XHQgICAgICAgICAgICB9XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgcmV0dXJuIGFycjtcclxuXHRcdCAgICB9XHJcblxyXG5cdFx0ICAgIGZ1bmN0aW9uIHRyaW0odikge1xyXG5cdFx0ICAgICAgICB2YXIgaSA9IHYubGVuZ3RoO1xyXG5cdFx0ICAgICAgICB3aGlsZSAodlstLWldID09PSAwKTtcclxuXHRcdCAgICAgICAgdi5sZW5ndGggPSBpICsgMTtcclxuXHRcdCAgICB9XHJcblxyXG5cdFx0ICAgIGZ1bmN0aW9uIGNyZWF0ZUFycmF5KGxlbmd0aCkgeyAvLyBmdW5jdGlvbiBzaGFtZWxlc3NseSBzdG9sZW4gZnJvbSBZYWZmbGUncyBsaWJyYXJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9ZYWZmbGUvQmlnSW50ZWdlclxyXG5cdFx0ICAgICAgICB2YXIgeCA9IG5ldyBBcnJheShsZW5ndGgpO1xyXG5cdFx0ICAgICAgICB2YXIgaSA9IC0xO1xyXG5cdFx0ICAgICAgICB3aGlsZSAoKytpIDwgbGVuZ3RoKSB7XHJcblx0XHQgICAgICAgICAgICB4W2ldID0gMDtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICByZXR1cm4geDtcclxuXHRcdCAgICB9XHJcblxyXG5cdFx0ICAgIGZ1bmN0aW9uIHRydW5jYXRlKG4pIHtcclxuXHRcdCAgICAgICAgaWYgKG4gPiAwKSByZXR1cm4gTWF0aC5mbG9vcihuKTtcclxuXHRcdCAgICAgICAgcmV0dXJuIE1hdGguY2VpbChuKTtcclxuXHRcdCAgICB9XHJcblxyXG5cdFx0ICAgIGZ1bmN0aW9uIGFkZChhLCBiKSB7IC8vIGFzc3VtZXMgYSBhbmQgYiBhcmUgYXJyYXlzIHdpdGggYS5sZW5ndGggPj0gYi5sZW5ndGhcclxuXHRcdCAgICAgICAgdmFyIGxfYSA9IGEubGVuZ3RoLFxyXG5cdFx0ICAgICAgICAgICAgbF9iID0gYi5sZW5ndGgsXHJcblx0XHQgICAgICAgICAgICByID0gbmV3IEFycmF5KGxfYSksXHJcblx0XHQgICAgICAgICAgICBjYXJyeSA9IDAsXHJcblx0XHQgICAgICAgICAgICBiYXNlID0gQkFTRSxcclxuXHRcdCAgICAgICAgICAgIHN1bSwgaTtcclxuXHRcdCAgICAgICAgZm9yIChpID0gMDsgaSA8IGxfYjsgaSsrKSB7XHJcblx0XHQgICAgICAgICAgICBzdW0gPSBhW2ldICsgYltpXSArIGNhcnJ5O1xyXG5cdFx0ICAgICAgICAgICAgY2FycnkgPSBzdW0gPj0gYmFzZSA/IDEgOiAwO1xyXG5cdFx0ICAgICAgICAgICAgcltpXSA9IHN1bSAtIGNhcnJ5ICogYmFzZTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICB3aGlsZSAoaSA8IGxfYSkge1xyXG5cdFx0ICAgICAgICAgICAgc3VtID0gYVtpXSArIGNhcnJ5O1xyXG5cdFx0ICAgICAgICAgICAgY2FycnkgPSBzdW0gPT09IGJhc2UgPyAxIDogMDtcclxuXHRcdCAgICAgICAgICAgIHJbaSsrXSA9IHN1bSAtIGNhcnJ5ICogYmFzZTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICBpZiAoY2FycnkgPiAwKSByLnB1c2goY2FycnkpO1xyXG5cdFx0ICAgICAgICByZXR1cm4gcjtcclxuXHRcdCAgICB9XHJcblxyXG5cdFx0ICAgIGZ1bmN0aW9uIGFkZEFueShhLCBiKSB7XHJcblx0XHQgICAgICAgIGlmIChhLmxlbmd0aCA+PSBiLmxlbmd0aCkgcmV0dXJuIGFkZChhLCBiKTtcclxuXHRcdCAgICAgICAgcmV0dXJuIGFkZChiLCBhKTtcclxuXHRcdCAgICB9XHJcblxyXG5cdFx0ICAgIGZ1bmN0aW9uIGFkZFNtYWxsKGEsIGNhcnJ5KSB7IC8vIGFzc3VtZXMgYSBpcyBhcnJheSwgY2FycnkgaXMgbnVtYmVyIHdpdGggMCA8PSBjYXJyeSA8IE1BWF9JTlRcclxuXHRcdCAgICAgICAgdmFyIGwgPSBhLmxlbmd0aCxcclxuXHRcdCAgICAgICAgICAgIHIgPSBuZXcgQXJyYXkobCksXHJcblx0XHQgICAgICAgICAgICBiYXNlID0gQkFTRSxcclxuXHRcdCAgICAgICAgICAgIHN1bSwgaTtcclxuXHRcdCAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xyXG5cdFx0ICAgICAgICAgICAgc3VtID0gYVtpXSAtIGJhc2UgKyBjYXJyeTtcclxuXHRcdCAgICAgICAgICAgIGNhcnJ5ID0gTWF0aC5mbG9vcihzdW0gLyBiYXNlKTtcclxuXHRcdCAgICAgICAgICAgIHJbaV0gPSBzdW0gLSBjYXJyeSAqIGJhc2U7XHJcblx0XHQgICAgICAgICAgICBjYXJyeSArPSAxO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIHdoaWxlIChjYXJyeSA+IDApIHtcclxuXHRcdCAgICAgICAgICAgIHJbaSsrXSA9IGNhcnJ5ICUgYmFzZTtcclxuXHRcdCAgICAgICAgICAgIGNhcnJ5ID0gTWF0aC5mbG9vcihjYXJyeSAvIGJhc2UpO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIHJldHVybiByO1xyXG5cdFx0ICAgIH1cclxuXHJcblx0XHQgICAgQmlnSW50ZWdlci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHYpIHtcclxuXHRcdCAgICAgICAgdmFyIG4gPSBwYXJzZVZhbHVlKHYpO1xyXG5cdFx0ICAgICAgICBpZiAodGhpcy5zaWduICE9PSBuLnNpZ24pIHtcclxuXHRcdCAgICAgICAgICAgIHJldHVybiB0aGlzLnN1YnRyYWN0KG4ubmVnYXRlKCkpO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIHZhciBhID0gdGhpcy52YWx1ZSwgYiA9IG4udmFsdWU7XHJcblx0XHQgICAgICAgIGlmIChuLmlzU21hbGwpIHtcclxuXHRcdCAgICAgICAgICAgIHJldHVybiBuZXcgQmlnSW50ZWdlcihhZGRTbWFsbChhLCBNYXRoLmFicyhiKSksIHRoaXMuc2lnbik7XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgcmV0dXJuIG5ldyBCaWdJbnRlZ2VyKGFkZEFueShhLCBiKSwgdGhpcy5zaWduKTtcclxuXHRcdCAgICB9O1xyXG5cdFx0ICAgIEJpZ0ludGVnZXIucHJvdG90eXBlLnBsdXMgPSBCaWdJbnRlZ2VyLnByb3RvdHlwZS5hZGQ7XHJcblxyXG5cdFx0ICAgIFNtYWxsSW50ZWdlci5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHYpIHtcclxuXHRcdCAgICAgICAgdmFyIG4gPSBwYXJzZVZhbHVlKHYpO1xyXG5cdFx0ICAgICAgICB2YXIgYSA9IHRoaXMudmFsdWU7XHJcblx0XHQgICAgICAgIGlmIChhIDwgMCAhPT0gbi5zaWduKSB7XHJcblx0XHQgICAgICAgICAgICByZXR1cm4gdGhpcy5zdWJ0cmFjdChuLm5lZ2F0ZSgpKTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICB2YXIgYiA9IG4udmFsdWU7XHJcblx0XHQgICAgICAgIGlmIChuLmlzU21hbGwpIHtcclxuXHRcdCAgICAgICAgICAgIGlmIChpc1ByZWNpc2UoYSArIGIpKSByZXR1cm4gbmV3IFNtYWxsSW50ZWdlcihhICsgYik7XHJcblx0XHQgICAgICAgICAgICBiID0gc21hbGxUb0FycmF5KE1hdGguYWJzKGIpKTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICByZXR1cm4gbmV3IEJpZ0ludGVnZXIoYWRkU21hbGwoYiwgTWF0aC5hYnMoYSkpLCBhIDwgMCk7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBTbWFsbEludGVnZXIucHJvdG90eXBlLnBsdXMgPSBTbWFsbEludGVnZXIucHJvdG90eXBlLmFkZDtcclxuXHJcblx0XHQgICAgTmF0aXZlQmlnSW50LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodikge1xyXG5cdFx0ICAgICAgICByZXR1cm4gbmV3IE5hdGl2ZUJpZ0ludCh0aGlzLnZhbHVlICsgcGFyc2VWYWx1ZSh2KS52YWx1ZSk7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBOYXRpdmVCaWdJbnQucHJvdG90eXBlLnBsdXMgPSBOYXRpdmVCaWdJbnQucHJvdG90eXBlLmFkZDtcclxuXHJcblx0XHQgICAgZnVuY3Rpb24gc3VidHJhY3QoYSwgYikgeyAvLyBhc3N1bWVzIGEgYW5kIGIgYXJlIGFycmF5cyB3aXRoIGEgPj0gYlxyXG5cdFx0ICAgICAgICB2YXIgYV9sID0gYS5sZW5ndGgsXHJcblx0XHQgICAgICAgICAgICBiX2wgPSBiLmxlbmd0aCxcclxuXHRcdCAgICAgICAgICAgIHIgPSBuZXcgQXJyYXkoYV9sKSxcclxuXHRcdCAgICAgICAgICAgIGJvcnJvdyA9IDAsXHJcblx0XHQgICAgICAgICAgICBiYXNlID0gQkFTRSxcclxuXHRcdCAgICAgICAgICAgIGksIGRpZmZlcmVuY2U7XHJcblx0XHQgICAgICAgIGZvciAoaSA9IDA7IGkgPCBiX2w7IGkrKykge1xyXG5cdFx0ICAgICAgICAgICAgZGlmZmVyZW5jZSA9IGFbaV0gLSBib3Jyb3cgLSBiW2ldO1xyXG5cdFx0ICAgICAgICAgICAgaWYgKGRpZmZlcmVuY2UgPCAwKSB7XHJcblx0XHQgICAgICAgICAgICAgICAgZGlmZmVyZW5jZSArPSBiYXNlO1xyXG5cdFx0ICAgICAgICAgICAgICAgIGJvcnJvdyA9IDE7XHJcblx0XHQgICAgICAgICAgICB9IGVsc2UgYm9ycm93ID0gMDtcclxuXHRcdCAgICAgICAgICAgIHJbaV0gPSBkaWZmZXJlbmNlO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIGZvciAoaSA9IGJfbDsgaSA8IGFfbDsgaSsrKSB7XHJcblx0XHQgICAgICAgICAgICBkaWZmZXJlbmNlID0gYVtpXSAtIGJvcnJvdztcclxuXHRcdCAgICAgICAgICAgIGlmIChkaWZmZXJlbmNlIDwgMCkgZGlmZmVyZW5jZSArPSBiYXNlO1xyXG5cdFx0ICAgICAgICAgICAgZWxzZSB7XHJcblx0XHQgICAgICAgICAgICAgICAgcltpKytdID0gZGlmZmVyZW5jZTtcclxuXHRcdCAgICAgICAgICAgICAgICBicmVhaztcclxuXHRcdCAgICAgICAgICAgIH1cclxuXHRcdCAgICAgICAgICAgIHJbaV0gPSBkaWZmZXJlbmNlO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIGZvciAoOyBpIDwgYV9sOyBpKyspIHtcclxuXHRcdCAgICAgICAgICAgIHJbaV0gPSBhW2ldO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIHRyaW0ocik7XHJcblx0XHQgICAgICAgIHJldHVybiByO1xyXG5cdFx0ICAgIH1cclxuXHJcblx0XHQgICAgZnVuY3Rpb24gc3VidHJhY3RBbnkoYSwgYiwgc2lnbikge1xyXG5cdFx0ICAgICAgICB2YXIgdmFsdWU7XHJcblx0XHQgICAgICAgIGlmIChjb21wYXJlQWJzKGEsIGIpID49IDApIHtcclxuXHRcdCAgICAgICAgICAgIHZhbHVlID0gc3VidHJhY3QoYSwgYik7XHJcblx0XHQgICAgICAgIH0gZWxzZSB7XHJcblx0XHQgICAgICAgICAgICB2YWx1ZSA9IHN1YnRyYWN0KGIsIGEpO1xyXG5cdFx0ICAgICAgICAgICAgc2lnbiA9ICFzaWduO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIHZhbHVlID0gYXJyYXlUb1NtYWxsKHZhbHVlKTtcclxuXHRcdCAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikge1xyXG5cdFx0ICAgICAgICAgICAgaWYgKHNpZ24pIHZhbHVlID0gLXZhbHVlO1xyXG5cdFx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBTbWFsbEludGVnZXIodmFsdWUpO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIHJldHVybiBuZXcgQmlnSW50ZWdlcih2YWx1ZSwgc2lnbik7XHJcblx0XHQgICAgfVxyXG5cclxuXHRcdCAgICBmdW5jdGlvbiBzdWJ0cmFjdFNtYWxsKGEsIGIsIHNpZ24pIHsgLy8gYXNzdW1lcyBhIGlzIGFycmF5LCBiIGlzIG51bWJlciB3aXRoIDAgPD0gYiA8IE1BWF9JTlRcclxuXHRcdCAgICAgICAgdmFyIGwgPSBhLmxlbmd0aCxcclxuXHRcdCAgICAgICAgICAgIHIgPSBuZXcgQXJyYXkobCksXHJcblx0XHQgICAgICAgICAgICBjYXJyeSA9IC1iLFxyXG5cdFx0ICAgICAgICAgICAgYmFzZSA9IEJBU0UsXHJcblx0XHQgICAgICAgICAgICBpLCBkaWZmZXJlbmNlO1xyXG5cdFx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XHJcblx0XHQgICAgICAgICAgICBkaWZmZXJlbmNlID0gYVtpXSArIGNhcnJ5O1xyXG5cdFx0ICAgICAgICAgICAgY2FycnkgPSBNYXRoLmZsb29yKGRpZmZlcmVuY2UgLyBiYXNlKTtcclxuXHRcdCAgICAgICAgICAgIGRpZmZlcmVuY2UgJT0gYmFzZTtcclxuXHRcdCAgICAgICAgICAgIHJbaV0gPSBkaWZmZXJlbmNlIDwgMCA/IGRpZmZlcmVuY2UgKyBiYXNlIDogZGlmZmVyZW5jZTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICByID0gYXJyYXlUb1NtYWxsKHIpO1xyXG5cdFx0ICAgICAgICBpZiAodHlwZW9mIHIgPT09IFwibnVtYmVyXCIpIHtcclxuXHRcdCAgICAgICAgICAgIGlmIChzaWduKSByID0gLXI7XHJcblx0XHQgICAgICAgICAgICByZXR1cm4gbmV3IFNtYWxsSW50ZWdlcihyKTtcclxuXHRcdCAgICAgICAgfSByZXR1cm4gbmV3IEJpZ0ludGVnZXIociwgc2lnbik7XHJcblx0XHQgICAgfVxyXG5cclxuXHRcdCAgICBCaWdJbnRlZ2VyLnByb3RvdHlwZS5zdWJ0cmFjdCA9IGZ1bmN0aW9uICh2KSB7XHJcblx0XHQgICAgICAgIHZhciBuID0gcGFyc2VWYWx1ZSh2KTtcclxuXHRcdCAgICAgICAgaWYgKHRoaXMuc2lnbiAhPT0gbi5zaWduKSB7XHJcblx0XHQgICAgICAgICAgICByZXR1cm4gdGhpcy5hZGQobi5uZWdhdGUoKSk7XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgdmFyIGEgPSB0aGlzLnZhbHVlLCBiID0gbi52YWx1ZTtcclxuXHRcdCAgICAgICAgaWYgKG4uaXNTbWFsbClcclxuXHRcdCAgICAgICAgICAgIHJldHVybiBzdWJ0cmFjdFNtYWxsKGEsIE1hdGguYWJzKGIpLCB0aGlzLnNpZ24pO1xyXG5cdFx0ICAgICAgICByZXR1cm4gc3VidHJhY3RBbnkoYSwgYiwgdGhpcy5zaWduKTtcclxuXHRcdCAgICB9O1xyXG5cdFx0ICAgIEJpZ0ludGVnZXIucHJvdG90eXBlLm1pbnVzID0gQmlnSW50ZWdlci5wcm90b3R5cGUuc3VidHJhY3Q7XHJcblxyXG5cdFx0ICAgIFNtYWxsSW50ZWdlci5wcm90b3R5cGUuc3VidHJhY3QgPSBmdW5jdGlvbiAodikge1xyXG5cdFx0ICAgICAgICB2YXIgbiA9IHBhcnNlVmFsdWUodik7XHJcblx0XHQgICAgICAgIHZhciBhID0gdGhpcy52YWx1ZTtcclxuXHRcdCAgICAgICAgaWYgKGEgPCAwICE9PSBuLnNpZ24pIHtcclxuXHRcdCAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZChuLm5lZ2F0ZSgpKTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICB2YXIgYiA9IG4udmFsdWU7XHJcblx0XHQgICAgICAgIGlmIChuLmlzU21hbGwpIHtcclxuXHRcdCAgICAgICAgICAgIHJldHVybiBuZXcgU21hbGxJbnRlZ2VyKGEgLSBiKTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICByZXR1cm4gc3VidHJhY3RTbWFsbChiLCBNYXRoLmFicyhhKSwgYSA+PSAwKTtcclxuXHRcdCAgICB9O1xyXG5cdFx0ICAgIFNtYWxsSW50ZWdlci5wcm90b3R5cGUubWludXMgPSBTbWFsbEludGVnZXIucHJvdG90eXBlLnN1YnRyYWN0O1xyXG5cclxuXHRcdCAgICBOYXRpdmVCaWdJbnQucHJvdG90eXBlLnN1YnRyYWN0ID0gZnVuY3Rpb24gKHYpIHtcclxuXHRcdCAgICAgICAgcmV0dXJuIG5ldyBOYXRpdmVCaWdJbnQodGhpcy52YWx1ZSAtIHBhcnNlVmFsdWUodikudmFsdWUpO1xyXG5cdFx0ICAgIH07XHJcblx0XHQgICAgTmF0aXZlQmlnSW50LnByb3RvdHlwZS5taW51cyA9IE5hdGl2ZUJpZ0ludC5wcm90b3R5cGUuc3VidHJhY3Q7XHJcblxyXG5cdFx0ICAgIEJpZ0ludGVnZXIucHJvdG90eXBlLm5lZ2F0ZSA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdCAgICAgICAgcmV0dXJuIG5ldyBCaWdJbnRlZ2VyKHRoaXMudmFsdWUsICF0aGlzLnNpZ24pO1xyXG5cdFx0ICAgIH07XHJcblx0XHQgICAgU21hbGxJbnRlZ2VyLnByb3RvdHlwZS5uZWdhdGUgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHQgICAgICAgIHZhciBzaWduID0gdGhpcy5zaWduO1xyXG5cdFx0ICAgICAgICB2YXIgc21hbGwgPSBuZXcgU21hbGxJbnRlZ2VyKC10aGlzLnZhbHVlKTtcclxuXHRcdCAgICAgICAgc21hbGwuc2lnbiA9ICFzaWduO1xyXG5cdFx0ICAgICAgICByZXR1cm4gc21hbGw7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBOYXRpdmVCaWdJbnQucHJvdG90eXBlLm5lZ2F0ZSA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdCAgICAgICAgcmV0dXJuIG5ldyBOYXRpdmVCaWdJbnQoLXRoaXMudmFsdWUpO1xyXG5cdFx0ICAgIH07XHJcblxyXG5cdFx0ICAgIEJpZ0ludGVnZXIucHJvdG90eXBlLmFicyA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdCAgICAgICAgcmV0dXJuIG5ldyBCaWdJbnRlZ2VyKHRoaXMudmFsdWUsIGZhbHNlKTtcclxuXHRcdCAgICB9O1xyXG5cdFx0ICAgIFNtYWxsSW50ZWdlci5wcm90b3R5cGUuYWJzID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0ICAgICAgICByZXR1cm4gbmV3IFNtYWxsSW50ZWdlcihNYXRoLmFicyh0aGlzLnZhbHVlKSk7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBOYXRpdmVCaWdJbnQucHJvdG90eXBlLmFicyA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdCAgICAgICAgcmV0dXJuIG5ldyBOYXRpdmVCaWdJbnQodGhpcy52YWx1ZSA+PSAwID8gdGhpcy52YWx1ZSA6IC10aGlzLnZhbHVlKTtcclxuXHRcdCAgICB9O1xyXG5cclxuXHJcblx0XHQgICAgZnVuY3Rpb24gbXVsdGlwbHlMb25nKGEsIGIpIHtcclxuXHRcdCAgICAgICAgdmFyIGFfbCA9IGEubGVuZ3RoLFxyXG5cdFx0ICAgICAgICAgICAgYl9sID0gYi5sZW5ndGgsXHJcblx0XHQgICAgICAgICAgICBsID0gYV9sICsgYl9sLFxyXG5cdFx0ICAgICAgICAgICAgciA9IGNyZWF0ZUFycmF5KGwpLFxyXG5cdFx0ICAgICAgICAgICAgYmFzZSA9IEJBU0UsXHJcblx0XHQgICAgICAgICAgICBwcm9kdWN0LCBjYXJyeSwgaSwgYV9pLCBiX2o7XHJcblx0XHQgICAgICAgIGZvciAoaSA9IDA7IGkgPCBhX2w7ICsraSkge1xyXG5cdFx0ICAgICAgICAgICAgYV9pID0gYVtpXTtcclxuXHRcdCAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgYl9sOyArK2opIHtcclxuXHRcdCAgICAgICAgICAgICAgICBiX2ogPSBiW2pdO1xyXG5cdFx0ICAgICAgICAgICAgICAgIHByb2R1Y3QgPSBhX2kgKiBiX2ogKyByW2kgKyBqXTtcclxuXHRcdCAgICAgICAgICAgICAgICBjYXJyeSA9IE1hdGguZmxvb3IocHJvZHVjdCAvIGJhc2UpO1xyXG5cdFx0ICAgICAgICAgICAgICAgIHJbaSArIGpdID0gcHJvZHVjdCAtIGNhcnJ5ICogYmFzZTtcclxuXHRcdCAgICAgICAgICAgICAgICByW2kgKyBqICsgMV0gKz0gY2Fycnk7XHJcblx0XHQgICAgICAgICAgICB9XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgdHJpbShyKTtcclxuXHRcdCAgICAgICAgcmV0dXJuIHI7XHJcblx0XHQgICAgfVxyXG5cclxuXHRcdCAgICBmdW5jdGlvbiBtdWx0aXBseVNtYWxsKGEsIGIpIHsgLy8gYXNzdW1lcyBhIGlzIGFycmF5LCBiIGlzIG51bWJlciB3aXRoIHxifCA8IEJBU0VcclxuXHRcdCAgICAgICAgdmFyIGwgPSBhLmxlbmd0aCxcclxuXHRcdCAgICAgICAgICAgIHIgPSBuZXcgQXJyYXkobCksXHJcblx0XHQgICAgICAgICAgICBiYXNlID0gQkFTRSxcclxuXHRcdCAgICAgICAgICAgIGNhcnJ5ID0gMCxcclxuXHRcdCAgICAgICAgICAgIHByb2R1Y3QsIGk7XHJcblx0XHQgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcclxuXHRcdCAgICAgICAgICAgIHByb2R1Y3QgPSBhW2ldICogYiArIGNhcnJ5O1xyXG5cdFx0ICAgICAgICAgICAgY2FycnkgPSBNYXRoLmZsb29yKHByb2R1Y3QgLyBiYXNlKTtcclxuXHRcdCAgICAgICAgICAgIHJbaV0gPSBwcm9kdWN0IC0gY2FycnkgKiBiYXNlO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIHdoaWxlIChjYXJyeSA+IDApIHtcclxuXHRcdCAgICAgICAgICAgIHJbaSsrXSA9IGNhcnJ5ICUgYmFzZTtcclxuXHRcdCAgICAgICAgICAgIGNhcnJ5ID0gTWF0aC5mbG9vcihjYXJyeSAvIGJhc2UpO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIHJldHVybiByO1xyXG5cdFx0ICAgIH1cclxuXHJcblx0XHQgICAgZnVuY3Rpb24gc2hpZnRMZWZ0KHgsIG4pIHtcclxuXHRcdCAgICAgICAgdmFyIHIgPSBbXTtcclxuXHRcdCAgICAgICAgd2hpbGUgKG4tLSA+IDApIHIucHVzaCgwKTtcclxuXHRcdCAgICAgICAgcmV0dXJuIHIuY29uY2F0KHgpO1xyXG5cdFx0ICAgIH1cclxuXHJcblx0XHQgICAgZnVuY3Rpb24gbXVsdGlwbHlLYXJhdHN1YmEoeCwgeSkge1xyXG5cdFx0ICAgICAgICB2YXIgbiA9IE1hdGgubWF4KHgubGVuZ3RoLCB5Lmxlbmd0aCk7XHJcblxyXG5cdFx0ICAgICAgICBpZiAobiA8PSAzMCkgcmV0dXJuIG11bHRpcGx5TG9uZyh4LCB5KTtcclxuXHRcdCAgICAgICAgbiA9IE1hdGguY2VpbChuIC8gMik7XHJcblxyXG5cdFx0ICAgICAgICB2YXIgYiA9IHguc2xpY2UobiksXHJcblx0XHQgICAgICAgICAgICBhID0geC5zbGljZSgwLCBuKSxcclxuXHRcdCAgICAgICAgICAgIGQgPSB5LnNsaWNlKG4pLFxyXG5cdFx0ICAgICAgICAgICAgYyA9IHkuc2xpY2UoMCwgbik7XHJcblxyXG5cdFx0ICAgICAgICB2YXIgYWMgPSBtdWx0aXBseUthcmF0c3ViYShhLCBjKSxcclxuXHRcdCAgICAgICAgICAgIGJkID0gbXVsdGlwbHlLYXJhdHN1YmEoYiwgZCksXHJcblx0XHQgICAgICAgICAgICBhYmNkID0gbXVsdGlwbHlLYXJhdHN1YmEoYWRkQW55KGEsIGIpLCBhZGRBbnkoYywgZCkpO1xyXG5cclxuXHRcdCAgICAgICAgdmFyIHByb2R1Y3QgPSBhZGRBbnkoYWRkQW55KGFjLCBzaGlmdExlZnQoc3VidHJhY3Qoc3VidHJhY3QoYWJjZCwgYWMpLCBiZCksIG4pKSwgc2hpZnRMZWZ0KGJkLCAyICogbikpO1xyXG5cdFx0ICAgICAgICB0cmltKHByb2R1Y3QpO1xyXG5cdFx0ICAgICAgICByZXR1cm4gcHJvZHVjdDtcclxuXHRcdCAgICB9XHJcblxyXG5cdFx0ICAgIC8vIFRoZSBmb2xsb3dpbmcgZnVuY3Rpb24gaXMgZGVyaXZlZCBmcm9tIGEgc3VyZmFjZSBmaXQgb2YgYSBncmFwaCBwbG90dGluZyB0aGUgcGVyZm9ybWFuY2UgZGlmZmVyZW5jZVxyXG5cdFx0ICAgIC8vIGJldHdlZW4gbG9uZyBtdWx0aXBsaWNhdGlvbiBhbmQga2FyYXRzdWJhIG11bHRpcGxpY2F0aW9uIHZlcnN1cyB0aGUgbGVuZ3RocyBvZiB0aGUgdHdvIGFycmF5cy5cclxuXHRcdCAgICBmdW5jdGlvbiB1c2VLYXJhdHN1YmEobDEsIGwyKSB7XHJcblx0XHQgICAgICAgIHJldHVybiAtMC4wMTIgKiBsMSAtIDAuMDEyICogbDIgKyAwLjAwMDAxNSAqIGwxICogbDIgPiAwO1xyXG5cdFx0ICAgIH1cclxuXHJcblx0XHQgICAgQmlnSW50ZWdlci5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAodikge1xyXG5cdFx0ICAgICAgICB2YXIgbiA9IHBhcnNlVmFsdWUodiksXHJcblx0XHQgICAgICAgICAgICBhID0gdGhpcy52YWx1ZSwgYiA9IG4udmFsdWUsXHJcblx0XHQgICAgICAgICAgICBzaWduID0gdGhpcy5zaWduICE9PSBuLnNpZ24sXHJcblx0XHQgICAgICAgICAgICBhYnM7XHJcblx0XHQgICAgICAgIGlmIChuLmlzU21hbGwpIHtcclxuXHRcdCAgICAgICAgICAgIGlmIChiID09PSAwKSByZXR1cm4gSW50ZWdlclswXTtcclxuXHRcdCAgICAgICAgICAgIGlmIChiID09PSAxKSByZXR1cm4gdGhpcztcclxuXHRcdCAgICAgICAgICAgIGlmIChiID09PSAtMSkgcmV0dXJuIHRoaXMubmVnYXRlKCk7XHJcblx0XHQgICAgICAgICAgICBhYnMgPSBNYXRoLmFicyhiKTtcclxuXHRcdCAgICAgICAgICAgIGlmIChhYnMgPCBCQVNFKSB7XHJcblx0XHQgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBCaWdJbnRlZ2VyKG11bHRpcGx5U21hbGwoYSwgYWJzKSwgc2lnbik7XHJcblx0XHQgICAgICAgICAgICB9XHJcblx0XHQgICAgICAgICAgICBiID0gc21hbGxUb0FycmF5KGFicyk7XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgaWYgKHVzZUthcmF0c3ViYShhLmxlbmd0aCwgYi5sZW5ndGgpKSAvLyBLYXJhdHN1YmEgaXMgb25seSBmYXN0ZXIgZm9yIGNlcnRhaW4gYXJyYXkgc2l6ZXNcclxuXHRcdCAgICAgICAgICAgIHJldHVybiBuZXcgQmlnSW50ZWdlcihtdWx0aXBseUthcmF0c3ViYShhLCBiKSwgc2lnbik7XHJcblx0XHQgICAgICAgIHJldHVybiBuZXcgQmlnSW50ZWdlcihtdWx0aXBseUxvbmcoYSwgYiksIHNpZ24pO1xyXG5cdFx0ICAgIH07XHJcblxyXG5cdFx0ICAgIEJpZ0ludGVnZXIucHJvdG90eXBlLnRpbWVzID0gQmlnSW50ZWdlci5wcm90b3R5cGUubXVsdGlwbHk7XHJcblxyXG5cdFx0ICAgIGZ1bmN0aW9uIG11bHRpcGx5U21hbGxBbmRBcnJheShhLCBiLCBzaWduKSB7IC8vIGEgPj0gMFxyXG5cdFx0ICAgICAgICBpZiAoYSA8IEJBU0UpIHtcclxuXHRcdCAgICAgICAgICAgIHJldHVybiBuZXcgQmlnSW50ZWdlcihtdWx0aXBseVNtYWxsKGIsIGEpLCBzaWduKTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICByZXR1cm4gbmV3IEJpZ0ludGVnZXIobXVsdGlwbHlMb25nKGIsIHNtYWxsVG9BcnJheShhKSksIHNpZ24pO1xyXG5cdFx0ICAgIH1cclxuXHRcdCAgICBTbWFsbEludGVnZXIucHJvdG90eXBlLl9tdWx0aXBseUJ5U21hbGwgPSBmdW5jdGlvbiAoYSkge1xyXG5cdFx0ICAgICAgICBpZiAoaXNQcmVjaXNlKGEudmFsdWUgKiB0aGlzLnZhbHVlKSkge1xyXG5cdFx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBTbWFsbEludGVnZXIoYS52YWx1ZSAqIHRoaXMudmFsdWUpO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIHJldHVybiBtdWx0aXBseVNtYWxsQW5kQXJyYXkoTWF0aC5hYnMoYS52YWx1ZSksIHNtYWxsVG9BcnJheShNYXRoLmFicyh0aGlzLnZhbHVlKSksIHRoaXMuc2lnbiAhPT0gYS5zaWduKTtcclxuXHRcdCAgICB9O1xyXG5cdFx0ICAgIEJpZ0ludGVnZXIucHJvdG90eXBlLl9tdWx0aXBseUJ5U21hbGwgPSBmdW5jdGlvbiAoYSkge1xyXG5cdFx0ICAgICAgICBpZiAoYS52YWx1ZSA9PT0gMCkgcmV0dXJuIEludGVnZXJbMF07XHJcblx0XHQgICAgICAgIGlmIChhLnZhbHVlID09PSAxKSByZXR1cm4gdGhpcztcclxuXHRcdCAgICAgICAgaWYgKGEudmFsdWUgPT09IC0xKSByZXR1cm4gdGhpcy5uZWdhdGUoKTtcclxuXHRcdCAgICAgICAgcmV0dXJuIG11bHRpcGx5U21hbGxBbmRBcnJheShNYXRoLmFicyhhLnZhbHVlKSwgdGhpcy52YWx1ZSwgdGhpcy5zaWduICE9PSBhLnNpZ24pO1xyXG5cdFx0ICAgIH07XHJcblx0XHQgICAgU21hbGxJbnRlZ2VyLnByb3RvdHlwZS5tdWx0aXBseSA9IGZ1bmN0aW9uICh2KSB7XHJcblx0XHQgICAgICAgIHJldHVybiBwYXJzZVZhbHVlKHYpLl9tdWx0aXBseUJ5U21hbGwodGhpcyk7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBTbWFsbEludGVnZXIucHJvdG90eXBlLnRpbWVzID0gU21hbGxJbnRlZ2VyLnByb3RvdHlwZS5tdWx0aXBseTtcclxuXHJcblx0XHQgICAgTmF0aXZlQmlnSW50LnByb3RvdHlwZS5tdWx0aXBseSA9IGZ1bmN0aW9uICh2KSB7XHJcblx0XHQgICAgICAgIHJldHVybiBuZXcgTmF0aXZlQmlnSW50KHRoaXMudmFsdWUgKiBwYXJzZVZhbHVlKHYpLnZhbHVlKTtcclxuXHRcdCAgICB9O1xyXG5cdFx0ICAgIE5hdGl2ZUJpZ0ludC5wcm90b3R5cGUudGltZXMgPSBOYXRpdmVCaWdJbnQucHJvdG90eXBlLm11bHRpcGx5O1xyXG5cclxuXHRcdCAgICBmdW5jdGlvbiBzcXVhcmUoYSkge1xyXG5cdFx0ICAgICAgICAvL2NvbnNvbGUuYXNzZXJ0KDIgKiBCQVNFICogQkFTRSA8IE1BWF9JTlQpO1xyXG5cdFx0ICAgICAgICB2YXIgbCA9IGEubGVuZ3RoLFxyXG5cdFx0ICAgICAgICAgICAgciA9IGNyZWF0ZUFycmF5KGwgKyBsKSxcclxuXHRcdCAgICAgICAgICAgIGJhc2UgPSBCQVNFLFxyXG5cdFx0ICAgICAgICAgICAgcHJvZHVjdCwgY2FycnksIGksIGFfaSwgYV9qO1xyXG5cdFx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XHJcblx0XHQgICAgICAgICAgICBhX2kgPSBhW2ldO1xyXG5cdFx0ICAgICAgICAgICAgY2FycnkgPSAwIC0gYV9pICogYV9pO1xyXG5cdFx0ICAgICAgICAgICAgZm9yICh2YXIgaiA9IGk7IGogPCBsOyBqKyspIHtcclxuXHRcdCAgICAgICAgICAgICAgICBhX2ogPSBhW2pdO1xyXG5cdFx0ICAgICAgICAgICAgICAgIHByb2R1Y3QgPSAyICogKGFfaSAqIGFfaikgKyByW2kgKyBqXSArIGNhcnJ5O1xyXG5cdFx0ICAgICAgICAgICAgICAgIGNhcnJ5ID0gTWF0aC5mbG9vcihwcm9kdWN0IC8gYmFzZSk7XHJcblx0XHQgICAgICAgICAgICAgICAgcltpICsgal0gPSBwcm9kdWN0IC0gY2FycnkgKiBiYXNlO1xyXG5cdFx0ICAgICAgICAgICAgfVxyXG5cdFx0ICAgICAgICAgICAgcltpICsgbF0gPSBjYXJyeTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICB0cmltKHIpO1xyXG5cdFx0ICAgICAgICByZXR1cm4gcjtcclxuXHRcdCAgICB9XHJcblxyXG5cdFx0ICAgIEJpZ0ludGVnZXIucHJvdG90eXBlLnNxdWFyZSA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdCAgICAgICAgcmV0dXJuIG5ldyBCaWdJbnRlZ2VyKHNxdWFyZSh0aGlzLnZhbHVlKSwgZmFsc2UpO1xyXG5cdFx0ICAgIH07XHJcblxyXG5cdFx0ICAgIFNtYWxsSW50ZWdlci5wcm90b3R5cGUuc3F1YXJlID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0ICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnZhbHVlICogdGhpcy52YWx1ZTtcclxuXHRcdCAgICAgICAgaWYgKGlzUHJlY2lzZSh2YWx1ZSkpIHJldHVybiBuZXcgU21hbGxJbnRlZ2VyKHZhbHVlKTtcclxuXHRcdCAgICAgICAgcmV0dXJuIG5ldyBCaWdJbnRlZ2VyKHNxdWFyZShzbWFsbFRvQXJyYXkoTWF0aC5hYnModGhpcy52YWx1ZSkpKSwgZmFsc2UpO1xyXG5cdFx0ICAgIH07XHJcblxyXG5cdFx0ICAgIE5hdGl2ZUJpZ0ludC5wcm90b3R5cGUuc3F1YXJlID0gZnVuY3Rpb24gKHYpIHtcclxuXHRcdCAgICAgICAgcmV0dXJuIG5ldyBOYXRpdmVCaWdJbnQodGhpcy52YWx1ZSAqIHRoaXMudmFsdWUpO1xyXG5cdFx0ICAgIH07XHJcblxyXG5cdFx0ICAgIGZ1bmN0aW9uIGRpdk1vZDEoYSwgYikgeyAvLyBMZWZ0IG92ZXIgZnJvbSBwcmV2aW91cyB2ZXJzaW9uLiBQZXJmb3JtcyBmYXN0ZXIgdGhhbiBkaXZNb2QyIG9uIHNtYWxsZXIgaW5wdXQgc2l6ZXMuXHJcblx0XHQgICAgICAgIHZhciBhX2wgPSBhLmxlbmd0aCxcclxuXHRcdCAgICAgICAgICAgIGJfbCA9IGIubGVuZ3RoLFxyXG5cdFx0ICAgICAgICAgICAgYmFzZSA9IEJBU0UsXHJcblx0XHQgICAgICAgICAgICByZXN1bHQgPSBjcmVhdGVBcnJheShiLmxlbmd0aCksXHJcblx0XHQgICAgICAgICAgICBkaXZpc29yTW9zdFNpZ25pZmljYW50RGlnaXQgPSBiW2JfbCAtIDFdLFxyXG5cdFx0ICAgICAgICAgICAgLy8gbm9ybWFsaXphdGlvblxyXG5cdFx0ICAgICAgICAgICAgbGFtYmRhID0gTWF0aC5jZWlsKGJhc2UgLyAoMiAqIGRpdmlzb3JNb3N0U2lnbmlmaWNhbnREaWdpdCkpLFxyXG5cdFx0ICAgICAgICAgICAgcmVtYWluZGVyID0gbXVsdGlwbHlTbWFsbChhLCBsYW1iZGEpLFxyXG5cdFx0ICAgICAgICAgICAgZGl2aXNvciA9IG11bHRpcGx5U21hbGwoYiwgbGFtYmRhKSxcclxuXHRcdCAgICAgICAgICAgIHF1b3RpZW50RGlnaXQsIHNoaWZ0LCBjYXJyeSwgYm9ycm93LCBpLCBsLCBxO1xyXG5cdFx0ICAgICAgICBpZiAocmVtYWluZGVyLmxlbmd0aCA8PSBhX2wpIHJlbWFpbmRlci5wdXNoKDApO1xyXG5cdFx0ICAgICAgICBkaXZpc29yLnB1c2goMCk7XHJcblx0XHQgICAgICAgIGRpdmlzb3JNb3N0U2lnbmlmaWNhbnREaWdpdCA9IGRpdmlzb3JbYl9sIC0gMV07XHJcblx0XHQgICAgICAgIGZvciAoc2hpZnQgPSBhX2wgLSBiX2w7IHNoaWZ0ID49IDA7IHNoaWZ0LS0pIHtcclxuXHRcdCAgICAgICAgICAgIHF1b3RpZW50RGlnaXQgPSBiYXNlIC0gMTtcclxuXHRcdCAgICAgICAgICAgIGlmIChyZW1haW5kZXJbc2hpZnQgKyBiX2xdICE9PSBkaXZpc29yTW9zdFNpZ25pZmljYW50RGlnaXQpIHtcclxuXHRcdCAgICAgICAgICAgICAgICBxdW90aWVudERpZ2l0ID0gTWF0aC5mbG9vcigocmVtYWluZGVyW3NoaWZ0ICsgYl9sXSAqIGJhc2UgKyByZW1haW5kZXJbc2hpZnQgKyBiX2wgLSAxXSkgLyBkaXZpc29yTW9zdFNpZ25pZmljYW50RGlnaXQpO1xyXG5cdFx0ICAgICAgICAgICAgfVxyXG5cdFx0ICAgICAgICAgICAgLy8gcXVvdGllbnREaWdpdCA8PSBiYXNlIC0gMVxyXG5cdFx0ICAgICAgICAgICAgY2FycnkgPSAwO1xyXG5cdFx0ICAgICAgICAgICAgYm9ycm93ID0gMDtcclxuXHRcdCAgICAgICAgICAgIGwgPSBkaXZpc29yLmxlbmd0aDtcclxuXHRcdCAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcclxuXHRcdCAgICAgICAgICAgICAgICBjYXJyeSArPSBxdW90aWVudERpZ2l0ICogZGl2aXNvcltpXTtcclxuXHRcdCAgICAgICAgICAgICAgICBxID0gTWF0aC5mbG9vcihjYXJyeSAvIGJhc2UpO1xyXG5cdFx0ICAgICAgICAgICAgICAgIGJvcnJvdyArPSByZW1haW5kZXJbc2hpZnQgKyBpXSAtIChjYXJyeSAtIHEgKiBiYXNlKTtcclxuXHRcdCAgICAgICAgICAgICAgICBjYXJyeSA9IHE7XHJcblx0XHQgICAgICAgICAgICAgICAgaWYgKGJvcnJvdyA8IDApIHtcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgcmVtYWluZGVyW3NoaWZ0ICsgaV0gPSBib3Jyb3cgKyBiYXNlO1xyXG5cdFx0ICAgICAgICAgICAgICAgICAgICBib3Jyb3cgPSAtMTtcclxuXHRcdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cdFx0ICAgICAgICAgICAgICAgICAgICByZW1haW5kZXJbc2hpZnQgKyBpXSA9IGJvcnJvdztcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgYm9ycm93ID0gMDtcclxuXHRcdCAgICAgICAgICAgICAgICB9XHJcblx0XHQgICAgICAgICAgICB9XHJcblx0XHQgICAgICAgICAgICB3aGlsZSAoYm9ycm93ICE9PSAwKSB7XHJcblx0XHQgICAgICAgICAgICAgICAgcXVvdGllbnREaWdpdCAtPSAxO1xyXG5cdFx0ICAgICAgICAgICAgICAgIGNhcnJ5ID0gMDtcclxuXHRcdCAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XHJcblx0XHQgICAgICAgICAgICAgICAgICAgIGNhcnJ5ICs9IHJlbWFpbmRlcltzaGlmdCArIGldIC0gYmFzZSArIGRpdmlzb3JbaV07XHJcblx0XHQgICAgICAgICAgICAgICAgICAgIGlmIChjYXJyeSA8IDApIHtcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgIHJlbWFpbmRlcltzaGlmdCArIGldID0gY2FycnkgKyBiYXNlO1xyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgY2FycnkgPSAwO1xyXG5cdFx0ICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgcmVtYWluZGVyW3NoaWZ0ICsgaV0gPSBjYXJyeTtcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgICAgIGNhcnJ5ID0gMTtcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgfVxyXG5cdFx0ICAgICAgICAgICAgICAgIH1cclxuXHRcdCAgICAgICAgICAgICAgICBib3Jyb3cgKz0gY2Fycnk7XHJcblx0XHQgICAgICAgICAgICB9XHJcblx0XHQgICAgICAgICAgICByZXN1bHRbc2hpZnRdID0gcXVvdGllbnREaWdpdDtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICAvLyBkZW5vcm1hbGl6YXRpb25cclxuXHRcdCAgICAgICAgcmVtYWluZGVyID0gZGl2TW9kU21hbGwocmVtYWluZGVyLCBsYW1iZGEpWzBdO1xyXG5cdFx0ICAgICAgICByZXR1cm4gW2FycmF5VG9TbWFsbChyZXN1bHQpLCBhcnJheVRvU21hbGwocmVtYWluZGVyKV07XHJcblx0XHQgICAgfVxyXG5cclxuXHRcdCAgICBmdW5jdGlvbiBkaXZNb2QyKGEsIGIpIHsgLy8gSW1wbGVtZW50YXRpb24gaWRlYSBzaGFtZWxlc3NseSBzdG9sZW4gZnJvbSBTaWxlbnQgTWF0dCdzIGxpYnJhcnkgaHR0cDovL3NpbGVudG1hdHQuY29tL2JpZ2ludGVnZXIvXHJcblx0XHQgICAgICAgIC8vIFBlcmZvcm1zIGZhc3RlciB0aGFuIGRpdk1vZDEgb24gbGFyZ2VyIGlucHV0IHNpemVzLlxyXG5cdFx0ICAgICAgICB2YXIgYV9sID0gYS5sZW5ndGgsXHJcblx0XHQgICAgICAgICAgICBiX2wgPSBiLmxlbmd0aCxcclxuXHRcdCAgICAgICAgICAgIHJlc3VsdCA9IFtdLFxyXG5cdFx0ICAgICAgICAgICAgcGFydCA9IFtdLFxyXG5cdFx0ICAgICAgICAgICAgYmFzZSA9IEJBU0UsXHJcblx0XHQgICAgICAgICAgICBndWVzcywgeGxlbiwgaGlnaHgsIGhpZ2h5LCBjaGVjaztcclxuXHRcdCAgICAgICAgd2hpbGUgKGFfbCkge1xyXG5cdFx0ICAgICAgICAgICAgcGFydC51bnNoaWZ0KGFbLS1hX2xdKTtcclxuXHRcdCAgICAgICAgICAgIHRyaW0ocGFydCk7XHJcblx0XHQgICAgICAgICAgICBpZiAoY29tcGFyZUFicyhwYXJ0LCBiKSA8IDApIHtcclxuXHRcdCAgICAgICAgICAgICAgICByZXN1bHQucHVzaCgwKTtcclxuXHRcdCAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuXHRcdCAgICAgICAgICAgIH1cclxuXHRcdCAgICAgICAgICAgIHhsZW4gPSBwYXJ0Lmxlbmd0aDtcclxuXHRcdCAgICAgICAgICAgIGhpZ2h4ID0gcGFydFt4bGVuIC0gMV0gKiBiYXNlICsgcGFydFt4bGVuIC0gMl07XHJcblx0XHQgICAgICAgICAgICBoaWdoeSA9IGJbYl9sIC0gMV0gKiBiYXNlICsgYltiX2wgLSAyXTtcclxuXHRcdCAgICAgICAgICAgIGlmICh4bGVuID4gYl9sKSB7XHJcblx0XHQgICAgICAgICAgICAgICAgaGlnaHggPSAoaGlnaHggKyAxKSAqIGJhc2U7XHJcblx0XHQgICAgICAgICAgICB9XHJcblx0XHQgICAgICAgICAgICBndWVzcyA9IE1hdGguY2VpbChoaWdoeCAvIGhpZ2h5KTtcclxuXHRcdCAgICAgICAgICAgIGRvIHtcclxuXHRcdCAgICAgICAgICAgICAgICBjaGVjayA9IG11bHRpcGx5U21hbGwoYiwgZ3Vlc3MpO1xyXG5cdFx0ICAgICAgICAgICAgICAgIGlmIChjb21wYXJlQWJzKGNoZWNrLCBwYXJ0KSA8PSAwKSBicmVhaztcclxuXHRcdCAgICAgICAgICAgICAgICBndWVzcy0tO1xyXG5cdFx0ICAgICAgICAgICAgfSB3aGlsZSAoZ3Vlc3MpO1xyXG5cdFx0ICAgICAgICAgICAgcmVzdWx0LnB1c2goZ3Vlc3MpO1xyXG5cdFx0ICAgICAgICAgICAgcGFydCA9IHN1YnRyYWN0KHBhcnQsIGNoZWNrKTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICByZXN1bHQucmV2ZXJzZSgpO1xyXG5cdFx0ICAgICAgICByZXR1cm4gW2FycmF5VG9TbWFsbChyZXN1bHQpLCBhcnJheVRvU21hbGwocGFydCldO1xyXG5cdFx0ICAgIH1cclxuXHJcblx0XHQgICAgZnVuY3Rpb24gZGl2TW9kU21hbGwodmFsdWUsIGxhbWJkYSkge1xyXG5cdFx0ICAgICAgICB2YXIgbGVuZ3RoID0gdmFsdWUubGVuZ3RoLFxyXG5cdFx0ICAgICAgICAgICAgcXVvdGllbnQgPSBjcmVhdGVBcnJheShsZW5ndGgpLFxyXG5cdFx0ICAgICAgICAgICAgYmFzZSA9IEJBU0UsXHJcblx0XHQgICAgICAgICAgICBpLCBxLCByZW1haW5kZXIsIGRpdmlzb3I7XHJcblx0XHQgICAgICAgIHJlbWFpbmRlciA9IDA7XHJcblx0XHQgICAgICAgIGZvciAoaSA9IGxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XHJcblx0XHQgICAgICAgICAgICBkaXZpc29yID0gcmVtYWluZGVyICogYmFzZSArIHZhbHVlW2ldO1xyXG5cdFx0ICAgICAgICAgICAgcSA9IHRydW5jYXRlKGRpdmlzb3IgLyBsYW1iZGEpO1xyXG5cdFx0ICAgICAgICAgICAgcmVtYWluZGVyID0gZGl2aXNvciAtIHEgKiBsYW1iZGE7XHJcblx0XHQgICAgICAgICAgICBxdW90aWVudFtpXSA9IHEgfCAwO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIHJldHVybiBbcXVvdGllbnQsIHJlbWFpbmRlciB8IDBdO1xyXG5cdFx0ICAgIH1cclxuXHJcblx0XHQgICAgZnVuY3Rpb24gZGl2TW9kQW55KHNlbGYsIHYpIHtcclxuXHRcdCAgICAgICAgdmFyIHZhbHVlLCBuID0gcGFyc2VWYWx1ZSh2KTtcclxuXHRcdCAgICAgICAgaWYgKHN1cHBvcnRzTmF0aXZlQmlnSW50KSB7XHJcblx0XHQgICAgICAgICAgICByZXR1cm4gW25ldyBOYXRpdmVCaWdJbnQoc2VsZi52YWx1ZSAvIG4udmFsdWUpLCBuZXcgTmF0aXZlQmlnSW50KHNlbGYudmFsdWUgJSBuLnZhbHVlKV07XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgdmFyIGEgPSBzZWxmLnZhbHVlLCBiID0gbi52YWx1ZTtcclxuXHRcdCAgICAgICAgdmFyIHF1b3RpZW50O1xyXG5cdFx0ICAgICAgICBpZiAoYiA9PT0gMCkgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGRpdmlkZSBieSB6ZXJvXCIpO1xyXG5cdFx0ICAgICAgICBpZiAoc2VsZi5pc1NtYWxsKSB7XHJcblx0XHQgICAgICAgICAgICBpZiAobi5pc1NtYWxsKSB7XHJcblx0XHQgICAgICAgICAgICAgICAgcmV0dXJuIFtuZXcgU21hbGxJbnRlZ2VyKHRydW5jYXRlKGEgLyBiKSksIG5ldyBTbWFsbEludGVnZXIoYSAlIGIpXTtcclxuXHRcdCAgICAgICAgICAgIH1cclxuXHRcdCAgICAgICAgICAgIHJldHVybiBbSW50ZWdlclswXSwgc2VsZl07XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgaWYgKG4uaXNTbWFsbCkge1xyXG5cdFx0ICAgICAgICAgICAgaWYgKGIgPT09IDEpIHJldHVybiBbc2VsZiwgSW50ZWdlclswXV07XHJcblx0XHQgICAgICAgICAgICBpZiAoYiA9PSAtMSkgcmV0dXJuIFtzZWxmLm5lZ2F0ZSgpLCBJbnRlZ2VyWzBdXTtcclxuXHRcdCAgICAgICAgICAgIHZhciBhYnMgPSBNYXRoLmFicyhiKTtcclxuXHRcdCAgICAgICAgICAgIGlmIChhYnMgPCBCQVNFKSB7XHJcblx0XHQgICAgICAgICAgICAgICAgdmFsdWUgPSBkaXZNb2RTbWFsbChhLCBhYnMpO1xyXG5cdFx0ICAgICAgICAgICAgICAgIHF1b3RpZW50ID0gYXJyYXlUb1NtYWxsKHZhbHVlWzBdKTtcclxuXHRcdCAgICAgICAgICAgICAgICB2YXIgcmVtYWluZGVyID0gdmFsdWVbMV07XHJcblx0XHQgICAgICAgICAgICAgICAgaWYgKHNlbGYuc2lnbikgcmVtYWluZGVyID0gLXJlbWFpbmRlcjtcclxuXHRcdCAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHF1b3RpZW50ID09PSBcIm51bWJlclwiKSB7XHJcblx0XHQgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLnNpZ24gIT09IG4uc2lnbikgcXVvdGllbnQgPSAtcXVvdGllbnQ7XHJcblx0XHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBbbmV3IFNtYWxsSW50ZWdlcihxdW90aWVudCksIG5ldyBTbWFsbEludGVnZXIocmVtYWluZGVyKV07XHJcblx0XHQgICAgICAgICAgICAgICAgfVxyXG5cdFx0ICAgICAgICAgICAgICAgIHJldHVybiBbbmV3IEJpZ0ludGVnZXIocXVvdGllbnQsIHNlbGYuc2lnbiAhPT0gbi5zaWduKSwgbmV3IFNtYWxsSW50ZWdlcihyZW1haW5kZXIpXTtcclxuXHRcdCAgICAgICAgICAgIH1cclxuXHRcdCAgICAgICAgICAgIGIgPSBzbWFsbFRvQXJyYXkoYWJzKTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICB2YXIgY29tcGFyaXNvbiA9IGNvbXBhcmVBYnMoYSwgYik7XHJcblx0XHQgICAgICAgIGlmIChjb21wYXJpc29uID09PSAtMSkgcmV0dXJuIFtJbnRlZ2VyWzBdLCBzZWxmXTtcclxuXHRcdCAgICAgICAgaWYgKGNvbXBhcmlzb24gPT09IDApIHJldHVybiBbSW50ZWdlcltzZWxmLnNpZ24gPT09IG4uc2lnbiA/IDEgOiAtMV0sIEludGVnZXJbMF1dO1xyXG5cclxuXHRcdCAgICAgICAgLy8gZGl2TW9kMSBpcyBmYXN0ZXIgb24gc21hbGxlciBpbnB1dCBzaXplc1xyXG5cdFx0ICAgICAgICBpZiAoYS5sZW5ndGggKyBiLmxlbmd0aCA8PSAyMDApXHJcblx0XHQgICAgICAgICAgICB2YWx1ZSA9IGRpdk1vZDEoYSwgYik7XHJcblx0XHQgICAgICAgIGVsc2UgdmFsdWUgPSBkaXZNb2QyKGEsIGIpO1xyXG5cclxuXHRcdCAgICAgICAgcXVvdGllbnQgPSB2YWx1ZVswXTtcclxuXHRcdCAgICAgICAgdmFyIHFTaWduID0gc2VsZi5zaWduICE9PSBuLnNpZ24sXHJcblx0XHQgICAgICAgICAgICBtb2QgPSB2YWx1ZVsxXSxcclxuXHRcdCAgICAgICAgICAgIG1TaWduID0gc2VsZi5zaWduO1xyXG5cdFx0ICAgICAgICBpZiAodHlwZW9mIHF1b3RpZW50ID09PSBcIm51bWJlclwiKSB7XHJcblx0XHQgICAgICAgICAgICBpZiAocVNpZ24pIHF1b3RpZW50ID0gLXF1b3RpZW50O1xyXG5cdFx0ICAgICAgICAgICAgcXVvdGllbnQgPSBuZXcgU21hbGxJbnRlZ2VyKHF1b3RpZW50KTtcclxuXHRcdCAgICAgICAgfSBlbHNlIHF1b3RpZW50ID0gbmV3IEJpZ0ludGVnZXIocXVvdGllbnQsIHFTaWduKTtcclxuXHRcdCAgICAgICAgaWYgKHR5cGVvZiBtb2QgPT09IFwibnVtYmVyXCIpIHtcclxuXHRcdCAgICAgICAgICAgIGlmIChtU2lnbikgbW9kID0gLW1vZDtcclxuXHRcdCAgICAgICAgICAgIG1vZCA9IG5ldyBTbWFsbEludGVnZXIobW9kKTtcclxuXHRcdCAgICAgICAgfSBlbHNlIG1vZCA9IG5ldyBCaWdJbnRlZ2VyKG1vZCwgbVNpZ24pO1xyXG5cdFx0ICAgICAgICByZXR1cm4gW3F1b3RpZW50LCBtb2RdO1xyXG5cdFx0ICAgIH1cclxuXHJcblx0XHQgICAgQmlnSW50ZWdlci5wcm90b3R5cGUuZGl2bW9kID0gZnVuY3Rpb24gKHYpIHtcclxuXHRcdCAgICAgICAgdmFyIHJlc3VsdCA9IGRpdk1vZEFueSh0aGlzLCB2KTtcclxuXHRcdCAgICAgICAgcmV0dXJuIHtcclxuXHRcdCAgICAgICAgICAgIHF1b3RpZW50OiByZXN1bHRbMF0sXHJcblx0XHQgICAgICAgICAgICByZW1haW5kZXI6IHJlc3VsdFsxXVxyXG5cdFx0ICAgICAgICB9O1xyXG5cdFx0ICAgIH07XHJcblx0XHQgICAgTmF0aXZlQmlnSW50LnByb3RvdHlwZS5kaXZtb2QgPSBTbWFsbEludGVnZXIucHJvdG90eXBlLmRpdm1vZCA9IEJpZ0ludGVnZXIucHJvdG90eXBlLmRpdm1vZDtcclxuXHJcblxyXG5cdFx0ICAgIEJpZ0ludGVnZXIucHJvdG90eXBlLmRpdmlkZSA9IGZ1bmN0aW9uICh2KSB7XHJcblx0XHQgICAgICAgIHJldHVybiBkaXZNb2RBbnkodGhpcywgdilbMF07XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBOYXRpdmVCaWdJbnQucHJvdG90eXBlLm92ZXIgPSBOYXRpdmVCaWdJbnQucHJvdG90eXBlLmRpdmlkZSA9IGZ1bmN0aW9uICh2KSB7XHJcblx0XHQgICAgICAgIHJldHVybiBuZXcgTmF0aXZlQmlnSW50KHRoaXMudmFsdWUgLyBwYXJzZVZhbHVlKHYpLnZhbHVlKTtcclxuXHRcdCAgICB9O1xyXG5cdFx0ICAgIFNtYWxsSW50ZWdlci5wcm90b3R5cGUub3ZlciA9IFNtYWxsSW50ZWdlci5wcm90b3R5cGUuZGl2aWRlID0gQmlnSW50ZWdlci5wcm90b3R5cGUub3ZlciA9IEJpZ0ludGVnZXIucHJvdG90eXBlLmRpdmlkZTtcclxuXHJcblx0XHQgICAgQmlnSW50ZWdlci5wcm90b3R5cGUubW9kID0gZnVuY3Rpb24gKHYpIHtcclxuXHRcdCAgICAgICAgcmV0dXJuIGRpdk1vZEFueSh0aGlzLCB2KVsxXTtcclxuXHRcdCAgICB9O1xyXG5cdFx0ICAgIE5hdGl2ZUJpZ0ludC5wcm90b3R5cGUubW9kID0gTmF0aXZlQmlnSW50LnByb3RvdHlwZS5yZW1haW5kZXIgPSBmdW5jdGlvbiAodikge1xyXG5cdFx0ICAgICAgICByZXR1cm4gbmV3IE5hdGl2ZUJpZ0ludCh0aGlzLnZhbHVlICUgcGFyc2VWYWx1ZSh2KS52YWx1ZSk7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBTbWFsbEludGVnZXIucHJvdG90eXBlLnJlbWFpbmRlciA9IFNtYWxsSW50ZWdlci5wcm90b3R5cGUubW9kID0gQmlnSW50ZWdlci5wcm90b3R5cGUucmVtYWluZGVyID0gQmlnSW50ZWdlci5wcm90b3R5cGUubW9kO1xyXG5cclxuXHRcdCAgICBCaWdJbnRlZ2VyLnByb3RvdHlwZS5wb3cgPSBmdW5jdGlvbiAodikge1xyXG5cdFx0ICAgICAgICB2YXIgbiA9IHBhcnNlVmFsdWUodiksXHJcblx0XHQgICAgICAgICAgICBhID0gdGhpcy52YWx1ZSxcclxuXHRcdCAgICAgICAgICAgIGIgPSBuLnZhbHVlLFxyXG5cdFx0ICAgICAgICAgICAgdmFsdWUsIHgsIHk7XHJcblx0XHQgICAgICAgIGlmIChiID09PSAwKSByZXR1cm4gSW50ZWdlclsxXTtcclxuXHRcdCAgICAgICAgaWYgKGEgPT09IDApIHJldHVybiBJbnRlZ2VyWzBdO1xyXG5cdFx0ICAgICAgICBpZiAoYSA9PT0gMSkgcmV0dXJuIEludGVnZXJbMV07XHJcblx0XHQgICAgICAgIGlmIChhID09PSAtMSkgcmV0dXJuIG4uaXNFdmVuKCkgPyBJbnRlZ2VyWzFdIDogSW50ZWdlclstMV07XHJcblx0XHQgICAgICAgIGlmIChuLnNpZ24pIHtcclxuXHRcdCAgICAgICAgICAgIHJldHVybiBJbnRlZ2VyWzBdO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIGlmICghbi5pc1NtYWxsKSB0aHJvdyBuZXcgRXJyb3IoXCJUaGUgZXhwb25lbnQgXCIgKyBuLnRvU3RyaW5nKCkgKyBcIiBpcyB0b28gbGFyZ2UuXCIpO1xyXG5cdFx0ICAgICAgICBpZiAodGhpcy5pc1NtYWxsKSB7XHJcblx0XHQgICAgICAgICAgICBpZiAoaXNQcmVjaXNlKHZhbHVlID0gTWF0aC5wb3coYSwgYikpKVxyXG5cdFx0ICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU21hbGxJbnRlZ2VyKHRydW5jYXRlKHZhbHVlKSk7XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgeCA9IHRoaXM7XHJcblx0XHQgICAgICAgIHkgPSBJbnRlZ2VyWzFdO1xyXG5cdFx0ICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG5cdFx0ICAgICAgICAgICAgaWYgKGIgJiAxID09PSAxKSB7XHJcblx0XHQgICAgICAgICAgICAgICAgeSA9IHkudGltZXMoeCk7XHJcblx0XHQgICAgICAgICAgICAgICAgLS1iO1xyXG5cdFx0ICAgICAgICAgICAgfVxyXG5cdFx0ICAgICAgICAgICAgaWYgKGIgPT09IDApIGJyZWFrO1xyXG5cdFx0ICAgICAgICAgICAgYiAvPSAyO1xyXG5cdFx0ICAgICAgICAgICAgeCA9IHguc3F1YXJlKCk7XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgcmV0dXJuIHk7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBTbWFsbEludGVnZXIucHJvdG90eXBlLnBvdyA9IEJpZ0ludGVnZXIucHJvdG90eXBlLnBvdztcclxuXHJcblx0XHQgICAgTmF0aXZlQmlnSW50LnByb3RvdHlwZS5wb3cgPSBmdW5jdGlvbiAodikge1xyXG5cdFx0ICAgICAgICB2YXIgbiA9IHBhcnNlVmFsdWUodik7XHJcblx0XHQgICAgICAgIHZhciBhID0gdGhpcy52YWx1ZSwgYiA9IG4udmFsdWU7XHJcblx0XHQgICAgICAgIHZhciBfMCA9IEJpZ0ludCgwKSwgXzEgPSBCaWdJbnQoMSksIF8yID0gQmlnSW50KDIpO1xyXG5cdFx0ICAgICAgICBpZiAoYiA9PT0gXzApIHJldHVybiBJbnRlZ2VyWzFdO1xyXG5cdFx0ICAgICAgICBpZiAoYSA9PT0gXzApIHJldHVybiBJbnRlZ2VyWzBdO1xyXG5cdFx0ICAgICAgICBpZiAoYSA9PT0gXzEpIHJldHVybiBJbnRlZ2VyWzFdO1xyXG5cdFx0ICAgICAgICBpZiAoYSA9PT0gQmlnSW50KC0xKSkgcmV0dXJuIG4uaXNFdmVuKCkgPyBJbnRlZ2VyWzFdIDogSW50ZWdlclstMV07XHJcblx0XHQgICAgICAgIGlmIChuLmlzTmVnYXRpdmUoKSkgcmV0dXJuIG5ldyBOYXRpdmVCaWdJbnQoXzApO1xyXG5cdFx0ICAgICAgICB2YXIgeCA9IHRoaXM7XHJcblx0XHQgICAgICAgIHZhciB5ID0gSW50ZWdlclsxXTtcclxuXHRcdCAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuXHRcdCAgICAgICAgICAgIGlmICgoYiAmIF8xKSA9PT0gXzEpIHtcclxuXHRcdCAgICAgICAgICAgICAgICB5ID0geS50aW1lcyh4KTtcclxuXHRcdCAgICAgICAgICAgICAgICAtLWI7XHJcblx0XHQgICAgICAgICAgICB9XHJcblx0XHQgICAgICAgICAgICBpZiAoYiA9PT0gXzApIGJyZWFrO1xyXG5cdFx0ICAgICAgICAgICAgYiAvPSBfMjtcclxuXHRcdCAgICAgICAgICAgIHggPSB4LnNxdWFyZSgpO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIHJldHVybiB5O1xyXG5cdFx0ICAgIH07XHJcblxyXG5cdFx0ICAgIEJpZ0ludGVnZXIucHJvdG90eXBlLm1vZFBvdyA9IGZ1bmN0aW9uIChleHAsIG1vZCkge1xyXG5cdFx0ICAgICAgICBleHAgPSBwYXJzZVZhbHVlKGV4cCk7XHJcblx0XHQgICAgICAgIG1vZCA9IHBhcnNlVmFsdWUobW9kKTtcclxuXHRcdCAgICAgICAgaWYgKG1vZC5pc1plcm8oKSkgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHRha2UgbW9kUG93IHdpdGggbW9kdWx1cyAwXCIpO1xyXG5cdFx0ICAgICAgICB2YXIgciA9IEludGVnZXJbMV0sXHJcblx0XHQgICAgICAgICAgICBiYXNlID0gdGhpcy5tb2QobW9kKTtcclxuXHRcdCAgICAgICAgaWYgKGV4cC5pc05lZ2F0aXZlKCkpIHtcclxuXHRcdCAgICAgICAgICAgIGV4cCA9IGV4cC5tdWx0aXBseShJbnRlZ2VyWy0xXSk7XHJcblx0XHQgICAgICAgICAgICBiYXNlID0gYmFzZS5tb2RJbnYobW9kKTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICB3aGlsZSAoZXhwLmlzUG9zaXRpdmUoKSkge1xyXG5cdFx0ICAgICAgICAgICAgaWYgKGJhc2UuaXNaZXJvKCkpIHJldHVybiBJbnRlZ2VyWzBdO1xyXG5cdFx0ICAgICAgICAgICAgaWYgKGV4cC5pc09kZCgpKSByID0gci5tdWx0aXBseShiYXNlKS5tb2QobW9kKTtcclxuXHRcdCAgICAgICAgICAgIGV4cCA9IGV4cC5kaXZpZGUoMik7XHJcblx0XHQgICAgICAgICAgICBiYXNlID0gYmFzZS5zcXVhcmUoKS5tb2QobW9kKTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICByZXR1cm4gcjtcclxuXHRcdCAgICB9O1xyXG5cdFx0ICAgIE5hdGl2ZUJpZ0ludC5wcm90b3R5cGUubW9kUG93ID0gU21hbGxJbnRlZ2VyLnByb3RvdHlwZS5tb2RQb3cgPSBCaWdJbnRlZ2VyLnByb3RvdHlwZS5tb2RQb3c7XHJcblxyXG5cdFx0ICAgIGZ1bmN0aW9uIGNvbXBhcmVBYnMoYSwgYikge1xyXG5cdFx0ICAgICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XHJcblx0XHQgICAgICAgICAgICByZXR1cm4gYS5sZW5ndGggPiBiLmxlbmd0aCA/IDEgOiAtMTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICBmb3IgKHZhciBpID0gYS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG5cdFx0ICAgICAgICAgICAgaWYgKGFbaV0gIT09IGJbaV0pIHJldHVybiBhW2ldID4gYltpXSA/IDEgOiAtMTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICByZXR1cm4gMDtcclxuXHRcdCAgICB9XHJcblxyXG5cdFx0ICAgIEJpZ0ludGVnZXIucHJvdG90eXBlLmNvbXBhcmVBYnMgPSBmdW5jdGlvbiAodikge1xyXG5cdFx0ICAgICAgICB2YXIgbiA9IHBhcnNlVmFsdWUodiksXHJcblx0XHQgICAgICAgICAgICBhID0gdGhpcy52YWx1ZSxcclxuXHRcdCAgICAgICAgICAgIGIgPSBuLnZhbHVlO1xyXG5cdFx0ICAgICAgICBpZiAobi5pc1NtYWxsKSByZXR1cm4gMTtcclxuXHRcdCAgICAgICAgcmV0dXJuIGNvbXBhcmVBYnMoYSwgYik7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBTbWFsbEludGVnZXIucHJvdG90eXBlLmNvbXBhcmVBYnMgPSBmdW5jdGlvbiAodikge1xyXG5cdFx0ICAgICAgICB2YXIgbiA9IHBhcnNlVmFsdWUodiksXHJcblx0XHQgICAgICAgICAgICBhID0gTWF0aC5hYnModGhpcy52YWx1ZSksXHJcblx0XHQgICAgICAgICAgICBiID0gbi52YWx1ZTtcclxuXHRcdCAgICAgICAgaWYgKG4uaXNTbWFsbCkge1xyXG5cdFx0ICAgICAgICAgICAgYiA9IE1hdGguYWJzKGIpO1xyXG5cdFx0ICAgICAgICAgICAgcmV0dXJuIGEgPT09IGIgPyAwIDogYSA+IGIgPyAxIDogLTE7XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgcmV0dXJuIC0xO1xyXG5cdFx0ICAgIH07XHJcblx0XHQgICAgTmF0aXZlQmlnSW50LnByb3RvdHlwZS5jb21wYXJlQWJzID0gZnVuY3Rpb24gKHYpIHtcclxuXHRcdCAgICAgICAgdmFyIGEgPSB0aGlzLnZhbHVlO1xyXG5cdFx0ICAgICAgICB2YXIgYiA9IHBhcnNlVmFsdWUodikudmFsdWU7XHJcblx0XHQgICAgICAgIGEgPSBhID49IDAgPyBhIDogLWE7XHJcblx0XHQgICAgICAgIGIgPSBiID49IDAgPyBiIDogLWI7XHJcblx0XHQgICAgICAgIHJldHVybiBhID09PSBiID8gMCA6IGEgPiBiID8gMSA6IC0xO1xyXG5cdFx0ICAgIH07XHJcblxyXG5cdFx0ICAgIEJpZ0ludGVnZXIucHJvdG90eXBlLmNvbXBhcmUgPSBmdW5jdGlvbiAodikge1xyXG5cdFx0ICAgICAgICAvLyBTZWUgZGlzY3Vzc2lvbiBhYm91dCBjb21wYXJpc29uIHdpdGggSW5maW5pdHk6XHJcblx0XHQgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wZXRlcm9sc29uL0JpZ0ludGVnZXIuanMvaXNzdWVzLzYxXHJcblx0XHQgICAgICAgIGlmICh2ID09PSBJbmZpbml0eSkge1xyXG5cdFx0ICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIGlmICh2ID09PSAtSW5maW5pdHkpIHtcclxuXHRcdCAgICAgICAgICAgIHJldHVybiAxO1xyXG5cdFx0ICAgICAgICB9XHJcblxyXG5cdFx0ICAgICAgICB2YXIgbiA9IHBhcnNlVmFsdWUodiksXHJcblx0XHQgICAgICAgICAgICBhID0gdGhpcy52YWx1ZSxcclxuXHRcdCAgICAgICAgICAgIGIgPSBuLnZhbHVlO1xyXG5cdFx0ICAgICAgICBpZiAodGhpcy5zaWduICE9PSBuLnNpZ24pIHtcclxuXHRcdCAgICAgICAgICAgIHJldHVybiBuLnNpZ24gPyAxIDogLTE7XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgaWYgKG4uaXNTbWFsbCkge1xyXG5cdFx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2lnbiA/IC0xIDogMTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICByZXR1cm4gY29tcGFyZUFicyhhLCBiKSAqICh0aGlzLnNpZ24gPyAtMSA6IDEpO1xyXG5cdFx0ICAgIH07XHJcblx0XHQgICAgQmlnSW50ZWdlci5wcm90b3R5cGUuY29tcGFyZVRvID0gQmlnSW50ZWdlci5wcm90b3R5cGUuY29tcGFyZTtcclxuXHJcblx0XHQgICAgU21hbGxJbnRlZ2VyLnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gKHYpIHtcclxuXHRcdCAgICAgICAgaWYgKHYgPT09IEluZmluaXR5KSB7XHJcblx0XHQgICAgICAgICAgICByZXR1cm4gLTE7XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgaWYgKHYgPT09IC1JbmZpbml0eSkge1xyXG5cdFx0ICAgICAgICAgICAgcmV0dXJuIDE7XHJcblx0XHQgICAgICAgIH1cclxuXHJcblx0XHQgICAgICAgIHZhciBuID0gcGFyc2VWYWx1ZSh2KSxcclxuXHRcdCAgICAgICAgICAgIGEgPSB0aGlzLnZhbHVlLFxyXG5cdFx0ICAgICAgICAgICAgYiA9IG4udmFsdWU7XHJcblx0XHQgICAgICAgIGlmIChuLmlzU21hbGwpIHtcclxuXHRcdCAgICAgICAgICAgIHJldHVybiBhID09IGIgPyAwIDogYSA+IGIgPyAxIDogLTE7XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgaWYgKGEgPCAwICE9PSBuLnNpZ24pIHtcclxuXHRcdCAgICAgICAgICAgIHJldHVybiBhIDwgMCA/IC0xIDogMTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICByZXR1cm4gYSA8IDAgPyAxIDogLTE7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBTbWFsbEludGVnZXIucHJvdG90eXBlLmNvbXBhcmVUbyA9IFNtYWxsSW50ZWdlci5wcm90b3R5cGUuY29tcGFyZTtcclxuXHJcblx0XHQgICAgTmF0aXZlQmlnSW50LnByb3RvdHlwZS5jb21wYXJlID0gZnVuY3Rpb24gKHYpIHtcclxuXHRcdCAgICAgICAgaWYgKHYgPT09IEluZmluaXR5KSB7XHJcblx0XHQgICAgICAgICAgICByZXR1cm4gLTE7XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgaWYgKHYgPT09IC1JbmZpbml0eSkge1xyXG5cdFx0ICAgICAgICAgICAgcmV0dXJuIDE7XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgdmFyIGEgPSB0aGlzLnZhbHVlO1xyXG5cdFx0ICAgICAgICB2YXIgYiA9IHBhcnNlVmFsdWUodikudmFsdWU7XHJcblx0XHQgICAgICAgIHJldHVybiBhID09PSBiID8gMCA6IGEgPiBiID8gMSA6IC0xO1xyXG5cdFx0ICAgIH07XHJcblx0XHQgICAgTmF0aXZlQmlnSW50LnByb3RvdHlwZS5jb21wYXJlVG8gPSBOYXRpdmVCaWdJbnQucHJvdG90eXBlLmNvbXBhcmU7XHJcblxyXG5cdFx0ICAgIEJpZ0ludGVnZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uICh2KSB7XHJcblx0XHQgICAgICAgIHJldHVybiB0aGlzLmNvbXBhcmUodikgPT09IDA7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBOYXRpdmVCaWdJbnQucHJvdG90eXBlLmVxID0gTmF0aXZlQmlnSW50LnByb3RvdHlwZS5lcXVhbHMgPSBTbWFsbEludGVnZXIucHJvdG90eXBlLmVxID0gU21hbGxJbnRlZ2VyLnByb3RvdHlwZS5lcXVhbHMgPSBCaWdJbnRlZ2VyLnByb3RvdHlwZS5lcSA9IEJpZ0ludGVnZXIucHJvdG90eXBlLmVxdWFscztcclxuXHJcblx0XHQgICAgQmlnSW50ZWdlci5wcm90b3R5cGUubm90RXF1YWxzID0gZnVuY3Rpb24gKHYpIHtcclxuXHRcdCAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZSh2KSAhPT0gMDtcclxuXHRcdCAgICB9O1xyXG5cdFx0ICAgIE5hdGl2ZUJpZ0ludC5wcm90b3R5cGUubmVxID0gTmF0aXZlQmlnSW50LnByb3RvdHlwZS5ub3RFcXVhbHMgPSBTbWFsbEludGVnZXIucHJvdG90eXBlLm5lcSA9IFNtYWxsSW50ZWdlci5wcm90b3R5cGUubm90RXF1YWxzID0gQmlnSW50ZWdlci5wcm90b3R5cGUubmVxID0gQmlnSW50ZWdlci5wcm90b3R5cGUubm90RXF1YWxzO1xyXG5cclxuXHRcdCAgICBCaWdJbnRlZ2VyLnByb3RvdHlwZS5ncmVhdGVyID0gZnVuY3Rpb24gKHYpIHtcclxuXHRcdCAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZSh2KSA+IDA7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBOYXRpdmVCaWdJbnQucHJvdG90eXBlLmd0ID0gTmF0aXZlQmlnSW50LnByb3RvdHlwZS5ncmVhdGVyID0gU21hbGxJbnRlZ2VyLnByb3RvdHlwZS5ndCA9IFNtYWxsSW50ZWdlci5wcm90b3R5cGUuZ3JlYXRlciA9IEJpZ0ludGVnZXIucHJvdG90eXBlLmd0ID0gQmlnSW50ZWdlci5wcm90b3R5cGUuZ3JlYXRlcjtcclxuXHJcblx0XHQgICAgQmlnSW50ZWdlci5wcm90b3R5cGUubGVzc2VyID0gZnVuY3Rpb24gKHYpIHtcclxuXHRcdCAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZSh2KSA8IDA7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBOYXRpdmVCaWdJbnQucHJvdG90eXBlLmx0ID0gTmF0aXZlQmlnSW50LnByb3RvdHlwZS5sZXNzZXIgPSBTbWFsbEludGVnZXIucHJvdG90eXBlLmx0ID0gU21hbGxJbnRlZ2VyLnByb3RvdHlwZS5sZXNzZXIgPSBCaWdJbnRlZ2VyLnByb3RvdHlwZS5sdCA9IEJpZ0ludGVnZXIucHJvdG90eXBlLmxlc3NlcjtcclxuXHJcblx0XHQgICAgQmlnSW50ZWdlci5wcm90b3R5cGUuZ3JlYXRlck9yRXF1YWxzID0gZnVuY3Rpb24gKHYpIHtcclxuXHRcdCAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZSh2KSA+PSAwO1xyXG5cdFx0ICAgIH07XHJcblx0XHQgICAgTmF0aXZlQmlnSW50LnByb3RvdHlwZS5nZXEgPSBOYXRpdmVCaWdJbnQucHJvdG90eXBlLmdyZWF0ZXJPckVxdWFscyA9IFNtYWxsSW50ZWdlci5wcm90b3R5cGUuZ2VxID0gU21hbGxJbnRlZ2VyLnByb3RvdHlwZS5ncmVhdGVyT3JFcXVhbHMgPSBCaWdJbnRlZ2VyLnByb3RvdHlwZS5nZXEgPSBCaWdJbnRlZ2VyLnByb3RvdHlwZS5ncmVhdGVyT3JFcXVhbHM7XHJcblxyXG5cdFx0ICAgIEJpZ0ludGVnZXIucHJvdG90eXBlLmxlc3Nlck9yRXF1YWxzID0gZnVuY3Rpb24gKHYpIHtcclxuXHRcdCAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZSh2KSA8PSAwO1xyXG5cdFx0ICAgIH07XHJcblx0XHQgICAgTmF0aXZlQmlnSW50LnByb3RvdHlwZS5sZXEgPSBOYXRpdmVCaWdJbnQucHJvdG90eXBlLmxlc3Nlck9yRXF1YWxzID0gU21hbGxJbnRlZ2VyLnByb3RvdHlwZS5sZXEgPSBTbWFsbEludGVnZXIucHJvdG90eXBlLmxlc3Nlck9yRXF1YWxzID0gQmlnSW50ZWdlci5wcm90b3R5cGUubGVxID0gQmlnSW50ZWdlci5wcm90b3R5cGUubGVzc2VyT3JFcXVhbHM7XHJcblxyXG5cdFx0ICAgIEJpZ0ludGVnZXIucHJvdG90eXBlLmlzRXZlbiA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdCAgICAgICAgcmV0dXJuICh0aGlzLnZhbHVlWzBdICYgMSkgPT09IDA7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBTbWFsbEludGVnZXIucHJvdG90eXBlLmlzRXZlbiA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdCAgICAgICAgcmV0dXJuICh0aGlzLnZhbHVlICYgMSkgPT09IDA7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBOYXRpdmVCaWdJbnQucHJvdG90eXBlLmlzRXZlbiA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdCAgICAgICAgcmV0dXJuICh0aGlzLnZhbHVlICYgQmlnSW50KDEpKSA9PT0gQmlnSW50KDApO1xyXG5cdFx0ICAgIH07XHJcblxyXG5cdFx0ICAgIEJpZ0ludGVnZXIucHJvdG90eXBlLmlzT2RkID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0ICAgICAgICByZXR1cm4gKHRoaXMudmFsdWVbMF0gJiAxKSA9PT0gMTtcclxuXHRcdCAgICB9O1xyXG5cdFx0ICAgIFNtYWxsSW50ZWdlci5wcm90b3R5cGUuaXNPZGQgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHQgICAgICAgIHJldHVybiAodGhpcy52YWx1ZSAmIDEpID09PSAxO1xyXG5cdFx0ICAgIH07XHJcblx0XHQgICAgTmF0aXZlQmlnSW50LnByb3RvdHlwZS5pc09kZCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdCAgICAgICAgcmV0dXJuICh0aGlzLnZhbHVlICYgQmlnSW50KDEpKSA9PT0gQmlnSW50KDEpO1xyXG5cdFx0ICAgIH07XHJcblxyXG5cdFx0ICAgIEJpZ0ludGVnZXIucHJvdG90eXBlLmlzUG9zaXRpdmUgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHQgICAgICAgIHJldHVybiAhdGhpcy5zaWduO1xyXG5cdFx0ICAgIH07XHJcblx0XHQgICAgU21hbGxJbnRlZ2VyLnByb3RvdHlwZS5pc1Bvc2l0aXZlID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0ICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSA+IDA7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBOYXRpdmVCaWdJbnQucHJvdG90eXBlLmlzUG9zaXRpdmUgPSBTbWFsbEludGVnZXIucHJvdG90eXBlLmlzUG9zaXRpdmU7XHJcblxyXG5cdFx0ICAgIEJpZ0ludGVnZXIucHJvdG90eXBlLmlzTmVnYXRpdmUgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHQgICAgICAgIHJldHVybiB0aGlzLnNpZ247XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBTbWFsbEludGVnZXIucHJvdG90eXBlLmlzTmVnYXRpdmUgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHQgICAgICAgIHJldHVybiB0aGlzLnZhbHVlIDwgMDtcclxuXHRcdCAgICB9O1xyXG5cdFx0ICAgIE5hdGl2ZUJpZ0ludC5wcm90b3R5cGUuaXNOZWdhdGl2ZSA9IFNtYWxsSW50ZWdlci5wcm90b3R5cGUuaXNOZWdhdGl2ZTtcclxuXHJcblx0XHQgICAgQmlnSW50ZWdlci5wcm90b3R5cGUuaXNVbml0ID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0ICAgICAgICByZXR1cm4gZmFsc2U7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBTbWFsbEludGVnZXIucHJvdG90eXBlLmlzVW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdCAgICAgICAgcmV0dXJuIE1hdGguYWJzKHRoaXMudmFsdWUpID09PSAxO1xyXG5cdFx0ICAgIH07XHJcblx0XHQgICAgTmF0aXZlQmlnSW50LnByb3RvdHlwZS5pc1VuaXQgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHQgICAgICAgIHJldHVybiB0aGlzLmFicygpLnZhbHVlID09PSBCaWdJbnQoMSk7XHJcblx0XHQgICAgfTtcclxuXHJcblx0XHQgICAgQmlnSW50ZWdlci5wcm90b3R5cGUuaXNaZXJvID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0ICAgICAgICByZXR1cm4gZmFsc2U7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBTbWFsbEludGVnZXIucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdCAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IDA7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBOYXRpdmVCaWdJbnQucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdCAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IEJpZ0ludCgwKTtcclxuXHRcdCAgICB9O1xyXG5cclxuXHRcdCAgICBCaWdJbnRlZ2VyLnByb3RvdHlwZS5pc0RpdmlzaWJsZUJ5ID0gZnVuY3Rpb24gKHYpIHtcclxuXHRcdCAgICAgICAgdmFyIG4gPSBwYXJzZVZhbHVlKHYpO1xyXG5cdFx0ICAgICAgICBpZiAobi5pc1plcm8oKSkgcmV0dXJuIGZhbHNlO1xyXG5cdFx0ICAgICAgICBpZiAobi5pc1VuaXQoKSkgcmV0dXJuIHRydWU7XHJcblx0XHQgICAgICAgIGlmIChuLmNvbXBhcmVBYnMoMikgPT09IDApIHJldHVybiB0aGlzLmlzRXZlbigpO1xyXG5cdFx0ICAgICAgICByZXR1cm4gdGhpcy5tb2QobikuaXNaZXJvKCk7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBOYXRpdmVCaWdJbnQucHJvdG90eXBlLmlzRGl2aXNpYmxlQnkgPSBTbWFsbEludGVnZXIucHJvdG90eXBlLmlzRGl2aXNpYmxlQnkgPSBCaWdJbnRlZ2VyLnByb3RvdHlwZS5pc0RpdmlzaWJsZUJ5O1xyXG5cclxuXHRcdCAgICBmdW5jdGlvbiBpc0Jhc2ljUHJpbWUodikge1xyXG5cdFx0ICAgICAgICB2YXIgbiA9IHYuYWJzKCk7XHJcblx0XHQgICAgICAgIGlmIChuLmlzVW5pdCgpKSByZXR1cm4gZmFsc2U7XHJcblx0XHQgICAgICAgIGlmIChuLmVxdWFscygyKSB8fCBuLmVxdWFscygzKSB8fCBuLmVxdWFscyg1KSkgcmV0dXJuIHRydWU7XHJcblx0XHQgICAgICAgIGlmIChuLmlzRXZlbigpIHx8IG4uaXNEaXZpc2libGVCeSgzKSB8fCBuLmlzRGl2aXNpYmxlQnkoNSkpIHJldHVybiBmYWxzZTtcclxuXHRcdCAgICAgICAgaWYgKG4ubGVzc2VyKDQ5KSkgcmV0dXJuIHRydWU7XHJcblx0XHQgICAgICAgIC8vIHdlIGRvbid0IGtub3cgaWYgaXQncyBwcmltZTogbGV0IHRoZSBvdGhlciBmdW5jdGlvbnMgZmlndXJlIGl0IG91dFxyXG5cdFx0ICAgIH1cclxuXHJcblx0XHQgICAgZnVuY3Rpb24gbWlsbGVyUmFiaW5UZXN0KG4sIGEpIHtcclxuXHRcdCAgICAgICAgdmFyIG5QcmV2ID0gbi5wcmV2KCksXHJcblx0XHQgICAgICAgICAgICBiID0gblByZXYsXHJcblx0XHQgICAgICAgICAgICByID0gMCxcclxuXHRcdCAgICAgICAgICAgIGQsIGksIHg7XHJcblx0XHQgICAgICAgIHdoaWxlIChiLmlzRXZlbigpKSBiID0gYi5kaXZpZGUoMiksIHIrKztcclxuXHRcdCAgICAgICAgbmV4dDogZm9yIChpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcclxuXHRcdCAgICAgICAgICAgIGlmIChuLmxlc3NlcihhW2ldKSkgY29udGludWU7XHJcblx0XHQgICAgICAgICAgICB4ID0gYmlnSW50KGFbaV0pLm1vZFBvdyhiLCBuKTtcclxuXHRcdCAgICAgICAgICAgIGlmICh4LmlzVW5pdCgpIHx8IHguZXF1YWxzKG5QcmV2KSkgY29udGludWU7XHJcblx0XHQgICAgICAgICAgICBmb3IgKGQgPSByIC0gMTsgZCAhPSAwOyBkLS0pIHtcclxuXHRcdCAgICAgICAgICAgICAgICB4ID0geC5zcXVhcmUoKS5tb2Qobik7XHJcblx0XHQgICAgICAgICAgICAgICAgaWYgKHguaXNVbml0KCkpIHJldHVybiBmYWxzZTtcclxuXHRcdCAgICAgICAgICAgICAgICBpZiAoeC5lcXVhbHMoblByZXYpKSBjb250aW51ZSBuZXh0O1xyXG5cdFx0ICAgICAgICAgICAgfVxyXG5cdFx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIHJldHVybiB0cnVlO1xyXG5cdFx0ICAgIH1cclxuXHJcblx0XHQgICAgLy8gU2V0IFwic3RyaWN0XCIgdG8gdHJ1ZSB0byBmb3JjZSBHUkgtc3VwcG9ydGVkIGxvd2VyIGJvdW5kIG9mIDIqbG9nKE4pXjJcclxuXHRcdCAgICBCaWdJbnRlZ2VyLnByb3RvdHlwZS5pc1ByaW1lID0gZnVuY3Rpb24gKHN0cmljdCkge1xyXG5cdFx0ICAgICAgICB2YXIgaXNQcmltZSA9IGlzQmFzaWNQcmltZSh0aGlzKTtcclxuXHRcdCAgICAgICAgaWYgKGlzUHJpbWUgIT09IHVuZGVmaW5lZCQxKSByZXR1cm4gaXNQcmltZTtcclxuXHRcdCAgICAgICAgdmFyIG4gPSB0aGlzLmFicygpO1xyXG5cdFx0ICAgICAgICB2YXIgYml0cyA9IG4uYml0TGVuZ3RoKCk7XHJcblx0XHQgICAgICAgIGlmIChiaXRzIDw9IDY0KVxyXG5cdFx0ICAgICAgICAgICAgcmV0dXJuIG1pbGxlclJhYmluVGVzdChuLCBbMiwgMywgNSwgNywgMTEsIDEzLCAxNywgMTksIDIzLCAyOSwgMzEsIDM3XSk7XHJcblx0XHQgICAgICAgIHZhciBsb2dOID0gTWF0aC5sb2coMikgKiBiaXRzLnRvSlNOdW1iZXIoKTtcclxuXHRcdCAgICAgICAgdmFyIHQgPSBNYXRoLmNlaWwoKHN0cmljdCA9PT0gdHJ1ZSkgPyAoMiAqIE1hdGgucG93KGxvZ04sIDIpKSA6IGxvZ04pO1xyXG5cdFx0ICAgICAgICBmb3IgKHZhciBhID0gW10sIGkgPSAwOyBpIDwgdDsgaSsrKSB7XHJcblx0XHQgICAgICAgICAgICBhLnB1c2goYmlnSW50KGkgKyAyKSk7XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgcmV0dXJuIG1pbGxlclJhYmluVGVzdChuLCBhKTtcclxuXHRcdCAgICB9O1xyXG5cdFx0ICAgIE5hdGl2ZUJpZ0ludC5wcm90b3R5cGUuaXNQcmltZSA9IFNtYWxsSW50ZWdlci5wcm90b3R5cGUuaXNQcmltZSA9IEJpZ0ludGVnZXIucHJvdG90eXBlLmlzUHJpbWU7XHJcblxyXG5cdFx0ICAgIEJpZ0ludGVnZXIucHJvdG90eXBlLmlzUHJvYmFibGVQcmltZSA9IGZ1bmN0aW9uIChpdGVyYXRpb25zLCBybmcpIHtcclxuXHRcdCAgICAgICAgdmFyIGlzUHJpbWUgPSBpc0Jhc2ljUHJpbWUodGhpcyk7XHJcblx0XHQgICAgICAgIGlmIChpc1ByaW1lICE9PSB1bmRlZmluZWQkMSkgcmV0dXJuIGlzUHJpbWU7XHJcblx0XHQgICAgICAgIHZhciBuID0gdGhpcy5hYnMoKTtcclxuXHRcdCAgICAgICAgdmFyIHQgPSBpdGVyYXRpb25zID09PSB1bmRlZmluZWQkMSA/IDUgOiBpdGVyYXRpb25zO1xyXG5cdFx0ICAgICAgICBmb3IgKHZhciBhID0gW10sIGkgPSAwOyBpIDwgdDsgaSsrKSB7XHJcblx0XHQgICAgICAgICAgICBhLnB1c2goYmlnSW50LnJhbmRCZXR3ZWVuKDIsIG4ubWludXMoMiksIHJuZykpO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIHJldHVybiBtaWxsZXJSYWJpblRlc3QobiwgYSk7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBOYXRpdmVCaWdJbnQucHJvdG90eXBlLmlzUHJvYmFibGVQcmltZSA9IFNtYWxsSW50ZWdlci5wcm90b3R5cGUuaXNQcm9iYWJsZVByaW1lID0gQmlnSW50ZWdlci5wcm90b3R5cGUuaXNQcm9iYWJsZVByaW1lO1xyXG5cclxuXHRcdCAgICBCaWdJbnRlZ2VyLnByb3RvdHlwZS5tb2RJbnYgPSBmdW5jdGlvbiAobikge1xyXG5cdFx0ICAgICAgICB2YXIgdCA9IGJpZ0ludC56ZXJvLCBuZXdUID0gYmlnSW50Lm9uZSwgciA9IHBhcnNlVmFsdWUobiksIG5ld1IgPSB0aGlzLmFicygpLCBxLCBsYXN0VCwgbGFzdFI7XHJcblx0XHQgICAgICAgIHdoaWxlICghbmV3Ui5pc1plcm8oKSkge1xyXG5cdFx0ICAgICAgICAgICAgcSA9IHIuZGl2aWRlKG5ld1IpO1xyXG5cdFx0ICAgICAgICAgICAgbGFzdFQgPSB0O1xyXG5cdFx0ICAgICAgICAgICAgbGFzdFIgPSByO1xyXG5cdFx0ICAgICAgICAgICAgdCA9IG5ld1Q7XHJcblx0XHQgICAgICAgICAgICByID0gbmV3UjtcclxuXHRcdCAgICAgICAgICAgIG5ld1QgPSBsYXN0VC5zdWJ0cmFjdChxLm11bHRpcGx5KG5ld1QpKTtcclxuXHRcdCAgICAgICAgICAgIG5ld1IgPSBsYXN0Ui5zdWJ0cmFjdChxLm11bHRpcGx5KG5ld1IpKTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICBpZiAoIXIuaXNVbml0KCkpIHRocm93IG5ldyBFcnJvcih0aGlzLnRvU3RyaW5nKCkgKyBcIiBhbmQgXCIgKyBuLnRvU3RyaW5nKCkgKyBcIiBhcmUgbm90IGNvLXByaW1lXCIpO1xyXG5cdFx0ICAgICAgICBpZiAodC5jb21wYXJlKDApID09PSAtMSkge1xyXG5cdFx0ICAgICAgICAgICAgdCA9IHQuYWRkKG4pO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIGlmICh0aGlzLmlzTmVnYXRpdmUoKSkge1xyXG5cdFx0ICAgICAgICAgICAgcmV0dXJuIHQubmVnYXRlKCk7XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgcmV0dXJuIHQ7XHJcblx0XHQgICAgfTtcclxuXHJcblx0XHQgICAgTmF0aXZlQmlnSW50LnByb3RvdHlwZS5tb2RJbnYgPSBTbWFsbEludGVnZXIucHJvdG90eXBlLm1vZEludiA9IEJpZ0ludGVnZXIucHJvdG90eXBlLm1vZEludjtcclxuXHJcblx0XHQgICAgQmlnSW50ZWdlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdCAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZTtcclxuXHRcdCAgICAgICAgaWYgKHRoaXMuc2lnbikge1xyXG5cdFx0ICAgICAgICAgICAgcmV0dXJuIHN1YnRyYWN0U21hbGwodmFsdWUsIDEsIHRoaXMuc2lnbik7XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgcmV0dXJuIG5ldyBCaWdJbnRlZ2VyKGFkZFNtYWxsKHZhbHVlLCAxKSwgdGhpcy5zaWduKTtcclxuXHRcdCAgICB9O1xyXG5cdFx0ICAgIFNtYWxsSW50ZWdlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdCAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZTtcclxuXHRcdCAgICAgICAgaWYgKHZhbHVlICsgMSA8IE1BWF9JTlQpIHJldHVybiBuZXcgU21hbGxJbnRlZ2VyKHZhbHVlICsgMSk7XHJcblx0XHQgICAgICAgIHJldHVybiBuZXcgQmlnSW50ZWdlcihNQVhfSU5UX0FSUiwgZmFsc2UpO1xyXG5cdFx0ICAgIH07XHJcblx0XHQgICAgTmF0aXZlQmlnSW50LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0ICAgICAgICByZXR1cm4gbmV3IE5hdGl2ZUJpZ0ludCh0aGlzLnZhbHVlICsgQmlnSW50KDEpKTtcclxuXHRcdCAgICB9O1xyXG5cclxuXHRcdCAgICBCaWdJbnRlZ2VyLnByb3RvdHlwZS5wcmV2ID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0ICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLnZhbHVlO1xyXG5cdFx0ICAgICAgICBpZiAodGhpcy5zaWduKSB7XHJcblx0XHQgICAgICAgICAgICByZXR1cm4gbmV3IEJpZ0ludGVnZXIoYWRkU21hbGwodmFsdWUsIDEpLCB0cnVlKTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICByZXR1cm4gc3VidHJhY3RTbWFsbCh2YWx1ZSwgMSwgdGhpcy5zaWduKTtcclxuXHRcdCAgICB9O1xyXG5cdFx0ICAgIFNtYWxsSW50ZWdlci5wcm90b3R5cGUucHJldiA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdCAgICAgICAgdmFyIHZhbHVlID0gdGhpcy52YWx1ZTtcclxuXHRcdCAgICAgICAgaWYgKHZhbHVlIC0gMSA+IC1NQVhfSU5UKSByZXR1cm4gbmV3IFNtYWxsSW50ZWdlcih2YWx1ZSAtIDEpO1xyXG5cdFx0ICAgICAgICByZXR1cm4gbmV3IEJpZ0ludGVnZXIoTUFYX0lOVF9BUlIsIHRydWUpO1xyXG5cdFx0ICAgIH07XHJcblx0XHQgICAgTmF0aXZlQmlnSW50LnByb3RvdHlwZS5wcmV2ID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0ICAgICAgICByZXR1cm4gbmV3IE5hdGl2ZUJpZ0ludCh0aGlzLnZhbHVlIC0gQmlnSW50KDEpKTtcclxuXHRcdCAgICB9O1xyXG5cclxuXHRcdCAgICB2YXIgcG93ZXJzT2ZUd28gPSBbMV07XHJcblx0XHQgICAgd2hpbGUgKDIgKiBwb3dlcnNPZlR3b1twb3dlcnNPZlR3by5sZW5ndGggLSAxXSA8PSBCQVNFKSBwb3dlcnNPZlR3by5wdXNoKDIgKiBwb3dlcnNPZlR3b1twb3dlcnNPZlR3by5sZW5ndGggLSAxXSk7XHJcblx0XHQgICAgdmFyIHBvd2VyczJMZW5ndGggPSBwb3dlcnNPZlR3by5sZW5ndGgsIGhpZ2hlc3RQb3dlcjIgPSBwb3dlcnNPZlR3b1twb3dlcnMyTGVuZ3RoIC0gMV07XHJcblxyXG5cdFx0ICAgIGZ1bmN0aW9uIHNoaWZ0X2lzU21hbGwobikge1xyXG5cdFx0ICAgICAgICByZXR1cm4gTWF0aC5hYnMobikgPD0gQkFTRTtcclxuXHRcdCAgICB9XHJcblxyXG5cdFx0ICAgIEJpZ0ludGVnZXIucHJvdG90eXBlLnNoaWZ0TGVmdCA9IGZ1bmN0aW9uICh2KSB7XHJcblx0XHQgICAgICAgIHZhciBuID0gcGFyc2VWYWx1ZSh2KS50b0pTTnVtYmVyKCk7XHJcblx0XHQgICAgICAgIGlmICghc2hpZnRfaXNTbWFsbChuKSkge1xyXG5cdFx0ICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFN0cmluZyhuKSArIFwiIGlzIHRvbyBsYXJnZSBmb3Igc2hpZnRpbmcuXCIpO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIGlmIChuIDwgMCkgcmV0dXJuIHRoaXMuc2hpZnRSaWdodCgtbik7XHJcblx0XHQgICAgICAgIHZhciByZXN1bHQgPSB0aGlzO1xyXG5cdFx0ICAgICAgICBpZiAocmVzdWx0LmlzWmVybygpKSByZXR1cm4gcmVzdWx0O1xyXG5cdFx0ICAgICAgICB3aGlsZSAobiA+PSBwb3dlcnMyTGVuZ3RoKSB7XHJcblx0XHQgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQubXVsdGlwbHkoaGlnaGVzdFBvd2VyMik7XHJcblx0XHQgICAgICAgICAgICBuIC09IHBvd2VyczJMZW5ndGggLSAxO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIHJldHVybiByZXN1bHQubXVsdGlwbHkocG93ZXJzT2ZUd29bbl0pO1xyXG5cdFx0ICAgIH07XHJcblx0XHQgICAgTmF0aXZlQmlnSW50LnByb3RvdHlwZS5zaGlmdExlZnQgPSBTbWFsbEludGVnZXIucHJvdG90eXBlLnNoaWZ0TGVmdCA9IEJpZ0ludGVnZXIucHJvdG90eXBlLnNoaWZ0TGVmdDtcclxuXHJcblx0XHQgICAgQmlnSW50ZWdlci5wcm90b3R5cGUuc2hpZnRSaWdodCA9IGZ1bmN0aW9uICh2KSB7XHJcblx0XHQgICAgICAgIHZhciByZW1RdW87XHJcblx0XHQgICAgICAgIHZhciBuID0gcGFyc2VWYWx1ZSh2KS50b0pTTnVtYmVyKCk7XHJcblx0XHQgICAgICAgIGlmICghc2hpZnRfaXNTbWFsbChuKSkge1xyXG5cdFx0ICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFN0cmluZyhuKSArIFwiIGlzIHRvbyBsYXJnZSBmb3Igc2hpZnRpbmcuXCIpO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIGlmIChuIDwgMCkgcmV0dXJuIHRoaXMuc2hpZnRMZWZ0KC1uKTtcclxuXHRcdCAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXM7XHJcblx0XHQgICAgICAgIHdoaWxlIChuID49IHBvd2VyczJMZW5ndGgpIHtcclxuXHRcdCAgICAgICAgICAgIGlmIChyZXN1bHQuaXNaZXJvKCkgfHwgKHJlc3VsdC5pc05lZ2F0aXZlKCkgJiYgcmVzdWx0LmlzVW5pdCgpKSkgcmV0dXJuIHJlc3VsdDtcclxuXHRcdCAgICAgICAgICAgIHJlbVF1byA9IGRpdk1vZEFueShyZXN1bHQsIGhpZ2hlc3RQb3dlcjIpO1xyXG5cdFx0ICAgICAgICAgICAgcmVzdWx0ID0gcmVtUXVvWzFdLmlzTmVnYXRpdmUoKSA/IHJlbVF1b1swXS5wcmV2KCkgOiByZW1RdW9bMF07XHJcblx0XHQgICAgICAgICAgICBuIC09IHBvd2VyczJMZW5ndGggLSAxO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIHJlbVF1byA9IGRpdk1vZEFueShyZXN1bHQsIHBvd2Vyc09mVHdvW25dKTtcclxuXHRcdCAgICAgICAgcmV0dXJuIHJlbVF1b1sxXS5pc05lZ2F0aXZlKCkgPyByZW1RdW9bMF0ucHJldigpIDogcmVtUXVvWzBdO1xyXG5cdFx0ICAgIH07XHJcblx0XHQgICAgTmF0aXZlQmlnSW50LnByb3RvdHlwZS5zaGlmdFJpZ2h0ID0gU21hbGxJbnRlZ2VyLnByb3RvdHlwZS5zaGlmdFJpZ2h0ID0gQmlnSW50ZWdlci5wcm90b3R5cGUuc2hpZnRSaWdodDtcclxuXHJcblx0XHQgICAgZnVuY3Rpb24gYml0d2lzZSh4LCB5LCBmbikge1xyXG5cdFx0ICAgICAgICB5ID0gcGFyc2VWYWx1ZSh5KTtcclxuXHRcdCAgICAgICAgdmFyIHhTaWduID0geC5pc05lZ2F0aXZlKCksIHlTaWduID0geS5pc05lZ2F0aXZlKCk7XHJcblx0XHQgICAgICAgIHZhciB4UmVtID0geFNpZ24gPyB4Lm5vdCgpIDogeCxcclxuXHRcdCAgICAgICAgICAgIHlSZW0gPSB5U2lnbiA/IHkubm90KCkgOiB5O1xyXG5cdFx0ICAgICAgICB2YXIgeERpZ2l0ID0gMCwgeURpZ2l0ID0gMDtcclxuXHRcdCAgICAgICAgdmFyIHhEaXZNb2QgPSBudWxsLCB5RGl2TW9kID0gbnVsbDtcclxuXHRcdCAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xyXG5cdFx0ICAgICAgICB3aGlsZSAoIXhSZW0uaXNaZXJvKCkgfHwgIXlSZW0uaXNaZXJvKCkpIHtcclxuXHRcdCAgICAgICAgICAgIHhEaXZNb2QgPSBkaXZNb2RBbnkoeFJlbSwgaGlnaGVzdFBvd2VyMik7XHJcblx0XHQgICAgICAgICAgICB4RGlnaXQgPSB4RGl2TW9kWzFdLnRvSlNOdW1iZXIoKTtcclxuXHRcdCAgICAgICAgICAgIGlmICh4U2lnbikge1xyXG5cdFx0ICAgICAgICAgICAgICAgIHhEaWdpdCA9IGhpZ2hlc3RQb3dlcjIgLSAxIC0geERpZ2l0OyAvLyB0d28ncyBjb21wbGVtZW50IGZvciBuZWdhdGl2ZSBudW1iZXJzXHJcblx0XHQgICAgICAgICAgICB9XHJcblxyXG5cdFx0ICAgICAgICAgICAgeURpdk1vZCA9IGRpdk1vZEFueSh5UmVtLCBoaWdoZXN0UG93ZXIyKTtcclxuXHRcdCAgICAgICAgICAgIHlEaWdpdCA9IHlEaXZNb2RbMV0udG9KU051bWJlcigpO1xyXG5cdFx0ICAgICAgICAgICAgaWYgKHlTaWduKSB7XHJcblx0XHQgICAgICAgICAgICAgICAgeURpZ2l0ID0gaGlnaGVzdFBvd2VyMiAtIDEgLSB5RGlnaXQ7IC8vIHR3bydzIGNvbXBsZW1lbnQgZm9yIG5lZ2F0aXZlIG51bWJlcnNcclxuXHRcdCAgICAgICAgICAgIH1cclxuXHJcblx0XHQgICAgICAgICAgICB4UmVtID0geERpdk1vZFswXTtcclxuXHRcdCAgICAgICAgICAgIHlSZW0gPSB5RGl2TW9kWzBdO1xyXG5cdFx0ICAgICAgICAgICAgcmVzdWx0LnB1c2goZm4oeERpZ2l0LCB5RGlnaXQpKTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICB2YXIgc3VtID0gZm4oeFNpZ24gPyAxIDogMCwgeVNpZ24gPyAxIDogMCkgIT09IDAgPyBiaWdJbnQoLTEpIDogYmlnSW50KDApO1xyXG5cdFx0ICAgICAgICBmb3IgKHZhciBpID0gcmVzdWx0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaSAtPSAxKSB7XHJcblx0XHQgICAgICAgICAgICBzdW0gPSBzdW0ubXVsdGlwbHkoaGlnaGVzdFBvd2VyMikuYWRkKGJpZ0ludChyZXN1bHRbaV0pKTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICByZXR1cm4gc3VtO1xyXG5cdFx0ICAgIH1cclxuXHJcblx0XHQgICAgQmlnSW50ZWdlci5wcm90b3R5cGUubm90ID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0ICAgICAgICByZXR1cm4gdGhpcy5uZWdhdGUoKS5wcmV2KCk7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBOYXRpdmVCaWdJbnQucHJvdG90eXBlLm5vdCA9IFNtYWxsSW50ZWdlci5wcm90b3R5cGUubm90ID0gQmlnSW50ZWdlci5wcm90b3R5cGUubm90O1xyXG5cclxuXHRcdCAgICBCaWdJbnRlZ2VyLnByb3RvdHlwZS5hbmQgPSBmdW5jdGlvbiAobikge1xyXG5cdFx0ICAgICAgICByZXR1cm4gYml0d2lzZSh0aGlzLCBuLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYSAmIGI7IH0pO1xyXG5cdFx0ICAgIH07XHJcblx0XHQgICAgTmF0aXZlQmlnSW50LnByb3RvdHlwZS5hbmQgPSBTbWFsbEludGVnZXIucHJvdG90eXBlLmFuZCA9IEJpZ0ludGVnZXIucHJvdG90eXBlLmFuZDtcclxuXHJcblx0XHQgICAgQmlnSW50ZWdlci5wcm90b3R5cGUub3IgPSBmdW5jdGlvbiAobikge1xyXG5cdFx0ICAgICAgICByZXR1cm4gYml0d2lzZSh0aGlzLCBuLCBmdW5jdGlvbiAoYSwgYikgeyByZXR1cm4gYSB8IGI7IH0pO1xyXG5cdFx0ICAgIH07XHJcblx0XHQgICAgTmF0aXZlQmlnSW50LnByb3RvdHlwZS5vciA9IFNtYWxsSW50ZWdlci5wcm90b3R5cGUub3IgPSBCaWdJbnRlZ2VyLnByb3RvdHlwZS5vcjtcclxuXHJcblx0XHQgICAgQmlnSW50ZWdlci5wcm90b3R5cGUueG9yID0gZnVuY3Rpb24gKG4pIHtcclxuXHRcdCAgICAgICAgcmV0dXJuIGJpdHdpc2UodGhpcywgbiwgZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEgXiBiOyB9KTtcclxuXHRcdCAgICB9O1xyXG5cdFx0ICAgIE5hdGl2ZUJpZ0ludC5wcm90b3R5cGUueG9yID0gU21hbGxJbnRlZ2VyLnByb3RvdHlwZS54b3IgPSBCaWdJbnRlZ2VyLnByb3RvdHlwZS54b3I7XHJcblxyXG5cdFx0ICAgIHZhciBMT0JNQVNLX0kgPSAxIDw8IDMwLCBMT0JNQVNLX0JJID0gKEJBU0UgJiAtQkFTRSkgKiAoQkFTRSAmIC1CQVNFKSB8IExPQk1BU0tfSTtcclxuXHRcdCAgICBmdW5jdGlvbiByb3VnaExPQihuKSB7IC8vIGdldCBsb3dlc3RPbmVCaXQgKHJvdWdoKVxyXG5cdFx0ICAgICAgICAvLyBTbWFsbEludGVnZXI6IHJldHVybiBNaW4obG93ZXN0T25lQml0KG4pLCAxIDw8IDMwKVxyXG5cdFx0ICAgICAgICAvLyBCaWdJbnRlZ2VyOiByZXR1cm4gTWluKGxvd2VzdE9uZUJpdChuKSwgMSA8PCAxNCkgW0JBU0U9MWU3XVxyXG5cdFx0ICAgICAgICB2YXIgdiA9IG4udmFsdWUsXHJcblx0XHQgICAgICAgICAgICB4ID0gdHlwZW9mIHYgPT09IFwibnVtYmVyXCIgPyB2IHwgTE9CTUFTS19JIDpcclxuXHRcdCAgICAgICAgICAgICAgICB0eXBlb2YgdiA9PT0gXCJiaWdpbnRcIiA/IHYgfCBCaWdJbnQoTE9CTUFTS19JKSA6XHJcblx0XHQgICAgICAgICAgICAgICAgICAgIHZbMF0gKyB2WzFdICogQkFTRSB8IExPQk1BU0tfQkk7XHJcblx0XHQgICAgICAgIHJldHVybiB4ICYgLXg7XHJcblx0XHQgICAgfVxyXG5cclxuXHRcdCAgICBmdW5jdGlvbiBpbnRlZ2VyTG9nYXJpdGhtKHZhbHVlLCBiYXNlKSB7XHJcblx0XHQgICAgICAgIGlmIChiYXNlLmNvbXBhcmVUbyh2YWx1ZSkgPD0gMCkge1xyXG5cdFx0ICAgICAgICAgICAgdmFyIHRtcCA9IGludGVnZXJMb2dhcml0aG0odmFsdWUsIGJhc2Uuc3F1YXJlKGJhc2UpKTtcclxuXHRcdCAgICAgICAgICAgIHZhciBwID0gdG1wLnA7XHJcblx0XHQgICAgICAgICAgICB2YXIgZSA9IHRtcC5lO1xyXG5cdFx0ICAgICAgICAgICAgdmFyIHQgPSBwLm11bHRpcGx5KGJhc2UpO1xyXG5cdFx0ICAgICAgICAgICAgcmV0dXJuIHQuY29tcGFyZVRvKHZhbHVlKSA8PSAwID8geyBwOiB0LCBlOiBlICogMiArIDEgfSA6IHsgcDogcCwgZTogZSAqIDIgfTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICByZXR1cm4geyBwOiBiaWdJbnQoMSksIGU6IDAgfTtcclxuXHRcdCAgICB9XHJcblxyXG5cdFx0ICAgIEJpZ0ludGVnZXIucHJvdG90eXBlLmJpdExlbmd0aCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdCAgICAgICAgdmFyIG4gPSB0aGlzO1xyXG5cdFx0ICAgICAgICBpZiAobi5jb21wYXJlVG8oYmlnSW50KDApKSA8IDApIHtcclxuXHRcdCAgICAgICAgICAgIG4gPSBuLm5lZ2F0ZSgpLnN1YnRyYWN0KGJpZ0ludCgxKSk7XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgaWYgKG4uY29tcGFyZVRvKGJpZ0ludCgwKSkgPT09IDApIHtcclxuXHRcdCAgICAgICAgICAgIHJldHVybiBiaWdJbnQoMCk7XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgcmV0dXJuIGJpZ0ludChpbnRlZ2VyTG9nYXJpdGhtKG4sIGJpZ0ludCgyKSkuZSkuYWRkKGJpZ0ludCgxKSk7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBOYXRpdmVCaWdJbnQucHJvdG90eXBlLmJpdExlbmd0aCA9IFNtYWxsSW50ZWdlci5wcm90b3R5cGUuYml0TGVuZ3RoID0gQmlnSW50ZWdlci5wcm90b3R5cGUuYml0TGVuZ3RoO1xyXG5cclxuXHRcdCAgICBmdW5jdGlvbiBtYXgoYSwgYikge1xyXG5cdFx0ICAgICAgICBhID0gcGFyc2VWYWx1ZShhKTtcclxuXHRcdCAgICAgICAgYiA9IHBhcnNlVmFsdWUoYik7XHJcblx0XHQgICAgICAgIHJldHVybiBhLmdyZWF0ZXIoYikgPyBhIDogYjtcclxuXHRcdCAgICB9XHJcblx0XHQgICAgZnVuY3Rpb24gbWluKGEsIGIpIHtcclxuXHRcdCAgICAgICAgYSA9IHBhcnNlVmFsdWUoYSk7XHJcblx0XHQgICAgICAgIGIgPSBwYXJzZVZhbHVlKGIpO1xyXG5cdFx0ICAgICAgICByZXR1cm4gYS5sZXNzZXIoYikgPyBhIDogYjtcclxuXHRcdCAgICB9XHJcblx0XHQgICAgZnVuY3Rpb24gZ2NkKGEsIGIpIHtcclxuXHRcdCAgICAgICAgYSA9IHBhcnNlVmFsdWUoYSkuYWJzKCk7XHJcblx0XHQgICAgICAgIGIgPSBwYXJzZVZhbHVlKGIpLmFicygpO1xyXG5cdFx0ICAgICAgICBpZiAoYS5lcXVhbHMoYikpIHJldHVybiBhO1xyXG5cdFx0ICAgICAgICBpZiAoYS5pc1plcm8oKSkgcmV0dXJuIGI7XHJcblx0XHQgICAgICAgIGlmIChiLmlzWmVybygpKSByZXR1cm4gYTtcclxuXHRcdCAgICAgICAgdmFyIGMgPSBJbnRlZ2VyWzFdLCBkLCB0O1xyXG5cdFx0ICAgICAgICB3aGlsZSAoYS5pc0V2ZW4oKSAmJiBiLmlzRXZlbigpKSB7XHJcblx0XHQgICAgICAgICAgICBkID0gbWluKHJvdWdoTE9CKGEpLCByb3VnaExPQihiKSk7XHJcblx0XHQgICAgICAgICAgICBhID0gYS5kaXZpZGUoZCk7XHJcblx0XHQgICAgICAgICAgICBiID0gYi5kaXZpZGUoZCk7XHJcblx0XHQgICAgICAgICAgICBjID0gYy5tdWx0aXBseShkKTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICB3aGlsZSAoYS5pc0V2ZW4oKSkge1xyXG5cdFx0ICAgICAgICAgICAgYSA9IGEuZGl2aWRlKHJvdWdoTE9CKGEpKTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICBkbyB7XHJcblx0XHQgICAgICAgICAgICB3aGlsZSAoYi5pc0V2ZW4oKSkge1xyXG5cdFx0ICAgICAgICAgICAgICAgIGIgPSBiLmRpdmlkZShyb3VnaExPQihiKSk7XHJcblx0XHQgICAgICAgICAgICB9XHJcblx0XHQgICAgICAgICAgICBpZiAoYS5ncmVhdGVyKGIpKSB7XHJcblx0XHQgICAgICAgICAgICAgICAgdCA9IGI7IGIgPSBhOyBhID0gdDtcclxuXHRcdCAgICAgICAgICAgIH1cclxuXHRcdCAgICAgICAgICAgIGIgPSBiLnN1YnRyYWN0KGEpO1xyXG5cdFx0ICAgICAgICB9IHdoaWxlICghYi5pc1plcm8oKSk7XHJcblx0XHQgICAgICAgIHJldHVybiBjLmlzVW5pdCgpID8gYSA6IGEubXVsdGlwbHkoYyk7XHJcblx0XHQgICAgfVxyXG5cdFx0ICAgIGZ1bmN0aW9uIGxjbShhLCBiKSB7XHJcblx0XHQgICAgICAgIGEgPSBwYXJzZVZhbHVlKGEpLmFicygpO1xyXG5cdFx0ICAgICAgICBiID0gcGFyc2VWYWx1ZShiKS5hYnMoKTtcclxuXHRcdCAgICAgICAgcmV0dXJuIGEuZGl2aWRlKGdjZChhLCBiKSkubXVsdGlwbHkoYik7XHJcblx0XHQgICAgfVxyXG5cdFx0ICAgIGZ1bmN0aW9uIHJhbmRCZXR3ZWVuKGEsIGIsIHJuZykge1xyXG5cdFx0ICAgICAgICBhID0gcGFyc2VWYWx1ZShhKTtcclxuXHRcdCAgICAgICAgYiA9IHBhcnNlVmFsdWUoYik7XHJcblx0XHQgICAgICAgIHZhciB1c2VkUk5HID0gcm5nIHx8IE1hdGgucmFuZG9tO1xyXG5cdFx0ICAgICAgICB2YXIgbG93ID0gbWluKGEsIGIpLCBoaWdoID0gbWF4KGEsIGIpO1xyXG5cdFx0ICAgICAgICB2YXIgcmFuZ2UgPSBoaWdoLnN1YnRyYWN0KGxvdykuYWRkKDEpO1xyXG5cdFx0ICAgICAgICBpZiAocmFuZ2UuaXNTbWFsbCkgcmV0dXJuIGxvdy5hZGQoTWF0aC5mbG9vcih1c2VkUk5HKCkgKiByYW5nZSkpO1xyXG5cdFx0ICAgICAgICB2YXIgZGlnaXRzID0gdG9CYXNlKHJhbmdlLCBCQVNFKS52YWx1ZTtcclxuXHRcdCAgICAgICAgdmFyIHJlc3VsdCA9IFtdLCByZXN0cmljdGVkID0gdHJ1ZTtcclxuXHRcdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaWdpdHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdCAgICAgICAgICAgIHZhciB0b3AgPSByZXN0cmljdGVkID8gZGlnaXRzW2ldICsgKGkgKyAxIDwgZGlnaXRzLmxlbmd0aCA/IGRpZ2l0c1tpICsgMV0gLyBCQVNFIDogMCkgOiBCQVNFO1xyXG5cdFx0ICAgICAgICAgICAgdmFyIGRpZ2l0ID0gdHJ1bmNhdGUodXNlZFJORygpICogdG9wKTtcclxuXHRcdCAgICAgICAgICAgIHJlc3VsdC5wdXNoKGRpZ2l0KTtcclxuXHRcdCAgICAgICAgICAgIGlmIChkaWdpdCA8IGRpZ2l0c1tpXSkgcmVzdHJpY3RlZCA9IGZhbHNlO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIHJldHVybiBsb3cuYWRkKEludGVnZXIuZnJvbUFycmF5KHJlc3VsdCwgQkFTRSwgZmFsc2UpKTtcclxuXHRcdCAgICB9XHJcblxyXG5cdFx0ICAgIHZhciBwYXJzZUJhc2UgPSBmdW5jdGlvbiAodGV4dCwgYmFzZSwgYWxwaGFiZXQsIGNhc2VTZW5zaXRpdmUpIHtcclxuXHRcdCAgICAgICAgYWxwaGFiZXQgPSBhbHBoYWJldCB8fCBERUZBVUxUX0FMUEhBQkVUO1xyXG5cdFx0ICAgICAgICB0ZXh0ID0gU3RyaW5nKHRleHQpO1xyXG5cdFx0ICAgICAgICBpZiAoIWNhc2VTZW5zaXRpdmUpIHtcclxuXHRcdCAgICAgICAgICAgIHRleHQgPSB0ZXh0LnRvTG93ZXJDYXNlKCk7XHJcblx0XHQgICAgICAgICAgICBhbHBoYWJldCA9IGFscGhhYmV0LnRvTG93ZXJDYXNlKCk7XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgdmFyIGxlbmd0aCA9IHRleHQubGVuZ3RoO1xyXG5cdFx0ICAgICAgICB2YXIgaTtcclxuXHRcdCAgICAgICAgdmFyIGFic0Jhc2UgPSBNYXRoLmFicyhiYXNlKTtcclxuXHRcdCAgICAgICAgdmFyIGFscGhhYmV0VmFsdWVzID0ge307XHJcblx0XHQgICAgICAgIGZvciAoaSA9IDA7IGkgPCBhbHBoYWJldC5sZW5ndGg7IGkrKykge1xyXG5cdFx0ICAgICAgICAgICAgYWxwaGFiZXRWYWx1ZXNbYWxwaGFiZXRbaV1dID0gaTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuXHRcdCAgICAgICAgICAgIHZhciBjID0gdGV4dFtpXTtcclxuXHRcdCAgICAgICAgICAgIGlmIChjID09PSBcIi1cIikgY29udGludWU7XHJcblx0XHQgICAgICAgICAgICBpZiAoYyBpbiBhbHBoYWJldFZhbHVlcykge1xyXG5cdFx0ICAgICAgICAgICAgICAgIGlmIChhbHBoYWJldFZhbHVlc1tjXSA+PSBhYnNCYXNlKSB7XHJcblx0XHQgICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIjFcIiAmJiBhYnNCYXNlID09PSAxKSBjb250aW51ZTtcclxuXHRcdCAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGMgKyBcIiBpcyBub3QgYSB2YWxpZCBkaWdpdCBpbiBiYXNlIFwiICsgYmFzZSArIFwiLlwiKTtcclxuXHRcdCAgICAgICAgICAgICAgICB9XHJcblx0XHQgICAgICAgICAgICB9XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgYmFzZSA9IHBhcnNlVmFsdWUoYmFzZSk7XHJcblx0XHQgICAgICAgIHZhciBkaWdpdHMgPSBbXTtcclxuXHRcdCAgICAgICAgdmFyIGlzTmVnYXRpdmUgPSB0ZXh0WzBdID09PSBcIi1cIjtcclxuXHRcdCAgICAgICAgZm9yIChpID0gaXNOZWdhdGl2ZSA/IDEgOiAwOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykge1xyXG5cdFx0ICAgICAgICAgICAgdmFyIGMgPSB0ZXh0W2ldO1xyXG5cdFx0ICAgICAgICAgICAgaWYgKGMgaW4gYWxwaGFiZXRWYWx1ZXMpIGRpZ2l0cy5wdXNoKHBhcnNlVmFsdWUoYWxwaGFiZXRWYWx1ZXNbY10pKTtcclxuXHRcdCAgICAgICAgICAgIGVsc2UgaWYgKGMgPT09IFwiPFwiKSB7XHJcblx0XHQgICAgICAgICAgICAgICAgdmFyIHN0YXJ0ID0gaTtcclxuXHRcdCAgICAgICAgICAgICAgICBkbyB7IGkrKzsgfSB3aGlsZSAodGV4dFtpXSAhPT0gXCI+XCIgJiYgaSA8IHRleHQubGVuZ3RoKTtcclxuXHRcdCAgICAgICAgICAgICAgICBkaWdpdHMucHVzaChwYXJzZVZhbHVlKHRleHQuc2xpY2Uoc3RhcnQgKyAxLCBpKSkpO1xyXG5cdFx0ICAgICAgICAgICAgfVxyXG5cdFx0ICAgICAgICAgICAgZWxzZSB0aHJvdyBuZXcgRXJyb3IoYyArIFwiIGlzIG5vdCBhIHZhbGlkIGNoYXJhY3RlclwiKTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICByZXR1cm4gcGFyc2VCYXNlRnJvbUFycmF5KGRpZ2l0cywgYmFzZSwgaXNOZWdhdGl2ZSk7XHJcblx0XHQgICAgfTtcclxuXHJcblx0XHQgICAgZnVuY3Rpb24gcGFyc2VCYXNlRnJvbUFycmF5KGRpZ2l0cywgYmFzZSwgaXNOZWdhdGl2ZSkge1xyXG5cdFx0ICAgICAgICB2YXIgdmFsID0gSW50ZWdlclswXSwgcG93ID0gSW50ZWdlclsxXSwgaTtcclxuXHRcdCAgICAgICAgZm9yIChpID0gZGlnaXRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcblx0XHQgICAgICAgICAgICB2YWwgPSB2YWwuYWRkKGRpZ2l0c1tpXS50aW1lcyhwb3cpKTtcclxuXHRcdCAgICAgICAgICAgIHBvdyA9IHBvdy50aW1lcyhiYXNlKTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICByZXR1cm4gaXNOZWdhdGl2ZSA/IHZhbC5uZWdhdGUoKSA6IHZhbDtcclxuXHRcdCAgICB9XHJcblxyXG5cdFx0ICAgIGZ1bmN0aW9uIHN0cmluZ2lmeShkaWdpdCwgYWxwaGFiZXQpIHtcclxuXHRcdCAgICAgICAgYWxwaGFiZXQgPSBhbHBoYWJldCB8fCBERUZBVUxUX0FMUEhBQkVUO1xyXG5cdFx0ICAgICAgICBpZiAoZGlnaXQgPCBhbHBoYWJldC5sZW5ndGgpIHtcclxuXHRcdCAgICAgICAgICAgIHJldHVybiBhbHBoYWJldFtkaWdpdF07XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgcmV0dXJuIFwiPFwiICsgZGlnaXQgKyBcIj5cIjtcclxuXHRcdCAgICB9XHJcblxyXG5cdFx0ICAgIGZ1bmN0aW9uIHRvQmFzZShuLCBiYXNlKSB7XHJcblx0XHQgICAgICAgIGJhc2UgPSBiaWdJbnQoYmFzZSk7XHJcblx0XHQgICAgICAgIGlmIChiYXNlLmlzWmVybygpKSB7XHJcblx0XHQgICAgICAgICAgICBpZiAobi5pc1plcm8oKSkgcmV0dXJuIHsgdmFsdWU6IFswXSwgaXNOZWdhdGl2ZTogZmFsc2UgfTtcclxuXHRcdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBjb252ZXJ0IG5vbnplcm8gbnVtYmVycyB0byBiYXNlIDAuXCIpO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIGlmIChiYXNlLmVxdWFscygtMSkpIHtcclxuXHRcdCAgICAgICAgICAgIGlmIChuLmlzWmVybygpKSByZXR1cm4geyB2YWx1ZTogWzBdLCBpc05lZ2F0aXZlOiBmYWxzZSB9O1xyXG5cdFx0ICAgICAgICAgICAgaWYgKG4uaXNOZWdhdGl2ZSgpKVxyXG5cdFx0ICAgICAgICAgICAgICAgIHJldHVybiB7XHJcblx0XHQgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBbXS5jb25jYXQuYXBwbHkoW10sIEFycmF5LmFwcGx5KG51bGwsIEFycmF5KC1uLnRvSlNOdW1iZXIoKSkpXHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgICAubWFwKEFycmF5LnByb3RvdHlwZS52YWx1ZU9mLCBbMSwgMF0pXHJcblx0XHQgICAgICAgICAgICAgICAgICAgICksXHJcblx0XHQgICAgICAgICAgICAgICAgICAgIGlzTmVnYXRpdmU6IGZhbHNlXHJcblx0XHQgICAgICAgICAgICAgICAgfTtcclxuXHJcblx0XHQgICAgICAgICAgICB2YXIgYXJyID0gQXJyYXkuYXBwbHkobnVsbCwgQXJyYXkobi50b0pTTnVtYmVyKCkgLSAxKSlcclxuXHRcdCAgICAgICAgICAgICAgICAubWFwKEFycmF5LnByb3RvdHlwZS52YWx1ZU9mLCBbMCwgMV0pO1xyXG5cdFx0ICAgICAgICAgICAgYXJyLnVuc2hpZnQoWzFdKTtcclxuXHRcdCAgICAgICAgICAgIHJldHVybiB7XHJcblx0XHQgICAgICAgICAgICAgICAgdmFsdWU6IFtdLmNvbmNhdC5hcHBseShbXSwgYXJyKSxcclxuXHRcdCAgICAgICAgICAgICAgICBpc05lZ2F0aXZlOiBmYWxzZVxyXG5cdFx0ICAgICAgICAgICAgfTtcclxuXHRcdCAgICAgICAgfVxyXG5cclxuXHRcdCAgICAgICAgdmFyIG5lZyA9IGZhbHNlO1xyXG5cdFx0ICAgICAgICBpZiAobi5pc05lZ2F0aXZlKCkgJiYgYmFzZS5pc1Bvc2l0aXZlKCkpIHtcclxuXHRcdCAgICAgICAgICAgIG5lZyA9IHRydWU7XHJcblx0XHQgICAgICAgICAgICBuID0gbi5hYnMoKTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICBpZiAoYmFzZS5pc1VuaXQoKSkge1xyXG5cdFx0ICAgICAgICAgICAgaWYgKG4uaXNaZXJvKCkpIHJldHVybiB7IHZhbHVlOiBbMF0sIGlzTmVnYXRpdmU6IGZhbHNlIH07XHJcblxyXG5cdFx0ICAgICAgICAgICAgcmV0dXJuIHtcclxuXHRcdCAgICAgICAgICAgICAgICB2YWx1ZTogQXJyYXkuYXBwbHkobnVsbCwgQXJyYXkobi50b0pTTnVtYmVyKCkpKVxyXG5cdFx0ICAgICAgICAgICAgICAgICAgICAubWFwKE51bWJlci5wcm90b3R5cGUudmFsdWVPZiwgMSksXHJcblx0XHQgICAgICAgICAgICAgICAgaXNOZWdhdGl2ZTogbmVnXHJcblx0XHQgICAgICAgICAgICB9O1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIHZhciBvdXQgPSBbXTtcclxuXHRcdCAgICAgICAgdmFyIGxlZnQgPSBuLCBkaXZtb2Q7XHJcblx0XHQgICAgICAgIHdoaWxlIChsZWZ0LmlzTmVnYXRpdmUoKSB8fCBsZWZ0LmNvbXBhcmVBYnMoYmFzZSkgPj0gMCkge1xyXG5cdFx0ICAgICAgICAgICAgZGl2bW9kID0gbGVmdC5kaXZtb2QoYmFzZSk7XHJcblx0XHQgICAgICAgICAgICBsZWZ0ID0gZGl2bW9kLnF1b3RpZW50O1xyXG5cdFx0ICAgICAgICAgICAgdmFyIGRpZ2l0ID0gZGl2bW9kLnJlbWFpbmRlcjtcclxuXHRcdCAgICAgICAgICAgIGlmIChkaWdpdC5pc05lZ2F0aXZlKCkpIHtcclxuXHRcdCAgICAgICAgICAgICAgICBkaWdpdCA9IGJhc2UubWludXMoZGlnaXQpLmFicygpO1xyXG5cdFx0ICAgICAgICAgICAgICAgIGxlZnQgPSBsZWZ0Lm5leHQoKTtcclxuXHRcdCAgICAgICAgICAgIH1cclxuXHRcdCAgICAgICAgICAgIG91dC5wdXNoKGRpZ2l0LnRvSlNOdW1iZXIoKSk7XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgb3V0LnB1c2gobGVmdC50b0pTTnVtYmVyKCkpO1xyXG5cdFx0ICAgICAgICByZXR1cm4geyB2YWx1ZTogb3V0LnJldmVyc2UoKSwgaXNOZWdhdGl2ZTogbmVnIH07XHJcblx0XHQgICAgfVxyXG5cclxuXHRcdCAgICBmdW5jdGlvbiB0b0Jhc2VTdHJpbmcobiwgYmFzZSwgYWxwaGFiZXQpIHtcclxuXHRcdCAgICAgICAgdmFyIGFyciA9IHRvQmFzZShuLCBiYXNlKTtcclxuXHRcdCAgICAgICAgcmV0dXJuIChhcnIuaXNOZWdhdGl2ZSA/IFwiLVwiIDogXCJcIikgKyBhcnIudmFsdWUubWFwKGZ1bmN0aW9uICh4KSB7XHJcblx0XHQgICAgICAgICAgICByZXR1cm4gc3RyaW5naWZ5KHgsIGFscGhhYmV0KTtcclxuXHRcdCAgICAgICAgfSkuam9pbignJyk7XHJcblx0XHQgICAgfVxyXG5cclxuXHRcdCAgICBCaWdJbnRlZ2VyLnByb3RvdHlwZS50b0FycmF5ID0gZnVuY3Rpb24gKHJhZGl4KSB7XHJcblx0XHQgICAgICAgIHJldHVybiB0b0Jhc2UodGhpcywgcmFkaXgpO1xyXG5cdFx0ICAgIH07XHJcblxyXG5cdFx0ICAgIFNtYWxsSW50ZWdlci5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uIChyYWRpeCkge1xyXG5cdFx0ICAgICAgICByZXR1cm4gdG9CYXNlKHRoaXMsIHJhZGl4KTtcclxuXHRcdCAgICB9O1xyXG5cclxuXHRcdCAgICBOYXRpdmVCaWdJbnQucHJvdG90eXBlLnRvQXJyYXkgPSBmdW5jdGlvbiAocmFkaXgpIHtcclxuXHRcdCAgICAgICAgcmV0dXJuIHRvQmFzZSh0aGlzLCByYWRpeCk7XHJcblx0XHQgICAgfTtcclxuXHJcblx0XHQgICAgQmlnSW50ZWdlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAocmFkaXgsIGFscGhhYmV0KSB7XHJcblx0XHQgICAgICAgIGlmIChyYWRpeCA9PT0gdW5kZWZpbmVkJDEpIHJhZGl4ID0gMTA7XHJcblx0XHQgICAgICAgIGlmIChyYWRpeCAhPT0gMTAgfHwgYWxwaGFiZXQpIHJldHVybiB0b0Jhc2VTdHJpbmcodGhpcywgcmFkaXgsIGFscGhhYmV0KTtcclxuXHRcdCAgICAgICAgdmFyIHYgPSB0aGlzLnZhbHVlLCBsID0gdi5sZW5ndGgsIHN0ciA9IFN0cmluZyh2Wy0tbF0pLCB6ZXJvcyA9IFwiMDAwMDAwMFwiLCBkaWdpdDtcclxuXHRcdCAgICAgICAgd2hpbGUgKC0tbCA+PSAwKSB7XHJcblx0XHQgICAgICAgICAgICBkaWdpdCA9IFN0cmluZyh2W2xdKTtcclxuXHRcdCAgICAgICAgICAgIHN0ciArPSB6ZXJvcy5zbGljZShkaWdpdC5sZW5ndGgpICsgZGlnaXQ7XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgdmFyIHNpZ24gPSB0aGlzLnNpZ24gPyBcIi1cIiA6IFwiXCI7XHJcblx0XHQgICAgICAgIHJldHVybiBzaWduICsgc3RyO1xyXG5cdFx0ICAgIH07XHJcblxyXG5cdFx0ICAgIFNtYWxsSW50ZWdlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAocmFkaXgsIGFscGhhYmV0KSB7XHJcblx0XHQgICAgICAgIGlmIChyYWRpeCA9PT0gdW5kZWZpbmVkJDEpIHJhZGl4ID0gMTA7XHJcblx0XHQgICAgICAgIGlmIChyYWRpeCAhPSAxMCB8fCBhbHBoYWJldCkgcmV0dXJuIHRvQmFzZVN0cmluZyh0aGlzLCByYWRpeCwgYWxwaGFiZXQpO1xyXG5cdFx0ICAgICAgICByZXR1cm4gU3RyaW5nKHRoaXMudmFsdWUpO1xyXG5cdFx0ICAgIH07XHJcblxyXG5cdFx0ICAgIE5hdGl2ZUJpZ0ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBTbWFsbEludGVnZXIucHJvdG90eXBlLnRvU3RyaW5nO1xyXG5cclxuXHRcdCAgICBOYXRpdmVCaWdJbnQucHJvdG90eXBlLnRvSlNPTiA9IEJpZ0ludGVnZXIucHJvdG90eXBlLnRvSlNPTiA9IFNtYWxsSW50ZWdlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy50b1N0cmluZygpOyB9O1xyXG5cclxuXHRcdCAgICBCaWdJbnRlZ2VyLnByb3RvdHlwZS52YWx1ZU9mID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0ICAgICAgICByZXR1cm4gcGFyc2VJbnQodGhpcy50b1N0cmluZygpLCAxMCk7XHJcblx0XHQgICAgfTtcclxuXHRcdCAgICBCaWdJbnRlZ2VyLnByb3RvdHlwZS50b0pTTnVtYmVyID0gQmlnSW50ZWdlci5wcm90b3R5cGUudmFsdWVPZjtcclxuXHJcblx0XHQgICAgU21hbGxJbnRlZ2VyLnByb3RvdHlwZS52YWx1ZU9mID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0ICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcclxuXHRcdCAgICB9O1xyXG5cdFx0ICAgIFNtYWxsSW50ZWdlci5wcm90b3R5cGUudG9KU051bWJlciA9IFNtYWxsSW50ZWdlci5wcm90b3R5cGUudmFsdWVPZjtcclxuXHRcdCAgICBOYXRpdmVCaWdJbnQucHJvdG90eXBlLnZhbHVlT2YgPSBOYXRpdmVCaWdJbnQucHJvdG90eXBlLnRvSlNOdW1iZXIgPSBmdW5jdGlvbiAoKSB7XHJcblx0XHQgICAgICAgIHJldHVybiBwYXJzZUludCh0aGlzLnRvU3RyaW5nKCksIDEwKTtcclxuXHRcdCAgICB9O1xyXG5cclxuXHRcdCAgICBmdW5jdGlvbiBwYXJzZVN0cmluZ1ZhbHVlKHYpIHtcclxuXHRcdCAgICAgICAgaWYgKGlzUHJlY2lzZSgrdikpIHtcclxuXHRcdCAgICAgICAgICAgIHZhciB4ID0gK3Y7XHJcblx0XHQgICAgICAgICAgICBpZiAoeCA9PT0gdHJ1bmNhdGUoeCkpXHJcblx0XHQgICAgICAgICAgICAgICAgcmV0dXJuIHN1cHBvcnRzTmF0aXZlQmlnSW50ID8gbmV3IE5hdGl2ZUJpZ0ludChCaWdJbnQoeCkpIDogbmV3IFNtYWxsSW50ZWdlcih4KTtcclxuXHRcdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaW50ZWdlcjogXCIgKyB2KTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICB2YXIgc2lnbiA9IHZbMF0gPT09IFwiLVwiO1xyXG5cdFx0ICAgICAgICBpZiAoc2lnbikgdiA9IHYuc2xpY2UoMSk7XHJcblx0XHQgICAgICAgIHZhciBzcGxpdCA9IHYuc3BsaXQoL2UvaSk7XHJcblx0XHQgICAgICAgIGlmIChzcGxpdC5sZW5ndGggPiAyKSB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGludGVnZXI6IFwiICsgc3BsaXQuam9pbihcImVcIikpO1xyXG5cdFx0ICAgICAgICBpZiAoc3BsaXQubGVuZ3RoID09PSAyKSB7XHJcblx0XHQgICAgICAgICAgICB2YXIgZXhwID0gc3BsaXRbMV07XHJcblx0XHQgICAgICAgICAgICBpZiAoZXhwWzBdID09PSBcIitcIikgZXhwID0gZXhwLnNsaWNlKDEpO1xyXG5cdFx0ICAgICAgICAgICAgZXhwID0gK2V4cDtcclxuXHRcdCAgICAgICAgICAgIGlmIChleHAgIT09IHRydW5jYXRlKGV4cCkgfHwgIWlzUHJlY2lzZShleHApKSB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGludGVnZXI6IFwiICsgZXhwICsgXCIgaXMgbm90IGEgdmFsaWQgZXhwb25lbnQuXCIpO1xyXG5cdFx0ICAgICAgICAgICAgdmFyIHRleHQgPSBzcGxpdFswXTtcclxuXHRcdCAgICAgICAgICAgIHZhciBkZWNpbWFsUGxhY2UgPSB0ZXh0LmluZGV4T2YoXCIuXCIpO1xyXG5cdFx0ICAgICAgICAgICAgaWYgKGRlY2ltYWxQbGFjZSA+PSAwKSB7XHJcblx0XHQgICAgICAgICAgICAgICAgZXhwIC09IHRleHQubGVuZ3RoIC0gZGVjaW1hbFBsYWNlIC0gMTtcclxuXHRcdCAgICAgICAgICAgICAgICB0ZXh0ID0gdGV4dC5zbGljZSgwLCBkZWNpbWFsUGxhY2UpICsgdGV4dC5zbGljZShkZWNpbWFsUGxhY2UgKyAxKTtcclxuXHRcdCAgICAgICAgICAgIH1cclxuXHRcdCAgICAgICAgICAgIGlmIChleHAgPCAwKSB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgaW5jbHVkZSBuZWdhdGl2ZSBleHBvbmVudCBwYXJ0IGZvciBpbnRlZ2Vyc1wiKTtcclxuXHRcdCAgICAgICAgICAgIHRleHQgKz0gKG5ldyBBcnJheShleHAgKyAxKSkuam9pbihcIjBcIik7XHJcblx0XHQgICAgICAgICAgICB2ID0gdGV4dDtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICB2YXIgaXNWYWxpZCA9IC9eKFswLTldWzAtOV0qKSQvLnRlc3Qodik7XHJcblx0XHQgICAgICAgIGlmICghaXNWYWxpZCkgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpbnRlZ2VyOiBcIiArIHYpO1xyXG5cdFx0ICAgICAgICBpZiAoc3VwcG9ydHNOYXRpdmVCaWdJbnQpIHtcclxuXHRcdCAgICAgICAgICAgIHJldHVybiBuZXcgTmF0aXZlQmlnSW50KEJpZ0ludChzaWduID8gXCItXCIgKyB2IDogdikpO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIHZhciByID0gW10sIG1heCA9IHYubGVuZ3RoLCBsID0gTE9HX0JBU0UsIG1pbiA9IG1heCAtIGw7XHJcblx0XHQgICAgICAgIHdoaWxlIChtYXggPiAwKSB7XHJcblx0XHQgICAgICAgICAgICByLnB1c2goK3Yuc2xpY2UobWluLCBtYXgpKTtcclxuXHRcdCAgICAgICAgICAgIG1pbiAtPSBsO1xyXG5cdFx0ICAgICAgICAgICAgaWYgKG1pbiA8IDApIG1pbiA9IDA7XHJcblx0XHQgICAgICAgICAgICBtYXggLT0gbDtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICB0cmltKHIpO1xyXG5cdFx0ICAgICAgICByZXR1cm4gbmV3IEJpZ0ludGVnZXIociwgc2lnbik7XHJcblx0XHQgICAgfVxyXG5cclxuXHRcdCAgICBmdW5jdGlvbiBwYXJzZU51bWJlclZhbHVlKHYpIHtcclxuXHRcdCAgICAgICAgaWYgKHN1cHBvcnRzTmF0aXZlQmlnSW50KSB7XHJcblx0XHQgICAgICAgICAgICByZXR1cm4gbmV3IE5hdGl2ZUJpZ0ludChCaWdJbnQodikpO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIGlmIChpc1ByZWNpc2UodikpIHtcclxuXHRcdCAgICAgICAgICAgIGlmICh2ICE9PSB0cnVuY2F0ZSh2KSkgdGhyb3cgbmV3IEVycm9yKHYgKyBcIiBpcyBub3QgYW4gaW50ZWdlci5cIik7XHJcblx0XHQgICAgICAgICAgICByZXR1cm4gbmV3IFNtYWxsSW50ZWdlcih2KTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICByZXR1cm4gcGFyc2VTdHJpbmdWYWx1ZSh2LnRvU3RyaW5nKCkpO1xyXG5cdFx0ICAgIH1cclxuXHJcblx0XHQgICAgZnVuY3Rpb24gcGFyc2VWYWx1ZSh2KSB7XHJcblx0XHQgICAgICAgIGlmICh0eXBlb2YgdiA9PT0gXCJudW1iZXJcIikge1xyXG5cdFx0ICAgICAgICAgICAgcmV0dXJuIHBhcnNlTnVtYmVyVmFsdWUodik7XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICAgICAgaWYgKHR5cGVvZiB2ID09PSBcInN0cmluZ1wiKSB7XHJcblx0XHQgICAgICAgICAgICByZXR1cm4gcGFyc2VTdHJpbmdWYWx1ZSh2KTtcclxuXHRcdCAgICAgICAgfVxyXG5cdFx0ICAgICAgICBpZiAodHlwZW9mIHYgPT09IFwiYmlnaW50XCIpIHtcclxuXHRcdCAgICAgICAgICAgIHJldHVybiBuZXcgTmF0aXZlQmlnSW50KHYpO1xyXG5cdFx0ICAgICAgICB9XHJcblx0XHQgICAgICAgIHJldHVybiB2O1xyXG5cdFx0ICAgIH1cclxuXHRcdCAgICAvLyBQcmUtZGVmaW5lIG51bWJlcnMgaW4gcmFuZ2UgWy05OTksOTk5XVxyXG5cdFx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTAwMDsgaSsrKSB7XHJcblx0XHQgICAgICAgIEludGVnZXJbaV0gPSBwYXJzZVZhbHVlKGkpO1xyXG5cdFx0ICAgICAgICBpZiAoaSA+IDApIEludGVnZXJbLWldID0gcGFyc2VWYWx1ZSgtaSk7XHJcblx0XHQgICAgfVxyXG5cdFx0ICAgIC8vIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5XHJcblx0XHQgICAgSW50ZWdlci5vbmUgPSBJbnRlZ2VyWzFdO1xyXG5cdFx0ICAgIEludGVnZXIuemVybyA9IEludGVnZXJbMF07XHJcblx0XHQgICAgSW50ZWdlci5taW51c09uZSA9IEludGVnZXJbLTFdO1xyXG5cdFx0ICAgIEludGVnZXIubWF4ID0gbWF4O1xyXG5cdFx0ICAgIEludGVnZXIubWluID0gbWluO1xyXG5cdFx0ICAgIEludGVnZXIuZ2NkID0gZ2NkO1xyXG5cdFx0ICAgIEludGVnZXIubGNtID0gbGNtO1xyXG5cdFx0ICAgIEludGVnZXIuaXNJbnN0YW5jZSA9IGZ1bmN0aW9uICh4KSB7IHJldHVybiB4IGluc3RhbmNlb2YgQmlnSW50ZWdlciB8fCB4IGluc3RhbmNlb2YgU21hbGxJbnRlZ2VyIHx8IHggaW5zdGFuY2VvZiBOYXRpdmVCaWdJbnQ7IH07XHJcblx0XHQgICAgSW50ZWdlci5yYW5kQmV0d2VlbiA9IHJhbmRCZXR3ZWVuO1xyXG5cclxuXHRcdCAgICBJbnRlZ2VyLmZyb21BcnJheSA9IGZ1bmN0aW9uIChkaWdpdHMsIGJhc2UsIGlzTmVnYXRpdmUpIHtcclxuXHRcdCAgICAgICAgcmV0dXJuIHBhcnNlQmFzZUZyb21BcnJheShkaWdpdHMubWFwKHBhcnNlVmFsdWUpLCBwYXJzZVZhbHVlKGJhc2UgfHwgMTApLCBpc05lZ2F0aXZlKTtcclxuXHRcdCAgICB9O1xyXG5cclxuXHRcdCAgICByZXR1cm4gSW50ZWdlcjtcclxuXHRcdH0pKCk7XHJcblxyXG5cdFx0Ly8gTm9kZS5qcyBjaGVja1xyXG5cdFx0aWYgKG1vZHVsZS5oYXNPd25Qcm9wZXJ0eShcImV4cG9ydHNcIikpIHtcclxuXHRcdCAgICBtb2R1bGUuZXhwb3J0cyA9IGJpZ0ludDtcclxuXHRcdH1cclxuXHR9IChCaWdJbnRlZ2VyKSk7XG5cdHJldHVybiBCaWdJbnRlZ2VyLmV4cG9ydHM7XG59XG5cbmV4cG9ydCB7IHJlcXVpcmVCaWdJbnRlZ2VyIGFzIF9fcmVxdWlyZSB9O1xuIiwiLypcclxuICogIGRlY2ltYWwuanMtbGlnaHQgdjIuNS4xXHJcbiAqICBBbiBhcmJpdHJhcnktcHJlY2lzaW9uIERlY2ltYWwgdHlwZSBmb3IgSmF2YVNjcmlwdC5cclxuICogIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWtlTWNsL2RlY2ltYWwuanMtbGlnaHRcclxuICogIENvcHlyaWdodCAoYykgMjAyMCBNaWNoYWVsIE1jbGF1Z2hsaW4gPE04Y2g4OGxAZ21haWwuY29tPlxyXG4gKiAgTUlUIEV4cGF0IExpY2VuY2VcclxuICovXHJcblxyXG5cclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICBFRElUQUJMRSBERUZBVUxUUyAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xyXG5cclxuXHJcbi8vIFRoZSBsaW1pdCBvbiB0aGUgdmFsdWUgb2YgYHByZWNpc2lvbmAsIGFuZCBvbiB0aGUgdmFsdWUgb2YgdGhlIGZpcnN0IGFyZ3VtZW50IHRvXHJcbi8vIGB0b0RlY2ltYWxQbGFjZXNgLCBgdG9FeHBvbmVudGlhbGAsIGB0b0ZpeGVkYCwgYHRvUHJlY2lzaW9uYCBhbmQgYHRvU2lnbmlmaWNhbnREaWdpdHNgLlxyXG52YXIgTUFYX0RJR0lUUyA9IDFlOSwgICAgICAgICAgICAgICAgICAgICAgICAvLyAwIHRvIDFlOVxyXG5cclxuXHJcbiAgLy8gVGhlIGluaXRpYWwgY29uZmlndXJhdGlvbiBwcm9wZXJ0aWVzIG9mIHRoZSBEZWNpbWFsIGNvbnN0cnVjdG9yLlxyXG4gIGRlZmF1bHRzID0ge1xyXG5cclxuICAgIC8vIFRoZXNlIHZhbHVlcyBtdXN0IGJlIGludGVnZXJzIHdpdGhpbiB0aGUgc3RhdGVkIHJhbmdlcyAoaW5jbHVzaXZlKS5cclxuICAgIC8vIE1vc3Qgb2YgdGhlc2UgdmFsdWVzIGNhbiBiZSBjaGFuZ2VkIGR1cmluZyBydW4tdGltZSB1c2luZyBgRGVjaW1hbC5jb25maWdgLlxyXG5cclxuICAgIC8vIFRoZSBtYXhpbXVtIG51bWJlciBvZiBzaWduaWZpY2FudCBkaWdpdHMgb2YgdGhlIHJlc3VsdCBvZiBhIGNhbGN1bGF0aW9uIG9yIGJhc2UgY29udmVyc2lvbi5cclxuICAgIC8vIEUuZy4gYERlY2ltYWwuY29uZmlnKHsgcHJlY2lzaW9uOiAyMCB9KTtgXHJcbiAgICBwcmVjaXNpb246IDIwLCAgICAgICAgICAgICAgICAgICAgICAgICAvLyAxIHRvIE1BWF9ESUdJVFNcclxuXHJcbiAgICAvLyBUaGUgcm91bmRpbmcgbW9kZSB1c2VkIGJ5IGRlZmF1bHQgYnkgYHRvSW50ZWdlcmAsIGB0b0RlY2ltYWxQbGFjZXNgLCBgdG9FeHBvbmVudGlhbGAsXHJcbiAgICAvLyBgdG9GaXhlZGAsIGB0b1ByZWNpc2lvbmAgYW5kIGB0b1NpZ25pZmljYW50RGlnaXRzYC5cclxuICAgIC8vXHJcbiAgICAvLyBST1VORF9VUCAgICAgICAgIDAgQXdheSBmcm9tIHplcm8uXHJcbiAgICAvLyBST1VORF9ET1dOICAgICAgIDEgVG93YXJkcyB6ZXJvLlxyXG4gICAgLy8gUk9VTkRfQ0VJTCAgICAgICAyIFRvd2FyZHMgK0luZmluaXR5LlxyXG4gICAgLy8gUk9VTkRfRkxPT1IgICAgICAzIFRvd2FyZHMgLUluZmluaXR5LlxyXG4gICAgLy8gUk9VTkRfSEFMRl9VUCAgICA0IFRvd2FyZHMgbmVhcmVzdCBuZWlnaGJvdXIuIElmIGVxdWlkaXN0YW50LCB1cC5cclxuICAgIC8vIFJPVU5EX0hBTEZfRE9XTiAgNSBUb3dhcmRzIG5lYXJlc3QgbmVpZ2hib3VyLiBJZiBlcXVpZGlzdGFudCwgZG93bi5cclxuICAgIC8vIFJPVU5EX0hBTEZfRVZFTiAgNiBUb3dhcmRzIG5lYXJlc3QgbmVpZ2hib3VyLiBJZiBlcXVpZGlzdGFudCwgdG93YXJkcyBldmVuIG5laWdoYm91ci5cclxuICAgIC8vIFJPVU5EX0hBTEZfQ0VJTCAgNyBUb3dhcmRzIG5lYXJlc3QgbmVpZ2hib3VyLiBJZiBlcXVpZGlzdGFudCwgdG93YXJkcyArSW5maW5pdHkuXHJcbiAgICAvLyBST1VORF9IQUxGX0ZMT09SIDggVG93YXJkcyBuZWFyZXN0IG5laWdoYm91ci4gSWYgZXF1aWRpc3RhbnQsIHRvd2FyZHMgLUluZmluaXR5LlxyXG4gICAgLy9cclxuICAgIC8vIEUuZy5cclxuICAgIC8vIGBEZWNpbWFsLnJvdW5kaW5nID0gNDtgXHJcbiAgICAvLyBgRGVjaW1hbC5yb3VuZGluZyA9IERlY2ltYWwuUk9VTkRfSEFMRl9VUDtgXHJcbiAgICByb3VuZGluZzogNCwgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAwIHRvIDhcclxuXHJcbiAgICAvLyBUaGUgZXhwb25lbnQgdmFsdWUgYXQgYW5kIGJlbmVhdGggd2hpY2ggYHRvU3RyaW5nYCByZXR1cm5zIGV4cG9uZW50aWFsIG5vdGF0aW9uLlxyXG4gICAgLy8gSmF2YVNjcmlwdCBudW1iZXJzOiAtN1xyXG4gICAgdG9FeHBOZWc6IC03LCAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gMCB0byAtTUFYX0VcclxuXHJcbiAgICAvLyBUaGUgZXhwb25lbnQgdmFsdWUgYXQgYW5kIGFib3ZlIHdoaWNoIGB0b1N0cmluZ2AgcmV0dXJucyBleHBvbmVudGlhbCBub3RhdGlvbi5cclxuICAgIC8vIEphdmFTY3JpcHQgbnVtYmVyczogMjFcclxuICAgIHRvRXhwUG9zOiAgMjEsICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDAgdG8gTUFYX0VcclxuXHJcbiAgICAvLyBUaGUgbmF0dXJhbCBsb2dhcml0aG0gb2YgMTAuXHJcbiAgICAvLyAxMTUgZGlnaXRzXHJcbiAgICBMTjEwOiAnMi4zMDI1ODUwOTI5OTQwNDU2ODQwMTc5OTE0NTQ2ODQzNjQyMDc2MDExMDE0ODg2Mjg3NzI5NzYwMzMzMjc5MDA5Njc1NzI2MDk2NzczNTI0ODAyMzU5OTcyMDUwODk1OTgyOTgzNDE5Njc3ODQwNDIyODYnXHJcbiAgfSxcclxuXHJcblxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gRU5EIE9GIEVESVRBQkxFIERFRkFVTFRTIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXHJcblxyXG5cclxuICBEZWNpbWFsLFxyXG4gIGV4dGVybmFsID0gdHJ1ZSxcclxuXHJcbiAgZGVjaW1hbEVycm9yID0gJ1tEZWNpbWFsRXJyb3JdICcsXHJcbiAgaW52YWxpZEFyZ3VtZW50ID0gZGVjaW1hbEVycm9yICsgJ0ludmFsaWQgYXJndW1lbnQ6ICcsXHJcbiAgZXhwb25lbnRPdXRPZlJhbmdlID0gZGVjaW1hbEVycm9yICsgJ0V4cG9uZW50IG91dCBvZiByYW5nZTogJyxcclxuXHJcbiAgbWF0aGZsb29yID0gTWF0aC5mbG9vcixcclxuICBtYXRocG93ID0gTWF0aC5wb3csXHJcblxyXG4gIGlzRGVjaW1hbCA9IC9eKFxcZCsoXFwuXFxkKik/fFxcLlxcZCspKGVbKy1dP1xcZCspPyQvaSxcclxuXHJcbiAgT05FLFxyXG4gIEJBU0UgPSAxZTcsXHJcbiAgTE9HX0JBU0UgPSA3LFxyXG4gIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxLFxyXG4gIE1BWF9FID0gbWF0aGZsb29yKE1BWF9TQUZFX0lOVEVHRVIgLyBMT0dfQkFTRSksICAgIC8vIDEyODY3NDI3NTA2NzcyODRcclxuXHJcbiAgLy8gRGVjaW1hbC5wcm90b3R5cGUgb2JqZWN0XHJcbiAgUCA9IHt9O1xyXG5cclxuXHJcbi8vIERlY2ltYWwgcHJvdG90eXBlIG1ldGhvZHNcclxuXHJcblxyXG4vKlxyXG4gKiAgYWJzb2x1dGVWYWx1ZSAgICAgICAgICAgICAgICAgICAgICAgYWJzXHJcbiAqICBjb21wYXJlZFRvICAgICAgICAgICAgICAgICAgICAgICAgICBjbXBcclxuICogIGRlY2ltYWxQbGFjZXMgICAgICAgICAgICAgICAgICAgICAgIGRwXHJcbiAqICBkaXZpZGVkQnkgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXZcclxuICogIGRpdmlkZWRUb0ludGVnZXJCeSAgICAgICAgICAgICAgICAgIGlkaXZcclxuICogIGVxdWFscyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVxXHJcbiAqICBleHBvbmVudFxyXG4gKiAgZ3JlYXRlclRoYW4gICAgICAgICAgICAgICAgICAgICAgICAgZ3RcclxuICogIGdyZWF0ZXJUaGFuT3JFcXVhbFRvICAgICAgICAgICAgICAgIGd0ZVxyXG4gKiAgaXNJbnRlZ2VyICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNpbnRcclxuICogIGlzTmVnYXRpdmUgICAgICAgICAgICAgICAgICAgICAgICAgIGlzbmVnXHJcbiAqICBpc1Bvc2l0aXZlICAgICAgICAgICAgICAgICAgICAgICAgICBpc3Bvc1xyXG4gKiAgaXNaZXJvXHJcbiAqICBsZXNzVGhhbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsdFxyXG4gKiAgbGVzc1RoYW5PckVxdWFsVG8gICAgICAgICAgICAgICAgICAgbHRlXHJcbiAqICBsb2dhcml0aG0gICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dcclxuICogIG1pbnVzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YlxyXG4gKiAgbW9kdWxvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kXHJcbiAqICBuYXR1cmFsRXhwb25lbnRpYWwgICAgICAgICAgICAgICAgICBleHBcclxuICogIG5hdHVyYWxMb2dhcml0aG0gICAgICAgICAgICAgICAgICAgIGxuXHJcbiAqICBuZWdhdGVkICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZWdcclxuICogIHBsdXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZFxyXG4gKiAgcHJlY2lzaW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgc2RcclxuICogIHNxdWFyZVJvb3QgICAgICAgICAgICAgICAgICAgICAgICAgIHNxcnRcclxuICogIHRpbWVzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11bFxyXG4gKiAgdG9EZWNpbWFsUGxhY2VzICAgICAgICAgICAgICAgICAgICAgdG9kcFxyXG4gKiAgdG9FeHBvbmVudGlhbFxyXG4gKiAgdG9GaXhlZFxyXG4gKiAgdG9JbnRlZ2VyICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9pbnRcclxuICogIHRvTnVtYmVyXHJcbiAqICB0b1Bvd2VyICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3dcclxuICogIHRvUHJlY2lzaW9uXHJcbiAqICB0b1NpZ25pZmljYW50RGlnaXRzICAgICAgICAgICAgICAgICB0b3NkXHJcbiAqICB0b1N0cmluZ1xyXG4gKiAgdmFsdWVPZiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsXHJcbiAqL1xyXG5cclxuXHJcbi8qXHJcbiAqIFJldHVybiBhIG5ldyBEZWNpbWFsIHdob3NlIHZhbHVlIGlzIHRoZSBhYnNvbHV0ZSB2YWx1ZSBvZiB0aGlzIERlY2ltYWwuXHJcbiAqXHJcbiAqL1xyXG5QLmFic29sdXRlVmFsdWUgPSBQLmFicyA9IGZ1bmN0aW9uICgpIHtcclxuICB2YXIgeCA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMpO1xyXG4gIGlmICh4LnMpIHgucyA9IDE7XHJcbiAgcmV0dXJuIHg7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuXHJcbiAqICAgMSAgICBpZiB0aGUgdmFsdWUgb2YgdGhpcyBEZWNpbWFsIGlzIGdyZWF0ZXIgdGhhbiB0aGUgdmFsdWUgb2YgYHlgLFxyXG4gKiAgLTEgICAgaWYgdGhlIHZhbHVlIG9mIHRoaXMgRGVjaW1hbCBpcyBsZXNzIHRoYW4gdGhlIHZhbHVlIG9mIGB5YCxcclxuICogICAwICAgIGlmIHRoZXkgaGF2ZSB0aGUgc2FtZSB2YWx1ZVxyXG4gKlxyXG4gKi9cclxuUC5jb21wYXJlZFRvID0gUC5jbXAgPSBmdW5jdGlvbiAoeSkge1xyXG4gIHZhciBpLCBqLCB4ZEwsIHlkTCxcclxuICAgIHggPSB0aGlzO1xyXG5cclxuICB5ID0gbmV3IHguY29uc3RydWN0b3IoeSk7XHJcblxyXG4gIC8vIFNpZ25zIGRpZmZlcj9cclxuICBpZiAoeC5zICE9PSB5LnMpIHJldHVybiB4LnMgfHwgLXkucztcclxuXHJcbiAgLy8gQ29tcGFyZSBleHBvbmVudHMuXHJcbiAgaWYgKHguZSAhPT0geS5lKSByZXR1cm4geC5lID4geS5lIF4geC5zIDwgMCA/IDEgOiAtMTtcclxuXHJcbiAgeGRMID0geC5kLmxlbmd0aDtcclxuICB5ZEwgPSB5LmQubGVuZ3RoO1xyXG5cclxuICAvLyBDb21wYXJlIGRpZ2l0IGJ5IGRpZ2l0LlxyXG4gIGZvciAoaSA9IDAsIGogPSB4ZEwgPCB5ZEwgPyB4ZEwgOiB5ZEw7IGkgPCBqOyArK2kpIHtcclxuICAgIGlmICh4LmRbaV0gIT09IHkuZFtpXSkgcmV0dXJuIHguZFtpXSA+IHkuZFtpXSBeIHgucyA8IDAgPyAxIDogLTE7XHJcbiAgfVxyXG5cclxuICAvLyBDb21wYXJlIGxlbmd0aHMuXHJcbiAgcmV0dXJuIHhkTCA9PT0geWRMID8gMCA6IHhkTCA+IHlkTCBeIHgucyA8IDAgPyAxIDogLTE7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIHRoZSBudW1iZXIgb2YgZGVjaW1hbCBwbGFjZXMgb2YgdGhlIHZhbHVlIG9mIHRoaXMgRGVjaW1hbC5cclxuICpcclxuICovXHJcblAuZGVjaW1hbFBsYWNlcyA9IFAuZHAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIHggPSB0aGlzLFxyXG4gICAgdyA9IHguZC5sZW5ndGggLSAxLFxyXG4gICAgZHAgPSAodyAtIHguZSkgKiBMT0dfQkFTRTtcclxuXHJcbiAgLy8gU3VidHJhY3QgdGhlIG51bWJlciBvZiB0cmFpbGluZyB6ZXJvcyBvZiB0aGUgbGFzdCB3b3JkLlxyXG4gIHcgPSB4LmRbd107XHJcbiAgaWYgKHcpIGZvciAoOyB3ICUgMTAgPT0gMDsgdyAvPSAxMCkgZHAtLTtcclxuXHJcbiAgcmV0dXJuIGRwIDwgMCA/IDAgOiBkcDtcclxufTtcclxuXHJcblxyXG4vKlxyXG4gKiBSZXR1cm4gYSBuZXcgRGVjaW1hbCB3aG9zZSB2YWx1ZSBpcyB0aGUgdmFsdWUgb2YgdGhpcyBEZWNpbWFsIGRpdmlkZWQgYnkgYHlgLCB0cnVuY2F0ZWQgdG9cclxuICogYHByZWNpc2lvbmAgc2lnbmlmaWNhbnQgZGlnaXRzLlxyXG4gKlxyXG4gKi9cclxuUC5kaXZpZGVkQnkgPSBQLmRpdiA9IGZ1bmN0aW9uICh5KSB7XHJcbiAgcmV0dXJuIGRpdmlkZSh0aGlzLCBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih5KSk7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIGEgbmV3IERlY2ltYWwgd2hvc2UgdmFsdWUgaXMgdGhlIGludGVnZXIgcGFydCBvZiBkaXZpZGluZyB0aGUgdmFsdWUgb2YgdGhpcyBEZWNpbWFsXHJcbiAqIGJ5IHRoZSB2YWx1ZSBvZiBgeWAsIHRydW5jYXRlZCB0byBgcHJlY2lzaW9uYCBzaWduaWZpY2FudCBkaWdpdHMuXHJcbiAqXHJcbiAqL1xyXG5QLmRpdmlkZWRUb0ludGVnZXJCeSA9IFAuaWRpdiA9IGZ1bmN0aW9uICh5KSB7XHJcbiAgdmFyIHggPSB0aGlzLFxyXG4gICAgQ3RvciA9IHguY29uc3RydWN0b3I7XHJcbiAgcmV0dXJuIHJvdW5kKGRpdmlkZSh4LCBuZXcgQ3Rvcih5KSwgMCwgMSksIEN0b3IucHJlY2lzaW9uKTtcclxufTtcclxuXHJcblxyXG4vKlxyXG4gKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgdmFsdWUgb2YgdGhpcyBEZWNpbWFsIGlzIGVxdWFsIHRvIHRoZSB2YWx1ZSBvZiBgeWAsIG90aGVyd2lzZSByZXR1cm4gZmFsc2UuXHJcbiAqXHJcbiAqL1xyXG5QLmVxdWFscyA9IFAuZXEgPSBmdW5jdGlvbiAoeSkge1xyXG4gIHJldHVybiAhdGhpcy5jbXAoeSk7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIHRoZSAoYmFzZSAxMCkgZXhwb25lbnQgdmFsdWUgb2YgdGhpcyBEZWNpbWFsICh0aGlzLmUgaXMgdGhlIGJhc2UgMTAwMDAwMDAgZXhwb25lbnQpLlxyXG4gKlxyXG4gKi9cclxuUC5leHBvbmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gZ2V0QmFzZTEwRXhwb25lbnQodGhpcyk7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIHRydWUgaWYgdGhlIHZhbHVlIG9mIHRoaXMgRGVjaW1hbCBpcyBncmVhdGVyIHRoYW4gdGhlIHZhbHVlIG9mIGB5YCwgb3RoZXJ3aXNlIHJldHVyblxyXG4gKiBmYWxzZS5cclxuICpcclxuICovXHJcblAuZ3JlYXRlclRoYW4gPSBQLmd0ID0gZnVuY3Rpb24gKHkpIHtcclxuICByZXR1cm4gdGhpcy5jbXAoeSkgPiAwO1xyXG59O1xyXG5cclxuXHJcbi8qXHJcbiAqIFJldHVybiB0cnVlIGlmIHRoZSB2YWx1ZSBvZiB0aGlzIERlY2ltYWwgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSB2YWx1ZSBvZiBgeWAsXHJcbiAqIG90aGVyd2lzZSByZXR1cm4gZmFsc2UuXHJcbiAqXHJcbiAqL1xyXG5QLmdyZWF0ZXJUaGFuT3JFcXVhbFRvID0gUC5ndGUgPSBmdW5jdGlvbiAoeSkge1xyXG4gIHJldHVybiB0aGlzLmNtcCh5KSA+PSAwO1xyXG59O1xyXG5cclxuXHJcbi8qXHJcbiAqIFJldHVybiB0cnVlIGlmIHRoZSB2YWx1ZSBvZiB0aGlzIERlY2ltYWwgaXMgYW4gaW50ZWdlciwgb3RoZXJ3aXNlIHJldHVybiBmYWxzZS5cclxuICpcclxuICovXHJcblAuaXNJbnRlZ2VyID0gUC5pc2ludCA9IGZ1bmN0aW9uICgpIHtcclxuICByZXR1cm4gdGhpcy5lID4gdGhpcy5kLmxlbmd0aCAtIDI7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIHRydWUgaWYgdGhlIHZhbHVlIG9mIHRoaXMgRGVjaW1hbCBpcyBuZWdhdGl2ZSwgb3RoZXJ3aXNlIHJldHVybiBmYWxzZS5cclxuICpcclxuICovXHJcblAuaXNOZWdhdGl2ZSA9IFAuaXNuZWcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMucyA8IDA7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIHRydWUgaWYgdGhlIHZhbHVlIG9mIHRoaXMgRGVjaW1hbCBpcyBwb3NpdGl2ZSwgb3RoZXJ3aXNlIHJldHVybiBmYWxzZS5cclxuICpcclxuICovXHJcblAuaXNQb3NpdGl2ZSA9IFAuaXNwb3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMucyA+IDA7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIHRydWUgaWYgdGhlIHZhbHVlIG9mIHRoaXMgRGVjaW1hbCBpcyAwLCBvdGhlcndpc2UgcmV0dXJuIGZhbHNlLlxyXG4gKlxyXG4gKi9cclxuUC5pc1plcm8gPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMucyA9PT0gMDtcclxufTtcclxuXHJcblxyXG4vKlxyXG4gKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgdmFsdWUgb2YgdGhpcyBEZWNpbWFsIGlzIGxlc3MgdGhhbiBgeWAsIG90aGVyd2lzZSByZXR1cm4gZmFsc2UuXHJcbiAqXHJcbiAqL1xyXG5QLmxlc3NUaGFuID0gUC5sdCA9IGZ1bmN0aW9uICh5KSB7XHJcbiAgcmV0dXJuIHRoaXMuY21wKHkpIDwgMDtcclxufTtcclxuXHJcblxyXG4vKlxyXG4gKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgdmFsdWUgb2YgdGhpcyBEZWNpbWFsIGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byBgeWAsIG90aGVyd2lzZSByZXR1cm4gZmFsc2UuXHJcbiAqXHJcbiAqL1xyXG5QLmxlc3NUaGFuT3JFcXVhbFRvID0gUC5sdGUgPSBmdW5jdGlvbiAoeSkge1xyXG4gIHJldHVybiB0aGlzLmNtcCh5KSA8IDE7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIHRoZSBsb2dhcml0aG0gb2YgdGhlIHZhbHVlIG9mIHRoaXMgRGVjaW1hbCB0byB0aGUgc3BlY2lmaWVkIGJhc2UsIHRydW5jYXRlZCB0b1xyXG4gKiBgcHJlY2lzaW9uYCBzaWduaWZpY2FudCBkaWdpdHMuXHJcbiAqXHJcbiAqIElmIG5vIGJhc2UgaXMgc3BlY2lmaWVkLCByZXR1cm4gbG9nWzEwXSh4KS5cclxuICpcclxuICogbG9nW2Jhc2VdKHgpID0gbG4oeCkgLyBsbihiYXNlKVxyXG4gKlxyXG4gKiBUaGUgbWF4aW11bSBlcnJvciBvZiB0aGUgcmVzdWx0IGlzIDEgdWxwICh1bml0IGluIHRoZSBsYXN0IHBsYWNlKS5cclxuICpcclxuICogW2Jhc2VdIHtudW1iZXJ8c3RyaW5nfERlY2ltYWx9IFRoZSBiYXNlIG9mIHRoZSBsb2dhcml0aG0uXHJcbiAqXHJcbiAqL1xyXG5QLmxvZ2FyaXRobSA9IFAubG9nID0gZnVuY3Rpb24gKGJhc2UpIHtcclxuICB2YXIgcixcclxuICAgIHggPSB0aGlzLFxyXG4gICAgQ3RvciA9IHguY29uc3RydWN0b3IsXHJcbiAgICBwciA9IEN0b3IucHJlY2lzaW9uLFxyXG4gICAgd3ByID0gcHIgKyA1O1xyXG5cclxuICAvLyBEZWZhdWx0IGJhc2UgaXMgMTAuXHJcbiAgaWYgKGJhc2UgPT09IHZvaWQgMCkge1xyXG4gICAgYmFzZSA9IG5ldyBDdG9yKDEwKTtcclxuICB9IGVsc2Uge1xyXG4gICAgYmFzZSA9IG5ldyBDdG9yKGJhc2UpO1xyXG5cclxuICAgIC8vIGxvZ1stYl0oeCkgPSBOYU5cclxuICAgIC8vIGxvZ1swXSh4KSAgPSBOYU5cclxuICAgIC8vIGxvZ1sxXSh4KSAgPSBOYU5cclxuICAgIGlmIChiYXNlLnMgPCAxIHx8IGJhc2UuZXEoT05FKSkgdGhyb3cgRXJyb3IoZGVjaW1hbEVycm9yICsgJ05hTicpO1xyXG4gIH1cclxuXHJcbiAgLy8gbG9nW2JdKC14KSA9IE5hTlxyXG4gIC8vIGxvZ1tiXSgwKSA9IC1JbmZpbml0eVxyXG4gIGlmICh4LnMgPCAxKSB0aHJvdyBFcnJvcihkZWNpbWFsRXJyb3IgKyAoeC5zID8gJ05hTicgOiAnLUluZmluaXR5JykpO1xyXG5cclxuICAvLyBsb2dbYl0oMSkgPSAwXHJcbiAgaWYgKHguZXEoT05FKSkgcmV0dXJuIG5ldyBDdG9yKDApO1xyXG5cclxuICBleHRlcm5hbCA9IGZhbHNlO1xyXG4gIHIgPSBkaXZpZGUobG4oeCwgd3ByKSwgbG4oYmFzZSwgd3ByKSwgd3ByKTtcclxuICBleHRlcm5hbCA9IHRydWU7XHJcblxyXG4gIHJldHVybiByb3VuZChyLCBwcik7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIGEgbmV3IERlY2ltYWwgd2hvc2UgdmFsdWUgaXMgdGhlIHZhbHVlIG9mIHRoaXMgRGVjaW1hbCBtaW51cyBgeWAsIHRydW5jYXRlZCB0b1xyXG4gKiBgcHJlY2lzaW9uYCBzaWduaWZpY2FudCBkaWdpdHMuXHJcbiAqXHJcbiAqL1xyXG5QLm1pbnVzID0gUC5zdWIgPSBmdW5jdGlvbiAoeSkge1xyXG4gIHZhciB4ID0gdGhpcztcclxuICB5ID0gbmV3IHguY29uc3RydWN0b3IoeSk7XHJcbiAgcmV0dXJuIHgucyA9PSB5LnMgPyBzdWJ0cmFjdCh4LCB5KSA6IGFkZCh4LCAoeS5zID0gLXkucywgeSkpO1xyXG59O1xyXG5cclxuXHJcbi8qXHJcbiAqIFJldHVybiBhIG5ldyBEZWNpbWFsIHdob3NlIHZhbHVlIGlzIHRoZSB2YWx1ZSBvZiB0aGlzIERlY2ltYWwgbW9kdWxvIGB5YCwgdHJ1bmNhdGVkIHRvXHJcbiAqIGBwcmVjaXNpb25gIHNpZ25pZmljYW50IGRpZ2l0cy5cclxuICpcclxuICovXHJcblAubW9kdWxvID0gUC5tb2QgPSBmdW5jdGlvbiAoeSkge1xyXG4gIHZhciBxLFxyXG4gICAgeCA9IHRoaXMsXHJcbiAgICBDdG9yID0geC5jb25zdHJ1Y3RvcixcclxuICAgIHByID0gQ3Rvci5wcmVjaXNpb247XHJcblxyXG4gIHkgPSBuZXcgQ3Rvcih5KTtcclxuXHJcbiAgLy8geCAlIDAgPSBOYU5cclxuICBpZiAoIXkucykgdGhyb3cgRXJyb3IoZGVjaW1hbEVycm9yICsgJ05hTicpO1xyXG5cclxuICAvLyBSZXR1cm4geCBpZiB4IGlzIDAuXHJcbiAgaWYgKCF4LnMpIHJldHVybiByb3VuZChuZXcgQ3Rvcih4KSwgcHIpO1xyXG5cclxuICAvLyBQcmV2ZW50IHJvdW5kaW5nIG9mIGludGVybWVkaWF0ZSBjYWxjdWxhdGlvbnMuXHJcbiAgZXh0ZXJuYWwgPSBmYWxzZTtcclxuICBxID0gZGl2aWRlKHgsIHksIDAsIDEpLnRpbWVzKHkpO1xyXG4gIGV4dGVybmFsID0gdHJ1ZTtcclxuXHJcbiAgcmV0dXJuIHgubWludXMocSk7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIGEgbmV3IERlY2ltYWwgd2hvc2UgdmFsdWUgaXMgdGhlIG5hdHVyYWwgZXhwb25lbnRpYWwgb2YgdGhlIHZhbHVlIG9mIHRoaXMgRGVjaW1hbCxcclxuICogaS5lLiB0aGUgYmFzZSBlIHJhaXNlZCB0byB0aGUgcG93ZXIgdGhlIHZhbHVlIG9mIHRoaXMgRGVjaW1hbCwgdHJ1bmNhdGVkIHRvIGBwcmVjaXNpb25gXHJcbiAqIHNpZ25pZmljYW50IGRpZ2l0cy5cclxuICpcclxuICovXHJcblAubmF0dXJhbEV4cG9uZW50aWFsID0gUC5leHAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIGV4cCh0aGlzKTtcclxufTtcclxuXHJcblxyXG4vKlxyXG4gKiBSZXR1cm4gYSBuZXcgRGVjaW1hbCB3aG9zZSB2YWx1ZSBpcyB0aGUgbmF0dXJhbCBsb2dhcml0aG0gb2YgdGhlIHZhbHVlIG9mIHRoaXMgRGVjaW1hbCxcclxuICogdHJ1bmNhdGVkIHRvIGBwcmVjaXNpb25gIHNpZ25pZmljYW50IGRpZ2l0cy5cclxuICpcclxuICovXHJcblAubmF0dXJhbExvZ2FyaXRobSA9IFAubG4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIGxuKHRoaXMpO1xyXG59O1xyXG5cclxuXHJcbi8qXHJcbiAqIFJldHVybiBhIG5ldyBEZWNpbWFsIHdob3NlIHZhbHVlIGlzIHRoZSB2YWx1ZSBvZiB0aGlzIERlY2ltYWwgbmVnYXRlZCwgaS5lLiBhcyBpZiBtdWx0aXBsaWVkIGJ5XHJcbiAqIC0xLlxyXG4gKlxyXG4gKi9cclxuUC5uZWdhdGVkID0gUC5uZWcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIHggPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzKTtcclxuICB4LnMgPSAteC5zIHx8IDA7XHJcbiAgcmV0dXJuIHg7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIGEgbmV3IERlY2ltYWwgd2hvc2UgdmFsdWUgaXMgdGhlIHZhbHVlIG9mIHRoaXMgRGVjaW1hbCBwbHVzIGB5YCwgdHJ1bmNhdGVkIHRvXHJcbiAqIGBwcmVjaXNpb25gIHNpZ25pZmljYW50IGRpZ2l0cy5cclxuICpcclxuICovXHJcblAucGx1cyA9IFAuYWRkID0gZnVuY3Rpb24gKHkpIHtcclxuICB2YXIgeCA9IHRoaXM7XHJcbiAgeSA9IG5ldyB4LmNvbnN0cnVjdG9yKHkpO1xyXG4gIHJldHVybiB4LnMgPT0geS5zID8gYWRkKHgsIHkpIDogc3VidHJhY3QoeCwgKHkucyA9IC15LnMsIHkpKTtcclxufTtcclxuXHJcblxyXG4vKlxyXG4gKiBSZXR1cm4gdGhlIG51bWJlciBvZiBzaWduaWZpY2FudCBkaWdpdHMgb2YgdGhlIHZhbHVlIG9mIHRoaXMgRGVjaW1hbC5cclxuICpcclxuICogW3pdIHtib29sZWFufG51bWJlcn0gV2hldGhlciB0byBjb3VudCBpbnRlZ2VyLXBhcnQgdHJhaWxpbmcgemVyb3M6IHRydWUsIGZhbHNlLCAxIG9yIDAuXHJcbiAqXHJcbiAqL1xyXG5QLnByZWNpc2lvbiA9IFAuc2QgPSBmdW5jdGlvbiAoeikge1xyXG4gIHZhciBlLCBzZCwgdyxcclxuICAgIHggPSB0aGlzO1xyXG5cclxuICBpZiAoeiAhPT0gdm9pZCAwICYmIHogIT09ICEheiAmJiB6ICE9PSAxICYmIHogIT09IDApIHRocm93IEVycm9yKGludmFsaWRBcmd1bWVudCArIHopO1xyXG5cclxuICBlID0gZ2V0QmFzZTEwRXhwb25lbnQoeCkgKyAxO1xyXG4gIHcgPSB4LmQubGVuZ3RoIC0gMTtcclxuICBzZCA9IHcgKiBMT0dfQkFTRSArIDE7XHJcbiAgdyA9IHguZFt3XTtcclxuXHJcbiAgLy8gSWYgbm9uLXplcm8uLi5cclxuICBpZiAodykge1xyXG5cclxuICAgIC8vIFN1YnRyYWN0IHRoZSBudW1iZXIgb2YgdHJhaWxpbmcgemVyb3Mgb2YgdGhlIGxhc3Qgd29yZC5cclxuICAgIGZvciAoOyB3ICUgMTAgPT0gMDsgdyAvPSAxMCkgc2QtLTtcclxuXHJcbiAgICAvLyBBZGQgdGhlIG51bWJlciBvZiBkaWdpdHMgb2YgdGhlIGZpcnN0IHdvcmQuXHJcbiAgICBmb3IgKHcgPSB4LmRbMF07IHcgPj0gMTA7IHcgLz0gMTApIHNkKys7XHJcbiAgfVxyXG5cclxuICByZXR1cm4geiAmJiBlID4gc2QgPyBlIDogc2Q7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIGEgbmV3IERlY2ltYWwgd2hvc2UgdmFsdWUgaXMgdGhlIHNxdWFyZSByb290IG9mIHRoaXMgRGVjaW1hbCwgdHJ1bmNhdGVkIHRvIGBwcmVjaXNpb25gXHJcbiAqIHNpZ25pZmljYW50IGRpZ2l0cy5cclxuICpcclxuICovXHJcblAuc3F1YXJlUm9vdCA9IFAuc3FydCA9IGZ1bmN0aW9uICgpIHtcclxuICB2YXIgZSwgbiwgcHIsIHIsIHMsIHQsIHdwcixcclxuICAgIHggPSB0aGlzLFxyXG4gICAgQ3RvciA9IHguY29uc3RydWN0b3I7XHJcblxyXG4gIC8vIE5lZ2F0aXZlIG9yIHplcm8/XHJcbiAgaWYgKHgucyA8IDEpIHtcclxuICAgIGlmICgheC5zKSByZXR1cm4gbmV3IEN0b3IoMCk7XHJcblxyXG4gICAgLy8gc3FydCgteCkgPSBOYU5cclxuICAgIHRocm93IEVycm9yKGRlY2ltYWxFcnJvciArICdOYU4nKTtcclxuICB9XHJcblxyXG4gIGUgPSBnZXRCYXNlMTBFeHBvbmVudCh4KTtcclxuICBleHRlcm5hbCA9IGZhbHNlO1xyXG5cclxuICAvLyBJbml0aWFsIGVzdGltYXRlLlxyXG4gIHMgPSBNYXRoLnNxcnQoK3gpO1xyXG5cclxuICAvLyBNYXRoLnNxcnQgdW5kZXJmbG93L292ZXJmbG93P1xyXG4gIC8vIFBhc3MgeCB0byBNYXRoLnNxcnQgYXMgaW50ZWdlciwgdGhlbiBhZGp1c3QgdGhlIGV4cG9uZW50IG9mIHRoZSByZXN1bHQuXHJcbiAgaWYgKHMgPT0gMCB8fCBzID09IDEgLyAwKSB7XHJcbiAgICBuID0gZGlnaXRzVG9TdHJpbmcoeC5kKTtcclxuICAgIGlmICgobi5sZW5ndGggKyBlKSAlIDIgPT0gMCkgbiArPSAnMCc7XHJcbiAgICBzID0gTWF0aC5zcXJ0KG4pO1xyXG4gICAgZSA9IG1hdGhmbG9vcigoZSArIDEpIC8gMikgLSAoZSA8IDAgfHwgZSAlIDIpO1xyXG5cclxuICAgIGlmIChzID09IDEgLyAwKSB7XHJcbiAgICAgIG4gPSAnNWUnICsgZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG4gPSBzLnRvRXhwb25lbnRpYWwoKTtcclxuICAgICAgbiA9IG4uc2xpY2UoMCwgbi5pbmRleE9mKCdlJykgKyAxKSArIGU7XHJcbiAgICB9XHJcblxyXG4gICAgciA9IG5ldyBDdG9yKG4pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByID0gbmV3IEN0b3Iocy50b1N0cmluZygpKTtcclxuICB9XHJcblxyXG4gIHByID0gQ3Rvci5wcmVjaXNpb247XHJcbiAgcyA9IHdwciA9IHByICsgMztcclxuXHJcbiAgLy8gTmV3dG9uLVJhcGhzb24gaXRlcmF0aW9uLlxyXG4gIGZvciAoOzspIHtcclxuICAgIHQgPSByO1xyXG4gICAgciA9IHQucGx1cyhkaXZpZGUoeCwgdCwgd3ByICsgMikpLnRpbWVzKDAuNSk7XHJcblxyXG4gICAgaWYgKGRpZ2l0c1RvU3RyaW5nKHQuZCkuc2xpY2UoMCwgd3ByKSA9PT0gKG4gPSBkaWdpdHNUb1N0cmluZyhyLmQpKS5zbGljZSgwLCB3cHIpKSB7XHJcbiAgICAgIG4gPSBuLnNsaWNlKHdwciAtIDMsIHdwciArIDEpO1xyXG5cclxuICAgICAgLy8gVGhlIDR0aCByb3VuZGluZyBkaWdpdCBtYXkgYmUgaW4gZXJyb3IgYnkgLTEgc28gaWYgdGhlIDQgcm91bmRpbmcgZGlnaXRzIGFyZSA5OTk5IG9yXHJcbiAgICAgIC8vIDQ5OTksIGkuZS4gYXBwcm9hY2hpbmcgYSByb3VuZGluZyBib3VuZGFyeSwgY29udGludWUgdGhlIGl0ZXJhdGlvbi5cclxuICAgICAgaWYgKHMgPT0gd3ByICYmIG4gPT0gJzQ5OTknKSB7XHJcblxyXG4gICAgICAgIC8vIE9uIHRoZSBmaXJzdCBpdGVyYXRpb24gb25seSwgY2hlY2sgdG8gc2VlIGlmIHJvdW5kaW5nIHVwIGdpdmVzIHRoZSBleGFjdCByZXN1bHQgYXMgdGhlXHJcbiAgICAgICAgLy8gbmluZXMgbWF5IGluZmluaXRlbHkgcmVwZWF0LlxyXG4gICAgICAgIHJvdW5kKHQsIHByICsgMSwgMCk7XHJcblxyXG4gICAgICAgIGlmICh0LnRpbWVzKHQpLmVxKHgpKSB7XHJcbiAgICAgICAgICByID0gdDtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGlmIChuICE9ICc5OTk5Jykge1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcblxyXG4gICAgICB3cHIgKz0gNDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGV4dGVybmFsID0gdHJ1ZTtcclxuXHJcbiAgcmV0dXJuIHJvdW5kKHIsIHByKTtcclxufTtcclxuXHJcblxyXG4vKlxyXG4gKiBSZXR1cm4gYSBuZXcgRGVjaW1hbCB3aG9zZSB2YWx1ZSBpcyB0aGUgdmFsdWUgb2YgdGhpcyBEZWNpbWFsIHRpbWVzIGB5YCwgdHJ1bmNhdGVkIHRvXHJcbiAqIGBwcmVjaXNpb25gIHNpZ25pZmljYW50IGRpZ2l0cy5cclxuICpcclxuICovXHJcblAudGltZXMgPSBQLm11bCA9IGZ1bmN0aW9uICh5KSB7XHJcbiAgdmFyIGNhcnJ5LCBlLCBpLCBrLCByLCByTCwgdCwgeGRMLCB5ZEwsXHJcbiAgICB4ID0gdGhpcyxcclxuICAgIEN0b3IgPSB4LmNvbnN0cnVjdG9yLFxyXG4gICAgeGQgPSB4LmQsXHJcbiAgICB5ZCA9ICh5ID0gbmV3IEN0b3IoeSkpLmQ7XHJcblxyXG4gIC8vIFJldHVybiAwIGlmIGVpdGhlciBpcyAwLlxyXG4gIGlmICgheC5zIHx8ICF5LnMpIHJldHVybiBuZXcgQ3RvcigwKTtcclxuXHJcbiAgeS5zICo9IHgucztcclxuICBlID0geC5lICsgeS5lO1xyXG4gIHhkTCA9IHhkLmxlbmd0aDtcclxuICB5ZEwgPSB5ZC5sZW5ndGg7XHJcblxyXG4gIC8vIEVuc3VyZSB4ZCBwb2ludHMgdG8gdGhlIGxvbmdlciBhcnJheS5cclxuICBpZiAoeGRMIDwgeWRMKSB7XHJcbiAgICByID0geGQ7XHJcbiAgICB4ZCA9IHlkO1xyXG4gICAgeWQgPSByO1xyXG4gICAgckwgPSB4ZEw7XHJcbiAgICB4ZEwgPSB5ZEw7XHJcbiAgICB5ZEwgPSByTDtcclxuICB9XHJcblxyXG4gIC8vIEluaXRpYWxpc2UgdGhlIHJlc3VsdCBhcnJheSB3aXRoIHplcm9zLlxyXG4gIHIgPSBbXTtcclxuICByTCA9IHhkTCArIHlkTDtcclxuICBmb3IgKGkgPSByTDsgaS0tOykgci5wdXNoKDApO1xyXG5cclxuICAvLyBNdWx0aXBseSFcclxuICBmb3IgKGkgPSB5ZEw7IC0taSA+PSAwOykge1xyXG4gICAgY2FycnkgPSAwO1xyXG4gICAgZm9yIChrID0geGRMICsgaTsgayA+IGk7KSB7XHJcbiAgICAgIHQgPSByW2tdICsgeWRbaV0gKiB4ZFtrIC0gaSAtIDFdICsgY2Fycnk7XHJcbiAgICAgIHJbay0tXSA9IHQgJSBCQVNFIHwgMDtcclxuICAgICAgY2FycnkgPSB0IC8gQkFTRSB8IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcltrXSA9IChyW2tdICsgY2FycnkpICUgQkFTRSB8IDA7XHJcbiAgfVxyXG5cclxuICAvLyBSZW1vdmUgdHJhaWxpbmcgemVyb3MuXHJcbiAgZm9yICg7ICFyWy0tckxdOykgci5wb3AoKTtcclxuXHJcbiAgaWYgKGNhcnJ5KSArK2U7XHJcbiAgZWxzZSByLnNoaWZ0KCk7XHJcblxyXG4gIHkuZCA9IHI7XHJcbiAgeS5lID0gZTtcclxuXHJcbiAgcmV0dXJuIGV4dGVybmFsID8gcm91bmQoeSwgQ3Rvci5wcmVjaXNpb24pIDogeTtcclxufTtcclxuXHJcblxyXG4vKlxyXG4gKiBSZXR1cm4gYSBuZXcgRGVjaW1hbCB3aG9zZSB2YWx1ZSBpcyB0aGUgdmFsdWUgb2YgdGhpcyBEZWNpbWFsIHJvdW5kZWQgdG8gYSBtYXhpbXVtIG9mIGBkcGBcclxuICogZGVjaW1hbCBwbGFjZXMgdXNpbmcgcm91bmRpbmcgbW9kZSBgcm1gIG9yIGByb3VuZGluZ2AgaWYgYHJtYCBpcyBvbWl0dGVkLlxyXG4gKlxyXG4gKiBJZiBgZHBgIGlzIG9taXR0ZWQsIHJldHVybiBhIG5ldyBEZWNpbWFsIHdob3NlIHZhbHVlIGlzIHRoZSB2YWx1ZSBvZiB0aGlzIERlY2ltYWwuXHJcbiAqXHJcbiAqIFtkcF0ge251bWJlcn0gRGVjaW1hbCBwbGFjZXMuIEludGVnZXIsIDAgdG8gTUFYX0RJR0lUUyBpbmNsdXNpdmUuXHJcbiAqIFtybV0ge251bWJlcn0gUm91bmRpbmcgbW9kZS4gSW50ZWdlciwgMCB0byA4IGluY2x1c2l2ZS5cclxuICpcclxuICovXHJcblAudG9EZWNpbWFsUGxhY2VzID0gUC50b2RwID0gZnVuY3Rpb24gKGRwLCBybSkge1xyXG4gIHZhciB4ID0gdGhpcyxcclxuICAgIEN0b3IgPSB4LmNvbnN0cnVjdG9yO1xyXG5cclxuICB4ID0gbmV3IEN0b3IoeCk7XHJcbiAgaWYgKGRwID09PSB2b2lkIDApIHJldHVybiB4O1xyXG5cclxuICBjaGVja0ludDMyKGRwLCAwLCBNQVhfRElHSVRTKTtcclxuXHJcbiAgaWYgKHJtID09PSB2b2lkIDApIHJtID0gQ3Rvci5yb3VuZGluZztcclxuICBlbHNlIGNoZWNrSW50MzIocm0sIDAsIDgpO1xyXG5cclxuICByZXR1cm4gcm91bmQoeCwgZHAgKyBnZXRCYXNlMTBFeHBvbmVudCh4KSArIDEsIHJtKTtcclxufTtcclxuXHJcblxyXG4vKlxyXG4gKiBSZXR1cm4gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB2YWx1ZSBvZiB0aGlzIERlY2ltYWwgaW4gZXhwb25lbnRpYWwgbm90YXRpb24gcm91bmRlZCB0b1xyXG4gKiBgZHBgIGZpeGVkIGRlY2ltYWwgcGxhY2VzIHVzaW5nIHJvdW5kaW5nIG1vZGUgYHJvdW5kaW5nYC5cclxuICpcclxuICogW2RwXSB7bnVtYmVyfSBEZWNpbWFsIHBsYWNlcy4gSW50ZWdlciwgMCB0byBNQVhfRElHSVRTIGluY2x1c2l2ZS5cclxuICogW3JtXSB7bnVtYmVyfSBSb3VuZGluZyBtb2RlLiBJbnRlZ2VyLCAwIHRvIDggaW5jbHVzaXZlLlxyXG4gKlxyXG4gKi9cclxuUC50b0V4cG9uZW50aWFsID0gZnVuY3Rpb24gKGRwLCBybSkge1xyXG4gIHZhciBzdHIsXHJcbiAgICB4ID0gdGhpcyxcclxuICAgIEN0b3IgPSB4LmNvbnN0cnVjdG9yO1xyXG5cclxuICBpZiAoZHAgPT09IHZvaWQgMCkge1xyXG4gICAgc3RyID0gdG9TdHJpbmcoeCwgdHJ1ZSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNoZWNrSW50MzIoZHAsIDAsIE1BWF9ESUdJVFMpO1xyXG5cclxuICAgIGlmIChybSA9PT0gdm9pZCAwKSBybSA9IEN0b3Iucm91bmRpbmc7XHJcbiAgICBlbHNlIGNoZWNrSW50MzIocm0sIDAsIDgpO1xyXG5cclxuICAgIHggPSByb3VuZChuZXcgQ3Rvcih4KSwgZHAgKyAxLCBybSk7XHJcbiAgICBzdHIgPSB0b1N0cmluZyh4LCB0cnVlLCBkcCArIDEpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHN0cjtcclxufTtcclxuXHJcblxyXG4vKlxyXG4gKiBSZXR1cm4gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB2YWx1ZSBvZiB0aGlzIERlY2ltYWwgaW4gbm9ybWFsIChmaXhlZC1wb2ludCkgbm90YXRpb24gdG9cclxuICogYGRwYCBmaXhlZCBkZWNpbWFsIHBsYWNlcyBhbmQgcm91bmRlZCB1c2luZyByb3VuZGluZyBtb2RlIGBybWAgb3IgYHJvdW5kaW5nYCBpZiBgcm1gIGlzXHJcbiAqIG9taXR0ZWQuXHJcbiAqXHJcbiAqIEFzIHdpdGggSmF2YVNjcmlwdCBudW1iZXJzLCAoLTApLnRvRml4ZWQoMCkgaXMgJzAnLCBidXQgZS5nLiAoLTAuMDAwMDEpLnRvRml4ZWQoMCkgaXMgJy0wJy5cclxuICpcclxuICogW2RwXSB7bnVtYmVyfSBEZWNpbWFsIHBsYWNlcy4gSW50ZWdlciwgMCB0byBNQVhfRElHSVRTIGluY2x1c2l2ZS5cclxuICogW3JtXSB7bnVtYmVyfSBSb3VuZGluZyBtb2RlLiBJbnRlZ2VyLCAwIHRvIDggaW5jbHVzaXZlLlxyXG4gKlxyXG4gKiAoLTApLnRvRml4ZWQoMCkgaXMgJzAnLCBidXQgKC0wLjEpLnRvRml4ZWQoMCkgaXMgJy0wJy5cclxuICogKC0wKS50b0ZpeGVkKDEpIGlzICcwLjAnLCBidXQgKC0wLjAxKS50b0ZpeGVkKDEpIGlzICctMC4wJy5cclxuICogKC0wKS50b0ZpeGVkKDMpIGlzICcwLjAwMCcuXHJcbiAqICgtMC41KS50b0ZpeGVkKDApIGlzICctMCcuXHJcbiAqXHJcbiAqL1xyXG5QLnRvRml4ZWQgPSBmdW5jdGlvbiAoZHAsIHJtKSB7XHJcbiAgdmFyIHN0ciwgeSxcclxuICAgIHggPSB0aGlzLFxyXG4gICAgQ3RvciA9IHguY29uc3RydWN0b3I7XHJcblxyXG4gIGlmIChkcCA9PT0gdm9pZCAwKSByZXR1cm4gdG9TdHJpbmcoeCk7XHJcblxyXG4gIGNoZWNrSW50MzIoZHAsIDAsIE1BWF9ESUdJVFMpO1xyXG5cclxuICBpZiAocm0gPT09IHZvaWQgMCkgcm0gPSBDdG9yLnJvdW5kaW5nO1xyXG4gIGVsc2UgY2hlY2tJbnQzMihybSwgMCwgOCk7XHJcblxyXG4gIHkgPSByb3VuZChuZXcgQ3Rvcih4KSwgZHAgKyBnZXRCYXNlMTBFeHBvbmVudCh4KSArIDEsIHJtKTtcclxuICBzdHIgPSB0b1N0cmluZyh5LmFicygpLCBmYWxzZSwgZHAgKyBnZXRCYXNlMTBFeHBvbmVudCh5KSArIDEpO1xyXG5cclxuICAvLyBUbyBkZXRlcm1pbmUgd2hldGhlciB0byBhZGQgdGhlIG1pbnVzIHNpZ24gbG9vayBhdCB0aGUgdmFsdWUgYmVmb3JlIGl0IHdhcyByb3VuZGVkLFxyXG4gIC8vIGkuZS4gbG9vayBhdCBgeGAgcmF0aGVyIHRoYW4gYHlgLlxyXG4gIHJldHVybiB4LmlzbmVnKCkgJiYgIXguaXNaZXJvKCkgPyAnLScgKyBzdHIgOiBzdHI7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIGEgbmV3IERlY2ltYWwgd2hvc2UgdmFsdWUgaXMgdGhlIHZhbHVlIG9mIHRoaXMgRGVjaW1hbCByb3VuZGVkIHRvIGEgd2hvbGUgbnVtYmVyIHVzaW5nXHJcbiAqIHJvdW5kaW5nIG1vZGUgYHJvdW5kaW5nYC5cclxuICpcclxuICovXHJcblAudG9JbnRlZ2VyID0gUC50b2ludCA9IGZ1bmN0aW9uICgpIHtcclxuICB2YXIgeCA9IHRoaXMsXHJcbiAgICBDdG9yID0geC5jb25zdHJ1Y3RvcjtcclxuICByZXR1cm4gcm91bmQobmV3IEN0b3IoeCksIGdldEJhc2UxMEV4cG9uZW50KHgpICsgMSwgQ3Rvci5yb3VuZGluZyk7XHJcbn07XHJcblxyXG5cclxuLypcclxuICogUmV0dXJuIHRoZSB2YWx1ZSBvZiB0aGlzIERlY2ltYWwgY29udmVydGVkIHRvIGEgbnVtYmVyIHByaW1pdGl2ZS5cclxuICpcclxuICovXHJcblAudG9OdW1iZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuICt0aGlzO1xyXG59O1xyXG5cclxuXHJcbi8qXHJcbiAqIFJldHVybiBhIG5ldyBEZWNpbWFsIHdob3NlIHZhbHVlIGlzIHRoZSB2YWx1ZSBvZiB0aGlzIERlY2ltYWwgcmFpc2VkIHRvIHRoZSBwb3dlciBgeWAsXHJcbiAqIHRydW5jYXRlZCB0byBgcHJlY2lzaW9uYCBzaWduaWZpY2FudCBkaWdpdHMuXHJcbiAqXHJcbiAqIEZvciBub24taW50ZWdlciBvciB2ZXJ5IGxhcmdlIGV4cG9uZW50cyBwb3coeCwgeSkgaXMgY2FsY3VsYXRlZCB1c2luZ1xyXG4gKlxyXG4gKiAgIHheeSA9IGV4cCh5KmxuKHgpKVxyXG4gKlxyXG4gKiBUaGUgbWF4aW11bSBlcnJvciBpcyAxIHVscCAodW5pdCBpbiBsYXN0IHBsYWNlKS5cclxuICpcclxuICogeSB7bnVtYmVyfHN0cmluZ3xEZWNpbWFsfSBUaGUgcG93ZXIgdG8gd2hpY2ggdG8gcmFpc2UgdGhpcyBEZWNpbWFsLlxyXG4gKlxyXG4gKi9cclxuUC50b1Bvd2VyID0gUC5wb3cgPSBmdW5jdGlvbiAoeSkge1xyXG4gIHZhciBlLCBrLCBwciwgciwgc2lnbiwgeUlzSW50LFxyXG4gICAgeCA9IHRoaXMsXHJcbiAgICBDdG9yID0geC5jb25zdHJ1Y3RvcixcclxuICAgIGd1YXJkID0gMTIsXHJcbiAgICB5biA9ICsoeSA9IG5ldyBDdG9yKHkpKTtcclxuXHJcbiAgLy8gcG93KHgsIDApID0gMVxyXG4gIGlmICgheS5zKSByZXR1cm4gbmV3IEN0b3IoT05FKTtcclxuXHJcbiAgeCA9IG5ldyBDdG9yKHgpO1xyXG5cclxuICAvLyBwb3coMCwgeSA+IDApID0gMFxyXG4gIC8vIHBvdygwLCB5IDwgMCkgPSBJbmZpbml0eVxyXG4gIGlmICgheC5zKSB7XHJcbiAgICBpZiAoeS5zIDwgMSkgdGhyb3cgRXJyb3IoZGVjaW1hbEVycm9yICsgJ0luZmluaXR5Jyk7XHJcbiAgICByZXR1cm4geDtcclxuICB9XHJcblxyXG4gIC8vIHBvdygxLCB5KSA9IDFcclxuICBpZiAoeC5lcShPTkUpKSByZXR1cm4geDtcclxuXHJcbiAgcHIgPSBDdG9yLnByZWNpc2lvbjtcclxuXHJcbiAgLy8gcG93KHgsIDEpID0geFxyXG4gIGlmICh5LmVxKE9ORSkpIHJldHVybiByb3VuZCh4LCBwcik7XHJcblxyXG4gIGUgPSB5LmU7XHJcbiAgayA9IHkuZC5sZW5ndGggLSAxO1xyXG4gIHlJc0ludCA9IGUgPj0gaztcclxuICBzaWduID0geC5zO1xyXG5cclxuICBpZiAoIXlJc0ludCkge1xyXG5cclxuICAgIC8vIHBvdyh4IDwgMCwgeSBub24taW50ZWdlcikgPSBOYU5cclxuICAgIGlmIChzaWduIDwgMCkgdGhyb3cgRXJyb3IoZGVjaW1hbEVycm9yICsgJ05hTicpO1xyXG5cclxuICAvLyBJZiB5IGlzIGEgc21hbGwgaW50ZWdlciB1c2UgdGhlICdleHBvbmVudGlhdGlvbiBieSBzcXVhcmluZycgYWxnb3JpdGhtLlxyXG4gIH0gZWxzZSBpZiAoKGsgPSB5biA8IDAgPyAteW4gOiB5bikgPD0gTUFYX1NBRkVfSU5URUdFUikge1xyXG4gICAgciA9IG5ldyBDdG9yKE9ORSk7XHJcblxyXG4gICAgLy8gTWF4IGsgb2YgOTAwNzE5OTI1NDc0MDk5MSB0YWtlcyA1MyBsb29wIGl0ZXJhdGlvbnMuXHJcbiAgICAvLyBNYXhpbXVtIGRpZ2l0cyBhcnJheSBsZW5ndGg7IGxlYXZlcyBbMjgsIDM0XSBndWFyZCBkaWdpdHMuXHJcbiAgICBlID0gTWF0aC5jZWlsKHByIC8gTE9HX0JBU0UgKyA0KTtcclxuXHJcbiAgICBleHRlcm5hbCA9IGZhbHNlO1xyXG5cclxuICAgIGZvciAoOzspIHtcclxuICAgICAgaWYgKGsgJSAyKSB7XHJcbiAgICAgICAgciA9IHIudGltZXMoeCk7XHJcbiAgICAgICAgdHJ1bmNhdGUoci5kLCBlKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgayA9IG1hdGhmbG9vcihrIC8gMik7XHJcbiAgICAgIGlmIChrID09PSAwKSBicmVhaztcclxuXHJcbiAgICAgIHggPSB4LnRpbWVzKHgpO1xyXG4gICAgICB0cnVuY2F0ZSh4LmQsIGUpO1xyXG4gICAgfVxyXG5cclxuICAgIGV4dGVybmFsID0gdHJ1ZTtcclxuXHJcbiAgICByZXR1cm4geS5zIDwgMCA/IG5ldyBDdG9yKE9ORSkuZGl2KHIpIDogcm91bmQociwgcHIpO1xyXG4gIH1cclxuXHJcbiAgLy8gUmVzdWx0IGlzIG5lZ2F0aXZlIGlmIHggaXMgbmVnYXRpdmUgYW5kIHRoZSBsYXN0IGRpZ2l0IG9mIGludGVnZXIgeSBpcyBvZGQuXHJcbiAgc2lnbiA9IHNpZ24gPCAwICYmIHkuZFtNYXRoLm1heChlLCBrKV0gJiAxID8gLTEgOiAxO1xyXG5cclxuICB4LnMgPSAxO1xyXG4gIGV4dGVybmFsID0gZmFsc2U7XHJcbiAgciA9IHkudGltZXMobG4oeCwgcHIgKyBndWFyZCkpO1xyXG4gIGV4dGVybmFsID0gdHJ1ZTtcclxuICByID0gZXhwKHIpO1xyXG4gIHIucyA9IHNpZ247XHJcblxyXG4gIHJldHVybiByO1xyXG59O1xyXG5cclxuXHJcbi8qXHJcbiAqIFJldHVybiBhIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHZhbHVlIG9mIHRoaXMgRGVjaW1hbCByb3VuZGVkIHRvIGBzZGAgc2lnbmlmaWNhbnQgZGlnaXRzXHJcbiAqIHVzaW5nIHJvdW5kaW5nIG1vZGUgYHJvdW5kaW5nYC5cclxuICpcclxuICogUmV0dXJuIGV4cG9uZW50aWFsIG5vdGF0aW9uIGlmIGBzZGAgaXMgbGVzcyB0aGFuIHRoZSBudW1iZXIgb2YgZGlnaXRzIG5lY2Vzc2FyeSB0byByZXByZXNlbnRcclxuICogdGhlIGludGVnZXIgcGFydCBvZiB0aGUgdmFsdWUgaW4gbm9ybWFsIG5vdGF0aW9uLlxyXG4gKlxyXG4gKiBbc2RdIHtudW1iZXJ9IFNpZ25pZmljYW50IGRpZ2l0cy4gSW50ZWdlciwgMSB0byBNQVhfRElHSVRTIGluY2x1c2l2ZS5cclxuICogW3JtXSB7bnVtYmVyfSBSb3VuZGluZyBtb2RlLiBJbnRlZ2VyLCAwIHRvIDggaW5jbHVzaXZlLlxyXG4gKlxyXG4gKi9cclxuUC50b1ByZWNpc2lvbiA9IGZ1bmN0aW9uIChzZCwgcm0pIHtcclxuICB2YXIgZSwgc3RyLFxyXG4gICAgeCA9IHRoaXMsXHJcbiAgICBDdG9yID0geC5jb25zdHJ1Y3RvcjtcclxuXHJcbiAgaWYgKHNkID09PSB2b2lkIDApIHtcclxuICAgIGUgPSBnZXRCYXNlMTBFeHBvbmVudCh4KTtcclxuICAgIHN0ciA9IHRvU3RyaW5nKHgsIGUgPD0gQ3Rvci50b0V4cE5lZyB8fCBlID49IEN0b3IudG9FeHBQb3MpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjaGVja0ludDMyKHNkLCAxLCBNQVhfRElHSVRTKTtcclxuXHJcbiAgICBpZiAocm0gPT09IHZvaWQgMCkgcm0gPSBDdG9yLnJvdW5kaW5nO1xyXG4gICAgZWxzZSBjaGVja0ludDMyKHJtLCAwLCA4KTtcclxuXHJcbiAgICB4ID0gcm91bmQobmV3IEN0b3IoeCksIHNkLCBybSk7XHJcbiAgICBlID0gZ2V0QmFzZTEwRXhwb25lbnQoeCk7XHJcbiAgICBzdHIgPSB0b1N0cmluZyh4LCBzZCA8PSBlIHx8IGUgPD0gQ3Rvci50b0V4cE5lZywgc2QpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHN0cjtcclxufTtcclxuXHJcblxyXG4vKlxyXG4gKiBSZXR1cm4gYSBuZXcgRGVjaW1hbCB3aG9zZSB2YWx1ZSBpcyB0aGUgdmFsdWUgb2YgdGhpcyBEZWNpbWFsIHJvdW5kZWQgdG8gYSBtYXhpbXVtIG9mIGBzZGBcclxuICogc2lnbmlmaWNhbnQgZGlnaXRzIHVzaW5nIHJvdW5kaW5nIG1vZGUgYHJtYCwgb3IgdG8gYHByZWNpc2lvbmAgYW5kIGByb3VuZGluZ2AgcmVzcGVjdGl2ZWx5IGlmXHJcbiAqIG9taXR0ZWQuXHJcbiAqXHJcbiAqIFtzZF0ge251bWJlcn0gU2lnbmlmaWNhbnQgZGlnaXRzLiBJbnRlZ2VyLCAxIHRvIE1BWF9ESUdJVFMgaW5jbHVzaXZlLlxyXG4gKiBbcm1dIHtudW1iZXJ9IFJvdW5kaW5nIG1vZGUuIEludGVnZXIsIDAgdG8gOCBpbmNsdXNpdmUuXHJcbiAqXHJcbiAqL1xyXG5QLnRvU2lnbmlmaWNhbnREaWdpdHMgPSBQLnRvc2QgPSBmdW5jdGlvbiAoc2QsIHJtKSB7XHJcbiAgdmFyIHggPSB0aGlzLFxyXG4gICAgQ3RvciA9IHguY29uc3RydWN0b3I7XHJcblxyXG4gIGlmIChzZCA9PT0gdm9pZCAwKSB7XHJcbiAgICBzZCA9IEN0b3IucHJlY2lzaW9uO1xyXG4gICAgcm0gPSBDdG9yLnJvdW5kaW5nO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjaGVja0ludDMyKHNkLCAxLCBNQVhfRElHSVRTKTtcclxuXHJcbiAgICBpZiAocm0gPT09IHZvaWQgMCkgcm0gPSBDdG9yLnJvdW5kaW5nO1xyXG4gICAgZWxzZSBjaGVja0ludDMyKHJtLCAwLCA4KTtcclxuICB9XHJcblxyXG4gIHJldHVybiByb3VuZChuZXcgQ3Rvcih4KSwgc2QsIHJtKTtcclxufTtcclxuXHJcblxyXG4vKlxyXG4gKiBSZXR1cm4gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB2YWx1ZSBvZiB0aGlzIERlY2ltYWwuXHJcbiAqXHJcbiAqIFJldHVybiBleHBvbmVudGlhbCBub3RhdGlvbiBpZiB0aGlzIERlY2ltYWwgaGFzIGEgcG9zaXRpdmUgZXhwb25lbnQgZXF1YWwgdG8gb3IgZ3JlYXRlciB0aGFuXHJcbiAqIGB0b0V4cFBvc2AsIG9yIGEgbmVnYXRpdmUgZXhwb25lbnQgZXF1YWwgdG8gb3IgbGVzcyB0aGFuIGB0b0V4cE5lZ2AuXHJcbiAqXHJcbiAqL1xyXG5QLnRvU3RyaW5nID0gUC52YWx1ZU9mID0gUC52YWwgPSBQLnRvSlNPTiA9IFBbU3ltYm9sLmZvcignbm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b20nKV0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIHggPSB0aGlzLFxyXG4gICAgZSA9IGdldEJhc2UxMEV4cG9uZW50KHgpLFxyXG4gICAgQ3RvciA9IHguY29uc3RydWN0b3I7XHJcblxyXG4gIHJldHVybiB0b1N0cmluZyh4LCBlIDw9IEN0b3IudG9FeHBOZWcgfHwgZSA+PSBDdG9yLnRvRXhwUG9zKTtcclxufTtcclxuXHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb25zIGZvciBEZWNpbWFsLnByb3RvdHlwZSAoUCkgYW5kL29yIERlY2ltYWwgbWV0aG9kcywgYW5kIHRoZWlyIGNhbGxlcnMuXHJcblxyXG5cclxuLypcclxuICogIGFkZCAgICAgICAgICAgICAgICAgUC5taW51cywgUC5wbHVzXHJcbiAqICBjaGVja0ludDMyICAgICAgICAgIFAudG9kcCwgUC50b0V4cG9uZW50aWFsLCBQLnRvRml4ZWQsIFAudG9QcmVjaXNpb24sIFAudG9zZFxyXG4gKiAgZGlnaXRzVG9TdHJpbmcgICAgICBQLmxvZywgUC5zcXJ0LCBQLnBvdywgdG9TdHJpbmcsIGV4cCwgbG5cclxuICogIGRpdmlkZSAgICAgICAgICAgICAgUC5kaXYsIFAuaWRpdiwgUC5sb2csIFAubW9kLCBQLnNxcnQsIGV4cCwgbG5cclxuICogIGV4cCAgICAgICAgICAgICAgICAgUC5leHAsIFAucG93XHJcbiAqICBnZXRCYXNlMTBFeHBvbmVudCAgIFAuZXhwb25lbnQsIFAuc2QsIFAudG9pbnQsIFAuc3FydCwgUC50b2RwLCBQLnRvRml4ZWQsIFAudG9QcmVjaXNpb24sXHJcbiAqICAgICAgICAgICAgICAgICAgICAgIFAudG9TdHJpbmcsIGRpdmlkZSwgcm91bmQsIHRvU3RyaW5nLCBleHAsIGxuXHJcbiAqICBnZXRMbjEwICAgICAgICAgICAgIFAubG9nLCBsblxyXG4gKiAgZ2V0WmVyb1N0cmluZyAgICAgICBkaWdpdHNUb1N0cmluZywgdG9TdHJpbmdcclxuICogIGxuICAgICAgICAgICAgICAgICAgUC5sb2csIFAubG4sIFAucG93LCBleHBcclxuICogIHBhcnNlRGVjaW1hbCAgICAgICAgRGVjaW1hbFxyXG4gKiAgcm91bmQgICAgICAgICAgICAgICBQLmFicywgUC5pZGl2LCBQLmxvZywgUC5taW51cywgUC5tb2QsIFAubmVnLCBQLnBsdXMsIFAudG9pbnQsIFAuc3FydCxcclxuICogICAgICAgICAgICAgICAgICAgICAgUC50aW1lcywgUC50b2RwLCBQLnRvRXhwb25lbnRpYWwsIFAudG9GaXhlZCwgUC5wb3csIFAudG9QcmVjaXNpb24sIFAudG9zZCxcclxuICogICAgICAgICAgICAgICAgICAgICAgZGl2aWRlLCBnZXRMbjEwLCBleHAsIGxuXHJcbiAqICBzdWJ0cmFjdCAgICAgICAgICAgIFAubWludXMsIFAucGx1c1xyXG4gKiAgdG9TdHJpbmcgICAgICAgICAgICBQLnRvRXhwb25lbnRpYWwsIFAudG9GaXhlZCwgUC50b1ByZWNpc2lvbiwgUC50b1N0cmluZywgUC52YWx1ZU9mXHJcbiAqICB0cnVuY2F0ZSAgICAgICAgICAgIFAucG93XHJcbiAqXHJcbiAqICBUaHJvd3M6ICAgICAgICAgICAgIFAubG9nLCBQLm1vZCwgUC5zZCwgUC5zcXJ0LCBQLnBvdywgIGNoZWNrSW50MzIsIGRpdmlkZSwgcm91bmQsXHJcbiAqICAgICAgICAgICAgICAgICAgICAgIGdldExuMTAsIGV4cCwgbG4sIHBhcnNlRGVjaW1hbCwgRGVjaW1hbCwgY29uZmlnXHJcbiAqL1xyXG5cclxuXHJcbmZ1bmN0aW9uIGFkZCh4LCB5KSB7XHJcbiAgdmFyIGNhcnJ5LCBkLCBlLCBpLCBrLCBsZW4sIHhkLCB5ZCxcclxuICAgIEN0b3IgPSB4LmNvbnN0cnVjdG9yLFxyXG4gICAgcHIgPSBDdG9yLnByZWNpc2lvbjtcclxuXHJcbiAgLy8gSWYgZWl0aGVyIGlzIHplcm8uLi5cclxuICBpZiAoIXgucyB8fCAheS5zKSB7XHJcblxyXG4gICAgLy8gUmV0dXJuIHggaWYgeSBpcyB6ZXJvLlxyXG4gICAgLy8gUmV0dXJuIHkgaWYgeSBpcyBub24temVyby5cclxuICAgIGlmICgheS5zKSB5ID0gbmV3IEN0b3IoeCk7XHJcbiAgICByZXR1cm4gZXh0ZXJuYWwgPyByb3VuZCh5LCBwcikgOiB5O1xyXG4gIH1cclxuXHJcbiAgeGQgPSB4LmQ7XHJcbiAgeWQgPSB5LmQ7XHJcblxyXG4gIC8vIHggYW5kIHkgYXJlIGZpbml0ZSwgbm9uLXplcm8gbnVtYmVycyB3aXRoIHRoZSBzYW1lIHNpZ24uXHJcblxyXG4gIGsgPSB4LmU7XHJcbiAgZSA9IHkuZTtcclxuICB4ZCA9IHhkLnNsaWNlKCk7XHJcbiAgaSA9IGsgLSBlO1xyXG5cclxuICAvLyBJZiBiYXNlIDFlNyBleHBvbmVudHMgZGlmZmVyLi4uXHJcbiAgaWYgKGkpIHtcclxuICAgIGlmIChpIDwgMCkge1xyXG4gICAgICBkID0geGQ7XHJcbiAgICAgIGkgPSAtaTtcclxuICAgICAgbGVuID0geWQubGVuZ3RoO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZCA9IHlkO1xyXG4gICAgICBlID0gaztcclxuICAgICAgbGVuID0geGQubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIExpbWl0IG51bWJlciBvZiB6ZXJvcyBwcmVwZW5kZWQgdG8gbWF4KGNlaWwocHIgLyBMT0dfQkFTRSksIGxlbikgKyAxLlxyXG4gICAgayA9IE1hdGguY2VpbChwciAvIExPR19CQVNFKTtcclxuICAgIGxlbiA9IGsgPiBsZW4gPyBrICsgMSA6IGxlbiArIDE7XHJcblxyXG4gICAgaWYgKGkgPiBsZW4pIHtcclxuICAgICAgaSA9IGxlbjtcclxuICAgICAgZC5sZW5ndGggPSAxO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFByZXBlbmQgemVyb3MgdG8gZXF1YWxpc2UgZXhwb25lbnRzLiBOb3RlOiBGYXN0ZXIgdG8gdXNlIHJldmVyc2UgdGhlbiBkbyB1bnNoaWZ0cy5cclxuICAgIGQucmV2ZXJzZSgpO1xyXG4gICAgZm9yICg7IGktLTspIGQucHVzaCgwKTtcclxuICAgIGQucmV2ZXJzZSgpO1xyXG4gIH1cclxuXHJcbiAgbGVuID0geGQubGVuZ3RoO1xyXG4gIGkgPSB5ZC5sZW5ndGg7XHJcblxyXG4gIC8vIElmIHlkIGlzIGxvbmdlciB0aGFuIHhkLCBzd2FwIHhkIGFuZCB5ZCBzbyB4ZCBwb2ludHMgdG8gdGhlIGxvbmdlciBhcnJheS5cclxuICBpZiAobGVuIC0gaSA8IDApIHtcclxuICAgIGkgPSBsZW47XHJcbiAgICBkID0geWQ7XHJcbiAgICB5ZCA9IHhkO1xyXG4gICAgeGQgPSBkO1xyXG4gIH1cclxuXHJcbiAgLy8gT25seSBzdGFydCBhZGRpbmcgYXQgeWQubGVuZ3RoIC0gMSBhcyB0aGUgZnVydGhlciBkaWdpdHMgb2YgeGQgY2FuIGJlIGxlZnQgYXMgdGhleSBhcmUuXHJcbiAgZm9yIChjYXJyeSA9IDA7IGk7KSB7XHJcbiAgICBjYXJyeSA9ICh4ZFstLWldID0geGRbaV0gKyB5ZFtpXSArIGNhcnJ5KSAvIEJBU0UgfCAwO1xyXG4gICAgeGRbaV0gJT0gQkFTRTtcclxuICB9XHJcblxyXG4gIGlmIChjYXJyeSkge1xyXG4gICAgeGQudW5zaGlmdChjYXJyeSk7XHJcbiAgICArK2U7XHJcbiAgfVxyXG5cclxuICAvLyBSZW1vdmUgdHJhaWxpbmcgemVyb3MuXHJcbiAgLy8gTm8gbmVlZCB0byBjaGVjayBmb3IgemVybywgYXMgK3ggKyAreSAhPSAwICYmIC14ICsgLXkgIT0gMFxyXG4gIGZvciAobGVuID0geGQubGVuZ3RoOyB4ZFstLWxlbl0gPT0gMDspIHhkLnBvcCgpO1xyXG5cclxuICB5LmQgPSB4ZDtcclxuICB5LmUgPSBlO1xyXG5cclxuICByZXR1cm4gZXh0ZXJuYWwgPyByb3VuZCh5LCBwcikgOiB5O1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gY2hlY2tJbnQzMihpLCBtaW4sIG1heCkge1xyXG4gIGlmIChpICE9PSB+fmkgfHwgaSA8IG1pbiB8fCBpID4gbWF4KSB7XHJcbiAgICB0aHJvdyBFcnJvcihpbnZhbGlkQXJndW1lbnQgKyBpKTtcclxuICB9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBkaWdpdHNUb1N0cmluZyhkKSB7XHJcbiAgdmFyIGksIGssIHdzLFxyXG4gICAgaW5kZXhPZkxhc3RXb3JkID0gZC5sZW5ndGggLSAxLFxyXG4gICAgc3RyID0gJycsXHJcbiAgICB3ID0gZFswXTtcclxuXHJcbiAgaWYgKGluZGV4T2ZMYXN0V29yZCA+IDApIHtcclxuICAgIHN0ciArPSB3O1xyXG4gICAgZm9yIChpID0gMTsgaSA8IGluZGV4T2ZMYXN0V29yZDsgaSsrKSB7XHJcbiAgICAgIHdzID0gZFtpXSArICcnO1xyXG4gICAgICBrID0gTE9HX0JBU0UgLSB3cy5sZW5ndGg7XHJcbiAgICAgIGlmIChrKSBzdHIgKz0gZ2V0WmVyb1N0cmluZyhrKTtcclxuICAgICAgc3RyICs9IHdzO1xyXG4gICAgfVxyXG5cclxuICAgIHcgPSBkW2ldO1xyXG4gICAgd3MgPSB3ICsgJyc7XHJcbiAgICBrID0gTE9HX0JBU0UgLSB3cy5sZW5ndGg7XHJcbiAgICBpZiAoaykgc3RyICs9IGdldFplcm9TdHJpbmcoayk7XHJcbiAgfSBlbHNlIGlmICh3ID09PSAwKSB7XHJcbiAgICByZXR1cm4gJzAnO1xyXG4gIH1cclxuXHJcbiAgLy8gUmVtb3ZlIHRyYWlsaW5nIHplcm9zIG9mIGxhc3Qgdy5cclxuICBmb3IgKDsgdyAlIDEwID09PSAwOykgdyAvPSAxMDtcclxuXHJcbiAgcmV0dXJuIHN0ciArIHc7XHJcbn1cclxuXHJcblxyXG52YXIgZGl2aWRlID0gKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgLy8gQXNzdW1lcyBub24temVybyB4IGFuZCBrLCBhbmQgaGVuY2Ugbm9uLXplcm8gcmVzdWx0LlxyXG4gIGZ1bmN0aW9uIG11bHRpcGx5SW50ZWdlcih4LCBrKSB7XHJcbiAgICB2YXIgdGVtcCxcclxuICAgICAgY2FycnkgPSAwLFxyXG4gICAgICBpID0geC5sZW5ndGg7XHJcblxyXG4gICAgZm9yICh4ID0geC5zbGljZSgpOyBpLS07KSB7XHJcbiAgICAgIHRlbXAgPSB4W2ldICogayArIGNhcnJ5O1xyXG4gICAgICB4W2ldID0gdGVtcCAlIEJBU0UgfCAwO1xyXG4gICAgICBjYXJyeSA9IHRlbXAgLyBCQVNFIHwgMDtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY2FycnkpIHgudW5zaGlmdChjYXJyeSk7XHJcblxyXG4gICAgcmV0dXJuIHg7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjb21wYXJlKGEsIGIsIGFMLCBiTCkge1xyXG4gICAgdmFyIGksIHI7XHJcblxyXG4gICAgaWYgKGFMICE9IGJMKSB7XHJcbiAgICAgIHIgPSBhTCA+IGJMID8gMSA6IC0xO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZm9yIChpID0gciA9IDA7IGkgPCBhTDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGFbaV0gIT0gYltpXSkge1xyXG4gICAgICAgICAgciA9IGFbaV0gPiBiW2ldID8gMSA6IC0xO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHI7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzdWJ0cmFjdChhLCBiLCBhTCkge1xyXG4gICAgdmFyIGkgPSAwO1xyXG5cclxuICAgIC8vIFN1YnRyYWN0IGIgZnJvbSBhLlxyXG4gICAgZm9yICg7IGFMLS07KSB7XHJcbiAgICAgIGFbYUxdIC09IGk7XHJcbiAgICAgIGkgPSBhW2FMXSA8IGJbYUxdID8gMSA6IDA7XHJcbiAgICAgIGFbYUxdID0gaSAqIEJBU0UgKyBhW2FMXSAtIGJbYUxdO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJlbW92ZSBsZWFkaW5nIHplcm9zLlxyXG4gICAgZm9yICg7ICFhWzBdICYmIGEubGVuZ3RoID4gMTspIGEuc2hpZnQoKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBmdW5jdGlvbiAoeCwgeSwgcHIsIGRwKSB7XHJcbiAgICB2YXIgY21wLCBlLCBpLCBrLCBwcm9kLCBwcm9kTCwgcSwgcWQsIHJlbSwgcmVtTCwgcmVtMCwgc2QsIHQsIHhpLCB4TCwgeWQwLCB5TCwgeXosXHJcbiAgICAgIEN0b3IgPSB4LmNvbnN0cnVjdG9yLFxyXG4gICAgICBzaWduID0geC5zID09IHkucyA/IDEgOiAtMSxcclxuICAgICAgeGQgPSB4LmQsXHJcbiAgICAgIHlkID0geS5kO1xyXG5cclxuICAgIC8vIEVpdGhlciAwP1xyXG4gICAgaWYgKCF4LnMpIHJldHVybiBuZXcgQ3Rvcih4KTtcclxuICAgIGlmICgheS5zKSB0aHJvdyBFcnJvcihkZWNpbWFsRXJyb3IgKyAnRGl2aXNpb24gYnkgemVybycpO1xyXG5cclxuICAgIGUgPSB4LmUgLSB5LmU7XHJcbiAgICB5TCA9IHlkLmxlbmd0aDtcclxuICAgIHhMID0geGQubGVuZ3RoO1xyXG4gICAgcSA9IG5ldyBDdG9yKHNpZ24pO1xyXG4gICAgcWQgPSBxLmQgPSBbXTtcclxuXHJcbiAgICAvLyBSZXN1bHQgZXhwb25lbnQgbWF5IGJlIG9uZSBsZXNzIHRoYW4gZS5cclxuICAgIGZvciAoaSA9IDA7IHlkW2ldID09ICh4ZFtpXSB8fCAwKTsgKSArK2k7XHJcbiAgICBpZiAoeWRbaV0gPiAoeGRbaV0gfHwgMCkpIC0tZTtcclxuXHJcbiAgICBpZiAocHIgPT0gbnVsbCkge1xyXG4gICAgICBzZCA9IHByID0gQ3Rvci5wcmVjaXNpb247XHJcbiAgICB9IGVsc2UgaWYgKGRwKSB7XHJcbiAgICAgIHNkID0gcHIgKyAoZ2V0QmFzZTEwRXhwb25lbnQoeCkgLSBnZXRCYXNlMTBFeHBvbmVudCh5KSkgKyAxO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2QgPSBwcjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoc2QgPCAwKSByZXR1cm4gbmV3IEN0b3IoMCk7XHJcblxyXG4gICAgLy8gQ29udmVydCBwcmVjaXNpb24gaW4gbnVtYmVyIG9mIGJhc2UgMTAgZGlnaXRzIHRvIGJhc2UgMWU3IGRpZ2l0cy5cclxuICAgIHNkID0gc2QgLyBMT0dfQkFTRSArIDIgfCAwO1xyXG4gICAgaSA9IDA7XHJcblxyXG4gICAgLy8gZGl2aXNvciA8IDFlN1xyXG4gICAgaWYgKHlMID09IDEpIHtcclxuICAgICAgayA9IDA7XHJcbiAgICAgIHlkID0geWRbMF07XHJcbiAgICAgIHNkKys7XHJcblxyXG4gICAgICAvLyBrIGlzIHRoZSBjYXJyeS5cclxuICAgICAgZm9yICg7IChpIDwgeEwgfHwgaykgJiYgc2QtLTsgaSsrKSB7XHJcbiAgICAgICAgdCA9IGsgKiBCQVNFICsgKHhkW2ldIHx8IDApO1xyXG4gICAgICAgIHFkW2ldID0gdCAvIHlkIHwgMDtcclxuICAgICAgICBrID0gdCAlIHlkIHwgMDtcclxuICAgICAgfVxyXG5cclxuICAgIC8vIGRpdmlzb3IgPj0gMWU3XHJcbiAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgLy8gTm9ybWFsaXNlIHhkIGFuZCB5ZCBzbyBoaWdoZXN0IG9yZGVyIGRpZ2l0IG9mIHlkIGlzID49IEJBU0UvMlxyXG4gICAgICBrID0gQkFTRSAvICh5ZFswXSArIDEpIHwgMDtcclxuXHJcbiAgICAgIGlmIChrID4gMSkge1xyXG4gICAgICAgIHlkID0gbXVsdGlwbHlJbnRlZ2VyKHlkLCBrKTtcclxuICAgICAgICB4ZCA9IG11bHRpcGx5SW50ZWdlcih4ZCwgayk7XHJcbiAgICAgICAgeUwgPSB5ZC5sZW5ndGg7XHJcbiAgICAgICAgeEwgPSB4ZC5sZW5ndGg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHhpID0geUw7XHJcbiAgICAgIHJlbSA9IHhkLnNsaWNlKDAsIHlMKTtcclxuICAgICAgcmVtTCA9IHJlbS5sZW5ndGg7XHJcblxyXG4gICAgICAvLyBBZGQgemVyb3MgdG8gbWFrZSByZW1haW5kZXIgYXMgbG9uZyBhcyBkaXZpc29yLlxyXG4gICAgICBmb3IgKDsgcmVtTCA8IHlMOykgcmVtW3JlbUwrK10gPSAwO1xyXG5cclxuICAgICAgeXogPSB5ZC5zbGljZSgpO1xyXG4gICAgICB5ei51bnNoaWZ0KDApO1xyXG4gICAgICB5ZDAgPSB5ZFswXTtcclxuXHJcbiAgICAgIGlmICh5ZFsxXSA+PSBCQVNFIC8gMikgKyt5ZDA7XHJcblxyXG4gICAgICBkbyB7XHJcbiAgICAgICAgayA9IDA7XHJcblxyXG4gICAgICAgIC8vIENvbXBhcmUgZGl2aXNvciBhbmQgcmVtYWluZGVyLlxyXG4gICAgICAgIGNtcCA9IGNvbXBhcmUoeWQsIHJlbSwgeUwsIHJlbUwpO1xyXG5cclxuICAgICAgICAvLyBJZiBkaXZpc29yIDwgcmVtYWluZGVyLlxyXG4gICAgICAgIGlmIChjbXAgPCAwKSB7XHJcblxyXG4gICAgICAgICAgLy8gQ2FsY3VsYXRlIHRyaWFsIGRpZ2l0LCBrLlxyXG4gICAgICAgICAgcmVtMCA9IHJlbVswXTtcclxuICAgICAgICAgIGlmICh5TCAhPSByZW1MKSByZW0wID0gcmVtMCAqIEJBU0UgKyAocmVtWzFdIHx8IDApO1xyXG5cclxuICAgICAgICAgIC8vIGsgd2lsbCBiZSBob3cgbWFueSB0aW1lcyB0aGUgZGl2aXNvciBnb2VzIGludG8gdGhlIGN1cnJlbnQgcmVtYWluZGVyLlxyXG4gICAgICAgICAgayA9IHJlbTAgLyB5ZDAgfCAwO1xyXG5cclxuICAgICAgICAgIC8vICBBbGdvcml0aG06XHJcbiAgICAgICAgICAvLyAgMS4gcHJvZHVjdCA9IGRpdmlzb3IgKiB0cmlhbCBkaWdpdCAoaylcclxuICAgICAgICAgIC8vICAyLiBpZiBwcm9kdWN0ID4gcmVtYWluZGVyOiBwcm9kdWN0IC09IGRpdmlzb3IsIGstLVxyXG4gICAgICAgICAgLy8gIDMuIHJlbWFpbmRlciAtPSBwcm9kdWN0XHJcbiAgICAgICAgICAvLyAgNC4gaWYgcHJvZHVjdCB3YXMgPCByZW1haW5kZXIgYXQgMjpcclxuICAgICAgICAgIC8vICAgIDUuIGNvbXBhcmUgbmV3IHJlbWFpbmRlciBhbmQgZGl2aXNvclxyXG4gICAgICAgICAgLy8gICAgNi4gSWYgcmVtYWluZGVyID4gZGl2aXNvcjogcmVtYWluZGVyIC09IGRpdmlzb3IsIGsrK1xyXG5cclxuICAgICAgICAgIGlmIChrID4gMSkge1xyXG4gICAgICAgICAgICBpZiAoayA+PSBCQVNFKSBrID0gQkFTRSAtIDE7XHJcblxyXG4gICAgICAgICAgICAvLyBwcm9kdWN0ID0gZGl2aXNvciAqIHRyaWFsIGRpZ2l0LlxyXG4gICAgICAgICAgICBwcm9kID0gbXVsdGlwbHlJbnRlZ2VyKHlkLCBrKTtcclxuICAgICAgICAgICAgcHJvZEwgPSBwcm9kLmxlbmd0aDtcclxuICAgICAgICAgICAgcmVtTCA9IHJlbS5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICAvLyBDb21wYXJlIHByb2R1Y3QgYW5kIHJlbWFpbmRlci5cclxuICAgICAgICAgICAgY21wID0gY29tcGFyZShwcm9kLCByZW0sIHByb2RMLCByZW1MKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHByb2R1Y3QgPiByZW1haW5kZXIuXHJcbiAgICAgICAgICAgIGlmIChjbXAgPT0gMSkge1xyXG4gICAgICAgICAgICAgIGstLTtcclxuXHJcbiAgICAgICAgICAgICAgLy8gU3VidHJhY3QgZGl2aXNvciBmcm9tIHByb2R1Y3QuXHJcbiAgICAgICAgICAgICAgc3VidHJhY3QocHJvZCwgeUwgPCBwcm9kTCA/IHl6IDogeWQsIHByb2RMKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIC8vIGNtcCBpcyAtMS5cclxuICAgICAgICAgICAgLy8gSWYgayBpcyAwLCB0aGVyZSBpcyBubyBuZWVkIHRvIGNvbXBhcmUgeWQgYW5kIHJlbSBhZ2FpbiBiZWxvdywgc28gY2hhbmdlIGNtcCB0byAxXHJcbiAgICAgICAgICAgIC8vIHRvIGF2b2lkIGl0LiBJZiBrIGlzIDEgdGhlcmUgaXMgYSBuZWVkIHRvIGNvbXBhcmUgeWQgYW5kIHJlbSBhZ2FpbiBiZWxvdy5cclxuICAgICAgICAgICAgaWYgKGsgPT0gMCkgY21wID0gayA9IDE7XHJcbiAgICAgICAgICAgIHByb2QgPSB5ZC5zbGljZSgpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHByb2RMID0gcHJvZC5sZW5ndGg7XHJcbiAgICAgICAgICBpZiAocHJvZEwgPCByZW1MKSBwcm9kLnVuc2hpZnQoMCk7XHJcblxyXG4gICAgICAgICAgLy8gU3VidHJhY3QgcHJvZHVjdCBmcm9tIHJlbWFpbmRlci5cclxuICAgICAgICAgIHN1YnRyYWN0KHJlbSwgcHJvZCwgcmVtTCk7XHJcblxyXG4gICAgICAgICAgLy8gSWYgcHJvZHVjdCB3YXMgPCBwcmV2aW91cyByZW1haW5kZXIuXHJcbiAgICAgICAgICBpZiAoY21wID09IC0xKSB7XHJcbiAgICAgICAgICAgIHJlbUwgPSByZW0ubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgLy8gQ29tcGFyZSBkaXZpc29yIGFuZCBuZXcgcmVtYWluZGVyLlxyXG4gICAgICAgICAgICBjbXAgPSBjb21wYXJlKHlkLCByZW0sIHlMLCByZW1MKTtcclxuXHJcbiAgICAgICAgICAgIC8vIElmIGRpdmlzb3IgPCBuZXcgcmVtYWluZGVyLCBzdWJ0cmFjdCBkaXZpc29yIGZyb20gcmVtYWluZGVyLlxyXG4gICAgICAgICAgICBpZiAoY21wIDwgMSkge1xyXG4gICAgICAgICAgICAgIGsrKztcclxuXHJcbiAgICAgICAgICAgICAgLy8gU3VidHJhY3QgZGl2aXNvciBmcm9tIHJlbWFpbmRlci5cclxuICAgICAgICAgICAgICBzdWJ0cmFjdChyZW0sIHlMIDwgcmVtTCA/IHl6IDogeWQsIHJlbUwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmVtTCA9IHJlbS5sZW5ndGg7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjbXAgPT09IDApIHtcclxuICAgICAgICAgIGsrKztcclxuICAgICAgICAgIHJlbSA9IFswXTtcclxuICAgICAgICB9ICAgIC8vIGlmIGNtcCA9PT0gMSwgayB3aWxsIGJlIDBcclxuXHJcbiAgICAgICAgLy8gQWRkIHRoZSBuZXh0IGRpZ2l0LCBrLCB0byB0aGUgcmVzdWx0IGFycmF5LlxyXG4gICAgICAgIHFkW2krK10gPSBrO1xyXG5cclxuICAgICAgICAvLyBVcGRhdGUgdGhlIHJlbWFpbmRlci5cclxuICAgICAgICBpZiAoY21wICYmIHJlbVswXSkge1xyXG4gICAgICAgICAgcmVtW3JlbUwrK10gPSB4ZFt4aV0gfHwgMDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmVtID0gW3hkW3hpXV07XHJcbiAgICAgICAgICByZW1MID0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICB9IHdoaWxlICgoeGkrKyA8IHhMIHx8IHJlbVswXSAhPT0gdm9pZCAwKSAmJiBzZC0tKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBMZWFkaW5nIHplcm8/XHJcbiAgICBpZiAoIXFkWzBdKSBxZC5zaGlmdCgpO1xyXG5cclxuICAgIHEuZSA9IGU7XHJcblxyXG4gICAgcmV0dXJuIHJvdW5kKHEsIGRwID8gcHIgKyBnZXRCYXNlMTBFeHBvbmVudChxKSArIDEgOiBwcik7XHJcbiAgfTtcclxufSkoKTtcclxuXHJcblxyXG4vKlxyXG4gKiBSZXR1cm4gYSBuZXcgRGVjaW1hbCB3aG9zZSB2YWx1ZSBpcyB0aGUgbmF0dXJhbCBleHBvbmVudGlhbCBvZiBgeGAgdHJ1bmNhdGVkIHRvIGBzZGBcclxuICogc2lnbmlmaWNhbnQgZGlnaXRzLlxyXG4gKlxyXG4gKiBUYXlsb3IvTWFjbGF1cmluIHNlcmllcy5cclxuICpcclxuICogZXhwKHgpID0geF4wLzAhICsgeF4xLzEhICsgeF4yLzIhICsgeF4zLzMhICsgLi4uXHJcbiAqXHJcbiAqIEFyZ3VtZW50IHJlZHVjdGlvbjpcclxuICogICBSZXBlYXQgeCA9IHggLyAzMiwgayArPSA1LCB1bnRpbCB8eHwgPCAwLjFcclxuICogICBleHAoeCkgPSBleHAoeCAvIDJeayleKDJeaylcclxuICpcclxuICogUHJldmlvdXNseSwgdGhlIGFyZ3VtZW50IHdhcyBpbml0aWFsbHkgcmVkdWNlZCBieVxyXG4gKiBleHAoeCkgPSBleHAocikgKiAxMF5rICB3aGVyZSByID0geCAtIGsgKiBsbjEwLCBrID0gZmxvb3IoeCAvIGxuMTApXHJcbiAqIHRvIGZpcnN0IHB1dCByIGluIHRoZSByYW5nZSBbMCwgbG4xMF0sIGJlZm9yZSBkaXZpZGluZyBieSAzMiB1bnRpbCB8eHwgPCAwLjEsIGJ1dCB0aGlzIHdhc1xyXG4gKiBmb3VuZCB0byBiZSBzbG93ZXIgdGhhbiBqdXN0IGRpdmlkaW5nIHJlcGVhdGVkbHkgYnkgMzIgYXMgYWJvdmUuXHJcbiAqXHJcbiAqIChNYXRoIG9iamVjdCBpbnRlZ2VyIG1pbi9tYXg6IE1hdGguZXhwKDcwOSkgPSA4LjJlKzMwNywgTWF0aC5leHAoLTc0NSkgPSA1ZS0zMjQpXHJcbiAqXHJcbiAqICBleHAoeCkgaXMgbm9uLXRlcm1pbmF0aW5nIGZvciBhbnkgZmluaXRlLCBub24temVybyB4LlxyXG4gKlxyXG4gKi9cclxuZnVuY3Rpb24gZXhwKHgsIHNkKSB7XHJcbiAgdmFyIGRlbm9taW5hdG9yLCBndWFyZCwgcG93LCBzdW0sIHQsIHdwcixcclxuICAgIGkgPSAwLFxyXG4gICAgayA9IDAsXHJcbiAgICBDdG9yID0geC5jb25zdHJ1Y3RvcixcclxuICAgIHByID0gQ3Rvci5wcmVjaXNpb247XHJcblxyXG4gIGlmIChnZXRCYXNlMTBFeHBvbmVudCh4KSA+IDE2KSB0aHJvdyBFcnJvcihleHBvbmVudE91dE9mUmFuZ2UgKyBnZXRCYXNlMTBFeHBvbmVudCh4KSk7XHJcblxyXG4gIC8vIGV4cCgwKSA9IDFcclxuICBpZiAoIXgucykgcmV0dXJuIG5ldyBDdG9yKE9ORSk7XHJcblxyXG4gIGlmIChzZCA9PSBudWxsKSB7XHJcbiAgICBleHRlcm5hbCA9IGZhbHNlO1xyXG4gICAgd3ByID0gcHI7XHJcbiAgfSBlbHNlIHtcclxuICAgIHdwciA9IHNkO1xyXG4gIH1cclxuXHJcbiAgdCA9IG5ldyBDdG9yKDAuMDMxMjUpO1xyXG5cclxuICB3aGlsZSAoeC5hYnMoKS5ndGUoMC4xKSkge1xyXG4gICAgeCA9IHgudGltZXModCk7ICAgIC8vIHggPSB4IC8gMl41XHJcbiAgICBrICs9IDU7XHJcbiAgfVxyXG5cclxuICAvLyBFc3RpbWF0ZSB0aGUgcHJlY2lzaW9uIGluY3JlYXNlIG5lY2Vzc2FyeSB0byBlbnN1cmUgdGhlIGZpcnN0IDQgcm91bmRpbmcgZGlnaXRzIGFyZSBjb3JyZWN0LlxyXG4gIGd1YXJkID0gTWF0aC5sb2cobWF0aHBvdygyLCBrKSkgLyBNYXRoLkxOMTAgKiAyICsgNSB8IDA7XHJcbiAgd3ByICs9IGd1YXJkO1xyXG4gIGRlbm9taW5hdG9yID0gcG93ID0gc3VtID0gbmV3IEN0b3IoT05FKTtcclxuICBDdG9yLnByZWNpc2lvbiA9IHdwcjtcclxuXHJcbiAgZm9yICg7Oykge1xyXG4gICAgcG93ID0gcm91bmQocG93LnRpbWVzKHgpLCB3cHIpO1xyXG4gICAgZGVub21pbmF0b3IgPSBkZW5vbWluYXRvci50aW1lcygrK2kpO1xyXG4gICAgdCA9IHN1bS5wbHVzKGRpdmlkZShwb3csIGRlbm9taW5hdG9yLCB3cHIpKTtcclxuXHJcbiAgICBpZiAoZGlnaXRzVG9TdHJpbmcodC5kKS5zbGljZSgwLCB3cHIpID09PSBkaWdpdHNUb1N0cmluZyhzdW0uZCkuc2xpY2UoMCwgd3ByKSkge1xyXG4gICAgICB3aGlsZSAoay0tKSBzdW0gPSByb3VuZChzdW0udGltZXMoc3VtKSwgd3ByKTtcclxuICAgICAgQ3Rvci5wcmVjaXNpb24gPSBwcjtcclxuICAgICAgcmV0dXJuIHNkID09IG51bGwgPyAoZXh0ZXJuYWwgPSB0cnVlLCByb3VuZChzdW0sIHByKSkgOiBzdW07XHJcbiAgICB9XHJcblxyXG4gICAgc3VtID0gdDtcclxuICB9XHJcbn1cclxuXHJcblxyXG4vLyBDYWxjdWxhdGUgdGhlIGJhc2UgMTAgZXhwb25lbnQgZnJvbSB0aGUgYmFzZSAxZTcgZXhwb25lbnQuXHJcbmZ1bmN0aW9uIGdldEJhc2UxMEV4cG9uZW50KHgpIHtcclxuICB2YXIgZSA9IHguZSAqIExPR19CQVNFLFxyXG4gICAgdyA9IHguZFswXTtcclxuXHJcbiAgLy8gQWRkIHRoZSBudW1iZXIgb2YgZGlnaXRzIG9mIHRoZSBmaXJzdCB3b3JkIG9mIHRoZSBkaWdpdHMgYXJyYXkuXHJcbiAgZm9yICg7IHcgPj0gMTA7IHcgLz0gMTApIGUrKztcclxuICByZXR1cm4gZTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGdldExuMTAoQ3Rvciwgc2QsIHByKSB7XHJcblxyXG4gIGlmIChzZCA+IEN0b3IuTE4xMC5zZCgpKSB7XHJcblxyXG5cclxuICAgIC8vIFJlc2V0IGdsb2JhbCBzdGF0ZSBpbiBjYXNlIHRoZSBleGNlcHRpb24gaXMgY2F1Z2h0LlxyXG4gICAgZXh0ZXJuYWwgPSB0cnVlO1xyXG4gICAgaWYgKHByKSBDdG9yLnByZWNpc2lvbiA9IHByO1xyXG4gICAgdGhyb3cgRXJyb3IoZGVjaW1hbEVycm9yICsgJ0xOMTAgcHJlY2lzaW9uIGxpbWl0IGV4Y2VlZGVkJyk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcm91bmQobmV3IEN0b3IoQ3Rvci5MTjEwKSwgc2QpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gZ2V0WmVyb1N0cmluZyhrKSB7XHJcbiAgdmFyIHpzID0gJyc7XHJcbiAgZm9yICg7IGstLTspIHpzICs9ICcwJztcclxuICByZXR1cm4genM7XHJcbn1cclxuXHJcblxyXG4vKlxyXG4gKiBSZXR1cm4gYSBuZXcgRGVjaW1hbCB3aG9zZSB2YWx1ZSBpcyB0aGUgbmF0dXJhbCBsb2dhcml0aG0gb2YgYHhgIHRydW5jYXRlZCB0byBgc2RgIHNpZ25pZmljYW50XHJcbiAqIGRpZ2l0cy5cclxuICpcclxuICogIGxuKG4pIGlzIG5vbi10ZXJtaW5hdGluZyAobiAhPSAxKVxyXG4gKlxyXG4gKi9cclxuZnVuY3Rpb24gbG4oeSwgc2QpIHtcclxuICB2YXIgYywgYzAsIGRlbm9taW5hdG9yLCBlLCBudW1lcmF0b3IsIHN1bSwgdCwgd3ByLCB4MixcclxuICAgIG4gPSAxLFxyXG4gICAgZ3VhcmQgPSAxMCxcclxuICAgIHggPSB5LFxyXG4gICAgeGQgPSB4LmQsXHJcbiAgICBDdG9yID0geC5jb25zdHJ1Y3RvcixcclxuICAgIHByID0gQ3Rvci5wcmVjaXNpb247XHJcblxyXG4gIC8vIGxuKC14KSA9IE5hTlxyXG4gIC8vIGxuKDApID0gLUluZmluaXR5XHJcbiAgaWYgKHgucyA8IDEpIHRocm93IEVycm9yKGRlY2ltYWxFcnJvciArICh4LnMgPyAnTmFOJyA6ICctSW5maW5pdHknKSk7XHJcblxyXG4gIC8vIGxuKDEpID0gMFxyXG4gIGlmICh4LmVxKE9ORSkpIHJldHVybiBuZXcgQ3RvcigwKTtcclxuXHJcbiAgaWYgKHNkID09IG51bGwpIHtcclxuICAgIGV4dGVybmFsID0gZmFsc2U7XHJcbiAgICB3cHIgPSBwcjtcclxuICB9IGVsc2Uge1xyXG4gICAgd3ByID0gc2Q7XHJcbiAgfVxyXG5cclxuICBpZiAoeC5lcSgxMCkpIHtcclxuICAgIGlmIChzZCA9PSBudWxsKSBleHRlcm5hbCA9IHRydWU7XHJcbiAgICByZXR1cm4gZ2V0TG4xMChDdG9yLCB3cHIpO1xyXG4gIH1cclxuXHJcbiAgd3ByICs9IGd1YXJkO1xyXG4gIEN0b3IucHJlY2lzaW9uID0gd3ByO1xyXG4gIGMgPSBkaWdpdHNUb1N0cmluZyh4ZCk7XHJcbiAgYzAgPSBjLmNoYXJBdCgwKTtcclxuICBlID0gZ2V0QmFzZTEwRXhwb25lbnQoeCk7XHJcblxyXG4gIGlmIChNYXRoLmFicyhlKSA8IDEuNWUxNSkge1xyXG5cclxuICAgIC8vIEFyZ3VtZW50IHJlZHVjdGlvbi5cclxuICAgIC8vIFRoZSBzZXJpZXMgY29udmVyZ2VzIGZhc3RlciB0aGUgY2xvc2VyIHRoZSBhcmd1bWVudCBpcyB0byAxLCBzbyB1c2luZ1xyXG4gICAgLy8gbG4oYV5iKSA9IGIgKiBsbihhKSwgICBsbihhKSA9IGxuKGFeYikgLyBiXHJcbiAgICAvLyBtdWx0aXBseSB0aGUgYXJndW1lbnQgYnkgaXRzZWxmIHVudGlsIHRoZSBsZWFkaW5nIGRpZ2l0cyBvZiB0aGUgc2lnbmlmaWNhbmQgYXJlIDcsIDgsIDksXHJcbiAgICAvLyAxMCwgMTEsIDEyIG9yIDEzLCByZWNvcmRpbmcgdGhlIG51bWJlciBvZiBtdWx0aXBsaWNhdGlvbnMgc28gdGhlIHN1bSBvZiB0aGUgc2VyaWVzIGNhblxyXG4gICAgLy8gbGF0ZXIgYmUgZGl2aWRlZCBieSB0aGlzIG51bWJlciwgdGhlbiBzZXBhcmF0ZSBvdXQgdGhlIHBvd2VyIG9mIDEwIHVzaW5nXHJcbiAgICAvLyBsbihhKjEwXmIpID0gbG4oYSkgKyBiKmxuKDEwKS5cclxuXHJcbiAgICAvLyBtYXggbiBpcyAyMSAoZ2l2ZXMgMC45LCAxLjAgb3IgMS4xKSAoOWUxNSAvIDIxID0gNC4yZTE0KS5cclxuICAgIC8vd2hpbGUgKGMwIDwgOSAmJiBjMCAhPSAxIHx8IGMwID09IDEgJiYgYy5jaGFyQXQoMSkgPiAxKSB7XHJcbiAgICAvLyBtYXggbiBpcyA2IChnaXZlcyAwLjcgLSAxLjMpXHJcbiAgICB3aGlsZSAoYzAgPCA3ICYmIGMwICE9IDEgfHwgYzAgPT0gMSAmJiBjLmNoYXJBdCgxKSA+IDMpIHtcclxuICAgICAgeCA9IHgudGltZXMoeSk7XHJcbiAgICAgIGMgPSBkaWdpdHNUb1N0cmluZyh4LmQpO1xyXG4gICAgICBjMCA9IGMuY2hhckF0KDApO1xyXG4gICAgICBuKys7XHJcbiAgICB9XHJcblxyXG4gICAgZSA9IGdldEJhc2UxMEV4cG9uZW50KHgpO1xyXG5cclxuICAgIGlmIChjMCA+IDEpIHtcclxuICAgICAgeCA9IG5ldyBDdG9yKCcwLicgKyBjKTtcclxuICAgICAgZSsrO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgeCA9IG5ldyBDdG9yKGMwICsgJy4nICsgYy5zbGljZSgxKSk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuXHJcbiAgICAvLyBUaGUgYXJndW1lbnQgcmVkdWN0aW9uIG1ldGhvZCBhYm92ZSBtYXkgcmVzdWx0IGluIG92ZXJmbG93IGlmIHRoZSBhcmd1bWVudCB5IGlzIGEgbWFzc2l2ZVxyXG4gICAgLy8gbnVtYmVyIHdpdGggZXhwb25lbnQgPj0gMTUwMDAwMDAwMDAwMDAwMCAoOWUxNSAvIDYgPSAxLjVlMTUpLCBzbyBpbnN0ZWFkIHJlY2FsbCB0aGlzXHJcbiAgICAvLyBmdW5jdGlvbiB1c2luZyBsbih4KjEwXmUpID0gbG4oeCkgKyBlKmxuKDEwKS5cclxuICAgIHQgPSBnZXRMbjEwKEN0b3IsIHdwciArIDIsIHByKS50aW1lcyhlICsgJycpO1xyXG4gICAgeCA9IGxuKG5ldyBDdG9yKGMwICsgJy4nICsgYy5zbGljZSgxKSksIHdwciAtIGd1YXJkKS5wbHVzKHQpO1xyXG5cclxuICAgIEN0b3IucHJlY2lzaW9uID0gcHI7XHJcbiAgICByZXR1cm4gc2QgPT0gbnVsbCA/IChleHRlcm5hbCA9IHRydWUsIHJvdW5kKHgsIHByKSkgOiB4O1xyXG4gIH1cclxuXHJcbiAgLy8geCBpcyByZWR1Y2VkIHRvIGEgdmFsdWUgbmVhciAxLlxyXG5cclxuICAvLyBUYXlsb3Igc2VyaWVzLlxyXG4gIC8vIGxuKHkpID0gbG4oKDEgKyB4KS8oMSAtIHgpKSA9IDIoeCArIHheMy8zICsgeF41LzUgKyB4XjcvNyArIC4uLilcclxuICAvLyB3aGVyZSB4ID0gKHkgLSAxKS8oeSArIDEpICAgICh8eHwgPCAxKVxyXG4gIHN1bSA9IG51bWVyYXRvciA9IHggPSBkaXZpZGUoeC5taW51cyhPTkUpLCB4LnBsdXMoT05FKSwgd3ByKTtcclxuICB4MiA9IHJvdW5kKHgudGltZXMoeCksIHdwcik7XHJcbiAgZGVub21pbmF0b3IgPSAzO1xyXG5cclxuICBmb3IgKDs7KSB7XHJcbiAgICBudW1lcmF0b3IgPSByb3VuZChudW1lcmF0b3IudGltZXMoeDIpLCB3cHIpO1xyXG4gICAgdCA9IHN1bS5wbHVzKGRpdmlkZShudW1lcmF0b3IsIG5ldyBDdG9yKGRlbm9taW5hdG9yKSwgd3ByKSk7XHJcblxyXG4gICAgaWYgKGRpZ2l0c1RvU3RyaW5nKHQuZCkuc2xpY2UoMCwgd3ByKSA9PT0gZGlnaXRzVG9TdHJpbmcoc3VtLmQpLnNsaWNlKDAsIHdwcikpIHtcclxuICAgICAgc3VtID0gc3VtLnRpbWVzKDIpO1xyXG5cclxuICAgICAgLy8gUmV2ZXJzZSB0aGUgYXJndW1lbnQgcmVkdWN0aW9uLlxyXG4gICAgICBpZiAoZSAhPT0gMCkgc3VtID0gc3VtLnBsdXMoZ2V0TG4xMChDdG9yLCB3cHIgKyAyLCBwcikudGltZXMoZSArICcnKSk7XHJcbiAgICAgIHN1bSA9IGRpdmlkZShzdW0sIG5ldyBDdG9yKG4pLCB3cHIpO1xyXG5cclxuICAgICAgQ3Rvci5wcmVjaXNpb24gPSBwcjtcclxuICAgICAgcmV0dXJuIHNkID09IG51bGwgPyAoZXh0ZXJuYWwgPSB0cnVlLCByb3VuZChzdW0sIHByKSkgOiBzdW07XHJcbiAgICB9XHJcblxyXG4gICAgc3VtID0gdDtcclxuICAgIGRlbm9taW5hdG9yICs9IDI7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuLypcclxuICogUGFyc2UgdGhlIHZhbHVlIG9mIGEgbmV3IERlY2ltYWwgYHhgIGZyb20gc3RyaW5nIGBzdHJgLlxyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VEZWNpbWFsKHgsIHN0cikge1xyXG4gIHZhciBlLCBpLCBsZW47XHJcblxyXG4gIC8vIERlY2ltYWwgcG9pbnQ/XHJcbiAgaWYgKChlID0gc3RyLmluZGV4T2YoJy4nKSkgPiAtMSkgc3RyID0gc3RyLnJlcGxhY2UoJy4nLCAnJyk7XHJcblxyXG4gIC8vIEV4cG9uZW50aWFsIGZvcm0/XHJcbiAgaWYgKChpID0gc3RyLnNlYXJjaCgvZS9pKSkgPiAwKSB7XHJcblxyXG4gICAgLy8gRGV0ZXJtaW5lIGV4cG9uZW50LlxyXG4gICAgaWYgKGUgPCAwKSBlID0gaTtcclxuICAgIGUgKz0gK3N0ci5zbGljZShpICsgMSk7XHJcbiAgICBzdHIgPSBzdHIuc3Vic3RyaW5nKDAsIGkpO1xyXG4gIH0gZWxzZSBpZiAoZSA8IDApIHtcclxuXHJcbiAgICAvLyBJbnRlZ2VyLlxyXG4gICAgZSA9IHN0ci5sZW5ndGg7XHJcbiAgfVxyXG5cclxuICAvLyBEZXRlcm1pbmUgbGVhZGluZyB6ZXJvcy5cclxuICBmb3IgKGkgPSAwOyBzdHIuY2hhckNvZGVBdChpKSA9PT0gNDg7KSArK2k7XHJcblxyXG4gIC8vIERldGVybWluZSB0cmFpbGluZyB6ZXJvcy5cclxuICBmb3IgKGxlbiA9IHN0ci5sZW5ndGg7IHN0ci5jaGFyQ29kZUF0KGxlbiAtIDEpID09PSA0ODspIC0tbGVuO1xyXG4gIHN0ciA9IHN0ci5zbGljZShpLCBsZW4pO1xyXG5cclxuICBpZiAoc3RyKSB7XHJcbiAgICBsZW4gLT0gaTtcclxuICAgIGUgPSBlIC0gaSAtIDE7XHJcbiAgICB4LmUgPSBtYXRoZmxvb3IoZSAvIExPR19CQVNFKTtcclxuICAgIHguZCA9IFtdO1xyXG5cclxuICAgIC8vIFRyYW5zZm9ybSBiYXNlXHJcblxyXG4gICAgLy8gZSBpcyB0aGUgYmFzZSAxMCBleHBvbmVudC5cclxuICAgIC8vIGkgaXMgd2hlcmUgdG8gc2xpY2Ugc3RyIHRvIGdldCB0aGUgZmlyc3Qgd29yZCBvZiB0aGUgZGlnaXRzIGFycmF5LlxyXG4gICAgaSA9IChlICsgMSkgJSBMT0dfQkFTRTtcclxuICAgIGlmIChlIDwgMCkgaSArPSBMT0dfQkFTRTtcclxuXHJcbiAgICBpZiAoaSA8IGxlbikge1xyXG4gICAgICBpZiAoaSkgeC5kLnB1c2goK3N0ci5zbGljZSgwLCBpKSk7XHJcbiAgICAgIGZvciAobGVuIC09IExPR19CQVNFOyBpIDwgbGVuOykgeC5kLnB1c2goK3N0ci5zbGljZShpLCBpICs9IExPR19CQVNFKSk7XHJcbiAgICAgIHN0ciA9IHN0ci5zbGljZShpKTtcclxuICAgICAgaSA9IExPR19CQVNFIC0gc3RyLmxlbmd0aDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGkgLT0gbGVuO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAoOyBpLS07KSBzdHIgKz0gJzAnO1xyXG4gICAgeC5kLnB1c2goK3N0cik7XHJcblxyXG4gICAgaWYgKGV4dGVybmFsICYmICh4LmUgPiBNQVhfRSB8fCB4LmUgPCAtTUFYX0UpKSB0aHJvdyBFcnJvcihleHBvbmVudE91dE9mUmFuZ2UgKyBlKTtcclxuICB9IGVsc2Uge1xyXG5cclxuICAgIC8vIFplcm8uXHJcbiAgICB4LnMgPSAwO1xyXG4gICAgeC5lID0gMDtcclxuICAgIHguZCA9IFswXTtcclxuICB9XHJcblxyXG4gIHJldHVybiB4O1xyXG59XHJcblxyXG5cclxuLypcclxuICogUm91bmQgYHhgIHRvIGBzZGAgc2lnbmlmaWNhbnQgZGlnaXRzLCB1c2luZyByb3VuZGluZyBtb2RlIGBybWAgaWYgcHJlc2VudCAodHJ1bmNhdGUgb3RoZXJ3aXNlKS5cclxuICovXHJcbiBmdW5jdGlvbiByb3VuZCh4LCBzZCwgcm0pIHtcclxuICB2YXIgaSwgaiwgaywgbiwgcmQsIGRvUm91bmQsIHcsIHhkaSxcclxuICAgIHhkID0geC5kO1xyXG5cclxuICAvLyByZDogdGhlIHJvdW5kaW5nIGRpZ2l0LCBpLmUuIHRoZSBkaWdpdCBhZnRlciB0aGUgZGlnaXQgdGhhdCBtYXkgYmUgcm91bmRlZCB1cC5cclxuICAvLyB3OiB0aGUgd29yZCBvZiB4ZCB3aGljaCBjb250YWlucyB0aGUgcm91bmRpbmcgZGlnaXQsIGEgYmFzZSAxZTcgbnVtYmVyLlxyXG4gIC8vIHhkaTogdGhlIGluZGV4IG9mIHcgd2l0aGluIHhkLlxyXG4gIC8vIG46IHRoZSBudW1iZXIgb2YgZGlnaXRzIG9mIHcuXHJcbiAgLy8gaTogd2hhdCB3b3VsZCBiZSB0aGUgaW5kZXggb2YgcmQgd2l0aGluIHcgaWYgYWxsIHRoZSBudW1iZXJzIHdlcmUgNyBkaWdpdHMgbG9uZyAoaS5lLiBpZlxyXG4gIC8vIHRoZXkgaGFkIGxlYWRpbmcgemVyb3MpXHJcbiAgLy8gajogaWYgPiAwLCB0aGUgYWN0dWFsIGluZGV4IG9mIHJkIHdpdGhpbiB3IChpZiA8IDAsIHJkIGlzIGEgbGVhZGluZyB6ZXJvKS5cclxuXHJcbiAgLy8gR2V0IHRoZSBsZW5ndGggb2YgdGhlIGZpcnN0IHdvcmQgb2YgdGhlIGRpZ2l0cyBhcnJheSB4ZC5cclxuICBmb3IgKG4gPSAxLCBrID0geGRbMF07IGsgPj0gMTA7IGsgLz0gMTApIG4rKztcclxuICBpID0gc2QgLSBuO1xyXG5cclxuICAvLyBJcyB0aGUgcm91bmRpbmcgZGlnaXQgaW4gdGhlIGZpcnN0IHdvcmQgb2YgeGQ/XHJcbiAgaWYgKGkgPCAwKSB7XHJcbiAgICBpICs9IExPR19CQVNFO1xyXG4gICAgaiA9IHNkO1xyXG4gICAgdyA9IHhkW3hkaSA9IDBdO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB4ZGkgPSBNYXRoLmNlaWwoKGkgKyAxKSAvIExPR19CQVNFKTtcclxuICAgIGsgPSB4ZC5sZW5ndGg7XHJcbiAgICBpZiAoeGRpID49IGspIHJldHVybiB4O1xyXG4gICAgdyA9IGsgPSB4ZFt4ZGldO1xyXG5cclxuICAgIC8vIEdldCB0aGUgbnVtYmVyIG9mIGRpZ2l0cyBvZiB3LlxyXG4gICAgZm9yIChuID0gMTsgayA+PSAxMDsgayAvPSAxMCkgbisrO1xyXG5cclxuICAgIC8vIEdldCB0aGUgaW5kZXggb2YgcmQgd2l0aGluIHcuXHJcbiAgICBpICU9IExPR19CQVNFO1xyXG5cclxuICAgIC8vIEdldCB0aGUgaW5kZXggb2YgcmQgd2l0aGluIHcsIGFkanVzdGVkIGZvciBsZWFkaW5nIHplcm9zLlxyXG4gICAgLy8gVGhlIG51bWJlciBvZiBsZWFkaW5nIHplcm9zIG9mIHcgaXMgZ2l2ZW4gYnkgTE9HX0JBU0UgLSBuLlxyXG4gICAgaiA9IGkgLSBMT0dfQkFTRSArIG47XHJcbiAgfVxyXG5cclxuICBpZiAocm0gIT09IHZvaWQgMCkge1xyXG4gICAgayA9IG1hdGhwb3coMTAsIG4gLSBqIC0gMSk7XHJcblxyXG4gICAgLy8gR2V0IHRoZSByb3VuZGluZyBkaWdpdCBhdCBpbmRleCBqIG9mIHcuXHJcbiAgICByZCA9IHcgLyBrICUgMTAgfCAwO1xyXG5cclxuICAgIC8vIEFyZSB0aGVyZSBhbnkgbm9uLXplcm8gZGlnaXRzIGFmdGVyIHRoZSByb3VuZGluZyBkaWdpdD9cclxuICAgIGRvUm91bmQgPSBzZCA8IDAgfHwgeGRbeGRpICsgMV0gIT09IHZvaWQgMCB8fCB3ICUgaztcclxuXHJcbiAgICAvLyBUaGUgZXhwcmVzc2lvbiBgdyAlIG1hdGhwb3coMTAsIG4gLSBqIC0gMSlgIHJldHVybnMgYWxsIHRoZSBkaWdpdHMgb2YgdyB0byB0aGUgcmlnaHQgb2YgdGhlXHJcbiAgICAvLyBkaWdpdCBhdCAobGVmdC10by1yaWdodCkgaW5kZXggaiwgZS5nLiBpZiB3IGlzIDkwODcxNCBhbmQgaiBpcyAyLCB0aGUgZXhwcmVzc2lvbiB3aWxsIGdpdmVcclxuICAgIC8vIDcxNC5cclxuXHJcbiAgICBkb1JvdW5kID0gcm0gPCA0XHJcbiAgICAgID8gKHJkIHx8IGRvUm91bmQpICYmIChybSA9PSAwIHx8IHJtID09ICh4LnMgPCAwID8gMyA6IDIpKVxyXG4gICAgICA6IHJkID4gNSB8fCByZCA9PSA1ICYmIChybSA9PSA0IHx8IGRvUm91bmQgfHwgcm0gPT0gNiAmJlxyXG5cclxuICAgICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBkaWdpdCB0byB0aGUgbGVmdCBvZiB0aGUgcm91bmRpbmcgZGlnaXQgaXMgb2RkLlxyXG4gICAgICAgICgoaSA+IDAgPyBqID4gMCA/IHcgLyBtYXRocG93KDEwLCBuIC0gaikgOiAwIDogeGRbeGRpIC0gMV0pICUgMTApICYgMSB8fFxyXG4gICAgICAgICAgcm0gPT0gKHgucyA8IDAgPyA4IDogNykpO1xyXG4gIH1cclxuXHJcbiAgaWYgKHNkIDwgMSB8fCAheGRbMF0pIHtcclxuICAgIGlmIChkb1JvdW5kKSB7XHJcbiAgICAgIGsgPSBnZXRCYXNlMTBFeHBvbmVudCh4KTtcclxuICAgICAgeGQubGVuZ3RoID0gMTtcclxuXHJcbiAgICAgIC8vIENvbnZlcnQgc2QgdG8gZGVjaW1hbCBwbGFjZXMuXHJcbiAgICAgIHNkID0gc2QgLSBrIC0gMTtcclxuXHJcbiAgICAgIC8vIDEsIDAuMSwgMC4wMSwgMC4wMDEsIDAuMDAwMSBldGMuXHJcbiAgICAgIHhkWzBdID0gbWF0aHBvdygxMCwgKExPR19CQVNFIC0gc2QgJSBMT0dfQkFTRSkgJSBMT0dfQkFTRSk7XHJcbiAgICAgIHguZSA9IG1hdGhmbG9vcigtc2QgLyBMT0dfQkFTRSkgfHwgMDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHhkLmxlbmd0aCA9IDE7XHJcblxyXG4gICAgICAvLyBaZXJvLlxyXG4gICAgICB4ZFswXSA9IHguZSA9IHgucyA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHg7XHJcbiAgfVxyXG5cclxuICAvLyBSZW1vdmUgZXhjZXNzIGRpZ2l0cy5cclxuICBpZiAoaSA9PSAwKSB7XHJcbiAgICB4ZC5sZW5ndGggPSB4ZGk7XHJcbiAgICBrID0gMTtcclxuICAgIHhkaS0tO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB4ZC5sZW5ndGggPSB4ZGkgKyAxO1xyXG4gICAgayA9IG1hdGhwb3coMTAsIExPR19CQVNFIC0gaSk7XHJcblxyXG4gICAgLy8gRS5nLiA1NjcwMCBiZWNvbWVzIDU2MDAwIGlmIDcgaXMgdGhlIHJvdW5kaW5nIGRpZ2l0LlxyXG4gICAgLy8gaiA+IDAgbWVhbnMgaSA+IG51bWJlciBvZiBsZWFkaW5nIHplcm9zIG9mIHcuXHJcbiAgICB4ZFt4ZGldID0gaiA+IDAgPyAodyAvIG1hdGhwb3coMTAsIG4gLSBqKSAlIG1hdGhwb3coMTAsIGopIHwgMCkgKiBrIDogMDtcclxuICB9XHJcblxyXG4gIGlmIChkb1JvdW5kKSB7XHJcbiAgICBmb3IgKDs7KSB7XHJcblxyXG4gICAgICAvLyBJcyB0aGUgZGlnaXQgdG8gYmUgcm91bmRlZCB1cCBpbiB0aGUgZmlyc3Qgd29yZCBvZiB4ZD9cclxuICAgICAgaWYgKHhkaSA9PSAwKSB7XHJcbiAgICAgICAgaWYgKCh4ZFswXSArPSBrKSA9PSBCQVNFKSB7XHJcbiAgICAgICAgICB4ZFswXSA9IDE7XHJcbiAgICAgICAgICArK3guZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHhkW3hkaV0gKz0gaztcclxuICAgICAgICBpZiAoeGRbeGRpXSAhPSBCQVNFKSBicmVhaztcclxuICAgICAgICB4ZFt4ZGktLV0gPSAwO1xyXG4gICAgICAgIGsgPSAxO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBSZW1vdmUgdHJhaWxpbmcgemVyb3MuXHJcbiAgZm9yIChpID0geGQubGVuZ3RoOyB4ZFstLWldID09PSAwOykgeGQucG9wKCk7XHJcblxyXG4gIGlmIChleHRlcm5hbCAmJiAoeC5lID4gTUFYX0UgfHwgeC5lIDwgLU1BWF9FKSkge1xyXG4gICAgdGhyb3cgRXJyb3IoZXhwb25lbnRPdXRPZlJhbmdlICsgZ2V0QmFzZTEwRXhwb25lbnQoeCkpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHg7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBzdWJ0cmFjdCh4LCB5KSB7XHJcbiAgdmFyIGQsIGUsIGksIGosIGssIGxlbiwgeGQsIHhlLCB4TFR5LCB5ZCxcclxuICAgIEN0b3IgPSB4LmNvbnN0cnVjdG9yLFxyXG4gICAgcHIgPSBDdG9yLnByZWNpc2lvbjtcclxuXHJcbiAgLy8gUmV0dXJuIHkgbmVnYXRlZCBpZiB4IGlzIHplcm8uXHJcbiAgLy8gUmV0dXJuIHggaWYgeSBpcyB6ZXJvIGFuZCB4IGlzIG5vbi16ZXJvLlxyXG4gIGlmICgheC5zIHx8ICF5LnMpIHtcclxuICAgIGlmICh5LnMpIHkucyA9IC15LnM7XHJcbiAgICBlbHNlIHkgPSBuZXcgQ3Rvcih4KTtcclxuICAgIHJldHVybiBleHRlcm5hbCA/IHJvdW5kKHksIHByKSA6IHk7XHJcbiAgfVxyXG5cclxuICB4ZCA9IHguZDtcclxuICB5ZCA9IHkuZDtcclxuXHJcbiAgLy8geCBhbmQgeSBhcmUgbm9uLXplcm8gbnVtYmVycyB3aXRoIHRoZSBzYW1lIHNpZ24uXHJcblxyXG4gIGUgPSB5LmU7XHJcbiAgeGUgPSB4LmU7XHJcbiAgeGQgPSB4ZC5zbGljZSgpO1xyXG4gIGsgPSB4ZSAtIGU7XHJcblxyXG4gIC8vIElmIGV4cG9uZW50cyBkaWZmZXIuLi5cclxuICBpZiAoaykge1xyXG4gICAgeExUeSA9IGsgPCAwO1xyXG5cclxuICAgIGlmICh4TFR5KSB7XHJcbiAgICAgIGQgPSB4ZDtcclxuICAgICAgayA9IC1rO1xyXG4gICAgICBsZW4gPSB5ZC5sZW5ndGg7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkID0geWQ7XHJcbiAgICAgIGUgPSB4ZTtcclxuICAgICAgbGVuID0geGQubGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE51bWJlcnMgd2l0aCBtYXNzaXZlbHkgZGlmZmVyZW50IGV4cG9uZW50cyB3b3VsZCByZXN1bHQgaW4gYSB2ZXJ5IGhpZ2ggbnVtYmVyIG9mIHplcm9zXHJcbiAgICAvLyBuZWVkaW5nIHRvIGJlIHByZXBlbmRlZCwgYnV0IHRoaXMgY2FuIGJlIGF2b2lkZWQgd2hpbGUgc3RpbGwgZW5zdXJpbmcgY29ycmVjdCByb3VuZGluZyBieVxyXG4gICAgLy8gbGltaXRpbmcgdGhlIG51bWJlciBvZiB6ZXJvcyB0byBgTWF0aC5jZWlsKHByIC8gTE9HX0JBU0UpICsgMmAuXHJcbiAgICBpID0gTWF0aC5tYXgoTWF0aC5jZWlsKHByIC8gTE9HX0JBU0UpLCBsZW4pICsgMjtcclxuXHJcbiAgICBpZiAoayA+IGkpIHtcclxuICAgICAgayA9IGk7XHJcbiAgICAgIGQubGVuZ3RoID0gMTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBQcmVwZW5kIHplcm9zIHRvIGVxdWFsaXNlIGV4cG9uZW50cy5cclxuICAgIGQucmV2ZXJzZSgpO1xyXG4gICAgZm9yIChpID0gazsgaS0tOykgZC5wdXNoKDApO1xyXG4gICAgZC5yZXZlcnNlKCk7XHJcblxyXG4gIC8vIEJhc2UgMWU3IGV4cG9uZW50cyBlcXVhbC5cclxuICB9IGVsc2Uge1xyXG5cclxuICAgIC8vIENoZWNrIGRpZ2l0cyB0byBkZXRlcm1pbmUgd2hpY2ggaXMgdGhlIGJpZ2dlciBudW1iZXIuXHJcblxyXG4gICAgaSA9IHhkLmxlbmd0aDtcclxuICAgIGxlbiA9IHlkLmxlbmd0aDtcclxuICAgIHhMVHkgPSBpIDwgbGVuO1xyXG4gICAgaWYgKHhMVHkpIGxlbiA9IGk7XHJcblxyXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgIGlmICh4ZFtpXSAhPSB5ZFtpXSkge1xyXG4gICAgICAgIHhMVHkgPSB4ZFtpXSA8IHlkW2ldO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgayA9IDA7XHJcbiAgfVxyXG5cclxuICBpZiAoeExUeSkge1xyXG4gICAgZCA9IHhkO1xyXG4gICAgeGQgPSB5ZDtcclxuICAgIHlkID0gZDtcclxuICAgIHkucyA9IC15LnM7XHJcbiAgfVxyXG5cclxuICBsZW4gPSB4ZC5sZW5ndGg7XHJcblxyXG4gIC8vIEFwcGVuZCB6ZXJvcyB0byB4ZCBpZiBzaG9ydGVyLlxyXG4gIC8vIERvbid0IGFkZCB6ZXJvcyB0byB5ZCBpZiBzaG9ydGVyIGFzIHN1YnRyYWN0aW9uIG9ubHkgbmVlZHMgdG8gc3RhcnQgYXQgeWQgbGVuZ3RoLlxyXG4gIGZvciAoaSA9IHlkLmxlbmd0aCAtIGxlbjsgaSA+IDA7IC0taSkgeGRbbGVuKytdID0gMDtcclxuXHJcbiAgLy8gU3VidHJhY3QgeWQgZnJvbSB4ZC5cclxuICBmb3IgKGkgPSB5ZC5sZW5ndGg7IGkgPiBrOykge1xyXG4gICAgaWYgKHhkWy0taV0gPCB5ZFtpXSkge1xyXG4gICAgICBmb3IgKGogPSBpOyBqICYmIHhkWy0tal0gPT09IDA7KSB4ZFtqXSA9IEJBU0UgLSAxO1xyXG4gICAgICAtLXhkW2pdO1xyXG4gICAgICB4ZFtpXSArPSBCQVNFO1xyXG4gICAgfVxyXG5cclxuICAgIHhkW2ldIC09IHlkW2ldO1xyXG4gIH1cclxuXHJcbiAgLy8gUmVtb3ZlIHRyYWlsaW5nIHplcm9zLlxyXG4gIGZvciAoOyB4ZFstLWxlbl0gPT09IDA7KSB4ZC5wb3AoKTtcclxuXHJcbiAgLy8gUmVtb3ZlIGxlYWRpbmcgemVyb3MgYW5kIGFkanVzdCBleHBvbmVudCBhY2NvcmRpbmdseS5cclxuICBmb3IgKDsgeGRbMF0gPT09IDA7IHhkLnNoaWZ0KCkpIC0tZTtcclxuXHJcbiAgLy8gWmVybz9cclxuICBpZiAoIXhkWzBdKSByZXR1cm4gbmV3IEN0b3IoMCk7XHJcblxyXG4gIHkuZCA9IHhkO1xyXG4gIHkuZSA9IGU7XHJcblxyXG4gIC8vcmV0dXJuIGV4dGVybmFsICYmIHhkLmxlbmd0aCA+PSBwciAvIExPR19CQVNFID8gcm91bmQoeSwgcHIpIDogeTtcclxuICByZXR1cm4gZXh0ZXJuYWwgPyByb3VuZCh5LCBwcikgOiB5O1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gdG9TdHJpbmcoeCwgaXNFeHAsIHNkKSB7XHJcbiAgdmFyIGssXHJcbiAgICBlID0gZ2V0QmFzZTEwRXhwb25lbnQoeCksXHJcbiAgICBzdHIgPSBkaWdpdHNUb1N0cmluZyh4LmQpLFxyXG4gICAgbGVuID0gc3RyLmxlbmd0aDtcclxuXHJcbiAgaWYgKGlzRXhwKSB7XHJcbiAgICBpZiAoc2QgJiYgKGsgPSBzZCAtIGxlbikgPiAwKSB7XHJcbiAgICAgIHN0ciA9IHN0ci5jaGFyQXQoMCkgKyAnLicgKyBzdHIuc2xpY2UoMSkgKyBnZXRaZXJvU3RyaW5nKGspO1xyXG4gICAgfSBlbHNlIGlmIChsZW4gPiAxKSB7XHJcbiAgICAgIHN0ciA9IHN0ci5jaGFyQXQoMCkgKyAnLicgKyBzdHIuc2xpY2UoMSk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RyID0gc3RyICsgKGUgPCAwID8gJ2UnIDogJ2UrJykgKyBlO1xyXG4gIH0gZWxzZSBpZiAoZSA8IDApIHtcclxuICAgIHN0ciA9ICcwLicgKyBnZXRaZXJvU3RyaW5nKC1lIC0gMSkgKyBzdHI7XHJcbiAgICBpZiAoc2QgJiYgKGsgPSBzZCAtIGxlbikgPiAwKSBzdHIgKz0gZ2V0WmVyb1N0cmluZyhrKTtcclxuICB9IGVsc2UgaWYgKGUgPj0gbGVuKSB7XHJcbiAgICBzdHIgKz0gZ2V0WmVyb1N0cmluZyhlICsgMSAtIGxlbik7XHJcbiAgICBpZiAoc2QgJiYgKGsgPSBzZCAtIGUgLSAxKSA+IDApIHN0ciA9IHN0ciArICcuJyArIGdldFplcm9TdHJpbmcoayk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGlmICgoayA9IGUgKyAxKSA8IGxlbikgc3RyID0gc3RyLnNsaWNlKDAsIGspICsgJy4nICsgc3RyLnNsaWNlKGspO1xyXG4gICAgaWYgKHNkICYmIChrID0gc2QgLSBsZW4pID4gMCkge1xyXG4gICAgICBpZiAoZSArIDEgPT09IGxlbikgc3RyICs9ICcuJztcclxuICAgICAgc3RyICs9IGdldFplcm9TdHJpbmcoayk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4geC5zIDwgMCA/ICctJyArIHN0ciA6IHN0cjtcclxufVxyXG5cclxuXHJcbi8vIERvZXMgbm90IHN0cmlwIHRyYWlsaW5nIHplcm9zLlxyXG5mdW5jdGlvbiB0cnVuY2F0ZShhcnIsIGxlbikge1xyXG4gIGlmIChhcnIubGVuZ3RoID4gbGVuKSB7XHJcbiAgICBhcnIubGVuZ3RoID0gbGVuO1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuLy8gRGVjaW1hbCBtZXRob2RzXHJcblxyXG5cclxuLypcclxuICogIGNsb25lXHJcbiAqICBjb25maWcvc2V0XHJcbiAqL1xyXG5cclxuXHJcbi8qXHJcbiAqIENyZWF0ZSBhbmQgcmV0dXJuIGEgRGVjaW1hbCBjb25zdHJ1Y3RvciB3aXRoIHRoZSBzYW1lIGNvbmZpZ3VyYXRpb24gcHJvcGVydGllcyBhcyB0aGlzIERlY2ltYWxcclxuICogY29uc3RydWN0b3IuXHJcbiAqXHJcbiAqL1xyXG5mdW5jdGlvbiBjbG9uZShvYmopIHtcclxuICB2YXIgaSwgcCwgcHM7XHJcblxyXG4gIC8qXHJcbiAgICogVGhlIERlY2ltYWwgY29uc3RydWN0b3IgYW5kIGV4cG9ydGVkIGZ1bmN0aW9uLlxyXG4gICAqIFJldHVybiBhIG5ldyBEZWNpbWFsIGluc3RhbmNlLlxyXG4gICAqXHJcbiAgICogdmFsdWUge251bWJlcnxzdHJpbmd8RGVjaW1hbH0gQSBudW1lcmljIHZhbHVlLlxyXG4gICAqXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gRGVjaW1hbCh2YWx1ZSkge1xyXG4gICAgdmFyIHggPSB0aGlzO1xyXG5cclxuICAgIC8vIERlY2ltYWwgY2FsbGVkIHdpdGhvdXQgbmV3LlxyXG4gICAgaWYgKCEoeCBpbnN0YW5jZW9mIERlY2ltYWwpKSByZXR1cm4gbmV3IERlY2ltYWwodmFsdWUpO1xyXG5cclxuICAgIC8vIFJldGFpbiBhIHJlZmVyZW5jZSB0byB0aGlzIERlY2ltYWwgY29uc3RydWN0b3IsIGFuZCBzaGFkb3cgRGVjaW1hbC5wcm90b3R5cGUuY29uc3RydWN0b3JcclxuICAgIC8vIHdoaWNoIHBvaW50cyB0byBPYmplY3QuXHJcbiAgICB4LmNvbnN0cnVjdG9yID0gRGVjaW1hbDtcclxuXHJcbiAgICAvLyBEdXBsaWNhdGUuXHJcbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEZWNpbWFsKSB7XHJcbiAgICAgIHgucyA9IHZhbHVlLnM7XHJcbiAgICAgIHguZSA9IHZhbHVlLmU7XHJcbiAgICAgIHguZCA9ICh2YWx1ZSA9IHZhbHVlLmQpID8gdmFsdWUuc2xpY2UoKSA6IHZhbHVlO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcclxuXHJcbiAgICAgIC8vIFJlamVjdCBJbmZpbml0eS9OYU4uXHJcbiAgICAgIGlmICh2YWx1ZSAqIDAgIT09IDApIHtcclxuICAgICAgICB0aHJvdyBFcnJvcihpbnZhbGlkQXJndW1lbnQgKyB2YWx1ZSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh2YWx1ZSA+IDApIHtcclxuICAgICAgICB4LnMgPSAxO1xyXG4gICAgICB9IGVsc2UgaWYgKHZhbHVlIDwgMCkge1xyXG4gICAgICAgIHZhbHVlID0gLXZhbHVlO1xyXG4gICAgICAgIHgucyA9IC0xO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHgucyA9IDA7XHJcbiAgICAgICAgeC5lID0gMDtcclxuICAgICAgICB4LmQgPSBbMF07XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBGYXN0IHBhdGggZm9yIHNtYWxsIGludGVnZXJzLlxyXG4gICAgICBpZiAodmFsdWUgPT09IH5+dmFsdWUgJiYgdmFsdWUgPCAxZTcpIHtcclxuICAgICAgICB4LmUgPSAwO1xyXG4gICAgICAgIHguZCA9IFt2YWx1ZV07XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gcGFyc2VEZWNpbWFsKHgsIHZhbHVlLnRvU3RyaW5nKCkpO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIHRocm93IEVycm9yKGludmFsaWRBcmd1bWVudCArIHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNaW51cyBzaWduP1xyXG4gICAgaWYgKHZhbHVlLmNoYXJDb2RlQXQoMCkgPT09IDQ1KSB7XHJcbiAgICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMSk7XHJcbiAgICAgIHgucyA9IC0xO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgeC5zID0gMTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNEZWNpbWFsLnRlc3QodmFsdWUpKSBwYXJzZURlY2ltYWwoeCwgdmFsdWUpO1xyXG4gICAgZWxzZSB0aHJvdyBFcnJvcihpbnZhbGlkQXJndW1lbnQgKyB2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICBEZWNpbWFsLnByb3RvdHlwZSA9IFA7XHJcblxyXG4gIERlY2ltYWwuUk9VTkRfVVAgPSAwO1xyXG4gIERlY2ltYWwuUk9VTkRfRE9XTiA9IDE7XHJcbiAgRGVjaW1hbC5ST1VORF9DRUlMID0gMjtcclxuICBEZWNpbWFsLlJPVU5EX0ZMT09SID0gMztcclxuICBEZWNpbWFsLlJPVU5EX0hBTEZfVVAgPSA0O1xyXG4gIERlY2ltYWwuUk9VTkRfSEFMRl9ET1dOID0gNTtcclxuICBEZWNpbWFsLlJPVU5EX0hBTEZfRVZFTiA9IDY7XHJcbiAgRGVjaW1hbC5ST1VORF9IQUxGX0NFSUwgPSA3O1xyXG4gIERlY2ltYWwuUk9VTkRfSEFMRl9GTE9PUiA9IDg7XHJcblxyXG4gIERlY2ltYWwuY2xvbmUgPSBjbG9uZTtcclxuICBEZWNpbWFsLmNvbmZpZyA9IERlY2ltYWwuc2V0ID0gY29uZmlnO1xyXG5cclxuICBpZiAob2JqID09PSB2b2lkIDApIG9iaiA9IHt9O1xyXG4gIGlmIChvYmopIHtcclxuICAgIHBzID0gWydwcmVjaXNpb24nLCAncm91bmRpbmcnLCAndG9FeHBOZWcnLCAndG9FeHBQb3MnLCAnTE4xMCddO1xyXG4gICAgZm9yIChpID0gMDsgaSA8IHBzLmxlbmd0aDspIGlmICghb2JqLmhhc093blByb3BlcnR5KHAgPSBwc1tpKytdKSkgb2JqW3BdID0gdGhpc1twXTtcclxuICB9XHJcblxyXG4gIERlY2ltYWwuY29uZmlnKG9iaik7XHJcblxyXG4gIHJldHVybiBEZWNpbWFsO1xyXG59XHJcblxyXG5cclxuLypcclxuICogQ29uZmlndXJlIGdsb2JhbCBzZXR0aW5ncyBmb3IgYSBEZWNpbWFsIGNvbnN0cnVjdG9yLlxyXG4gKlxyXG4gKiBgb2JqYCBpcyBhbiBvYmplY3Qgd2l0aCBvbmUgb3IgbW9yZSBvZiB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXMsXHJcbiAqXHJcbiAqICAgcHJlY2lzaW9uICB7bnVtYmVyfVxyXG4gKiAgIHJvdW5kaW5nICAge251bWJlcn1cclxuICogICB0b0V4cE5lZyAgIHtudW1iZXJ9XHJcbiAqICAgdG9FeHBQb3MgICB7bnVtYmVyfVxyXG4gKlxyXG4gKiBFLmcuIERlY2ltYWwuY29uZmlnKHsgcHJlY2lzaW9uOiAyMCwgcm91bmRpbmc6IDQgfSlcclxuICpcclxuICovXHJcbmZ1bmN0aW9uIGNvbmZpZyhvYmopIHtcclxuICBpZiAoIW9iaiB8fCB0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xyXG4gICAgdGhyb3cgRXJyb3IoZGVjaW1hbEVycm9yICsgJ09iamVjdCBleHBlY3RlZCcpO1xyXG4gIH1cclxuICB2YXIgaSwgcCwgdixcclxuICAgIHBzID0gW1xyXG4gICAgICAncHJlY2lzaW9uJywgMSwgTUFYX0RJR0lUUyxcclxuICAgICAgJ3JvdW5kaW5nJywgMCwgOCxcclxuICAgICAgJ3RvRXhwTmVnJywgLTEgLyAwLCAwLFxyXG4gICAgICAndG9FeHBQb3MnLCAwLCAxIC8gMFxyXG4gICAgXTtcclxuXHJcbiAgZm9yIChpID0gMDsgaSA8IHBzLmxlbmd0aDsgaSArPSAzKSB7XHJcbiAgICBpZiAoKHYgPSBvYmpbcCA9IHBzW2ldXSkgIT09IHZvaWQgMCkge1xyXG4gICAgICBpZiAobWF0aGZsb29yKHYpID09PSB2ICYmIHYgPj0gcHNbaSArIDFdICYmIHYgPD0gcHNbaSArIDJdKSB0aGlzW3BdID0gdjtcclxuICAgICAgZWxzZSB0aHJvdyBFcnJvcihpbnZhbGlkQXJndW1lbnQgKyBwICsgJzogJyArIHYpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKCh2ID0gb2JqW3AgPSAnTE4xMCddKSAhPT0gdm9pZCAwKSB7XHJcbiAgICAgIGlmICh2ID09IE1hdGguTE4xMCkgdGhpc1twXSA9IG5ldyB0aGlzKHYpO1xyXG4gICAgICBlbHNlIHRocm93IEVycm9yKGludmFsaWRBcmd1bWVudCArIHAgKyAnOiAnICsgdik7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gdGhpcztcclxufVxyXG5cclxuXHJcbi8vIENyZWF0ZSBhbmQgY29uZmlndXJlIGluaXRpYWwgRGVjaW1hbCBjb25zdHJ1Y3Rvci5cclxudmFyIERlY2ltYWwgPSBjbG9uZShkZWZhdWx0cyk7XHJcblxyXG4vLyBJbnRlcm5hbCBjb25zdGFudC5cclxuT05FID0gbmV3IERlY2ltYWwoMSk7XHJcblxyXG52YXIgRGVjaW1hbCQxID0gRGVjaW1hbDtcblxuZXhwb3J0IHsgRGVjaW1hbCwgRGVjaW1hbCQxIGFzIGRlZmF1bHQgfTtcbiIsImltcG9ydCB7IF9fbW9kdWxlIGFzIGV2ZW50ZW1pdHRlcjMgfSBmcm9tICcuLi8uLi9fdmlydHVhbC9pbmRleDQubWpzJztcblxudmFyIGhhc1JlcXVpcmVkRXZlbnRlbWl0dGVyMztcblxuZnVuY3Rpb24gcmVxdWlyZUV2ZW50ZW1pdHRlcjMgKCkge1xuXHRpZiAoaGFzUmVxdWlyZWRFdmVudGVtaXR0ZXIzKSByZXR1cm4gZXZlbnRlbWl0dGVyMy5leHBvcnRzO1xuXHRoYXNSZXF1aXJlZEV2ZW50ZW1pdHRlcjMgPSAxO1xuXHQoZnVuY3Rpb24gKG1vZHVsZSkge1xuXG5cdFx0dmFyIGhhcyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHlcblx0XHQgICwgcHJlZml4ID0gJ34nO1xuXG5cdFx0LyoqXG5cdFx0ICogQ29uc3RydWN0b3IgdG8gY3JlYXRlIGEgc3RvcmFnZSBmb3Igb3VyIGBFRWAgb2JqZWN0cy5cblx0XHQgKiBBbiBgRXZlbnRzYCBpbnN0YW5jZSBpcyBhIHBsYWluIG9iamVjdCB3aG9zZSBwcm9wZXJ0aWVzIGFyZSBldmVudCBuYW1lcy5cblx0XHQgKlxuXHRcdCAqIEBjb25zdHJ1Y3RvclxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gRXZlbnRzKCkge31cblxuXHRcdC8vXG5cdFx0Ly8gV2UgdHJ5IHRvIG5vdCBpbmhlcml0IGZyb20gYE9iamVjdC5wcm90b3R5cGVgLiBJbiBzb21lIGVuZ2luZXMgY3JlYXRpbmcgYW5cblx0XHQvLyBpbnN0YW5jZSBpbiB0aGlzIHdheSBpcyBmYXN0ZXIgdGhhbiBjYWxsaW5nIGBPYmplY3QuY3JlYXRlKG51bGwpYCBkaXJlY3RseS5cblx0XHQvLyBJZiBgT2JqZWN0LmNyZWF0ZShudWxsKWAgaXMgbm90IHN1cHBvcnRlZCB3ZSBwcmVmaXggdGhlIGV2ZW50IG5hbWVzIHdpdGggYVxuXHRcdC8vIGNoYXJhY3RlciB0byBtYWtlIHN1cmUgdGhhdCB0aGUgYnVpbHQtaW4gb2JqZWN0IHByb3BlcnRpZXMgYXJlIG5vdFxuXHRcdC8vIG92ZXJyaWRkZW4gb3IgdXNlZCBhcyBhbiBhdHRhY2sgdmVjdG9yLlxuXHRcdC8vXG5cdFx0aWYgKE9iamVjdC5jcmVhdGUpIHtcblx0XHQgIEV2ZW50cy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG5cdFx0ICAvL1xuXHRcdCAgLy8gVGhpcyBoYWNrIGlzIG5lZWRlZCBiZWNhdXNlIHRoZSBgX19wcm90b19fYCBwcm9wZXJ0eSBpcyBzdGlsbCBpbmhlcml0ZWQgaW5cblx0XHQgIC8vIHNvbWUgb2xkIGJyb3dzZXJzIGxpa2UgQW5kcm9pZCA0LCBpUGhvbmUgNS4xLCBPcGVyYSAxMSBhbmQgU2FmYXJpIDUuXG5cdFx0ICAvL1xuXHRcdCAgaWYgKCFuZXcgRXZlbnRzKCkuX19wcm90b19fKSBwcmVmaXggPSBmYWxzZTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBSZXByZXNlbnRhdGlvbiBvZiBhIHNpbmdsZSBldmVudCBsaXN0ZW5lci5cblx0XHQgKlxuXHRcdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cblx0XHQgKiBAcGFyYW0geyp9IGNvbnRleHQgVGhlIGNvbnRleHQgdG8gaW52b2tlIHRoZSBsaXN0ZW5lciB3aXRoLlxuXHRcdCAqIEBwYXJhbSB7Qm9vbGVhbn0gW29uY2U9ZmFsc2VdIFNwZWNpZnkgaWYgdGhlIGxpc3RlbmVyIGlzIGEgb25lLXRpbWUgbGlzdGVuZXIuXG5cdFx0ICogQGNvbnN0cnVjdG9yXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBFRShmbiwgY29udGV4dCwgb25jZSkge1xuXHRcdCAgdGhpcy5mbiA9IGZuO1xuXHRcdCAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcblx0XHQgIHRoaXMub25jZSA9IG9uY2UgfHwgZmFsc2U7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogQWRkIGEgbGlzdGVuZXIgZm9yIGEgZ2l2ZW4gZXZlbnQuXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0ge0V2ZW50RW1pdHRlcn0gZW1pdHRlciBSZWZlcmVuY2UgdG8gdGhlIGBFdmVudEVtaXR0ZXJgIGluc3RhbmNlLlxuXHRcdCAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cblx0XHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG5cdFx0ICogQHBhcmFtIHsqfSBjb250ZXh0IFRoZSBjb250ZXh0IHRvIGludm9rZSB0aGUgbGlzdGVuZXIgd2l0aC5cblx0XHQgKiBAcGFyYW0ge0Jvb2xlYW59IG9uY2UgU3BlY2lmeSBpZiB0aGUgbGlzdGVuZXIgaXMgYSBvbmUtdGltZSBsaXN0ZW5lci5cblx0XHQgKiBAcmV0dXJucyB7RXZlbnRFbWl0dGVyfVxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gYWRkTGlzdGVuZXIoZW1pdHRlciwgZXZlbnQsIGZuLCBjb250ZXh0LCBvbmNlKSB7XG5cdFx0ICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XG5cdFx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcblx0XHQgIH1cblxuXHRcdCAgdmFyIGxpc3RlbmVyID0gbmV3IEVFKGZuLCBjb250ZXh0IHx8IGVtaXR0ZXIsIG9uY2UpXG5cdFx0ICAgICwgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudDtcblxuXHRcdCAgaWYgKCFlbWl0dGVyLl9ldmVudHNbZXZ0XSkgZW1pdHRlci5fZXZlbnRzW2V2dF0gPSBsaXN0ZW5lciwgZW1pdHRlci5fZXZlbnRzQ291bnQrKztcblx0XHQgIGVsc2UgaWYgKCFlbWl0dGVyLl9ldmVudHNbZXZ0XS5mbikgZW1pdHRlci5fZXZlbnRzW2V2dF0ucHVzaChsaXN0ZW5lcik7XG5cdFx0ICBlbHNlIGVtaXR0ZXIuX2V2ZW50c1tldnRdID0gW2VtaXR0ZXIuX2V2ZW50c1tldnRdLCBsaXN0ZW5lcl07XG5cblx0XHQgIHJldHVybiBlbWl0dGVyO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIENsZWFyIGV2ZW50IGJ5IG5hbWUuXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0ge0V2ZW50RW1pdHRlcn0gZW1pdHRlciBSZWZlcmVuY2UgdG8gdGhlIGBFdmVudEVtaXR0ZXJgIGluc3RhbmNlLlxuXHRcdCAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldnQgVGhlIEV2ZW50IG5hbWUuXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBjbGVhckV2ZW50KGVtaXR0ZXIsIGV2dCkge1xuXHRcdCAgaWYgKC0tZW1pdHRlci5fZXZlbnRzQ291bnQgPT09IDApIGVtaXR0ZXIuX2V2ZW50cyA9IG5ldyBFdmVudHMoKTtcblx0XHQgIGVsc2UgZGVsZXRlIGVtaXR0ZXIuX2V2ZW50c1tldnRdO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIE1pbmltYWwgYEV2ZW50RW1pdHRlcmAgaW50ZXJmYWNlIHRoYXQgaXMgbW9sZGVkIGFnYWluc3QgdGhlIE5vZGUuanNcblx0XHQgKiBgRXZlbnRFbWl0dGVyYCBpbnRlcmZhY2UuXG5cdFx0ICpcblx0XHQgKiBAY29uc3RydWN0b3Jcblx0XHQgKiBAcHVibGljXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gRXZlbnRFbWl0dGVyKCkge1xuXHRcdCAgdGhpcy5fZXZlbnRzID0gbmV3IEV2ZW50cygpO1xuXHRcdCAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybiBhbiBhcnJheSBsaXN0aW5nIHRoZSBldmVudHMgZm9yIHdoaWNoIHRoZSBlbWl0dGVyIGhhcyByZWdpc3RlcmVkXG5cdFx0ICogbGlzdGVuZXJzLlxuXHRcdCAqXG5cdFx0ICogQHJldHVybnMge0FycmF5fVxuXHRcdCAqIEBwdWJsaWNcblx0XHQgKi9cblx0XHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbiBldmVudE5hbWVzKCkge1xuXHRcdCAgdmFyIG5hbWVzID0gW11cblx0XHQgICAgLCBldmVudHNcblx0XHQgICAgLCBuYW1lO1xuXG5cdFx0ICBpZiAodGhpcy5fZXZlbnRzQ291bnQgPT09IDApIHJldHVybiBuYW1lcztcblxuXHRcdCAgZm9yIChuYW1lIGluIChldmVudHMgPSB0aGlzLl9ldmVudHMpKSB7XG5cdFx0ICAgIGlmIChoYXMuY2FsbChldmVudHMsIG5hbWUpKSBuYW1lcy5wdXNoKHByZWZpeCA/IG5hbWUuc2xpY2UoMSkgOiBuYW1lKTtcblx0XHQgIH1cblxuXHRcdCAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHtcblx0XHQgICAgcmV0dXJuIG5hbWVzLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGV2ZW50cykpO1xuXHRcdCAgfVxuXG5cdFx0ICByZXR1cm4gbmFtZXM7XG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybiB0aGUgbGlzdGVuZXJzIHJlZ2lzdGVyZWQgZm9yIGEgZ2l2ZW4gZXZlbnQuXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG5cdFx0ICogQHJldHVybnMge0FycmF5fSBUaGUgcmVnaXN0ZXJlZCBsaXN0ZW5lcnMuXG5cdFx0ICogQHB1YmxpY1xuXHRcdCAqL1xuXHRcdEV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24gbGlzdGVuZXJzKGV2ZW50KSB7XG5cdFx0ICB2YXIgZXZ0ID0gcHJlZml4ID8gcHJlZml4ICsgZXZlbnQgOiBldmVudFxuXHRcdCAgICAsIGhhbmRsZXJzID0gdGhpcy5fZXZlbnRzW2V2dF07XG5cblx0XHQgIGlmICghaGFuZGxlcnMpIHJldHVybiBbXTtcblx0XHQgIGlmIChoYW5kbGVycy5mbikgcmV0dXJuIFtoYW5kbGVycy5mbl07XG5cblx0XHQgIGZvciAodmFyIGkgPSAwLCBsID0gaGFuZGxlcnMubGVuZ3RoLCBlZSA9IG5ldyBBcnJheShsKTsgaSA8IGw7IGkrKykge1xuXHRcdCAgICBlZVtpXSA9IGhhbmRsZXJzW2ldLmZuO1xuXHRcdCAgfVxuXG5cdFx0ICByZXR1cm4gZWU7XG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIFJldHVybiB0aGUgbnVtYmVyIG9mIGxpc3RlbmVycyBsaXN0ZW5pbmcgdG8gYSBnaXZlbiBldmVudC5cblx0XHQgKlxuXHRcdCAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cblx0XHQgKiBAcmV0dXJucyB7TnVtYmVyfSBUaGUgbnVtYmVyIG9mIGxpc3RlbmVycy5cblx0XHQgKiBAcHVibGljXG5cdFx0ICovXG5cdFx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24gbGlzdGVuZXJDb3VudChldmVudCkge1xuXHRcdCAgdmFyIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnRcblx0XHQgICAgLCBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbZXZ0XTtcblxuXHRcdCAgaWYgKCFsaXN0ZW5lcnMpIHJldHVybiAwO1xuXHRcdCAgaWYgKGxpc3RlbmVycy5mbikgcmV0dXJuIDE7XG5cdFx0ICByZXR1cm4gbGlzdGVuZXJzLmxlbmd0aDtcblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogQ2FsbHMgZWFjaCBvZiB0aGUgbGlzdGVuZXJzIHJlZ2lzdGVyZWQgZm9yIGEgZ2l2ZW4gZXZlbnQuXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG5cdFx0ICogQHJldHVybnMge0Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgZXZlbnQgaGFkIGxpc3RlbmVycywgZWxzZSBgZmFsc2VgLlxuXHRcdCAqIEBwdWJsaWNcblx0XHQgKi9cblx0XHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbiBlbWl0KGV2ZW50LCBhMSwgYTIsIGEzLCBhNCwgYTUpIHtcblx0XHQgIHZhciBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50O1xuXG5cdFx0ICBpZiAoIXRoaXMuX2V2ZW50c1tldnRdKSByZXR1cm4gZmFsc2U7XG5cblx0XHQgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9ldmVudHNbZXZ0XVxuXHRcdCAgICAsIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGhcblx0XHQgICAgLCBhcmdzXG5cdFx0ICAgICwgaTtcblxuXHRcdCAgaWYgKGxpc3RlbmVycy5mbikge1xuXHRcdCAgICBpZiAobGlzdGVuZXJzLm9uY2UpIHRoaXMucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVycy5mbiwgdW5kZWZpbmVkLCB0cnVlKTtcblxuXHRcdCAgICBzd2l0Y2ggKGxlbikge1xuXHRcdCAgICAgIGNhc2UgMTogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0KSwgdHJ1ZTtcblx0XHQgICAgICBjYXNlIDI6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEpLCB0cnVlO1xuXHRcdCAgICAgIGNhc2UgMzogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIpLCB0cnVlO1xuXHRcdCAgICAgIGNhc2UgNDogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIsIGEzKSwgdHJ1ZTtcblx0XHQgICAgICBjYXNlIDU6IHJldHVybiBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgYTEsIGEyLCBhMywgYTQpLCB0cnVlO1xuXHRcdCAgICAgIGNhc2UgNjogcmV0dXJuIGxpc3RlbmVycy5mbi5jYWxsKGxpc3RlbmVycy5jb250ZXh0LCBhMSwgYTIsIGEzLCBhNCwgYTUpLCB0cnVlO1xuXHRcdCAgICB9XG5cblx0XHQgICAgZm9yIChpID0gMSwgYXJncyA9IG5ldyBBcnJheShsZW4gLTEpOyBpIDwgbGVuOyBpKyspIHtcblx0XHQgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcblx0XHQgICAgfVxuXG5cdFx0ICAgIGxpc3RlbmVycy5mbi5hcHBseShsaXN0ZW5lcnMuY29udGV4dCwgYXJncyk7XG5cdFx0ICB9IGVsc2Uge1xuXHRcdCAgICB2YXIgbGVuZ3RoID0gbGlzdGVuZXJzLmxlbmd0aFxuXHRcdCAgICAgICwgajtcblxuXHRcdCAgICBmb3IgKGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0XHQgICAgICBpZiAobGlzdGVuZXJzW2ldLm9uY2UpIHRoaXMucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyc1tpXS5mbiwgdW5kZWZpbmVkLCB0cnVlKTtcblxuXHRcdCAgICAgIHN3aXRjaCAobGVuKSB7XG5cdFx0ICAgICAgICBjYXNlIDE6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0KTsgYnJlYWs7XG5cdFx0ICAgICAgICBjYXNlIDI6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhMSk7IGJyZWFrO1xuXHRcdCAgICAgICAgY2FzZSAzOiBsaXN0ZW5lcnNbaV0uZm4uY2FsbChsaXN0ZW5lcnNbaV0uY29udGV4dCwgYTEsIGEyKTsgYnJlYWs7XG5cdFx0ICAgICAgICBjYXNlIDQ6IGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0LCBhMSwgYTIsIGEzKTsgYnJlYWs7XG5cdFx0ICAgICAgICBkZWZhdWx0OlxuXHRcdCAgICAgICAgICBpZiAoIWFyZ3MpIGZvciAoaiA9IDEsIGFyZ3MgPSBuZXcgQXJyYXkobGVuIC0xKTsgaiA8IGxlbjsgaisrKSB7XG5cdFx0ICAgICAgICAgICAgYXJnc1tqIC0gMV0gPSBhcmd1bWVudHNbal07XG5cdFx0ICAgICAgICAgIH1cblxuXHRcdCAgICAgICAgICBsaXN0ZW5lcnNbaV0uZm4uYXBwbHkobGlzdGVuZXJzW2ldLmNvbnRleHQsIGFyZ3MpO1xuXHRcdCAgICAgIH1cblx0XHQgICAgfVxuXHRcdCAgfVxuXG5cdFx0ICByZXR1cm4gdHJ1ZTtcblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogQWRkIGEgbGlzdGVuZXIgZm9yIGEgZ2l2ZW4gZXZlbnQuXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG5cdFx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLlxuXHRcdCAqIEBwYXJhbSB7Kn0gW2NvbnRleHQ9dGhpc10gVGhlIGNvbnRleHQgdG8gaW52b2tlIHRoZSBsaXN0ZW5lciB3aXRoLlxuXHRcdCAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cblx0XHQgKiBAcHVibGljXG5cdFx0ICovXG5cdFx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIG9uKGV2ZW50LCBmbiwgY29udGV4dCkge1xuXHRcdCAgcmV0dXJuIGFkZExpc3RlbmVyKHRoaXMsIGV2ZW50LCBmbiwgY29udGV4dCwgZmFsc2UpO1xuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBBZGQgYSBvbmUtdGltZSBsaXN0ZW5lciBmb3IgYSBnaXZlbiBldmVudC5cblx0XHQgKlxuXHRcdCAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBldmVudCBUaGUgZXZlbnQgbmFtZS5cblx0XHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgbGlzdGVuZXIgZnVuY3Rpb24uXG5cdFx0ICogQHBhcmFtIHsqfSBbY29udGV4dD10aGlzXSBUaGUgY29udGV4dCB0byBpbnZva2UgdGhlIGxpc3RlbmVyIHdpdGguXG5cdFx0ICogQHJldHVybnMge0V2ZW50RW1pdHRlcn0gYHRoaXNgLlxuXHRcdCAqIEBwdWJsaWNcblx0XHQgKi9cblx0XHRFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlKGV2ZW50LCBmbiwgY29udGV4dCkge1xuXHRcdCAgcmV0dXJuIGFkZExpc3RlbmVyKHRoaXMsIGV2ZW50LCBmbiwgY29udGV4dCwgdHJ1ZSk7XG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIFJlbW92ZSB0aGUgbGlzdGVuZXJzIG9mIGEgZ2l2ZW4gZXZlbnQuXG5cdFx0ICpcblx0XHQgKiBAcGFyYW0geyhTdHJpbmd8U3ltYm9sKX0gZXZlbnQgVGhlIGV2ZW50IG5hbWUuXG5cdFx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gT25seSByZW1vdmUgdGhlIGxpc3RlbmVycyB0aGF0IG1hdGNoIHRoaXMgZnVuY3Rpb24uXG5cdFx0ICogQHBhcmFtIHsqfSBjb250ZXh0IE9ubHkgcmVtb3ZlIHRoZSBsaXN0ZW5lcnMgdGhhdCBoYXZlIHRoaXMgY29udGV4dC5cblx0XHQgKiBAcGFyYW0ge0Jvb2xlYW59IG9uY2UgT25seSByZW1vdmUgb25lLXRpbWUgbGlzdGVuZXJzLlxuXHRcdCAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cblx0XHQgKiBAcHVibGljXG5cdFx0ICovXG5cdFx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uIHJlbW92ZUxpc3RlbmVyKGV2ZW50LCBmbiwgY29udGV4dCwgb25jZSkge1xuXHRcdCAgdmFyIGV2dCA9IHByZWZpeCA/IHByZWZpeCArIGV2ZW50IDogZXZlbnQ7XG5cblx0XHQgIGlmICghdGhpcy5fZXZlbnRzW2V2dF0pIHJldHVybiB0aGlzO1xuXHRcdCAgaWYgKCFmbikge1xuXHRcdCAgICBjbGVhckV2ZW50KHRoaXMsIGV2dCk7XG5cdFx0ICAgIHJldHVybiB0aGlzO1xuXHRcdCAgfVxuXG5cdFx0ICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fZXZlbnRzW2V2dF07XG5cblx0XHQgIGlmIChsaXN0ZW5lcnMuZm4pIHtcblx0XHQgICAgaWYgKFxuXHRcdCAgICAgIGxpc3RlbmVycy5mbiA9PT0gZm4gJiZcblx0XHQgICAgICAoIW9uY2UgfHwgbGlzdGVuZXJzLm9uY2UpICYmXG5cdFx0ICAgICAgKCFjb250ZXh0IHx8IGxpc3RlbmVycy5jb250ZXh0ID09PSBjb250ZXh0KVxuXHRcdCAgICApIHtcblx0XHQgICAgICBjbGVhckV2ZW50KHRoaXMsIGV2dCk7XG5cdFx0ICAgIH1cblx0XHQgIH0gZWxzZSB7XG5cdFx0ICAgIGZvciAodmFyIGkgPSAwLCBldmVudHMgPSBbXSwgbGVuZ3RoID0gbGlzdGVuZXJzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdFx0ICAgICAgaWYgKFxuXHRcdCAgICAgICAgbGlzdGVuZXJzW2ldLmZuICE9PSBmbiB8fFxuXHRcdCAgICAgICAgKG9uY2UgJiYgIWxpc3RlbmVyc1tpXS5vbmNlKSB8fFxuXHRcdCAgICAgICAgKGNvbnRleHQgJiYgbGlzdGVuZXJzW2ldLmNvbnRleHQgIT09IGNvbnRleHQpXG5cdFx0ICAgICAgKSB7XG5cdFx0ICAgICAgICBldmVudHMucHVzaChsaXN0ZW5lcnNbaV0pO1xuXHRcdCAgICAgIH1cblx0XHQgICAgfVxuXG5cdFx0ICAgIC8vXG5cdFx0ICAgIC8vIFJlc2V0IHRoZSBhcnJheSwgb3IgcmVtb3ZlIGl0IGNvbXBsZXRlbHkgaWYgd2UgaGF2ZSBubyBtb3JlIGxpc3RlbmVycy5cblx0XHQgICAgLy9cblx0XHQgICAgaWYgKGV2ZW50cy5sZW5ndGgpIHRoaXMuX2V2ZW50c1tldnRdID0gZXZlbnRzLmxlbmd0aCA9PT0gMSA/IGV2ZW50c1swXSA6IGV2ZW50cztcblx0XHQgICAgZWxzZSBjbGVhckV2ZW50KHRoaXMsIGV2dCk7XG5cdFx0ICB9XG5cblx0XHQgIHJldHVybiB0aGlzO1xuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBSZW1vdmUgYWxsIGxpc3RlbmVycywgb3IgdGhvc2Ugb2YgdGhlIHNwZWNpZmllZCBldmVudC5cblx0XHQgKlxuXHRcdCAqIEBwYXJhbSB7KFN0cmluZ3xTeW1ib2wpfSBbZXZlbnRdIFRoZSBldmVudCBuYW1lLlxuXHRcdCAqIEByZXR1cm5zIHtFdmVudEVtaXR0ZXJ9IGB0aGlzYC5cblx0XHQgKiBAcHVibGljXG5cdFx0ICovXG5cdFx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBmdW5jdGlvbiByZW1vdmVBbGxMaXN0ZW5lcnMoZXZlbnQpIHtcblx0XHQgIHZhciBldnQ7XG5cblx0XHQgIGlmIChldmVudCkge1xuXHRcdCAgICBldnQgPSBwcmVmaXggPyBwcmVmaXggKyBldmVudCA6IGV2ZW50O1xuXHRcdCAgICBpZiAodGhpcy5fZXZlbnRzW2V2dF0pIGNsZWFyRXZlbnQodGhpcywgZXZ0KTtcblx0XHQgIH0gZWxzZSB7XG5cdFx0ICAgIHRoaXMuX2V2ZW50cyA9IG5ldyBFdmVudHMoKTtcblx0XHQgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuXHRcdCAgfVxuXG5cdFx0ICByZXR1cm4gdGhpcztcblx0XHR9O1xuXG5cdFx0Ly9cblx0XHQvLyBBbGlhcyBtZXRob2RzIG5hbWVzIGJlY2F1c2UgcGVvcGxlIHJvbGwgbGlrZSB0aGF0LlxuXHRcdC8vXG5cdFx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vZmYgPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyO1xuXHRcdEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXIgPSBFdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uO1xuXG5cdFx0Ly9cblx0XHQvLyBFeHBvc2UgdGhlIHByZWZpeC5cblx0XHQvL1xuXHRcdEV2ZW50RW1pdHRlci5wcmVmaXhlZCA9IHByZWZpeDtcblxuXHRcdC8vXG5cdFx0Ly8gQWxsb3cgYEV2ZW50RW1pdHRlcmAgdG8gYmUgaW1wb3J0ZWQgYXMgbW9kdWxlIG5hbWVzcGFjZS5cblx0XHQvL1xuXHRcdEV2ZW50RW1pdHRlci5FdmVudEVtaXR0ZXIgPSBFdmVudEVtaXR0ZXI7XG5cblx0XHQvL1xuXHRcdC8vIEV4cG9zZSB0aGUgbW9kdWxlLlxuXHRcdC8vXG5cdFx0e1xuXHRcdCAgbW9kdWxlLmV4cG9ydHMgPSBFdmVudEVtaXR0ZXI7XG5cdFx0fSBcblx0fSAoZXZlbnRlbWl0dGVyMykpO1xuXHRyZXR1cm4gZXZlbnRlbWl0dGVyMy5leHBvcnRzO1xufVxuXG5leHBvcnQgeyByZXF1aXJlRXZlbnRlbWl0dGVyMyBhcyBfX3JlcXVpcmUgfTtcbiIsImltcG9ydCB7IGNvbW1vbmpzR2xvYmFsIH0gZnJvbSAnLi4vLi4vX3ZpcnR1YWwvX2NvbW1vbmpzSGVscGVycy5tanMnO1xuaW1wb3J0IHsgX19tb2R1bGUgYXMgbG9kYXNoX3RyYW5zZm9ybSB9IGZyb20gJy4uLy4uL192aXJ0dWFsL2luZGV4My5tanMnO1xuXG4vKipcbiAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cbmxvZGFzaF90cmFuc2Zvcm0uZXhwb3J0cztcblxudmFyIGhhc1JlcXVpcmVkTG9kYXNoX3RyYW5zZm9ybTtcblxuZnVuY3Rpb24gcmVxdWlyZUxvZGFzaF90cmFuc2Zvcm0gKCkge1xuXHRpZiAoaGFzUmVxdWlyZWRMb2Rhc2hfdHJhbnNmb3JtKSByZXR1cm4gbG9kYXNoX3RyYW5zZm9ybS5leHBvcnRzO1xuXHRoYXNSZXF1aXJlZExvZGFzaF90cmFuc2Zvcm0gPSAxO1xuXHQoZnVuY3Rpb24gKG1vZHVsZSwgZXhwb3J0cykge1xuXHRcdC8qKiBVc2VkIGFzIHRoZSBzaXplIHRvIGVuYWJsZSBsYXJnZSBhcnJheSBvcHRpbWl6YXRpb25zLiAqL1xuXHRcdHZhciBMQVJHRV9BUlJBWV9TSVpFID0gMjAwO1xuXG5cdFx0LyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cblx0XHR2YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG5cdFx0LyoqIFVzZWQgdG8gc3RhbmQtaW4gZm9yIGB1bmRlZmluZWRgIGhhc2ggdmFsdWVzLiAqL1xuXHRcdHZhciBIQVNIX1VOREVGSU5FRCA9ICdfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fJztcblxuXHRcdC8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNvbXBhcmlzb24gc3R5bGVzLiAqL1xuXHRcdHZhciBVTk9SREVSRURfQ09NUEFSRV9GTEFHID0gMSxcblx0XHQgICAgUEFSVElBTF9DT01QQVJFX0ZMQUcgPSAyO1xuXG5cdFx0LyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG5cdFx0dmFyIElORklOSVRZID0gMSAvIDAsXG5cdFx0ICAgIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXG5cdFx0LyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuXHRcdHZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXG5cdFx0ICAgIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJyxcblx0XHQgICAgYm9vbFRhZyA9ICdbb2JqZWN0IEJvb2xlYW5dJyxcblx0XHQgICAgZGF0ZVRhZyA9ICdbb2JqZWN0IERhdGVdJyxcblx0XHQgICAgZXJyb3JUYWcgPSAnW29iamVjdCBFcnJvcl0nLFxuXHRcdCAgICBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJyxcblx0XHQgICAgZ2VuVGFnID0gJ1tvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dJyxcblx0XHQgICAgbWFwVGFnID0gJ1tvYmplY3QgTWFwXScsXG5cdFx0ICAgIG51bWJlclRhZyA9ICdbb2JqZWN0IE51bWJlcl0nLFxuXHRcdCAgICBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJyxcblx0XHQgICAgcHJvbWlzZVRhZyA9ICdbb2JqZWN0IFByb21pc2VdJyxcblx0XHQgICAgcmVnZXhwVGFnID0gJ1tvYmplY3QgUmVnRXhwXScsXG5cdFx0ICAgIHNldFRhZyA9ICdbb2JqZWN0IFNldF0nLFxuXHRcdCAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJyxcblx0XHQgICAgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXScsXG5cdFx0ICAgIHdlYWtNYXBUYWcgPSAnW29iamVjdCBXZWFrTWFwXSc7XG5cblx0XHR2YXIgYXJyYXlCdWZmZXJUYWcgPSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nLFxuXHRcdCAgICBkYXRhVmlld1RhZyA9ICdbb2JqZWN0IERhdGFWaWV3XScsXG5cdFx0ICAgIGZsb2F0MzJUYWcgPSAnW29iamVjdCBGbG9hdDMyQXJyYXldJyxcblx0XHQgICAgZmxvYXQ2NFRhZyA9ICdbb2JqZWN0IEZsb2F0NjRBcnJheV0nLFxuXHRcdCAgICBpbnQ4VGFnID0gJ1tvYmplY3QgSW50OEFycmF5XScsXG5cdFx0ICAgIGludDE2VGFnID0gJ1tvYmplY3QgSW50MTZBcnJheV0nLFxuXHRcdCAgICBpbnQzMlRhZyA9ICdbb2JqZWN0IEludDMyQXJyYXldJyxcblx0XHQgICAgdWludDhUYWcgPSAnW29iamVjdCBVaW50OEFycmF5XScsXG5cdFx0ICAgIHVpbnQ4Q2xhbXBlZFRhZyA9ICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XScsXG5cdFx0ICAgIHVpbnQxNlRhZyA9ICdbb2JqZWN0IFVpbnQxNkFycmF5XScsXG5cdFx0ICAgIHVpbnQzMlRhZyA9ICdbb2JqZWN0IFVpbnQzMkFycmF5XSc7XG5cblx0XHQvKiogVXNlZCB0byBtYXRjaCBwcm9wZXJ0eSBuYW1lcyB3aXRoaW4gcHJvcGVydHkgcGF0aHMuICovXG5cdFx0dmFyIHJlSXNEZWVwUHJvcCA9IC9cXC58XFxbKD86W15bXFxdXSp8KFtcIiddKSg/Oig/IVxcMSlbXlxcXFxdfFxcXFwuKSo/XFwxKVxcXS8sXG5cdFx0ICAgIHJlSXNQbGFpblByb3AgPSAvXlxcdyokLyxcblx0XHQgICAgcmVMZWFkaW5nRG90ID0gL15cXC4vLFxuXHRcdCAgICByZVByb3BOYW1lID0gL1teLltcXF1dK3xcXFsoPzooLT9cXGQrKD86XFwuXFxkKyk/KXwoW1wiJ10pKCg/Oig/IVxcMilbXlxcXFxdfFxcXFwuKSo/KVxcMilcXF18KD89KD86XFwufFxcW1xcXSkoPzpcXC58XFxbXFxdfCQpKS9nO1xuXG5cdFx0LyoqXG5cdFx0ICogVXNlZCB0byBtYXRjaCBgUmVnRXhwYFxuXHRcdCAqIFtzeW50YXggY2hhcmFjdGVyc10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtcGF0dGVybnMpLlxuXHRcdCAqL1xuXHRcdHZhciByZVJlZ0V4cENoYXIgPSAvW1xcXFxeJC4qKz8oKVtcXF17fXxdL2c7XG5cblx0XHQvKiogVXNlZCB0byBtYXRjaCBiYWNrc2xhc2hlcyBpbiBwcm9wZXJ0eSBwYXRocy4gKi9cblx0XHR2YXIgcmVFc2NhcGVDaGFyID0gL1xcXFwoXFxcXCk/L2c7XG5cblx0XHQvKiogVXNlZCB0byBkZXRlY3QgaG9zdCBjb25zdHJ1Y3RvcnMgKFNhZmFyaSkuICovXG5cdFx0dmFyIHJlSXNIb3N0Q3RvciA9IC9eXFxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXFxdJC87XG5cblx0XHQvKiogVXNlZCB0byBkZXRlY3QgdW5zaWduZWQgaW50ZWdlciB2YWx1ZXMuICovXG5cdFx0dmFyIHJlSXNVaW50ID0gL14oPzowfFsxLTldXFxkKikkLztcblxuXHRcdC8qKiBVc2VkIHRvIGlkZW50aWZ5IGB0b1N0cmluZ1RhZ2AgdmFsdWVzIG9mIHR5cGVkIGFycmF5cy4gKi9cblx0XHR2YXIgdHlwZWRBcnJheVRhZ3MgPSB7fTtcblx0XHR0eXBlZEFycmF5VGFnc1tmbG9hdDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Zsb2F0NjRUYWddID1cblx0XHR0eXBlZEFycmF5VGFnc1tpbnQ4VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2ludDE2VGFnXSA9XG5cdFx0dHlwZWRBcnJheVRhZ3NbaW50MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDhUYWddID1cblx0XHR0eXBlZEFycmF5VGFnc1t1aW50OENsYW1wZWRUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDE2VGFnXSA9XG5cdFx0dHlwZWRBcnJheVRhZ3NbdWludDMyVGFnXSA9IHRydWU7XG5cdFx0dHlwZWRBcnJheVRhZ3NbYXJnc1RhZ10gPSB0eXBlZEFycmF5VGFnc1thcnJheVRhZ10gPVxuXHRcdHR5cGVkQXJyYXlUYWdzW2FycmF5QnVmZmVyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Jvb2xUYWddID1cblx0XHR0eXBlZEFycmF5VGFnc1tkYXRhVmlld1RhZ10gPSB0eXBlZEFycmF5VGFnc1tkYXRlVGFnXSA9XG5cdFx0dHlwZWRBcnJheVRhZ3NbZXJyb3JUYWddID0gdHlwZWRBcnJheVRhZ3NbZnVuY1RhZ10gPVxuXHRcdHR5cGVkQXJyYXlUYWdzW21hcFRhZ10gPSB0eXBlZEFycmF5VGFnc1tudW1iZXJUYWddID1cblx0XHR0eXBlZEFycmF5VGFnc1tvYmplY3RUYWddID0gdHlwZWRBcnJheVRhZ3NbcmVnZXhwVGFnXSA9XG5cdFx0dHlwZWRBcnJheVRhZ3Nbc2V0VGFnXSA9IHR5cGVkQXJyYXlUYWdzW3N0cmluZ1RhZ10gPVxuXHRcdHR5cGVkQXJyYXlUYWdzW3dlYWtNYXBUYWddID0gZmFsc2U7XG5cblx0XHQvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xuXHRcdHZhciBmcmVlR2xvYmFsID0gdHlwZW9mIGNvbW1vbmpzR2xvYmFsID09ICdvYmplY3QnICYmIGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLk9iamVjdCA9PT0gT2JqZWN0ICYmIGNvbW1vbmpzR2xvYmFsO1xuXG5cdFx0LyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBzZWxmYC4gKi9cblx0XHR2YXIgZnJlZVNlbGYgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmICYmIHNlbGYuT2JqZWN0ID09PSBPYmplY3QgJiYgc2VsZjtcblxuXHRcdC8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xuXHRcdHZhciByb290ID0gZnJlZUdsb2JhbCB8fCBmcmVlU2VsZiB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG5cdFx0LyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBleHBvcnRzYC4gKi9cblx0XHR2YXIgZnJlZUV4cG9ydHMgPSBleHBvcnRzICYmICFleHBvcnRzLm5vZGVUeXBlICYmIGV4cG9ydHM7XG5cblx0XHQvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYG1vZHVsZWAuICovXG5cdFx0dmFyIGZyZWVNb2R1bGUgPSBmcmVlRXhwb3J0cyAmJiAnb2JqZWN0JyA9PSAnb2JqZWN0JyAmJiBtb2R1bGUgJiYgIW1vZHVsZS5ub2RlVHlwZSAmJiBtb2R1bGU7XG5cblx0XHQvKiogRGV0ZWN0IHRoZSBwb3B1bGFyIENvbW1vbkpTIGV4dGVuc2lvbiBgbW9kdWxlLmV4cG9ydHNgLiAqL1xuXHRcdHZhciBtb2R1bGVFeHBvcnRzID0gZnJlZU1vZHVsZSAmJiBmcmVlTW9kdWxlLmV4cG9ydHMgPT09IGZyZWVFeHBvcnRzO1xuXG5cdFx0LyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBwcm9jZXNzYCBmcm9tIE5vZGUuanMuICovXG5cdFx0dmFyIGZyZWVQcm9jZXNzID0gbW9kdWxlRXhwb3J0cyAmJiBmcmVlR2xvYmFsLnByb2Nlc3M7XG5cblx0XHQvKiogVXNlZCB0byBhY2Nlc3MgZmFzdGVyIE5vZGUuanMgaGVscGVycy4gKi9cblx0XHR2YXIgbm9kZVV0aWwgPSAoZnVuY3Rpb24oKSB7XG5cdFx0ICB0cnkge1xuXHRcdCAgICByZXR1cm4gZnJlZVByb2Nlc3MgJiYgZnJlZVByb2Nlc3MuYmluZGluZygndXRpbCcpO1xuXHRcdCAgfSBjYXRjaCAoZSkge31cblx0XHR9KCkpO1xuXG5cdFx0LyogTm9kZS5qcyBoZWxwZXIgcmVmZXJlbmNlcy4gKi9cblx0XHR2YXIgbm9kZUlzVHlwZWRBcnJheSA9IG5vZGVVdGlsICYmIG5vZGVVdGlsLmlzVHlwZWRBcnJheTtcblxuXHRcdC8qKlxuXHRcdCAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5mb3JFYWNoYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3Jcblx0XHQgKiBpdGVyYXRlZSBzaG9ydGhhbmRzLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0ge0FycmF5fSBbYXJyYXldIFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG5cdFx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cblx0XHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgYGFycmF5YC5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBhcnJheUVhY2goYXJyYXksIGl0ZXJhdGVlKSB7XG5cdFx0ICB2YXIgaW5kZXggPSAtMSxcblx0XHQgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG5cblx0XHQgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdFx0ICAgIGlmIChpdGVyYXRlZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkgPT09IGZhbHNlKSB7XG5cdFx0ICAgICAgYnJlYWs7XG5cdFx0ICAgIH1cblx0XHQgIH1cblx0XHQgIHJldHVybiBhcnJheTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uc29tZWAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlXG5cdFx0ICogc2hvcnRoYW5kcy5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHtBcnJheX0gW2FycmF5XSBUaGUgYXJyYXkgdG8gaXRlcmF0ZSBvdmVyLlxuXHRcdCAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuXHRcdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgZWxlbWVudCBwYXNzZXMgdGhlIHByZWRpY2F0ZSBjaGVjayxcblx0XHQgKiAgZWxzZSBgZmFsc2VgLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGFycmF5U29tZShhcnJheSwgcHJlZGljYXRlKSB7XG5cdFx0ICB2YXIgaW5kZXggPSAtMSxcblx0XHQgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG5cblx0XHQgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdFx0ICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XG5cdFx0ICAgICAgcmV0dXJuIHRydWU7XG5cdFx0ICAgIH1cblx0XHQgIH1cblx0XHQgIHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5wcm9wZXJ0eWAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0XHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhY2Nlc3NvciBmdW5jdGlvbi5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBiYXNlUHJvcGVydHkoa2V5KSB7XG5cdFx0ICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG5cdFx0ICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuXHRcdCAgfTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50aW1lc2Agd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzXG5cdFx0ICogb3IgbWF4IGFycmF5IGxlbmd0aCBjaGVja3MuXG5cdFx0ICpcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgdGltZXMgdG8gaW52b2tlIGBpdGVyYXRlZWAuXG5cdFx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cblx0XHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHJlc3VsdHMuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gYmFzZVRpbWVzKG4sIGl0ZXJhdGVlKSB7XG5cdFx0ICB2YXIgaW5kZXggPSAtMSxcblx0XHQgICAgICByZXN1bHQgPSBBcnJheShuKTtcblxuXHRcdCAgd2hpbGUgKCsraW5kZXggPCBuKSB7XG5cdFx0ICAgIHJlc3VsdFtpbmRleF0gPSBpdGVyYXRlZShpbmRleCk7XG5cdFx0ICB9XG5cdFx0ICByZXR1cm4gcmVzdWx0O1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnVuYXJ5YCB3aXRob3V0IHN1cHBvcnQgZm9yIHN0b3JpbmcgbWV0YWRhdGEuXG5cdFx0ICpcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNhcCBhcmd1bWVudHMgZm9yLlxuXHRcdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGNhcHBlZCBmdW5jdGlvbi5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBiYXNlVW5hcnkoZnVuYykge1xuXHRcdCAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0ICAgIHJldHVybiBmdW5jKHZhbHVlKTtcblx0XHQgIH07XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogR2V0cyB0aGUgdmFsdWUgYXQgYGtleWAgb2YgYG9iamVjdGAuXG5cdFx0ICpcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHRcdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZS5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBnZXRWYWx1ZShvYmplY3QsIGtleSkge1xuXHRcdCAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBob3N0IG9iamVjdCBpbiBJRSA8IDkuXG5cdFx0ICpcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHRcdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgaG9zdCBvYmplY3QsIGVsc2UgYGZhbHNlYC5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBpc0hvc3RPYmplY3QodmFsdWUpIHtcblx0XHQgIC8vIE1hbnkgaG9zdCBvYmplY3RzIGFyZSBgT2JqZWN0YCBvYmplY3RzIHRoYXQgY2FuIGNvZXJjZSB0byBzdHJpbmdzXG5cdFx0ICAvLyBkZXNwaXRlIGhhdmluZyBpbXByb3Blcmx5IGRlZmluZWQgYHRvU3RyaW5nYCBtZXRob2RzLlxuXHRcdCAgdmFyIHJlc3VsdCA9IGZhbHNlO1xuXHRcdCAgaWYgKHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlLnRvU3RyaW5nICE9ICdmdW5jdGlvbicpIHtcblx0XHQgICAgdHJ5IHtcblx0XHQgICAgICByZXN1bHQgPSAhISh2YWx1ZSArICcnKTtcblx0XHQgICAgfSBjYXRjaCAoZSkge31cblx0XHQgIH1cblx0XHQgIHJldHVybiByZXN1bHQ7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogQ29udmVydHMgYG1hcGAgdG8gaXRzIGtleS12YWx1ZSBwYWlycy5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IG1hcCBUaGUgbWFwIHRvIGNvbnZlcnQuXG5cdFx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBrZXktdmFsdWUgcGFpcnMuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gbWFwVG9BcnJheShtYXApIHtcblx0XHQgIHZhciBpbmRleCA9IC0xLFxuXHRcdCAgICAgIHJlc3VsdCA9IEFycmF5KG1hcC5zaXplKTtcblxuXHRcdCAgbWFwLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIGtleSkge1xuXHRcdCAgICByZXN1bHRbKytpbmRleF0gPSBba2V5LCB2YWx1ZV07XG5cdFx0ICB9KTtcblx0XHQgIHJldHVybiByZXN1bHQ7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogQ3JlYXRlcyBhIHVuYXJ5IGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2Agd2l0aCBpdHMgYXJndW1lbnQgdHJhbnNmb3JtZWQuXG5cdFx0ICpcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHdyYXAuXG5cdFx0ICogQHBhcmFtIHtGdW5jdGlvbn0gdHJhbnNmb3JtIFRoZSBhcmd1bWVudCB0cmFuc2Zvcm0uXG5cdFx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gb3ZlckFyZyhmdW5jLCB0cmFuc2Zvcm0pIHtcblx0XHQgIHJldHVybiBmdW5jdGlvbihhcmcpIHtcblx0XHQgICAgcmV0dXJuIGZ1bmModHJhbnNmb3JtKGFyZykpO1xuXHRcdCAgfTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBDb252ZXJ0cyBgc2V0YCB0byBhbiBhcnJheSBvZiBpdHMgdmFsdWVzLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gc2V0IFRoZSBzZXQgdG8gY29udmVydC5cblx0XHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHZhbHVlcy5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBzZXRUb0FycmF5KHNldCkge1xuXHRcdCAgdmFyIGluZGV4ID0gLTEsXG5cdFx0ICAgICAgcmVzdWx0ID0gQXJyYXkoc2V0LnNpemUpO1xuXG5cdFx0ICBzZXQuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkge1xuXHRcdCAgICByZXN1bHRbKytpbmRleF0gPSB2YWx1ZTtcblx0XHQgIH0pO1xuXHRcdCAgcmV0dXJuIHJlc3VsdDtcblx0XHR9XG5cblx0XHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdFx0dmFyIGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGUsXG5cdFx0ICAgIGZ1bmNQcm90byA9IEZ1bmN0aW9uLnByb3RvdHlwZSxcblx0XHQgICAgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG5cdFx0LyoqIFVzZWQgdG8gZGV0ZWN0IG92ZXJyZWFjaGluZyBjb3JlLWpzIHNoaW1zLiAqL1xuXHRcdHZhciBjb3JlSnNEYXRhID0gcm9vdFsnX19jb3JlLWpzX3NoYXJlZF9fJ107XG5cblx0XHQvKiogVXNlZCB0byBkZXRlY3QgbWV0aG9kcyBtYXNxdWVyYWRpbmcgYXMgbmF0aXZlLiAqL1xuXHRcdHZhciBtYXNrU3JjS2V5ID0gKGZ1bmN0aW9uKCkge1xuXHRcdCAgdmFyIHVpZCA9IC9bXi5dKyQvLmV4ZWMoY29yZUpzRGF0YSAmJiBjb3JlSnNEYXRhLmtleXMgJiYgY29yZUpzRGF0YS5rZXlzLklFX1BST1RPIHx8ICcnKTtcblx0XHQgIHJldHVybiB1aWQgPyAoJ1N5bWJvbChzcmMpXzEuJyArIHVpZCkgOiAnJztcblx0XHR9KCkpO1xuXG5cdFx0LyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xuXHRcdHZhciBmdW5jVG9TdHJpbmcgPSBmdW5jUHJvdG8udG9TdHJpbmc7XG5cblx0XHQvKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cblx0XHR2YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuXHRcdC8qKlxuXHRcdCAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcblx0XHQgKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcblx0XHQgKiBvZiB2YWx1ZXMuXG5cdFx0ICovXG5cdFx0dmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cblx0XHQvKiogVXNlZCB0byBkZXRlY3QgaWYgYSBtZXRob2QgaXMgbmF0aXZlLiAqL1xuXHRcdHZhciByZUlzTmF0aXZlID0gUmVnRXhwKCdeJyArXG5cdFx0ICBmdW5jVG9TdHJpbmcuY2FsbChoYXNPd25Qcm9wZXJ0eSkucmVwbGFjZShyZVJlZ0V4cENoYXIsICdcXFxcJCYnKVxuXHRcdCAgLnJlcGxhY2UoL2hhc093blByb3BlcnR5fChmdW5jdGlvbikuKj8oPz1cXFxcXFwoKXwgZm9yIC4rPyg/PVxcXFxcXF0pL2csICckMS4qPycpICsgJyQnXG5cdFx0KTtcblxuXHRcdC8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xuXHRcdHZhciBTeW1ib2wgPSByb290LlN5bWJvbCxcblx0XHQgICAgVWludDhBcnJheSA9IHJvb3QuVWludDhBcnJheSxcblx0XHQgICAgZ2V0UHJvdG90eXBlID0gb3ZlckFyZyhPYmplY3QuZ2V0UHJvdG90eXBlT2YsIE9iamVjdCksXG5cdFx0ICAgIG9iamVjdENyZWF0ZSA9IE9iamVjdC5jcmVhdGUsXG5cdFx0ICAgIHByb3BlcnR5SXNFbnVtZXJhYmxlID0gb2JqZWN0UHJvdG8ucHJvcGVydHlJc0VudW1lcmFibGUsXG5cdFx0ICAgIHNwbGljZSA9IGFycmF5UHJvdG8uc3BsaWNlO1xuXG5cdFx0LyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xuXHRcdHZhciBuYXRpdmVLZXlzID0gb3ZlckFyZyhPYmplY3Qua2V5cywgT2JqZWN0KTtcblxuXHRcdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cblx0XHR2YXIgRGF0YVZpZXcgPSBnZXROYXRpdmUocm9vdCwgJ0RhdGFWaWV3JyksXG5cdFx0ICAgIE1hcCA9IGdldE5hdGl2ZShyb290LCAnTWFwJyksXG5cdFx0ICAgIFByb21pc2UgPSBnZXROYXRpdmUocm9vdCwgJ1Byb21pc2UnKSxcblx0XHQgICAgU2V0ID0gZ2V0TmF0aXZlKHJvb3QsICdTZXQnKSxcblx0XHQgICAgV2Vha01hcCA9IGdldE5hdGl2ZShyb290LCAnV2Vha01hcCcpLFxuXHRcdCAgICBuYXRpdmVDcmVhdGUgPSBnZXROYXRpdmUoT2JqZWN0LCAnY3JlYXRlJyk7XG5cblx0XHQvKiogVXNlZCB0byBkZXRlY3QgbWFwcywgc2V0cywgYW5kIHdlYWttYXBzLiAqL1xuXHRcdHZhciBkYXRhVmlld0N0b3JTdHJpbmcgPSB0b1NvdXJjZShEYXRhVmlldyksXG5cdFx0ICAgIG1hcEN0b3JTdHJpbmcgPSB0b1NvdXJjZShNYXApLFxuXHRcdCAgICBwcm9taXNlQ3RvclN0cmluZyA9IHRvU291cmNlKFByb21pc2UpLFxuXHRcdCAgICBzZXRDdG9yU3RyaW5nID0gdG9Tb3VyY2UoU2V0KSxcblx0XHQgICAgd2Vha01hcEN0b3JTdHJpbmcgPSB0b1NvdXJjZShXZWFrTWFwKTtcblxuXHRcdC8qKiBVc2VkIHRvIGNvbnZlcnQgc3ltYm9scyB0byBwcmltaXRpdmVzIGFuZCBzdHJpbmdzLiAqL1xuXHRcdHZhciBzeW1ib2xQcm90byA9IFN5bWJvbCA/IFN5bWJvbC5wcm90b3R5cGUgOiB1bmRlZmluZWQsXG5cdFx0ICAgIHN5bWJvbFZhbHVlT2YgPSBzeW1ib2xQcm90byA/IHN5bWJvbFByb3RvLnZhbHVlT2YgOiB1bmRlZmluZWQsXG5cdFx0ICAgIHN5bWJvbFRvU3RyaW5nID0gc3ltYm9sUHJvdG8gPyBzeW1ib2xQcm90by50b1N0cmluZyA6IHVuZGVmaW5lZDtcblxuXHRcdC8qKlxuXHRcdCAqIENyZWF0ZXMgYSBoYXNoIG9iamVjdC5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQGNvbnN0cnVjdG9yXG5cdFx0ICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gSGFzaChlbnRyaWVzKSB7XG5cdFx0ICB2YXIgaW5kZXggPSAtMSxcblx0XHQgICAgICBsZW5ndGggPSBlbnRyaWVzID8gZW50cmllcy5sZW5ndGggOiAwO1xuXG5cdFx0ICB0aGlzLmNsZWFyKCk7XG5cdFx0ICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHRcdCAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTtcblx0XHQgICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcblx0XHQgIH1cblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBoYXNoLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAbmFtZSBjbGVhclxuXHRcdCAqIEBtZW1iZXJPZiBIYXNoXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gaGFzaENsZWFyKCkge1xuXHRcdCAgdGhpcy5fX2RhdGFfXyA9IG5hdGl2ZUNyZWF0ZSA/IG5hdGl2ZUNyZWF0ZShudWxsKSA6IHt9O1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBoYXNoLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAbmFtZSBkZWxldGVcblx0XHQgKiBAbWVtYmVyT2YgSGFzaFxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBoYXNoIFRoZSBoYXNoIHRvIG1vZGlmeS5cblx0XHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cblx0XHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gaGFzaERlbGV0ZShrZXkpIHtcblx0XHQgIHJldHVybiB0aGlzLmhhcyhrZXkpICYmIGRlbGV0ZSB0aGlzLl9fZGF0YV9fW2tleV07XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogR2V0cyB0aGUgaGFzaCB2YWx1ZSBmb3IgYGtleWAuXG5cdFx0ICpcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBuYW1lIGdldFxuXHRcdCAqIEBtZW1iZXJPZiBIYXNoXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG5cdFx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGhhc2hHZXQoa2V5KSB7XG5cdFx0ICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX187XG5cdFx0ICBpZiAobmF0aXZlQ3JlYXRlKSB7XG5cdFx0ICAgIHZhciByZXN1bHQgPSBkYXRhW2tleV07XG5cdFx0ICAgIHJldHVybiByZXN1bHQgPT09IEhBU0hfVU5ERUZJTkVEID8gdW5kZWZpbmVkIDogcmVzdWx0O1xuXHRcdCAgfVxuXHRcdCAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwoZGF0YSwga2V5KSA/IGRhdGFba2V5XSA6IHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBDaGVja3MgaWYgYSBoYXNoIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG5cdFx0ICpcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBuYW1lIGhhc1xuXHRcdCAqIEBtZW1iZXJPZiBIYXNoXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cblx0XHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGhhc2hIYXMoa2V5KSB7XG5cdFx0ICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX187XG5cdFx0ICByZXR1cm4gbmF0aXZlQ3JlYXRlID8gZGF0YVtrZXldICE9PSB1bmRlZmluZWQgOiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsIGtleSk7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogU2V0cyB0aGUgaGFzaCBga2V5YCB0byBgdmFsdWVgLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAbmFtZSBzZXRcblx0XHQgKiBAbWVtYmVyT2YgSGFzaFxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuXHRcdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cblx0XHQgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBoYXNoIGluc3RhbmNlLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGhhc2hTZXQoa2V5LCB2YWx1ZSkge1xuXHRcdCAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuXHRcdCAgZGF0YVtrZXldID0gKG5hdGl2ZUNyZWF0ZSAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkKSA/IEhBU0hfVU5ERUZJTkVEIDogdmFsdWU7XG5cdFx0ICByZXR1cm4gdGhpcztcblx0XHR9XG5cblx0XHQvLyBBZGQgbWV0aG9kcyB0byBgSGFzaGAuXG5cdFx0SGFzaC5wcm90b3R5cGUuY2xlYXIgPSBoYXNoQ2xlYXI7XG5cdFx0SGFzaC5wcm90b3R5cGVbJ2RlbGV0ZSddID0gaGFzaERlbGV0ZTtcblx0XHRIYXNoLnByb3RvdHlwZS5nZXQgPSBoYXNoR2V0O1xuXHRcdEhhc2gucHJvdG90eXBlLmhhcyA9IGhhc2hIYXM7XG5cdFx0SGFzaC5wcm90b3R5cGUuc2V0ID0gaGFzaFNldDtcblxuXHRcdC8qKlxuXHRcdCAqIENyZWF0ZXMgYW4gbGlzdCBjYWNoZSBvYmplY3QuXG5cdFx0ICpcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBjb25zdHJ1Y3RvclxuXHRcdCAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIExpc3RDYWNoZShlbnRyaWVzKSB7XG5cdFx0ICB2YXIgaW5kZXggPSAtMSxcblx0XHQgICAgICBsZW5ndGggPSBlbnRyaWVzID8gZW50cmllcy5sZW5ndGggOiAwO1xuXG5cdFx0ICB0aGlzLmNsZWFyKCk7XG5cdFx0ICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHRcdCAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTtcblx0XHQgICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcblx0XHQgIH1cblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBsaXN0IGNhY2hlLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAbmFtZSBjbGVhclxuXHRcdCAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBsaXN0Q2FjaGVDbGVhcigpIHtcblx0XHQgIHRoaXMuX19kYXRhX18gPSBbXTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgbGlzdCBjYWNoZS5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQG5hbWUgZGVsZXRlXG5cdFx0ICogQG1lbWJlck9mIExpc3RDYWNoZVxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuXHRcdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBsaXN0Q2FjaGVEZWxldGUoa2V5KSB7XG5cdFx0ICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sXG5cdFx0ICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblxuXHRcdCAgaWYgKGluZGV4IDwgMCkge1xuXHRcdCAgICByZXR1cm4gZmFsc2U7XG5cdFx0ICB9XG5cdFx0ICB2YXIgbGFzdEluZGV4ID0gZGF0YS5sZW5ndGggLSAxO1xuXHRcdCAgaWYgKGluZGV4ID09IGxhc3RJbmRleCkge1xuXHRcdCAgICBkYXRhLnBvcCgpO1xuXHRcdCAgfSBlbHNlIHtcblx0XHQgICAgc3BsaWNlLmNhbGwoZGF0YSwgaW5kZXgsIDEpO1xuXHRcdCAgfVxuXHRcdCAgcmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogR2V0cyB0aGUgbGlzdCBjYWNoZSB2YWx1ZSBmb3IgYGtleWAuXG5cdFx0ICpcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBuYW1lIGdldFxuXHRcdCAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cblx0XHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gbGlzdENhY2hlR2V0KGtleSkge1xuXHRcdCAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuXHRcdCAgICAgIGluZGV4ID0gYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7XG5cblx0XHQgIHJldHVybiBpbmRleCA8IDAgPyB1bmRlZmluZWQgOiBkYXRhW2luZGV4XVsxXTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBDaGVja3MgaWYgYSBsaXN0IGNhY2hlIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG5cdFx0ICpcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBuYW1lIGhhc1xuXHRcdCAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuXHRcdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gbGlzdENhY2hlSGFzKGtleSkge1xuXHRcdCAgcmV0dXJuIGFzc29jSW5kZXhPZih0aGlzLl9fZGF0YV9fLCBrZXkpID4gLTE7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogU2V0cyB0aGUgbGlzdCBjYWNoZSBga2V5YCB0byBgdmFsdWVgLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAbmFtZSBzZXRcblx0XHQgKiBAbWVtYmVyT2YgTGlzdENhY2hlXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuXG5cdFx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuXHRcdCAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGxpc3QgY2FjaGUgaW5zdGFuY2UuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gbGlzdENhY2hlU2V0KGtleSwgdmFsdWUpIHtcblx0XHQgIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcblx0XHQgICAgICBpbmRleCA9IGFzc29jSW5kZXhPZihkYXRhLCBrZXkpO1xuXG5cdFx0ICBpZiAoaW5kZXggPCAwKSB7XG5cdFx0ICAgIGRhdGEucHVzaChba2V5LCB2YWx1ZV0pO1xuXHRcdCAgfSBlbHNlIHtcblx0XHQgICAgZGF0YVtpbmRleF1bMV0gPSB2YWx1ZTtcblx0XHQgIH1cblx0XHQgIHJldHVybiB0aGlzO1xuXHRcdH1cblxuXHRcdC8vIEFkZCBtZXRob2RzIHRvIGBMaXN0Q2FjaGVgLlxuXHRcdExpc3RDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBsaXN0Q2FjaGVDbGVhcjtcblx0XHRMaXN0Q2FjaGUucHJvdG90eXBlWydkZWxldGUnXSA9IGxpc3RDYWNoZURlbGV0ZTtcblx0XHRMaXN0Q2FjaGUucHJvdG90eXBlLmdldCA9IGxpc3RDYWNoZUdldDtcblx0XHRMaXN0Q2FjaGUucHJvdG90eXBlLmhhcyA9IGxpc3RDYWNoZUhhcztcblx0XHRMaXN0Q2FjaGUucHJvdG90eXBlLnNldCA9IGxpc3RDYWNoZVNldDtcblxuXHRcdC8qKlxuXHRcdCAqIENyZWF0ZXMgYSBtYXAgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIGtleS12YWx1ZSBwYWlycy5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQGNvbnN0cnVjdG9yXG5cdFx0ICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gTWFwQ2FjaGUoZW50cmllcykge1xuXHRcdCAgdmFyIGluZGV4ID0gLTEsXG5cdFx0ICAgICAgbGVuZ3RoID0gZW50cmllcyA/IGVudHJpZXMubGVuZ3RoIDogMDtcblxuXHRcdCAgdGhpcy5jbGVhcigpO1xuXHRcdCAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0XHQgICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07XG5cdFx0ICAgIHRoaXMuc2V0KGVudHJ5WzBdLCBlbnRyeVsxXSk7XG5cdFx0ICB9XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgbWFwLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAbmFtZSBjbGVhclxuXHRcdCAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIG1hcENhY2hlQ2xlYXIoKSB7XG5cdFx0ICB0aGlzLl9fZGF0YV9fID0ge1xuXHRcdCAgICAnaGFzaCc6IG5ldyBIYXNoLFxuXHRcdCAgICAnbWFwJzogbmV3IChNYXAgfHwgTGlzdENhY2hlKSxcblx0XHQgICAgJ3N0cmluZyc6IG5ldyBIYXNoXG5cdFx0ICB9O1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBtYXAuXG5cdFx0ICpcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBuYW1lIGRlbGV0ZVxuXHRcdCAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuXHRcdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBtYXBDYWNoZURlbGV0ZShrZXkpIHtcblx0XHQgIHJldHVybiBnZXRNYXBEYXRhKHRoaXMsIGtleSlbJ2RlbGV0ZSddKGtleSk7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogR2V0cyB0aGUgbWFwIHZhbHVlIGZvciBga2V5YC5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQG5hbWUgZ2V0XG5cdFx0ICogQG1lbWJlck9mIE1hcENhY2hlXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG5cdFx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIG1hcENhY2hlR2V0KGtleSkge1xuXHRcdCAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KS5nZXQoa2V5KTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBDaGVja3MgaWYgYSBtYXAgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQG5hbWUgaGFzXG5cdFx0ICogQG1lbWJlck9mIE1hcENhY2hlXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cblx0XHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIG1hcENhY2hlSGFzKGtleSkge1xuXHRcdCAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KS5oYXMoa2V5KTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBTZXRzIHRoZSBtYXAgYGtleWAgdG8gYHZhbHVlYC5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQG5hbWUgc2V0XG5cdFx0ICogQG1lbWJlck9mIE1hcENhY2hlXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuXG5cdFx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuXHRcdCAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG1hcCBjYWNoZSBpbnN0YW5jZS5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBtYXBDYWNoZVNldChrZXksIHZhbHVlKSB7XG5cdFx0ICBnZXRNYXBEYXRhKHRoaXMsIGtleSkuc2V0KGtleSwgdmFsdWUpO1xuXHRcdCAgcmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIG1ldGhvZHMgdG8gYE1hcENhY2hlYC5cblx0XHRNYXBDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBtYXBDYWNoZUNsZWFyO1xuXHRcdE1hcENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBtYXBDYWNoZURlbGV0ZTtcblx0XHRNYXBDYWNoZS5wcm90b3R5cGUuZ2V0ID0gbWFwQ2FjaGVHZXQ7XG5cdFx0TWFwQ2FjaGUucHJvdG90eXBlLmhhcyA9IG1hcENhY2hlSGFzO1xuXHRcdE1hcENhY2hlLnByb3RvdHlwZS5zZXQgPSBtYXBDYWNoZVNldDtcblxuXHRcdC8qKlxuXHRcdCAqXG5cdFx0ICogQ3JlYXRlcyBhbiBhcnJheSBjYWNoZSBvYmplY3QgdG8gc3RvcmUgdW5pcXVlIHZhbHVlcy5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQGNvbnN0cnVjdG9yXG5cdFx0ICogQHBhcmFtIHtBcnJheX0gW3ZhbHVlc10gVGhlIHZhbHVlcyB0byBjYWNoZS5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBTZXRDYWNoZSh2YWx1ZXMpIHtcblx0XHQgIHZhciBpbmRleCA9IC0xLFxuXHRcdCAgICAgIGxlbmd0aCA9IHZhbHVlcyA/IHZhbHVlcy5sZW5ndGggOiAwO1xuXG5cdFx0ICB0aGlzLl9fZGF0YV9fID0gbmV3IE1hcENhY2hlO1xuXHRcdCAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0XHQgICAgdGhpcy5hZGQodmFsdWVzW2luZGV4XSk7XG5cdFx0ICB9XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogQWRkcyBgdmFsdWVgIHRvIHRoZSBhcnJheSBjYWNoZS5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQG5hbWUgYWRkXG5cdFx0ICogQG1lbWJlck9mIFNldENhY2hlXG5cdFx0ICogQGFsaWFzIHB1c2hcblx0XHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjYWNoZS5cblx0XHQgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjYWNoZSBpbnN0YW5jZS5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBzZXRDYWNoZUFkZCh2YWx1ZSkge1xuXHRcdCAgdGhpcy5fX2RhdGFfXy5zZXQodmFsdWUsIEhBU0hfVU5ERUZJTkVEKTtcblx0XHQgIHJldHVybiB0aGlzO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGluIHRoZSBhcnJheSBjYWNoZS5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQG5hbWUgaGFzXG5cdFx0ICogQG1lbWJlck9mIFNldENhY2hlXG5cdFx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VhcmNoIGZvci5cblx0XHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGZvdW5kLCBlbHNlIGBmYWxzZWAuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gc2V0Q2FjaGVIYXModmFsdWUpIHtcblx0XHQgIHJldHVybiB0aGlzLl9fZGF0YV9fLmhhcyh2YWx1ZSk7XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIG1ldGhvZHMgdG8gYFNldENhY2hlYC5cblx0XHRTZXRDYWNoZS5wcm90b3R5cGUuYWRkID0gU2V0Q2FjaGUucHJvdG90eXBlLnB1c2ggPSBzZXRDYWNoZUFkZDtcblx0XHRTZXRDYWNoZS5wcm90b3R5cGUuaGFzID0gc2V0Q2FjaGVIYXM7XG5cblx0XHQvKipcblx0XHQgKiBDcmVhdGVzIGEgc3RhY2sgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIGtleS12YWx1ZSBwYWlycy5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQGNvbnN0cnVjdG9yXG5cdFx0ICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gU3RhY2soZW50cmllcykge1xuXHRcdCAgdGhpcy5fX2RhdGFfXyA9IG5ldyBMaXN0Q2FjaGUoZW50cmllcyk7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgc3RhY2suXG5cdFx0ICpcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBuYW1lIGNsZWFyXG5cdFx0ICogQG1lbWJlck9mIFN0YWNrXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gc3RhY2tDbGVhcigpIHtcblx0XHQgIHRoaXMuX19kYXRhX18gPSBuZXcgTGlzdENhY2hlO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBzdGFjay5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQG5hbWUgZGVsZXRlXG5cdFx0ICogQG1lbWJlck9mIFN0YWNrXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG5cdFx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIHN0YWNrRGVsZXRlKGtleSkge1xuXHRcdCAgcmV0dXJuIHRoaXMuX19kYXRhX19bJ2RlbGV0ZSddKGtleSk7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogR2V0cyB0aGUgc3RhY2sgdmFsdWUgZm9yIGBrZXlgLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAbmFtZSBnZXRcblx0XHQgKiBAbWVtYmVyT2YgU3RhY2tcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cblx0XHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gc3RhY2tHZXQoa2V5KSB7XG5cdFx0ICByZXR1cm4gdGhpcy5fX2RhdGFfXy5nZXQoa2V5KTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBDaGVja3MgaWYgYSBzdGFjayB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAbmFtZSBoYXNcblx0XHQgKiBAbWVtYmVyT2YgU3RhY2tcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuXHRcdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gc3RhY2tIYXMoa2V5KSB7XG5cdFx0ICByZXR1cm4gdGhpcy5fX2RhdGFfXy5oYXMoa2V5KTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBTZXRzIHRoZSBzdGFjayBga2V5YCB0byBgdmFsdWVgLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAbmFtZSBzZXRcblx0XHQgKiBAbWVtYmVyT2YgU3RhY2tcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cblx0XHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG5cdFx0ICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgc3RhY2sgY2FjaGUgaW5zdGFuY2UuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gc3RhY2tTZXQoa2V5LCB2YWx1ZSkge1xuXHRcdCAgdmFyIGNhY2hlID0gdGhpcy5fX2RhdGFfXztcblx0XHQgIGlmIChjYWNoZSBpbnN0YW5jZW9mIExpc3RDYWNoZSkge1xuXHRcdCAgICB2YXIgcGFpcnMgPSBjYWNoZS5fX2RhdGFfXztcblx0XHQgICAgaWYgKCFNYXAgfHwgKHBhaXJzLmxlbmd0aCA8IExBUkdFX0FSUkFZX1NJWkUgLSAxKSkge1xuXHRcdCAgICAgIHBhaXJzLnB1c2goW2tleSwgdmFsdWVdKTtcblx0XHQgICAgICByZXR1cm4gdGhpcztcblx0XHQgICAgfVxuXHRcdCAgICBjYWNoZSA9IHRoaXMuX19kYXRhX18gPSBuZXcgTWFwQ2FjaGUocGFpcnMpO1xuXHRcdCAgfVxuXHRcdCAgY2FjaGUuc2V0KGtleSwgdmFsdWUpO1xuXHRcdCAgcmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIG1ldGhvZHMgdG8gYFN0YWNrYC5cblx0XHRTdGFjay5wcm90b3R5cGUuY2xlYXIgPSBzdGFja0NsZWFyO1xuXHRcdFN0YWNrLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBzdGFja0RlbGV0ZTtcblx0XHRTdGFjay5wcm90b3R5cGUuZ2V0ID0gc3RhY2tHZXQ7XG5cdFx0U3RhY2sucHJvdG90eXBlLmhhcyA9IHN0YWNrSGFzO1xuXHRcdFN0YWNrLnByb3RvdHlwZS5zZXQgPSBzdGFja1NldDtcblxuXHRcdC8qKlxuXHRcdCAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgdGhlIGFycmF5LWxpa2UgYHZhbHVlYC5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG5cdFx0ICogQHBhcmFtIHtib29sZWFufSBpbmhlcml0ZWQgU3BlY2lmeSByZXR1cm5pbmcgaW5oZXJpdGVkIHByb3BlcnR5IG5hbWVzLlxuXHRcdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gYXJyYXlMaWtlS2V5cyh2YWx1ZSwgaW5oZXJpdGVkKSB7XG5cdFx0ICAvLyBTYWZhcmkgOC4xIG1ha2VzIGBhcmd1bWVudHMuY2FsbGVlYCBlbnVtZXJhYmxlIGluIHN0cmljdCBtb2RlLlxuXHRcdCAgLy8gU2FmYXJpIDkgbWFrZXMgYGFyZ3VtZW50cy5sZW5ndGhgIGVudW1lcmFibGUgaW4gc3RyaWN0IG1vZGUuXG5cdFx0ICB2YXIgcmVzdWx0ID0gKGlzQXJyYXkodmFsdWUpIHx8IGlzQXJndW1lbnRzKHZhbHVlKSlcblx0XHQgICAgPyBiYXNlVGltZXModmFsdWUubGVuZ3RoLCBTdHJpbmcpXG5cdFx0ICAgIDogW107XG5cblx0XHQgIHZhciBsZW5ndGggPSByZXN1bHQubGVuZ3RoLFxuXHRcdCAgICAgIHNraXBJbmRleGVzID0gISFsZW5ndGg7XG5cblx0XHQgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xuXHRcdCAgICBpZiAoKGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIGtleSkpICYmXG5cdFx0ICAgICAgICAhKHNraXBJbmRleGVzICYmIChrZXkgPT0gJ2xlbmd0aCcgfHwgaXNJbmRleChrZXksIGxlbmd0aCkpKSkge1xuXHRcdCAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG5cdFx0ICAgIH1cblx0XHQgIH1cblx0XHQgIHJldHVybiByZXN1bHQ7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogR2V0cyB0aGUgaW5kZXggYXQgd2hpY2ggdGhlIGBrZXlgIGlzIGZvdW5kIGluIGBhcnJheWAgb2Yga2V5LXZhbHVlIHBhaXJzLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cblx0XHQgKiBAcGFyYW0geyp9IGtleSBUaGUga2V5IHRvIHNlYXJjaCBmb3IuXG5cdFx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgYC0xYC5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBhc3NvY0luZGV4T2YoYXJyYXksIGtleSkge1xuXHRcdCAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcblx0XHQgIHdoaWxlIChsZW5ndGgtLSkge1xuXHRcdCAgICBpZiAoZXEoYXJyYXlbbGVuZ3RoXVswXSwga2V5KSkge1xuXHRcdCAgICAgIHJldHVybiBsZW5ndGg7XG5cdFx0ICAgIH1cblx0XHQgIH1cblx0XHQgIHJldHVybiAtMTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5jcmVhdGVgIHdpdGhvdXQgc3VwcG9ydCBmb3IgYXNzaWduaW5nXG5cdFx0ICogcHJvcGVydGllcyB0byB0aGUgY3JlYXRlZCBvYmplY3QuXG5cdFx0ICpcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm90b3R5cGUgVGhlIG9iamVjdCB0byBpbmhlcml0IGZyb20uXG5cdFx0ICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IG9iamVjdC5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBiYXNlQ3JlYXRlKHByb3RvKSB7XG5cdFx0ICByZXR1cm4gaXNPYmplY3QocHJvdG8pID8gb2JqZWN0Q3JlYXRlKHByb3RvKSA6IHt9O1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBiYXNlRm9yT3duYCB3aGljaCBpdGVyYXRlcyBvdmVyIGBvYmplY3RgXG5cdFx0ICogcHJvcGVydGllcyByZXR1cm5lZCBieSBga2V5c0Z1bmNgIGFuZCBpbnZva2VzIGBpdGVyYXRlZWAgZm9yIGVhY2ggcHJvcGVydHkuXG5cdFx0ICogSXRlcmF0ZWUgZnVuY3Rpb25zIG1heSBleGl0IGl0ZXJhdGlvbiBlYXJseSBieSBleHBsaWNpdGx5IHJldHVybmluZyBgZmFsc2VgLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuXHRcdCAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG5cdFx0ICogQHBhcmFtIHtGdW5jdGlvbn0ga2V5c0Z1bmMgVGhlIGZ1bmN0aW9uIHRvIGdldCB0aGUga2V5cyBvZiBgb2JqZWN0YC5cblx0XHQgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuXHRcdCAqL1xuXHRcdHZhciBiYXNlRm9yID0gY3JlYXRlQmFzZUZvcigpO1xuXG5cdFx0LyoqXG5cdFx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZm9yT3duYCB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHMuXG5cdFx0ICpcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpdGVyYXRlIG92ZXIuXG5cdFx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cblx0XHQgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIGBvYmplY3RgLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGJhc2VGb3JPd24ob2JqZWN0LCBpdGVyYXRlZSkge1xuXHRcdCAgcmV0dXJuIG9iamVjdCAmJiBiYXNlRm9yKG9iamVjdCwgaXRlcmF0ZWUsIGtleXMpO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmdldGAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWZhdWx0IHZhbHVlcy5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHRcdCAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG5cdFx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGJhc2VHZXQob2JqZWN0LCBwYXRoKSB7XG5cdFx0ICBwYXRoID0gaXNLZXkocGF0aCwgb2JqZWN0KSA/IFtwYXRoXSA6IGNhc3RQYXRoKHBhdGgpO1xuXG5cdFx0ICB2YXIgaW5kZXggPSAwLFxuXHRcdCAgICAgIGxlbmd0aCA9IHBhdGgubGVuZ3RoO1xuXG5cdFx0ICB3aGlsZSAob2JqZWN0ICE9IG51bGwgJiYgaW5kZXggPCBsZW5ndGgpIHtcblx0XHQgICAgb2JqZWN0ID0gb2JqZWN0W3RvS2V5KHBhdGhbaW5kZXgrK10pXTtcblx0XHQgIH1cblx0XHQgIHJldHVybiAoaW5kZXggJiYgaW5kZXggPT0gbGVuZ3RoKSA/IG9iamVjdCA6IHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgZ2V0VGFnYC5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG5cdFx0ICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgYHRvU3RyaW5nVGFnYC5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBiYXNlR2V0VGFnKHZhbHVlKSB7XG5cdFx0ICByZXR1cm4gb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaGFzSW5gIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdFx0ICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IGtleSBUaGUga2V5IHRvIGNoZWNrLlxuXHRcdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBiYXNlSGFzSW4ob2JqZWN0LCBrZXkpIHtcblx0XHQgIHJldHVybiBvYmplY3QgIT0gbnVsbCAmJiBrZXkgaW4gT2JqZWN0KG9iamVjdCk7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNFcXVhbGAgd2hpY2ggc3VwcG9ydHMgcGFydGlhbCBjb21wYXJpc29uc1xuXHRcdCAqIGFuZCB0cmFja3MgdHJhdmVyc2VkIG9iamVjdHMuXG5cdFx0ICpcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG5cdFx0ICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cblx0XHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cblx0XHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtiaXRtYXNrXSBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLlxuXHRcdCAqICBUaGUgYml0bWFzayBtYXkgYmUgY29tcG9zZWQgb2YgdGhlIGZvbGxvd2luZyBmbGFnczpcblx0XHQgKiAgICAgMSAtIFVub3JkZXJlZCBjb21wYXJpc29uXG5cdFx0ICogICAgIDIgLSBQYXJ0aWFsIGNvbXBhcmlzb25cblx0XHQgKiBAcGFyYW0ge09iamVjdH0gW3N0YWNrXSBUcmFja3MgdHJhdmVyc2VkIGB2YWx1ZWAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cblx0XHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlciwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spIHtcblx0XHQgIGlmICh2YWx1ZSA9PT0gb3RoZXIpIHtcblx0XHQgICAgcmV0dXJuIHRydWU7XG5cdFx0ICB9XG5cdFx0ICBpZiAodmFsdWUgPT0gbnVsbCB8fCBvdGhlciA9PSBudWxsIHx8ICghaXNPYmplY3QodmFsdWUpICYmICFpc09iamVjdExpa2Uob3RoZXIpKSkge1xuXHRcdCAgICByZXR1cm4gdmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcjtcblx0XHQgIH1cblx0XHQgIHJldHVybiBiYXNlSXNFcXVhbERlZXAodmFsdWUsIG90aGVyLCBiYXNlSXNFcXVhbCwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxgIGZvciBhcnJheXMgYW5kIG9iamVjdHMgd2hpY2ggcGVyZm9ybXNcblx0XHQgKiBkZWVwIGNvbXBhcmlzb25zIGFuZCB0cmFja3MgdHJhdmVyc2VkIG9iamVjdHMgZW5hYmxpbmcgb2JqZWN0cyB3aXRoIGNpcmN1bGFyXG5cdFx0ICogcmVmZXJlbmNlcyB0byBiZSBjb21wYXJlZC5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cblx0XHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG5cdFx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG5cdFx0ICogQHBhcmFtIHtudW1iZXJ9IFtiaXRtYXNrXSBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYFxuXHRcdCAqICBmb3IgbW9yZSBkZXRhaWxzLlxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBbc3RhY2tdIFRyYWNrcyB0cmF2ZXJzZWQgYG9iamVjdGAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cblx0XHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBiYXNlSXNFcXVhbERlZXAob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykge1xuXHRcdCAgdmFyIG9iaklzQXJyID0gaXNBcnJheShvYmplY3QpLFxuXHRcdCAgICAgIG90aElzQXJyID0gaXNBcnJheShvdGhlciksXG5cdFx0ICAgICAgb2JqVGFnID0gYXJyYXlUYWcsXG5cdFx0ICAgICAgb3RoVGFnID0gYXJyYXlUYWc7XG5cblx0XHQgIGlmICghb2JqSXNBcnIpIHtcblx0XHQgICAgb2JqVGFnID0gZ2V0VGFnKG9iamVjdCk7XG5cdFx0ICAgIG9ialRhZyA9IG9ialRhZyA9PSBhcmdzVGFnID8gb2JqZWN0VGFnIDogb2JqVGFnO1xuXHRcdCAgfVxuXHRcdCAgaWYgKCFvdGhJc0Fycikge1xuXHRcdCAgICBvdGhUYWcgPSBnZXRUYWcob3RoZXIpO1xuXHRcdCAgICBvdGhUYWcgPSBvdGhUYWcgPT0gYXJnc1RhZyA/IG9iamVjdFRhZyA6IG90aFRhZztcblx0XHQgIH1cblx0XHQgIHZhciBvYmpJc09iaiA9IG9ialRhZyA9PSBvYmplY3RUYWcgJiYgIWlzSG9zdE9iamVjdChvYmplY3QpLFxuXHRcdCAgICAgIG90aElzT2JqID0gb3RoVGFnID09IG9iamVjdFRhZyAmJiAhaXNIb3N0T2JqZWN0KG90aGVyKSxcblx0XHQgICAgICBpc1NhbWVUYWcgPSBvYmpUYWcgPT0gb3RoVGFnO1xuXG5cdFx0ICBpZiAoaXNTYW1lVGFnICYmICFvYmpJc09iaikge1xuXHRcdCAgICBzdGFjayB8fCAoc3RhY2sgPSBuZXcgU3RhY2spO1xuXHRcdCAgICByZXR1cm4gKG9iaklzQXJyIHx8IGlzVHlwZWRBcnJheShvYmplY3QpKVxuXHRcdCAgICAgID8gZXF1YWxBcnJheXMob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaylcblx0XHQgICAgICA6IGVxdWFsQnlUYWcob2JqZWN0LCBvdGhlciwgb2JqVGFnLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKTtcblx0XHQgIH1cblx0XHQgIGlmICghKGJpdG1hc2sgJiBQQVJUSUFMX0NPTVBBUkVfRkxBRykpIHtcblx0XHQgICAgdmFyIG9iaklzV3JhcHBlZCA9IG9iaklzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCAnX193cmFwcGVkX18nKSxcblx0XHQgICAgICAgIG90aElzV3JhcHBlZCA9IG90aElzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsICdfX3dyYXBwZWRfXycpO1xuXG5cdFx0ICAgIGlmIChvYmpJc1dyYXBwZWQgfHwgb3RoSXNXcmFwcGVkKSB7XG5cdFx0ICAgICAgdmFyIG9ialVud3JhcHBlZCA9IG9iaklzV3JhcHBlZCA/IG9iamVjdC52YWx1ZSgpIDogb2JqZWN0LFxuXHRcdCAgICAgICAgICBvdGhVbndyYXBwZWQgPSBvdGhJc1dyYXBwZWQgPyBvdGhlci52YWx1ZSgpIDogb3RoZXI7XG5cblx0XHQgICAgICBzdGFjayB8fCAoc3RhY2sgPSBuZXcgU3RhY2spO1xuXHRcdCAgICAgIHJldHVybiBlcXVhbEZ1bmMob2JqVW53cmFwcGVkLCBvdGhVbndyYXBwZWQsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKTtcblx0XHQgICAgfVxuXHRcdCAgfVxuXHRcdCAgaWYgKCFpc1NhbWVUYWcpIHtcblx0XHQgICAgcmV0dXJuIGZhbHNlO1xuXHRcdCAgfVxuXHRcdCAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IFN0YWNrKTtcblx0XHQgIHJldHVybiBlcXVhbE9iamVjdHMob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNNYXRjaGAgd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cblx0XHQgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3Qgb2YgcHJvcGVydHkgdmFsdWVzIHRvIG1hdGNoLlxuXHRcdCAqIEBwYXJhbSB7QXJyYXl9IG1hdGNoRGF0YSBUaGUgcHJvcGVydHkgbmFtZXMsIHZhbHVlcywgYW5kIGNvbXBhcmUgZmxhZ3MgdG8gbWF0Y2guXG5cdFx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG5cdFx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBvYmplY3RgIGlzIGEgbWF0Y2gsIGVsc2UgYGZhbHNlYC5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBiYXNlSXNNYXRjaChvYmplY3QsIHNvdXJjZSwgbWF0Y2hEYXRhLCBjdXN0b21pemVyKSB7XG5cdFx0ICB2YXIgaW5kZXggPSBtYXRjaERhdGEubGVuZ3RoLFxuXHRcdCAgICAgIGxlbmd0aCA9IGluZGV4O1xuXG5cdFx0ICBpZiAob2JqZWN0ID09IG51bGwpIHtcblx0XHQgICAgcmV0dXJuICFsZW5ndGg7XG5cdFx0ICB9XG5cdFx0ICBvYmplY3QgPSBPYmplY3Qob2JqZWN0KTtcblx0XHQgIHdoaWxlIChpbmRleC0tKSB7XG5cdFx0ICAgIHZhciBkYXRhID0gbWF0Y2hEYXRhW2luZGV4XTtcblx0XHQgICAgaWYgKChkYXRhWzJdKVxuXHRcdCAgICAgICAgICA/IGRhdGFbMV0gIT09IG9iamVjdFtkYXRhWzBdXVxuXHRcdCAgICAgICAgICA6ICEoZGF0YVswXSBpbiBvYmplY3QpXG5cdFx0ICAgICAgICApIHtcblx0XHQgICAgICByZXR1cm4gZmFsc2U7XG5cdFx0ICAgIH1cblx0XHQgIH1cblx0XHQgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdFx0ICAgIGRhdGEgPSBtYXRjaERhdGFbaW5kZXhdO1xuXHRcdCAgICB2YXIga2V5ID0gZGF0YVswXSxcblx0XHQgICAgICAgIG9ialZhbHVlID0gb2JqZWN0W2tleV0sXG5cdFx0ICAgICAgICBzcmNWYWx1ZSA9IGRhdGFbMV07XG5cblx0XHQgICAgaWYgKGRhdGFbMl0pIHtcblx0XHQgICAgICBpZiAob2JqVmFsdWUgPT09IHVuZGVmaW5lZCAmJiAhKGtleSBpbiBvYmplY3QpKSB7XG5cdFx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdFx0ICAgICAgfVxuXHRcdCAgICB9IGVsc2Uge1xuXHRcdCAgICAgIHZhciBzdGFjayA9IG5ldyBTdGFjaztcblx0XHQgICAgICB2YXIgcmVzdWx0OyBcblx0XHQgICAgICBpZiAoIShyZXN1bHQgPT09IHVuZGVmaW5lZFxuXHRcdCAgICAgICAgICAgID8gYmFzZUlzRXF1YWwoc3JjVmFsdWUsIG9ialZhbHVlLCBjdXN0b21pemVyLCBVTk9SREVSRURfQ09NUEFSRV9GTEFHIHwgUEFSVElBTF9DT01QQVJFX0ZMQUcsIHN0YWNrKVxuXHRcdCAgICAgICAgICAgIDogcmVzdWx0XG5cdFx0ICAgICAgICAgICkpIHtcblx0XHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0XHQgICAgICB9XG5cdFx0ICAgIH1cblx0XHQgIH1cblx0XHQgIHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzTmF0aXZlYCB3aXRob3V0IGJhZCBzaGltIGNoZWNrcy5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdFx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24sXG5cdFx0ICogIGVsc2UgYGZhbHNlYC5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBiYXNlSXNOYXRpdmUodmFsdWUpIHtcblx0XHQgIGlmICghaXNPYmplY3QodmFsdWUpIHx8IGlzTWFza2VkKHZhbHVlKSkge1xuXHRcdCAgICByZXR1cm4gZmFsc2U7XG5cdFx0ICB9XG5cdFx0ICB2YXIgcGF0dGVybiA9IChpc0Z1bmN0aW9uKHZhbHVlKSB8fCBpc0hvc3RPYmplY3QodmFsdWUpKSA/IHJlSXNOYXRpdmUgOiByZUlzSG9zdEN0b3I7XG5cdFx0ICByZXR1cm4gcGF0dGVybi50ZXN0KHRvU291cmNlKHZhbHVlKSk7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNUeXBlZEFycmF5YCB3aXRob3V0IE5vZGUuanMgb3B0aW1pemF0aW9ucy5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdFx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB0eXBlZCBhcnJheSwgZWxzZSBgZmFsc2VgLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGJhc2VJc1R5cGVkQXJyYXkodmFsdWUpIHtcblx0XHQgIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmXG5cdFx0ICAgIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgISF0eXBlZEFycmF5VGFnc1tvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKV07XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXRlcmF0ZWVgLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0geyp9IFt2YWx1ZT1fLmlkZW50aXR5XSBUaGUgdmFsdWUgdG8gY29udmVydCB0byBhbiBpdGVyYXRlZS5cblx0XHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIGl0ZXJhdGVlLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGJhc2VJdGVyYXRlZSh2YWx1ZSkge1xuXHRcdCAgLy8gRG9uJ3Qgc3RvcmUgdGhlIGB0eXBlb2ZgIHJlc3VsdCBpbiBhIHZhcmlhYmxlIHRvIGF2b2lkIGEgSklUIGJ1ZyBpbiBTYWZhcmkgOS5cblx0XHQgIC8vIFNlZSBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTU2MDM0IGZvciBtb3JlIGRldGFpbHMuXG5cdFx0ICBpZiAodHlwZW9mIHZhbHVlID09ICdmdW5jdGlvbicpIHtcblx0XHQgICAgcmV0dXJuIHZhbHVlO1xuXHRcdCAgfVxuXHRcdCAgaWYgKHZhbHVlID09IG51bGwpIHtcblx0XHQgICAgcmV0dXJuIGlkZW50aXR5O1xuXHRcdCAgfVxuXHRcdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jykge1xuXHRcdCAgICByZXR1cm4gaXNBcnJheSh2YWx1ZSlcblx0XHQgICAgICA/IGJhc2VNYXRjaGVzUHJvcGVydHkodmFsdWVbMF0sIHZhbHVlWzFdKVxuXHRcdCAgICAgIDogYmFzZU1hdGNoZXModmFsdWUpO1xuXHRcdCAgfVxuXHRcdCAgcmV0dXJuIHByb3BlcnR5KHZhbHVlKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5rZXlzYCB3aGljaCBkb2Vzbid0IHRyZWF0IHNwYXJzZSBhcnJheXMgYXMgZGVuc2UuXG5cdFx0ICpcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0XHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGJhc2VLZXlzKG9iamVjdCkge1xuXHRcdCAgaWYgKCFpc1Byb3RvdHlwZShvYmplY3QpKSB7XG5cdFx0ICAgIHJldHVybiBuYXRpdmVLZXlzKG9iamVjdCk7XG5cdFx0ICB9XG5cdFx0ICB2YXIgcmVzdWx0ID0gW107XG5cdFx0ICBmb3IgKHZhciBrZXkgaW4gT2JqZWN0KG9iamVjdCkpIHtcblx0XHQgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpICYmIGtleSAhPSAnY29uc3RydWN0b3InKSB7XG5cdFx0ICAgICAgcmVzdWx0LnB1c2goa2V5KTtcblx0XHQgICAgfVxuXHRcdCAgfVxuXHRcdCAgcmV0dXJuIHJlc3VsdDtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tYXRjaGVzYCB3aGljaCBkb2Vzbid0IGNsb25lIGBzb3VyY2VgLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3Qgb2YgcHJvcGVydHkgdmFsdWVzIHRvIG1hdGNoLlxuXHRcdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHNwZWMgZnVuY3Rpb24uXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gYmFzZU1hdGNoZXMoc291cmNlKSB7XG5cdFx0ICB2YXIgbWF0Y2hEYXRhID0gZ2V0TWF0Y2hEYXRhKHNvdXJjZSk7XG5cdFx0ICBpZiAobWF0Y2hEYXRhLmxlbmd0aCA9PSAxICYmIG1hdGNoRGF0YVswXVsyXSkge1xuXHRcdCAgICByZXR1cm4gbWF0Y2hlc1N0cmljdENvbXBhcmFibGUobWF0Y2hEYXRhWzBdWzBdLCBtYXRjaERhdGFbMF1bMV0pO1xuXHRcdCAgfVxuXHRcdCAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuXHRcdCAgICByZXR1cm4gb2JqZWN0ID09PSBzb3VyY2UgfHwgYmFzZUlzTWF0Y2gob2JqZWN0LCBzb3VyY2UsIG1hdGNoRGF0YSk7XG5cdFx0ICB9O1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLm1hdGNoZXNQcm9wZXJ0eWAgd2hpY2ggZG9lc24ndCBjbG9uZSBgc3JjVmFsdWVgLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHRcdCAqIEBwYXJhbSB7Kn0gc3JjVmFsdWUgVGhlIHZhbHVlIHRvIG1hdGNoLlxuXHRcdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHNwZWMgZnVuY3Rpb24uXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gYmFzZU1hdGNoZXNQcm9wZXJ0eShwYXRoLCBzcmNWYWx1ZSkge1xuXHRcdCAgaWYgKGlzS2V5KHBhdGgpICYmIGlzU3RyaWN0Q29tcGFyYWJsZShzcmNWYWx1ZSkpIHtcblx0XHQgICAgcmV0dXJuIG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlKHRvS2V5KHBhdGgpLCBzcmNWYWx1ZSk7XG5cdFx0ICB9XG5cdFx0ICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG5cdFx0ICAgIHZhciBvYmpWYWx1ZSA9IGdldChvYmplY3QsIHBhdGgpO1xuXHRcdCAgICByZXR1cm4gKG9ialZhbHVlID09PSB1bmRlZmluZWQgJiYgb2JqVmFsdWUgPT09IHNyY1ZhbHVlKVxuXHRcdCAgICAgID8gaGFzSW4ob2JqZWN0LCBwYXRoKVxuXHRcdCAgICAgIDogYmFzZUlzRXF1YWwoc3JjVmFsdWUsIG9ialZhbHVlLCB1bmRlZmluZWQsIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcgfCBQQVJUSUFMX0NPTVBBUkVfRkxBRyk7XG5cdFx0ICB9O1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZVByb3BlcnR5YCB3aGljaCBzdXBwb3J0cyBkZWVwIHBhdGhzLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHRcdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGJhc2VQcm9wZXJ0eURlZXAocGF0aCkge1xuXHRcdCAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuXHRcdCAgICByZXR1cm4gYmFzZUdldChvYmplY3QsIHBhdGgpO1xuXHRcdCAgfTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50b1N0cmluZ2Agd2hpY2ggZG9lc24ndCBjb252ZXJ0IG51bGxpc2hcblx0XHQgKiB2YWx1ZXMgdG8gZW1wdHkgc3RyaW5ncy5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cblx0XHQgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gYmFzZVRvU3RyaW5nKHZhbHVlKSB7XG5cdFx0ICAvLyBFeGl0IGVhcmx5IGZvciBzdHJpbmdzIHRvIGF2b2lkIGEgcGVyZm9ybWFuY2UgaGl0IGluIHNvbWUgZW52aXJvbm1lbnRzLlxuXHRcdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuXHRcdCAgICByZXR1cm4gdmFsdWU7XG5cdFx0ICB9XG5cdFx0ICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG5cdFx0ICAgIHJldHVybiBzeW1ib2xUb1N0cmluZyA/IHN5bWJvbFRvU3RyaW5nLmNhbGwodmFsdWUpIDogJyc7XG5cdFx0ICB9XG5cdFx0ICB2YXIgcmVzdWx0ID0gKHZhbHVlICsgJycpO1xuXHRcdCAgcmV0dXJuIChyZXN1bHQgPT0gJzAnICYmICgxIC8gdmFsdWUpID09IC1JTkZJTklUWSkgPyAnLTAnIDogcmVzdWx0O1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIENhc3RzIGB2YWx1ZWAgdG8gYSBwYXRoIGFycmF5IGlmIGl0J3Mgbm90IG9uZS5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gaW5zcGVjdC5cblx0XHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGNhc3QgcHJvcGVydHkgcGF0aCBhcnJheS5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBjYXN0UGF0aCh2YWx1ZSkge1xuXHRcdCAgcmV0dXJuIGlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBzdHJpbmdUb1BhdGgodmFsdWUpO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIENyZWF0ZXMgYSBiYXNlIGZ1bmN0aW9uIGZvciBtZXRob2RzIGxpa2UgYF8uZm9ySW5gIGFuZCBgXy5mb3JPd25gLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cblx0XHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBiYXNlIGZ1bmN0aW9uLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGNyZWF0ZUJhc2VGb3IoZnJvbVJpZ2h0KSB7XG5cdFx0ICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0LCBpdGVyYXRlZSwga2V5c0Z1bmMpIHtcblx0XHQgICAgdmFyIGluZGV4ID0gLTEsXG5cdFx0ICAgICAgICBpdGVyYWJsZSA9IE9iamVjdChvYmplY3QpLFxuXHRcdCAgICAgICAgcHJvcHMgPSBrZXlzRnVuYyhvYmplY3QpLFxuXHRcdCAgICAgICAgbGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xuXG5cdFx0ICAgIHdoaWxlIChsZW5ndGgtLSkge1xuXHRcdCAgICAgIHZhciBrZXkgPSBwcm9wc1srK2luZGV4XTtcblx0XHQgICAgICBpZiAoaXRlcmF0ZWUoaXRlcmFibGVba2V5XSwga2V5LCBpdGVyYWJsZSkgPT09IGZhbHNlKSB7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHQgICAgICB9XG5cdFx0ICAgIH1cblx0XHQgICAgcmV0dXJuIG9iamVjdDtcblx0XHQgIH07XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBhcnJheXMgd2l0aCBzdXBwb3J0IGZvclxuXHRcdCAqIHBhcnRpYWwgZGVlcCBjb21wYXJpc29ucy5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGNvbXBhcmUuXG5cdFx0ICogQHBhcmFtIHtBcnJheX0gb3RoZXIgVGhlIG90aGVyIGFycmF5IHRvIGNvbXBhcmUuXG5cdFx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuXHRcdCAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cblx0XHQgKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYFxuXHRcdCAqICBmb3IgbW9yZSBkZXRhaWxzLlxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBzdGFjayBUcmFja3MgdHJhdmVyc2VkIGBhcnJheWAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cblx0XHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGFycmF5cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGVxdWFsQXJyYXlzKGFycmF5LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykge1xuXHRcdCAgdmFyIGlzUGFydGlhbCA9IGJpdG1hc2sgJiBQQVJUSUFMX0NPTVBBUkVfRkxBRyxcblx0XHQgICAgICBhcnJMZW5ndGggPSBhcnJheS5sZW5ndGgsXG5cdFx0ICAgICAgb3RoTGVuZ3RoID0gb3RoZXIubGVuZ3RoO1xuXG5cdFx0ICBpZiAoYXJyTGVuZ3RoICE9IG90aExlbmd0aCAmJiAhKGlzUGFydGlhbCAmJiBvdGhMZW5ndGggPiBhcnJMZW5ndGgpKSB7XG5cdFx0ICAgIHJldHVybiBmYWxzZTtcblx0XHQgIH1cblx0XHQgIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cblx0XHQgIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KGFycmF5KTtcblx0XHQgIGlmIChzdGFja2VkICYmIHN0YWNrLmdldChvdGhlcikpIHtcblx0XHQgICAgcmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7XG5cdFx0ICB9XG5cdFx0ICB2YXIgaW5kZXggPSAtMSxcblx0XHQgICAgICByZXN1bHQgPSB0cnVlLFxuXHRcdCAgICAgIHNlZW4gPSAoYml0bWFzayAmIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcpID8gbmV3IFNldENhY2hlIDogdW5kZWZpbmVkO1xuXG5cdFx0ICBzdGFjay5zZXQoYXJyYXksIG90aGVyKTtcblx0XHQgIHN0YWNrLnNldChvdGhlciwgYXJyYXkpO1xuXG5cdFx0ICAvLyBJZ25vcmUgbm9uLWluZGV4IHByb3BlcnRpZXMuXG5cdFx0ICB3aGlsZSAoKytpbmRleCA8IGFyckxlbmd0aCkge1xuXHRcdCAgICB2YXIgYXJyVmFsdWUgPSBhcnJheVtpbmRleF0sXG5cdFx0ICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2luZGV4XTtcblxuXHRcdCAgICBpZiAoY3VzdG9taXplcikge1xuXHRcdCAgICAgIHZhciBjb21wYXJlZCA9IGlzUGFydGlhbFxuXHRcdCAgICAgICAgPyBjdXN0b21pemVyKG90aFZhbHVlLCBhcnJWYWx1ZSwgaW5kZXgsIG90aGVyLCBhcnJheSwgc3RhY2spXG5cdFx0ICAgICAgICA6IGN1c3RvbWl6ZXIoYXJyVmFsdWUsIG90aFZhbHVlLCBpbmRleCwgYXJyYXksIG90aGVyLCBzdGFjayk7XG5cdFx0ICAgIH1cblx0XHQgICAgaWYgKGNvbXBhcmVkICE9PSB1bmRlZmluZWQpIHtcblx0XHQgICAgICBpZiAoY29tcGFyZWQpIHtcblx0XHQgICAgICAgIGNvbnRpbnVlO1xuXHRcdCAgICAgIH1cblx0XHQgICAgICByZXN1bHQgPSBmYWxzZTtcblx0XHQgICAgICBicmVhaztcblx0XHQgICAgfVxuXHRcdCAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuXHRcdCAgICBpZiAoc2Vlbikge1xuXHRcdCAgICAgIGlmICghYXJyYXlTb21lKG90aGVyLCBmdW5jdGlvbihvdGhWYWx1ZSwgb3RoSW5kZXgpIHtcblx0XHQgICAgICAgICAgICBpZiAoIXNlZW4uaGFzKG90aEluZGV4KSAmJlxuXHRcdCAgICAgICAgICAgICAgICAoYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSkpIHtcblx0XHQgICAgICAgICAgICAgIHJldHVybiBzZWVuLmFkZChvdGhJbmRleCk7XG5cdFx0ICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgICB9KSkge1xuXHRcdCAgICAgICAgcmVzdWx0ID0gZmFsc2U7XG5cdFx0ICAgICAgICBicmVhaztcblx0XHQgICAgICB9XG5cdFx0ICAgIH0gZWxzZSBpZiAoIShcblx0XHQgICAgICAgICAgYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8XG5cdFx0ICAgICAgICAgICAgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spXG5cdFx0ICAgICAgICApKSB7XG5cdFx0ICAgICAgcmVzdWx0ID0gZmFsc2U7XG5cdFx0ICAgICAgYnJlYWs7XG5cdFx0ICAgIH1cblx0XHQgIH1cblx0XHQgIHN0YWNrWydkZWxldGUnXShhcnJheSk7XG5cdFx0ICBzdGFja1snZGVsZXRlJ10ob3RoZXIpO1xuXHRcdCAgcmV0dXJuIHJlc3VsdDtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIGNvbXBhcmluZyBvYmplY3RzIG9mXG5cdFx0ICogdGhlIHNhbWUgYHRvU3RyaW5nVGFnYC5cblx0XHQgKlxuXHRcdCAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIG9ubHkgc3VwcG9ydHMgY29tcGFyaW5nIHZhbHVlcyB3aXRoIHRhZ3Mgb2Zcblx0XHQgKiBgQm9vbGVhbmAsIGBEYXRlYCwgYEVycm9yYCwgYE51bWJlcmAsIGBSZWdFeHBgLCBvciBgU3RyaW5nYC5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gdGFnIFRoZSBgdG9TdHJpbmdUYWdgIG9mIHRoZSBvYmplY3RzIHRvIGNvbXBhcmUuXG5cdFx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuXHRcdCAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cblx0XHQgKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYFxuXHRcdCAqICBmb3IgbW9yZSBkZXRhaWxzLlxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBzdGFjayBUcmFja3MgdHJhdmVyc2VkIGBvYmplY3RgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG5cdFx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCB0YWcsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spIHtcblx0XHQgIHN3aXRjaCAodGFnKSB7XG5cdFx0ICAgIGNhc2UgZGF0YVZpZXdUYWc6XG5cdFx0ICAgICAgaWYgKChvYmplY3QuYnl0ZUxlbmd0aCAhPSBvdGhlci5ieXRlTGVuZ3RoKSB8fFxuXHRcdCAgICAgICAgICAob2JqZWN0LmJ5dGVPZmZzZXQgIT0gb3RoZXIuYnl0ZU9mZnNldCkpIHtcblx0XHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0XHQgICAgICB9XG5cdFx0ICAgICAgb2JqZWN0ID0gb2JqZWN0LmJ1ZmZlcjtcblx0XHQgICAgICBvdGhlciA9IG90aGVyLmJ1ZmZlcjtcblxuXHRcdCAgICBjYXNlIGFycmF5QnVmZmVyVGFnOlxuXHRcdCAgICAgIGlmICgob2JqZWN0LmJ5dGVMZW5ndGggIT0gb3RoZXIuYnl0ZUxlbmd0aCkgfHxcblx0XHQgICAgICAgICAgIWVxdWFsRnVuYyhuZXcgVWludDhBcnJheShvYmplY3QpLCBuZXcgVWludDhBcnJheShvdGhlcikpKSB7XG5cdFx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdFx0ICAgICAgfVxuXHRcdCAgICAgIHJldHVybiB0cnVlO1xuXG5cdFx0ICAgIGNhc2UgYm9vbFRhZzpcblx0XHQgICAgY2FzZSBkYXRlVGFnOlxuXHRcdCAgICBjYXNlIG51bWJlclRhZzpcblx0XHQgICAgICAvLyBDb2VyY2UgYm9vbGVhbnMgdG8gYDFgIG9yIGAwYCBhbmQgZGF0ZXMgdG8gbWlsbGlzZWNvbmRzLlxuXHRcdCAgICAgIC8vIEludmFsaWQgZGF0ZXMgYXJlIGNvZXJjZWQgdG8gYE5hTmAuXG5cdFx0ICAgICAgcmV0dXJuIGVxKCtvYmplY3QsICtvdGhlcik7XG5cblx0XHQgICAgY2FzZSBlcnJvclRhZzpcblx0XHQgICAgICByZXR1cm4gb2JqZWN0Lm5hbWUgPT0gb3RoZXIubmFtZSAmJiBvYmplY3QubWVzc2FnZSA9PSBvdGhlci5tZXNzYWdlO1xuXG5cdFx0ICAgIGNhc2UgcmVnZXhwVGFnOlxuXHRcdCAgICBjYXNlIHN0cmluZ1RhZzpcblx0XHQgICAgICAvLyBDb2VyY2UgcmVnZXhlcyB0byBzdHJpbmdzIGFuZCB0cmVhdCBzdHJpbmdzLCBwcmltaXRpdmVzIGFuZCBvYmplY3RzLFxuXHRcdCAgICAgIC8vIGFzIGVxdWFsLiBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXJlZ2V4cC5wcm90b3R5cGUudG9zdHJpbmdcblx0XHQgICAgICAvLyBmb3IgbW9yZSBkZXRhaWxzLlxuXHRcdCAgICAgIHJldHVybiBvYmplY3QgPT0gKG90aGVyICsgJycpO1xuXG5cdFx0ICAgIGNhc2UgbWFwVGFnOlxuXHRcdCAgICAgIHZhciBjb252ZXJ0ID0gbWFwVG9BcnJheTtcblxuXHRcdCAgICBjYXNlIHNldFRhZzpcblx0XHQgICAgICB2YXIgaXNQYXJ0aWFsID0gYml0bWFzayAmIFBBUlRJQUxfQ09NUEFSRV9GTEFHO1xuXHRcdCAgICAgIGNvbnZlcnQgfHwgKGNvbnZlcnQgPSBzZXRUb0FycmF5KTtcblxuXHRcdCAgICAgIGlmIChvYmplY3Quc2l6ZSAhPSBvdGhlci5zaXplICYmICFpc1BhcnRpYWwpIHtcblx0XHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0XHQgICAgICB9XG5cdFx0ICAgICAgLy8gQXNzdW1lIGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLlxuXHRcdCAgICAgIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KG9iamVjdCk7XG5cdFx0ICAgICAgaWYgKHN0YWNrZWQpIHtcblx0XHQgICAgICAgIHJldHVybiBzdGFja2VkID09IG90aGVyO1xuXHRcdCAgICAgIH1cblx0XHQgICAgICBiaXRtYXNrIHw9IFVOT1JERVJFRF9DT01QQVJFX0ZMQUc7XG5cblx0XHQgICAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cblx0XHQgICAgICBzdGFjay5zZXQob2JqZWN0LCBvdGhlcik7XG5cdFx0ICAgICAgdmFyIHJlc3VsdCA9IGVxdWFsQXJyYXlzKGNvbnZlcnQob2JqZWN0KSwgY29udmVydChvdGhlciksIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spO1xuXHRcdCAgICAgIHN0YWNrWydkZWxldGUnXShvYmplY3QpO1xuXHRcdCAgICAgIHJldHVybiByZXN1bHQ7XG5cblx0XHQgICAgY2FzZSBzeW1ib2xUYWc6XG5cdFx0ICAgICAgaWYgKHN5bWJvbFZhbHVlT2YpIHtcblx0XHQgICAgICAgIHJldHVybiBzeW1ib2xWYWx1ZU9mLmNhbGwob2JqZWN0KSA9PSBzeW1ib2xWYWx1ZU9mLmNhbGwob3RoZXIpO1xuXHRcdCAgICAgIH1cblx0XHQgIH1cblx0XHQgIHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIG9iamVjdHMgd2l0aCBzdXBwb3J0IGZvclxuXHRcdCAqIHBhcnRpYWwgZGVlcCBjb21wYXJpc29ucy5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cblx0XHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG5cdFx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuXHRcdCAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIG9mIGNvbXBhcmlzb24gZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgXG5cdFx0ICogIGZvciBtb3JlIGRldGFpbHMuXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IHN0YWNrIFRyYWNrcyB0cmF2ZXJzZWQgYG9iamVjdGAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cblx0XHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBlcXVhbE9iamVjdHMob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykge1xuXHRcdCAgdmFyIGlzUGFydGlhbCA9IGJpdG1hc2sgJiBQQVJUSUFMX0NPTVBBUkVfRkxBRyxcblx0XHQgICAgICBvYmpQcm9wcyA9IGtleXMob2JqZWN0KSxcblx0XHQgICAgICBvYmpMZW5ndGggPSBvYmpQcm9wcy5sZW5ndGgsXG5cdFx0ICAgICAgb3RoUHJvcHMgPSBrZXlzKG90aGVyKSxcblx0XHQgICAgICBvdGhMZW5ndGggPSBvdGhQcm9wcy5sZW5ndGg7XG5cblx0XHQgIGlmIChvYmpMZW5ndGggIT0gb3RoTGVuZ3RoICYmICFpc1BhcnRpYWwpIHtcblx0XHQgICAgcmV0dXJuIGZhbHNlO1xuXHRcdCAgfVxuXHRcdCAgdmFyIGluZGV4ID0gb2JqTGVuZ3RoO1xuXHRcdCAgd2hpbGUgKGluZGV4LS0pIHtcblx0XHQgICAgdmFyIGtleSA9IG9ialByb3BzW2luZGV4XTtcblx0XHQgICAgaWYgKCEoaXNQYXJ0aWFsID8ga2V5IGluIG90aGVyIDogaGFzT3duUHJvcGVydHkuY2FsbChvdGhlciwga2V5KSkpIHtcblx0XHQgICAgICByZXR1cm4gZmFsc2U7XG5cdFx0ICAgIH1cblx0XHQgIH1cblx0XHQgIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cblx0XHQgIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KG9iamVjdCk7XG5cdFx0ICBpZiAoc3RhY2tlZCAmJiBzdGFjay5nZXQob3RoZXIpKSB7XG5cdFx0ICAgIHJldHVybiBzdGFja2VkID09IG90aGVyO1xuXHRcdCAgfVxuXHRcdCAgdmFyIHJlc3VsdCA9IHRydWU7XG5cdFx0ICBzdGFjay5zZXQob2JqZWN0LCBvdGhlcik7XG5cdFx0ICBzdGFjay5zZXQob3RoZXIsIG9iamVjdCk7XG5cblx0XHQgIHZhciBza2lwQ3RvciA9IGlzUGFydGlhbDtcblx0XHQgIHdoaWxlICgrK2luZGV4IDwgb2JqTGVuZ3RoKSB7XG5cdFx0ICAgIGtleSA9IG9ialByb3BzW2luZGV4XTtcblx0XHQgICAgdmFyIG9ialZhbHVlID0gb2JqZWN0W2tleV0sXG5cdFx0ICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2tleV07XG5cblx0XHQgICAgaWYgKGN1c3RvbWl6ZXIpIHtcblx0XHQgICAgICB2YXIgY29tcGFyZWQgPSBpc1BhcnRpYWxcblx0XHQgICAgICAgID8gY3VzdG9taXplcihvdGhWYWx1ZSwgb2JqVmFsdWUsIGtleSwgb3RoZXIsIG9iamVjdCwgc3RhY2spXG5cdFx0ICAgICAgICA6IGN1c3RvbWl6ZXIob2JqVmFsdWUsIG90aFZhbHVlLCBrZXksIG9iamVjdCwgb3RoZXIsIHN0YWNrKTtcblx0XHQgICAgfVxuXHRcdCAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cblx0XHQgICAgaWYgKCEoY29tcGFyZWQgPT09IHVuZGVmaW5lZFxuXHRcdCAgICAgICAgICA/IChvYmpWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKG9ialZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spKVxuXHRcdCAgICAgICAgICA6IGNvbXBhcmVkXG5cdFx0ICAgICAgICApKSB7XG5cdFx0ICAgICAgcmVzdWx0ID0gZmFsc2U7XG5cdFx0ICAgICAgYnJlYWs7XG5cdFx0ICAgIH1cblx0XHQgICAgc2tpcEN0b3IgfHwgKHNraXBDdG9yID0ga2V5ID09ICdjb25zdHJ1Y3RvcicpO1xuXHRcdCAgfVxuXHRcdCAgaWYgKHJlc3VsdCAmJiAhc2tpcEN0b3IpIHtcblx0XHQgICAgdmFyIG9iakN0b3IgPSBvYmplY3QuY29uc3RydWN0b3IsXG5cdFx0ICAgICAgICBvdGhDdG9yID0gb3RoZXIuY29uc3RydWN0b3I7XG5cblx0XHQgICAgLy8gTm9uIGBPYmplY3RgIG9iamVjdCBpbnN0YW5jZXMgd2l0aCBkaWZmZXJlbnQgY29uc3RydWN0b3JzIGFyZSBub3QgZXF1YWwuXG5cdFx0ICAgIGlmIChvYmpDdG9yICE9IG90aEN0b3IgJiZcblx0XHQgICAgICAgICgnY29uc3RydWN0b3InIGluIG9iamVjdCAmJiAnY29uc3RydWN0b3InIGluIG90aGVyKSAmJlxuXHRcdCAgICAgICAgISh0eXBlb2Ygb2JqQ3RvciA9PSAnZnVuY3Rpb24nICYmIG9iakN0b3IgaW5zdGFuY2VvZiBvYmpDdG9yICYmXG5cdFx0ICAgICAgICAgIHR5cGVvZiBvdGhDdG9yID09ICdmdW5jdGlvbicgJiYgb3RoQ3RvciBpbnN0YW5jZW9mIG90aEN0b3IpKSB7XG5cdFx0ICAgICAgcmVzdWx0ID0gZmFsc2U7XG5cdFx0ICAgIH1cblx0XHQgIH1cblx0XHQgIHN0YWNrWydkZWxldGUnXShvYmplY3QpO1xuXHRcdCAgc3RhY2tbJ2RlbGV0ZSddKG90aGVyKTtcblx0XHQgIHJldHVybiByZXN1bHQ7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogR2V0cyB0aGUgZGF0YSBmb3IgYG1hcGAuXG5cdFx0ICpcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBtYXAgVGhlIG1hcCB0byBxdWVyeS5cblx0XHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSByZWZlcmVuY2Uga2V5LlxuXHRcdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBtYXAgZGF0YS5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBnZXRNYXBEYXRhKG1hcCwga2V5KSB7XG5cdFx0ICB2YXIgZGF0YSA9IG1hcC5fX2RhdGFfXztcblx0XHQgIHJldHVybiBpc0tleWFibGUoa2V5KVxuXHRcdCAgICA/IGRhdGFbdHlwZW9mIGtleSA9PSAnc3RyaW5nJyA/ICdzdHJpbmcnIDogJ2hhc2gnXVxuXHRcdCAgICA6IGRhdGEubWFwO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIEdldHMgdGhlIHByb3BlcnR5IG5hbWVzLCB2YWx1ZXMsIGFuZCBjb21wYXJlIGZsYWdzIG9mIGBvYmplY3RgLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdFx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBtYXRjaCBkYXRhIG9mIGBvYmplY3RgLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGdldE1hdGNoRGF0YShvYmplY3QpIHtcblx0XHQgIHZhciByZXN1bHQgPSBrZXlzKG9iamVjdCksXG5cdFx0ICAgICAgbGVuZ3RoID0gcmVzdWx0Lmxlbmd0aDtcblxuXHRcdCAgd2hpbGUgKGxlbmd0aC0tKSB7XG5cdFx0ICAgIHZhciBrZXkgPSByZXN1bHRbbGVuZ3RoXSxcblx0XHQgICAgICAgIHZhbHVlID0gb2JqZWN0W2tleV07XG5cblx0XHQgICAgcmVzdWx0W2xlbmd0aF0gPSBba2V5LCB2YWx1ZSwgaXNTdHJpY3RDb21wYXJhYmxlKHZhbHVlKV07XG5cdFx0ICB9XG5cdFx0ICByZXR1cm4gcmVzdWx0O1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIEdldHMgdGhlIG5hdGl2ZSBmdW5jdGlvbiBhdCBga2V5YCBvZiBgb2JqZWN0YC5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kIHRvIGdldC5cblx0XHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZnVuY3Rpb24gaWYgaXQncyBuYXRpdmUsIGVsc2UgYHVuZGVmaW5lZGAuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gZ2V0TmF0aXZlKG9iamVjdCwga2V5KSB7XG5cdFx0ICB2YXIgdmFsdWUgPSBnZXRWYWx1ZShvYmplY3QsIGtleSk7XG5cdFx0ICByZXR1cm4gYmFzZUlzTmF0aXZlKHZhbHVlKSA/IHZhbHVlIDogdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIEdldHMgdGhlIGB0b1N0cmluZ1RhZ2Agb2YgYHZhbHVlYC5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG5cdFx0ICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgYHRvU3RyaW5nVGFnYC5cblx0XHQgKi9cblx0XHR2YXIgZ2V0VGFnID0gYmFzZUdldFRhZztcblxuXHRcdC8vIEZhbGxiYWNrIGZvciBkYXRhIHZpZXdzLCBtYXBzLCBzZXRzLCBhbmQgd2VhayBtYXBzIGluIElFIDExLFxuXHRcdC8vIGZvciBkYXRhIHZpZXdzIGluIEVkZ2UgPCAxNCwgYW5kIHByb21pc2VzIGluIE5vZGUuanMuXG5cdFx0aWYgKChEYXRhVmlldyAmJiBnZXRUYWcobmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcigxKSkpICE9IGRhdGFWaWV3VGFnKSB8fFxuXHRcdCAgICAoTWFwICYmIGdldFRhZyhuZXcgTWFwKSAhPSBtYXBUYWcpIHx8XG5cdFx0ICAgIChQcm9taXNlICYmIGdldFRhZyhQcm9taXNlLnJlc29sdmUoKSkgIT0gcHJvbWlzZVRhZykgfHxcblx0XHQgICAgKFNldCAmJiBnZXRUYWcobmV3IFNldCkgIT0gc2V0VGFnKSB8fFxuXHRcdCAgICAoV2Vha01hcCAmJiBnZXRUYWcobmV3IFdlYWtNYXApICE9IHdlYWtNYXBUYWcpKSB7XG5cdFx0ICBnZXRUYWcgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHRcdCAgICB2YXIgcmVzdWx0ID0gb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSksXG5cdFx0ICAgICAgICBDdG9yID0gcmVzdWx0ID09IG9iamVjdFRhZyA/IHZhbHVlLmNvbnN0cnVjdG9yIDogdW5kZWZpbmVkLFxuXHRcdCAgICAgICAgY3RvclN0cmluZyA9IEN0b3IgPyB0b1NvdXJjZShDdG9yKSA6IHVuZGVmaW5lZDtcblxuXHRcdCAgICBpZiAoY3RvclN0cmluZykge1xuXHRcdCAgICAgIHN3aXRjaCAoY3RvclN0cmluZykge1xuXHRcdCAgICAgICAgY2FzZSBkYXRhVmlld0N0b3JTdHJpbmc6IHJldHVybiBkYXRhVmlld1RhZztcblx0XHQgICAgICAgIGNhc2UgbWFwQ3RvclN0cmluZzogcmV0dXJuIG1hcFRhZztcblx0XHQgICAgICAgIGNhc2UgcHJvbWlzZUN0b3JTdHJpbmc6IHJldHVybiBwcm9taXNlVGFnO1xuXHRcdCAgICAgICAgY2FzZSBzZXRDdG9yU3RyaW5nOiByZXR1cm4gc2V0VGFnO1xuXHRcdCAgICAgICAgY2FzZSB3ZWFrTWFwQ3RvclN0cmluZzogcmV0dXJuIHdlYWtNYXBUYWc7XG5cdFx0ICAgICAgfVxuXHRcdCAgICB9XG5cdFx0ICAgIHJldHVybiByZXN1bHQ7XG5cdFx0ICB9O1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIENoZWNrcyBpZiBgcGF0aGAgZXhpc3RzIG9uIGBvYmplY3RgLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdFx0ICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggdG8gY2hlY2suXG5cdFx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaGFzRnVuYyBUaGUgZnVuY3Rpb24gdG8gY2hlY2sgcHJvcGVydGllcy5cblx0XHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHBhdGhgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGhhc1BhdGgob2JqZWN0LCBwYXRoLCBoYXNGdW5jKSB7XG5cdFx0ICBwYXRoID0gaXNLZXkocGF0aCwgb2JqZWN0KSA/IFtwYXRoXSA6IGNhc3RQYXRoKHBhdGgpO1xuXG5cdFx0ICB2YXIgcmVzdWx0LFxuXHRcdCAgICAgIGluZGV4ID0gLTEsXG5cdFx0ICAgICAgbGVuZ3RoID0gcGF0aC5sZW5ndGg7XG5cblx0XHQgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdFx0ICAgIHZhciBrZXkgPSB0b0tleShwYXRoW2luZGV4XSk7XG5cdFx0ICAgIGlmICghKHJlc3VsdCA9IG9iamVjdCAhPSBudWxsICYmIGhhc0Z1bmMob2JqZWN0LCBrZXkpKSkge1xuXHRcdCAgICAgIGJyZWFrO1xuXHRcdCAgICB9XG5cdFx0ICAgIG9iamVjdCA9IG9iamVjdFtrZXldO1xuXHRcdCAgfVxuXHRcdCAgaWYgKHJlc3VsdCkge1xuXHRcdCAgICByZXR1cm4gcmVzdWx0O1xuXHRcdCAgfVxuXHRcdCAgdmFyIGxlbmd0aCA9IG9iamVjdCA/IG9iamVjdC5sZW5ndGggOiAwO1xuXHRcdCAgcmV0dXJuICEhbGVuZ3RoICYmIGlzTGVuZ3RoKGxlbmd0aCkgJiYgaXNJbmRleChrZXksIGxlbmd0aCkgJiZcblx0XHQgICAgKGlzQXJyYXkob2JqZWN0KSB8fCBpc0FyZ3VtZW50cyhvYmplY3QpKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgaW5kZXguXG5cdFx0ICpcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHRcdCAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoPU1BWF9TQUZFX0lOVEVHRVJdIFRoZSB1cHBlciBib3VuZHMgb2YgYSB2YWxpZCBpbmRleC5cblx0XHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGluZGV4LCBlbHNlIGBmYWxzZWAuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gaXNJbmRleCh2YWx1ZSwgbGVuZ3RoKSB7XG5cdFx0ICBsZW5ndGggPSBsZW5ndGggPT0gbnVsbCA/IE1BWF9TQUZFX0lOVEVHRVIgOiBsZW5ndGg7XG5cdFx0ICByZXR1cm4gISFsZW5ndGggJiZcblx0XHQgICAgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyB8fCByZUlzVWludC50ZXN0KHZhbHVlKSkgJiZcblx0XHQgICAgKHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPCBsZW5ndGgpO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgcHJvcGVydHkgbmFtZSBhbmQgbm90IGEgcHJvcGVydHkgcGF0aC5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkga2V5cyBvbi5cblx0XHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHByb3BlcnR5IG5hbWUsIGVsc2UgYGZhbHNlYC5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBpc0tleSh2YWx1ZSwgb2JqZWN0KSB7XG5cdFx0ICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0XHQgICAgcmV0dXJuIGZhbHNlO1xuXHRcdCAgfVxuXHRcdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdFx0ICBpZiAodHlwZSA9PSAnbnVtYmVyJyB8fCB0eXBlID09ICdzeW1ib2wnIHx8IHR5cGUgPT0gJ2Jvb2xlYW4nIHx8XG5cdFx0ICAgICAgdmFsdWUgPT0gbnVsbCB8fCBpc1N5bWJvbCh2YWx1ZSkpIHtcblx0XHQgICAgcmV0dXJuIHRydWU7XG5cdFx0ICB9XG5cdFx0ICByZXR1cm4gcmVJc1BsYWluUHJvcC50ZXN0KHZhbHVlKSB8fCAhcmVJc0RlZXBQcm9wLnRlc3QodmFsdWUpIHx8XG5cdFx0ICAgIChvYmplY3QgIT0gbnVsbCAmJiB2YWx1ZSBpbiBPYmplY3Qob2JqZWN0KSk7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgc3VpdGFibGUgZm9yIHVzZSBhcyB1bmlxdWUgb2JqZWN0IGtleS5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdFx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgc3VpdGFibGUsIGVsc2UgYGZhbHNlYC5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBpc0tleWFibGUodmFsdWUpIHtcblx0XHQgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuXHRcdCAgcmV0dXJuICh0eXBlID09ICdzdHJpbmcnIHx8IHR5cGUgPT0gJ251bWJlcicgfHwgdHlwZSA9PSAnc3ltYm9sJyB8fCB0eXBlID09ICdib29sZWFuJylcblx0XHQgICAgPyAodmFsdWUgIT09ICdfX3Byb3RvX18nKVxuXHRcdCAgICA6ICh2YWx1ZSA9PT0gbnVsbCk7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogQ2hlY2tzIGlmIGBmdW5jYCBoYXMgaXRzIHNvdXJjZSBtYXNrZWQuXG5cdFx0ICpcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNoZWNrLlxuXHRcdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgZnVuY2AgaXMgbWFza2VkLCBlbHNlIGBmYWxzZWAuXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gaXNNYXNrZWQoZnVuYykge1xuXHRcdCAgcmV0dXJuICEhbWFza1NyY0tleSAmJiAobWFza1NyY0tleSBpbiBmdW5jKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBsaWtlbHkgYSBwcm90b3R5cGUgb2JqZWN0LlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0XHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHByb3RvdHlwZSwgZWxzZSBgZmFsc2VgLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGlzUHJvdG90eXBlKHZhbHVlKSB7XG5cdFx0ICB2YXIgQ3RvciA9IHZhbHVlICYmIHZhbHVlLmNvbnN0cnVjdG9yLFxuXHRcdCAgICAgIHByb3RvID0gKHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3Rvci5wcm90b3R5cGUpIHx8IG9iamVjdFByb3RvO1xuXG5cdFx0ICByZXR1cm4gdmFsdWUgPT09IHByb3RvO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlIGZvciBzdHJpY3QgZXF1YWxpdHkgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXG5cdFx0ICpcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHRcdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlmIHN1aXRhYmxlIGZvciBzdHJpY3Rcblx0XHQgKiAgZXF1YWxpdHkgY29tcGFyaXNvbnMsIGVsc2UgYGZhbHNlYC5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiBpc1N0cmljdENvbXBhcmFibGUodmFsdWUpIHtcblx0XHQgIHJldHVybiB2YWx1ZSA9PT0gdmFsdWUgJiYgIWlzT2JqZWN0KHZhbHVlKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYG1hdGNoZXNQcm9wZXJ0eWAgZm9yIHNvdXJjZSB2YWx1ZXMgc3VpdGFibGVcblx0XHQgKiBmb3Igc3RyaWN0IGVxdWFsaXR5IGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0XHQgKiBAcGFyYW0geyp9IHNyY1ZhbHVlIFRoZSB2YWx1ZSB0byBtYXRjaC5cblx0XHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBzcGVjIGZ1bmN0aW9uLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlKGtleSwgc3JjVmFsdWUpIHtcblx0XHQgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcblx0XHQgICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG5cdFx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHRcdCAgICB9XG5cdFx0ICAgIHJldHVybiBvYmplY3Rba2V5XSA9PT0gc3JjVmFsdWUgJiZcblx0XHQgICAgICAoc3JjVmFsdWUgIT09IHVuZGVmaW5lZCB8fCAoa2V5IGluIE9iamVjdChvYmplY3QpKSk7XG5cdFx0ICB9O1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIENvbnZlcnRzIGBzdHJpbmdgIHRvIGEgcHJvcGVydHkgcGF0aCBhcnJheS5cblx0XHQgKlxuXHRcdCAqIEBwcml2YXRlXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGNvbnZlcnQuXG5cdFx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBwcm9wZXJ0eSBwYXRoIGFycmF5LlxuXHRcdCAqL1xuXHRcdHZhciBzdHJpbmdUb1BhdGggPSBtZW1vaXplKGZ1bmN0aW9uKHN0cmluZykge1xuXHRcdCAgc3RyaW5nID0gdG9TdHJpbmcoc3RyaW5nKTtcblxuXHRcdCAgdmFyIHJlc3VsdCA9IFtdO1xuXHRcdCAgaWYgKHJlTGVhZGluZ0RvdC50ZXN0KHN0cmluZykpIHtcblx0XHQgICAgcmVzdWx0LnB1c2goJycpO1xuXHRcdCAgfVxuXHRcdCAgc3RyaW5nLnJlcGxhY2UocmVQcm9wTmFtZSwgZnVuY3Rpb24obWF0Y2gsIG51bWJlciwgcXVvdGUsIHN0cmluZykge1xuXHRcdCAgICByZXN1bHQucHVzaChxdW90ZSA/IHN0cmluZy5yZXBsYWNlKHJlRXNjYXBlQ2hhciwgJyQxJykgOiAobnVtYmVyIHx8IG1hdGNoKSk7XG5cdFx0ICB9KTtcblx0XHQgIHJldHVybiByZXN1bHQ7XG5cdFx0fSk7XG5cblx0XHQvKipcblx0XHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nIGtleSBpZiBpdCdzIG5vdCBhIHN0cmluZyBvciBzeW1ib2wuXG5cdFx0ICpcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGluc3BlY3QuXG5cdFx0ICogQHJldHVybnMge3N0cmluZ3xzeW1ib2x9IFJldHVybnMgdGhlIGtleS5cblx0XHQgKi9cblx0XHRmdW5jdGlvbiB0b0tleSh2YWx1ZSkge1xuXHRcdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyB8fCBpc1N5bWJvbCh2YWx1ZSkpIHtcblx0XHQgICAgcmV0dXJuIHZhbHVlO1xuXHRcdCAgfVxuXHRcdCAgdmFyIHJlc3VsdCA9ICh2YWx1ZSArICcnKTtcblx0XHQgIHJldHVybiAocmVzdWx0ID09ICcwJyAmJiAoMSAvIHZhbHVlKSA9PSAtSU5GSU5JVFkpID8gJy0wJyA6IHJlc3VsdDtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBDb252ZXJ0cyBgZnVuY2AgdG8gaXRzIHNvdXJjZSBjb2RlLlxuXHRcdCAqXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBwcm9jZXNzLlxuXHRcdCAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHNvdXJjZSBjb2RlLlxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIHRvU291cmNlKGZ1bmMpIHtcblx0XHQgIGlmIChmdW5jICE9IG51bGwpIHtcblx0XHQgICAgdHJ5IHtcblx0XHQgICAgICByZXR1cm4gZnVuY1RvU3RyaW5nLmNhbGwoZnVuYyk7XG5cdFx0ICAgIH0gY2F0Y2ggKGUpIHt9XG5cdFx0ICAgIHRyeSB7XG5cdFx0ICAgICAgcmV0dXJuIChmdW5jICsgJycpO1xuXHRcdCAgICB9IGNhdGNoIChlKSB7fVxuXHRcdCAgfVxuXHRcdCAgcmV0dXJuICcnO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IG1lbW9pemVzIHRoZSByZXN1bHQgb2YgYGZ1bmNgLiBJZiBgcmVzb2x2ZXJgIGlzXG5cdFx0ICogcHJvdmlkZWQsIGl0IGRldGVybWluZXMgdGhlIGNhY2hlIGtleSBmb3Igc3RvcmluZyB0aGUgcmVzdWx0IGJhc2VkIG9uIHRoZVxuXHRcdCAqIGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24uIEJ5IGRlZmF1bHQsIHRoZSBmaXJzdCBhcmd1bWVudFxuXHRcdCAqIHByb3ZpZGVkIHRvIHRoZSBtZW1vaXplZCBmdW5jdGlvbiBpcyB1c2VkIGFzIHRoZSBtYXAgY2FjaGUga2V5LiBUaGUgYGZ1bmNgXG5cdFx0ICogaXMgaW52b2tlZCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24uXG5cdFx0ICpcblx0XHQgKiAqKk5vdGU6KiogVGhlIGNhY2hlIGlzIGV4cG9zZWQgYXMgdGhlIGBjYWNoZWAgcHJvcGVydHkgb24gdGhlIG1lbW9pemVkXG5cdFx0ICogZnVuY3Rpb24uIEl0cyBjcmVhdGlvbiBtYXkgYmUgY3VzdG9taXplZCBieSByZXBsYWNpbmcgdGhlIGBfLm1lbW9pemUuQ2FjaGVgXG5cdFx0ICogY29uc3RydWN0b3Igd2l0aCBvbmUgd2hvc2UgaW5zdGFuY2VzIGltcGxlbWVudCB0aGVcblx0XHQgKiBbYE1hcGBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXByb3BlcnRpZXMtb2YtdGhlLW1hcC1wcm90b3R5cGUtb2JqZWN0KVxuXHRcdCAqIG1ldGhvZCBpbnRlcmZhY2Ugb2YgYGRlbGV0ZWAsIGBnZXRgLCBgaGFzYCwgYW5kIGBzZXRgLlxuXHRcdCAqXG5cdFx0ICogQHN0YXRpY1xuXHRcdCAqIEBtZW1iZXJPZiBfXG5cdFx0ICogQHNpbmNlIDAuMS4wXG5cdFx0ICogQGNhdGVnb3J5IEZ1bmN0aW9uXG5cdFx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gaGF2ZSBpdHMgb3V0cHV0IG1lbW9pemVkLlxuXHRcdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtyZXNvbHZlcl0gVGhlIGZ1bmN0aW9uIHRvIHJlc29sdmUgdGhlIGNhY2hlIGtleS5cblx0XHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBtZW1vaXplZCBmdW5jdGlvbi5cblx0XHQgKiBAZXhhbXBsZVxuXHRcdCAqXG5cdFx0ICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxLCAnYic6IDIgfTtcblx0XHQgKiB2YXIgb3RoZXIgPSB7ICdjJzogMywgJ2QnOiA0IH07XG5cdFx0ICpcblx0XHQgKiB2YXIgdmFsdWVzID0gXy5tZW1vaXplKF8udmFsdWVzKTtcblx0XHQgKiB2YWx1ZXMob2JqZWN0KTtcblx0XHQgKiAvLyA9PiBbMSwgMl1cblx0XHQgKlxuXHRcdCAqIHZhbHVlcyhvdGhlcik7XG5cdFx0ICogLy8gPT4gWzMsIDRdXG5cdFx0ICpcblx0XHQgKiBvYmplY3QuYSA9IDI7XG5cdFx0ICogdmFsdWVzKG9iamVjdCk7XG5cdFx0ICogLy8gPT4gWzEsIDJdXG5cdFx0ICpcblx0XHQgKiAvLyBNb2RpZnkgdGhlIHJlc3VsdCBjYWNoZS5cblx0XHQgKiB2YWx1ZXMuY2FjaGUuc2V0KG9iamVjdCwgWydhJywgJ2InXSk7XG5cdFx0ICogdmFsdWVzKG9iamVjdCk7XG5cdFx0ICogLy8gPT4gWydhJywgJ2InXVxuXHRcdCAqXG5cdFx0ICogLy8gUmVwbGFjZSBgXy5tZW1vaXplLkNhY2hlYC5cblx0XHQgKiBfLm1lbW9pemUuQ2FjaGUgPSBXZWFrTWFwO1xuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIG1lbW9pemUoZnVuYywgcmVzb2x2ZXIpIHtcblx0XHQgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nIHx8IChyZXNvbHZlciAmJiB0eXBlb2YgcmVzb2x2ZXIgIT0gJ2Z1bmN0aW9uJykpIHtcblx0XHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuXHRcdCAgfVxuXHRcdCAgdmFyIG1lbW9pemVkID0gZnVuY3Rpb24oKSB7XG5cdFx0ICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuXHRcdCAgICAgICAga2V5ID0gcmVzb2x2ZXIgPyByZXNvbHZlci5hcHBseSh0aGlzLCBhcmdzKSA6IGFyZ3NbMF0sXG5cdFx0ICAgICAgICBjYWNoZSA9IG1lbW9pemVkLmNhY2hlO1xuXG5cdFx0ICAgIGlmIChjYWNoZS5oYXMoa2V5KSkge1xuXHRcdCAgICAgIHJldHVybiBjYWNoZS5nZXQoa2V5KTtcblx0XHQgICAgfVxuXHRcdCAgICB2YXIgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzLCBhcmdzKTtcblx0XHQgICAgbWVtb2l6ZWQuY2FjaGUgPSBjYWNoZS5zZXQoa2V5LCByZXN1bHQpO1xuXHRcdCAgICByZXR1cm4gcmVzdWx0O1xuXHRcdCAgfTtcblx0XHQgIG1lbW9pemVkLmNhY2hlID0gbmV3IChtZW1vaXplLkNhY2hlIHx8IE1hcENhY2hlKTtcblx0XHQgIHJldHVybiBtZW1vaXplZDtcblx0XHR9XG5cblx0XHQvLyBBc3NpZ24gY2FjaGUgdG8gYF8ubWVtb2l6ZWAuXG5cdFx0bWVtb2l6ZS5DYWNoZSA9IE1hcENhY2hlO1xuXG5cdFx0LyoqXG5cdFx0ICogUGVyZm9ybXMgYVxuXHRcdCAqIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXNhbWV2YWx1ZXplcm8pXG5cdFx0ICogY29tcGFyaXNvbiBiZXR3ZWVuIHR3byB2YWx1ZXMgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgYXJlIGVxdWl2YWxlbnQuXG5cdFx0ICpcblx0XHQgKiBAc3RhdGljXG5cdFx0ICogQG1lbWJlck9mIF9cblx0XHQgKiBAc2luY2UgNC4wLjBcblx0XHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHRcdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG5cdFx0ICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cblx0XHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuXHRcdCAqIEBleGFtcGxlXG5cdFx0ICpcblx0XHQgKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEgfTtcblx0XHQgKiB2YXIgb3RoZXIgPSB7ICdhJzogMSB9O1xuXHRcdCAqXG5cdFx0ICogXy5lcShvYmplY3QsIG9iamVjdCk7XG5cdFx0ICogLy8gPT4gdHJ1ZVxuXHRcdCAqXG5cdFx0ICogXy5lcShvYmplY3QsIG90aGVyKTtcblx0XHQgKiAvLyA9PiBmYWxzZVxuXHRcdCAqXG5cdFx0ICogXy5lcSgnYScsICdhJyk7XG5cdFx0ICogLy8gPT4gdHJ1ZVxuXHRcdCAqXG5cdFx0ICogXy5lcSgnYScsIE9iamVjdCgnYScpKTtcblx0XHQgKiAvLyA9PiBmYWxzZVxuXHRcdCAqXG5cdFx0ICogXy5lcShOYU4sIE5hTik7XG5cdFx0ICogLy8gPT4gdHJ1ZVxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGVxKHZhbHVlLCBvdGhlcikge1xuXHRcdCAgcmV0dXJuIHZhbHVlID09PSBvdGhlciB8fCAodmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcik7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGlrZWx5IGFuIGBhcmd1bWVudHNgIG9iamVjdC5cblx0XHQgKlxuXHRcdCAqIEBzdGF0aWNcblx0XHQgKiBAbWVtYmVyT2YgX1xuXHRcdCAqIEBzaW5jZSAwLjEuMFxuXHRcdCAqIEBjYXRlZ29yeSBMYW5nXG5cdFx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdFx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LFxuXHRcdCAqICBlbHNlIGBmYWxzZWAuXG5cdFx0ICogQGV4YW1wbGVcblx0XHQgKlxuXHRcdCAqIF8uaXNBcmd1bWVudHMoZnVuY3Rpb24oKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSk7XG5cdFx0ICogLy8gPT4gdHJ1ZVxuXHRcdCAqXG5cdFx0ICogXy5pc0FyZ3VtZW50cyhbMSwgMiwgM10pO1xuXHRcdCAqIC8vID0+IGZhbHNlXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gaXNBcmd1bWVudHModmFsdWUpIHtcblx0XHQgIC8vIFNhZmFyaSA4LjEgbWFrZXMgYGFyZ3VtZW50cy5jYWxsZWVgIGVudW1lcmFibGUgaW4gc3RyaWN0IG1vZGUuXG5cdFx0ICByZXR1cm4gaXNBcnJheUxpa2VPYmplY3QodmFsdWUpICYmIGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdjYWxsZWUnKSAmJlxuXHRcdCAgICAoIXByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwodmFsdWUsICdjYWxsZWUnKSB8fCBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBhcmdzVGFnKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBBcnJheWAgb2JqZWN0LlxuXHRcdCAqXG5cdFx0ICogQHN0YXRpY1xuXHRcdCAqIEBtZW1iZXJPZiBfXG5cdFx0ICogQHNpbmNlIDAuMS4wXG5cdFx0ICogQGNhdGVnb3J5IExhbmdcblx0XHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0XHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBhcnJheSwgZWxzZSBgZmFsc2VgLlxuXHRcdCAqIEBleGFtcGxlXG5cdFx0ICpcblx0XHQgKiBfLmlzQXJyYXkoWzEsIDIsIDNdKTtcblx0XHQgKiAvLyA9PiB0cnVlXG5cdFx0ICpcblx0XHQgKiBfLmlzQXJyYXkoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG5cdFx0ICogLy8gPT4gZmFsc2Vcblx0XHQgKlxuXHRcdCAqIF8uaXNBcnJheSgnYWJjJyk7XG5cdFx0ICogLy8gPT4gZmFsc2Vcblx0XHQgKlxuXHRcdCAqIF8uaXNBcnJheShfLm5vb3ApO1xuXHRcdCAqIC8vID0+IGZhbHNlXG5cdFx0ICovXG5cdFx0dmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXG5cdFx0LyoqXG5cdFx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZS4gQSB2YWx1ZSBpcyBjb25zaWRlcmVkIGFycmF5LWxpa2UgaWYgaXQnc1xuXHRcdCAqIG5vdCBhIGZ1bmN0aW9uIGFuZCBoYXMgYSBgdmFsdWUubGVuZ3RoYCB0aGF0J3MgYW4gaW50ZWdlciBncmVhdGVyIHRoYW4gb3Jcblx0XHQgKiBlcXVhbCB0byBgMGAgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byBgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJgLlxuXHRcdCAqXG5cdFx0ICogQHN0YXRpY1xuXHRcdCAqIEBtZW1iZXJPZiBfXG5cdFx0ICogQHNpbmNlIDQuMC4wXG5cdFx0ICogQGNhdGVnb3J5IExhbmdcblx0XHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0XHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLCBlbHNlIGBmYWxzZWAuXG5cdFx0ICogQGV4YW1wbGVcblx0XHQgKlxuXHRcdCAqIF8uaXNBcnJheUxpa2UoWzEsIDIsIDNdKTtcblx0XHQgKiAvLyA9PiB0cnVlXG5cdFx0ICpcblx0XHQgKiBfLmlzQXJyYXlMaWtlKGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuXHRcdCAqIC8vID0+IHRydWVcblx0XHQgKlxuXHRcdCAqIF8uaXNBcnJheUxpa2UoJ2FiYycpO1xuXHRcdCAqIC8vID0+IHRydWVcblx0XHQgKlxuXHRcdCAqIF8uaXNBcnJheUxpa2UoXy5ub29wKTtcblx0XHQgKiAvLyA9PiBmYWxzZVxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKSB7XG5cdFx0ICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmICFpc0Z1bmN0aW9uKHZhbHVlKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmlzQXJyYXlMaWtlYCBleGNlcHQgdGhhdCBpdCBhbHNvIGNoZWNrcyBpZiBgdmFsdWVgXG5cdFx0ICogaXMgYW4gb2JqZWN0LlxuXHRcdCAqXG5cdFx0ICogQHN0YXRpY1xuXHRcdCAqIEBtZW1iZXJPZiBfXG5cdFx0ICogQHNpbmNlIDQuMC4wXG5cdFx0ICogQGNhdGVnb3J5IExhbmdcblx0XHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0XHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBhcnJheS1saWtlIG9iamVjdCxcblx0XHQgKiAgZWxzZSBgZmFsc2VgLlxuXHRcdCAqIEBleGFtcGxlXG5cdFx0ICpcblx0XHQgKiBfLmlzQXJyYXlMaWtlT2JqZWN0KFsxLCAyLCAzXSk7XG5cdFx0ICogLy8gPT4gdHJ1ZVxuXHRcdCAqXG5cdFx0ICogXy5pc0FycmF5TGlrZU9iamVjdChkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTtcblx0XHQgKiAvLyA9PiB0cnVlXG5cdFx0ICpcblx0XHQgKiBfLmlzQXJyYXlMaWtlT2JqZWN0KCdhYmMnKTtcblx0XHQgKiAvLyA9PiBmYWxzZVxuXHRcdCAqXG5cdFx0ICogXy5pc0FycmF5TGlrZU9iamVjdChfLm5vb3ApO1xuXHRcdCAqIC8vID0+IGZhbHNlXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gaXNBcnJheUxpa2VPYmplY3QodmFsdWUpIHtcblx0XHQgIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGlzQXJyYXlMaWtlKHZhbHVlKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYEZ1bmN0aW9uYCBvYmplY3QuXG5cdFx0ICpcblx0XHQgKiBAc3RhdGljXG5cdFx0ICogQG1lbWJlck9mIF9cblx0XHQgKiBAc2luY2UgMC4xLjBcblx0XHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHRcdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHRcdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgZnVuY3Rpb24sIGVsc2UgYGZhbHNlYC5cblx0XHQgKiBAZXhhbXBsZVxuXHRcdCAqXG5cdFx0ICogXy5pc0Z1bmN0aW9uKF8pO1xuXHRcdCAqIC8vID0+IHRydWVcblx0XHQgKlxuXHRcdCAqIF8uaXNGdW5jdGlvbigvYWJjLyk7XG5cdFx0ICogLy8gPT4gZmFsc2Vcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKSB7XG5cdFx0ICAvLyBUaGUgdXNlIG9mIGBPYmplY3QjdG9TdHJpbmdgIGF2b2lkcyBpc3N1ZXMgd2l0aCB0aGUgYHR5cGVvZmAgb3BlcmF0b3Jcblx0XHQgIC8vIGluIFNhZmFyaSA4LTkgd2hpY2ggcmV0dXJucyAnb2JqZWN0JyBmb3IgdHlwZWQgYXJyYXkgYW5kIG90aGVyIGNvbnN0cnVjdG9ycy5cblx0XHQgIHZhciB0YWcgPSBpc09iamVjdCh2YWx1ZSkgPyBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA6ICcnO1xuXHRcdCAgcmV0dXJuIHRhZyA9PSBmdW5jVGFnIHx8IHRhZyA9PSBnZW5UYWc7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGxlbmd0aC5cblx0XHQgKlxuXHRcdCAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBsb29zZWx5IGJhc2VkIG9uXG5cdFx0ICogW2BUb0xlbmd0aGBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXRvbGVuZ3RoKS5cblx0XHQgKlxuXHRcdCAqIEBzdGF0aWNcblx0XHQgKiBAbWVtYmVyT2YgX1xuXHRcdCAqIEBzaW5jZSA0LjAuMFxuXHRcdCAqIEBjYXRlZ29yeSBMYW5nXG5cdFx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdFx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBsZW5ndGgsIGVsc2UgYGZhbHNlYC5cblx0XHQgKiBAZXhhbXBsZVxuXHRcdCAqXG5cdFx0ICogXy5pc0xlbmd0aCgzKTtcblx0XHQgKiAvLyA9PiB0cnVlXG5cdFx0ICpcblx0XHQgKiBfLmlzTGVuZ3RoKE51bWJlci5NSU5fVkFMVUUpO1xuXHRcdCAqIC8vID0+IGZhbHNlXG5cdFx0ICpcblx0XHQgKiBfLmlzTGVuZ3RoKEluZmluaXR5KTtcblx0XHQgKiAvLyA9PiBmYWxzZVxuXHRcdCAqXG5cdFx0ICogXy5pc0xlbmd0aCgnMycpO1xuXHRcdCAqIC8vID0+IGZhbHNlXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHtcblx0XHQgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiZcblx0XHQgICAgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuXHRcdCAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcblx0XHQgKiBvZiBgT2JqZWN0YC4gKGUuZy4gYXJyYXlzLCBmdW5jdGlvbnMsIG9iamVjdHMsIHJlZ2V4ZXMsIGBuZXcgTnVtYmVyKDApYCwgYW5kIGBuZXcgU3RyaW5nKCcnKWApXG5cdFx0ICpcblx0XHQgKiBAc3RhdGljXG5cdFx0ICogQG1lbWJlck9mIF9cblx0XHQgKiBAc2luY2UgMC4xLjBcblx0XHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHRcdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHRcdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuXHRcdCAqIEBleGFtcGxlXG5cdFx0ICpcblx0XHQgKiBfLmlzT2JqZWN0KHt9KTtcblx0XHQgKiAvLyA9PiB0cnVlXG5cdFx0ICpcblx0XHQgKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG5cdFx0ICogLy8gPT4gdHJ1ZVxuXHRcdCAqXG5cdFx0ICogXy5pc09iamVjdChfLm5vb3ApO1xuXHRcdCAqIC8vID0+IHRydWVcblx0XHQgKlxuXHRcdCAqIF8uaXNPYmplY3QobnVsbCk7XG5cdFx0ICogLy8gPT4gZmFsc2Vcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuXHRcdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdFx0ICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PSAnb2JqZWN0JyB8fCB0eXBlID09ICdmdW5jdGlvbicpO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuXHRcdCAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cblx0XHQgKlxuXHRcdCAqIEBzdGF0aWNcblx0XHQgKiBAbWVtYmVyT2YgX1xuXHRcdCAqIEBzaW5jZSA0LjAuMFxuXHRcdCAqIEBjYXRlZ29yeSBMYW5nXG5cdFx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdFx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgb2JqZWN0LWxpa2UsIGVsc2UgYGZhbHNlYC5cblx0XHQgKiBAZXhhbXBsZVxuXHRcdCAqXG5cdFx0ICogXy5pc09iamVjdExpa2Uoe30pO1xuXHRcdCAqIC8vID0+IHRydWVcblx0XHQgKlxuXHRcdCAqIF8uaXNPYmplY3RMaWtlKFsxLCAyLCAzXSk7XG5cdFx0ICogLy8gPT4gdHJ1ZVxuXHRcdCAqXG5cdFx0ICogXy5pc09iamVjdExpa2UoXy5ub29wKTtcblx0XHQgKiAvLyA9PiBmYWxzZVxuXHRcdCAqXG5cdFx0ICogXy5pc09iamVjdExpa2UobnVsbCk7XG5cdFx0ICogLy8gPT4gZmFsc2Vcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcblx0XHQgIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cblx0XHQgKlxuXHRcdCAqIEBzdGF0aWNcblx0XHQgKiBAbWVtYmVyT2YgX1xuXHRcdCAqIEBzaW5jZSA0LjAuMFxuXHRcdCAqIEBjYXRlZ29yeSBMYW5nXG5cdFx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdFx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzeW1ib2wsIGVsc2UgYGZhbHNlYC5cblx0XHQgKiBAZXhhbXBsZVxuXHRcdCAqXG5cdFx0ICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuXHRcdCAqIC8vID0+IHRydWVcblx0XHQgKlxuXHRcdCAqIF8uaXNTeW1ib2woJ2FiYycpO1xuXHRcdCAqIC8vID0+IGZhbHNlXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcblx0XHQgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHxcblx0XHQgICAgKGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3ltYm9sVGFnKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgdHlwZWQgYXJyYXkuXG5cdFx0ICpcblx0XHQgKiBAc3RhdGljXG5cdFx0ICogQG1lbWJlck9mIF9cblx0XHQgKiBAc2luY2UgMy4wLjBcblx0XHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHRcdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHRcdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdHlwZWQgYXJyYXksIGVsc2UgYGZhbHNlYC5cblx0XHQgKiBAZXhhbXBsZVxuXHRcdCAqXG5cdFx0ICogXy5pc1R5cGVkQXJyYXkobmV3IFVpbnQ4QXJyYXkpO1xuXHRcdCAqIC8vID0+IHRydWVcblx0XHQgKlxuXHRcdCAqIF8uaXNUeXBlZEFycmF5KFtdKTtcblx0XHQgKiAvLyA9PiBmYWxzZVxuXHRcdCAqL1xuXHRcdHZhciBpc1R5cGVkQXJyYXkgPSBub2RlSXNUeXBlZEFycmF5ID8gYmFzZVVuYXJ5KG5vZGVJc1R5cGVkQXJyYXkpIDogYmFzZUlzVHlwZWRBcnJheTtcblxuXHRcdC8qKlxuXHRcdCAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcuIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZCBmb3IgYG51bGxgXG5cdFx0ICogYW5kIGB1bmRlZmluZWRgIHZhbHVlcy4gVGhlIHNpZ24gb2YgYC0wYCBpcyBwcmVzZXJ2ZWQuXG5cdFx0ICpcblx0XHQgKiBAc3RhdGljXG5cdFx0ICogQG1lbWJlck9mIF9cblx0XHQgKiBAc2luY2UgNC4wLjBcblx0XHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHRcdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG5cdFx0ICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuXHRcdCAqIEBleGFtcGxlXG5cdFx0ICpcblx0XHQgKiBfLnRvU3RyaW5nKG51bGwpO1xuXHRcdCAqIC8vID0+ICcnXG5cdFx0ICpcblx0XHQgKiBfLnRvU3RyaW5nKC0wKTtcblx0XHQgKiAvLyA9PiAnLTAnXG5cdFx0ICpcblx0XHQgKiBfLnRvU3RyaW5nKFsxLCAyLCAzXSk7XG5cdFx0ICogLy8gPT4gJzEsMiwzJ1xuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIHRvU3RyaW5nKHZhbHVlKSB7XG5cdFx0ICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogYmFzZVRvU3RyaW5nKHZhbHVlKTtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBHZXRzIHRoZSB2YWx1ZSBhdCBgcGF0aGAgb2YgYG9iamVjdGAuIElmIHRoZSByZXNvbHZlZCB2YWx1ZSBpc1xuXHRcdCAqIGB1bmRlZmluZWRgLCB0aGUgYGRlZmF1bHRWYWx1ZWAgaXMgcmV0dXJuZWQgaW4gaXRzIHBsYWNlLlxuXHRcdCAqXG5cdFx0ICogQHN0YXRpY1xuXHRcdCAqIEBtZW1iZXJPZiBfXG5cdFx0ICogQHNpbmNlIDMuNy4wXG5cdFx0ICogQGNhdGVnb3J5IE9iamVjdFxuXHRcdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0XHQgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHRcdCAqIEBwYXJhbSB7Kn0gW2RlZmF1bHRWYWx1ZV0gVGhlIHZhbHVlIHJldHVybmVkIGZvciBgdW5kZWZpbmVkYCByZXNvbHZlZCB2YWx1ZXMuXG5cdFx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuXHRcdCAqIEBleGFtcGxlXG5cdFx0ICpcblx0XHQgKiB2YXIgb2JqZWN0ID0geyAnYSc6IFt7ICdiJzogeyAnYyc6IDMgfSB9XSB9O1xuXHRcdCAqXG5cdFx0ICogXy5nZXQob2JqZWN0LCAnYVswXS5iLmMnKTtcblx0XHQgKiAvLyA9PiAzXG5cdFx0ICpcblx0XHQgKiBfLmdldChvYmplY3QsIFsnYScsICcwJywgJ2InLCAnYyddKTtcblx0XHQgKiAvLyA9PiAzXG5cdFx0ICpcblx0XHQgKiBfLmdldChvYmplY3QsICdhLmIuYycsICdkZWZhdWx0Jyk7XG5cdFx0ICogLy8gPT4gJ2RlZmF1bHQnXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gZ2V0KG9iamVjdCwgcGF0aCwgZGVmYXVsdFZhbHVlKSB7XG5cdFx0ICB2YXIgcmVzdWx0ID0gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBiYXNlR2V0KG9iamVjdCwgcGF0aCk7XG5cdFx0ICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgPyBkZWZhdWx0VmFsdWUgOiByZXN1bHQ7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogQ2hlY2tzIGlmIGBwYXRoYCBpcyBhIGRpcmVjdCBvciBpbmhlcml0ZWQgcHJvcGVydHkgb2YgYG9iamVjdGAuXG5cdFx0ICpcblx0XHQgKiBAc3RhdGljXG5cdFx0ICogQG1lbWJlck9mIF9cblx0XHQgKiBAc2luY2UgNC4wLjBcblx0XHQgKiBAY2F0ZWdvcnkgT2JqZWN0XG5cdFx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHRcdCAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIHRvIGNoZWNrLlxuXHRcdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgcGF0aGAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG5cdFx0ICogQGV4YW1wbGVcblx0XHQgKlxuXHRcdCAqIHZhciBvYmplY3QgPSBfLmNyZWF0ZSh7ICdhJzogXy5jcmVhdGUoeyAnYic6IDIgfSkgfSk7XG5cdFx0ICpcblx0XHQgKiBfLmhhc0luKG9iamVjdCwgJ2EnKTtcblx0XHQgKiAvLyA9PiB0cnVlXG5cdFx0ICpcblx0XHQgKiBfLmhhc0luKG9iamVjdCwgJ2EuYicpO1xuXHRcdCAqIC8vID0+IHRydWVcblx0XHQgKlxuXHRcdCAqIF8uaGFzSW4ob2JqZWN0LCBbJ2EnLCAnYiddKTtcblx0XHQgKiAvLyA9PiB0cnVlXG5cdFx0ICpcblx0XHQgKiBfLmhhc0luKG9iamVjdCwgJ2InKTtcblx0XHQgKiAvLyA9PiBmYWxzZVxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGhhc0luKG9iamVjdCwgcGF0aCkge1xuXHRcdCAgcmV0dXJuIG9iamVjdCAhPSBudWxsICYmIGhhc1BhdGgob2JqZWN0LCBwYXRoLCBiYXNlSGFzSW4pO1xuXHRcdH1cblxuXHRcdC8qKlxuXHRcdCAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGBvYmplY3RgLlxuXHRcdCAqXG5cdFx0ICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuIFNlZSB0aGVcblx0XHQgKiBbRVMgc3BlY10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LmtleXMpXG5cdFx0ICogZm9yIG1vcmUgZGV0YWlscy5cblx0XHQgKlxuXHRcdCAqIEBzdGF0aWNcblx0XHQgKiBAc2luY2UgMC4xLjBcblx0XHQgKiBAbWVtYmVyT2YgX1xuXHRcdCAqIEBjYXRlZ29yeSBPYmplY3Rcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdFx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cblx0XHQgKiBAZXhhbXBsZVxuXHRcdCAqXG5cdFx0ICogZnVuY3Rpb24gRm9vKCkge1xuXHRcdCAqICAgdGhpcy5hID0gMTtcblx0XHQgKiAgIHRoaXMuYiA9IDI7XG5cdFx0ICogfVxuXHRcdCAqXG5cdFx0ICogRm9vLnByb3RvdHlwZS5jID0gMztcblx0XHQgKlxuXHRcdCAqIF8ua2V5cyhuZXcgRm9vKTtcblx0XHQgKiAvLyA9PiBbJ2EnLCAnYiddIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG5cdFx0ICpcblx0XHQgKiBfLmtleXMoJ2hpJyk7XG5cdFx0ICogLy8gPT4gWycwJywgJzEnXVxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGtleXMob2JqZWN0KSB7XG5cdFx0ICByZXR1cm4gaXNBcnJheUxpa2Uob2JqZWN0KSA/IGFycmF5TGlrZUtleXMob2JqZWN0KSA6IGJhc2VLZXlzKG9iamVjdCk7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogQW4gYWx0ZXJuYXRpdmUgdG8gYF8ucmVkdWNlYDsgdGhpcyBtZXRob2QgdHJhbnNmb3JtcyBgb2JqZWN0YCB0byBhIG5ld1xuXHRcdCAqIGBhY2N1bXVsYXRvcmAgb2JqZWN0IHdoaWNoIGlzIHRoZSByZXN1bHQgb2YgcnVubmluZyBlYWNoIG9mIGl0cyBvd25cblx0XHQgKiBlbnVtZXJhYmxlIHN0cmluZyBrZXllZCBwcm9wZXJ0aWVzIHRocnUgYGl0ZXJhdGVlYCwgd2l0aCBlYWNoIGludm9jYXRpb25cblx0XHQgKiBwb3RlbnRpYWxseSBtdXRhdGluZyB0aGUgYGFjY3VtdWxhdG9yYCBvYmplY3QuIElmIGBhY2N1bXVsYXRvcmAgaXMgbm90XG5cdFx0ICogcHJvdmlkZWQsIGEgbmV3IG9iamVjdCB3aXRoIHRoZSBzYW1lIGBbW1Byb3RvdHlwZV1dYCB3aWxsIGJlIHVzZWQuIFRoZVxuXHRcdCAqIGl0ZXJhdGVlIGlzIGludm9rZWQgd2l0aCBmb3VyIGFyZ3VtZW50czogKGFjY3VtdWxhdG9yLCB2YWx1ZSwga2V5LCBvYmplY3QpLlxuXHRcdCAqIEl0ZXJhdGVlIGZ1bmN0aW9ucyBtYXkgZXhpdCBpdGVyYXRpb24gZWFybHkgYnkgZXhwbGljaXRseSByZXR1cm5pbmcgYGZhbHNlYC5cblx0XHQgKlxuXHRcdCAqIEBzdGF0aWNcblx0XHQgKiBAbWVtYmVyT2YgX1xuXHRcdCAqIEBzaW5jZSAxLjMuMFxuXHRcdCAqIEBjYXRlZ29yeSBPYmplY3Rcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaXRlcmF0ZSBvdmVyLlxuXHRcdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtpdGVyYXRlZT1fLmlkZW50aXR5XSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuXHRcdCAqIEBwYXJhbSB7Kn0gW2FjY3VtdWxhdG9yXSBUaGUgY3VzdG9tIGFjY3VtdWxhdG9yIHZhbHVlLlxuXHRcdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZS5cblx0XHQgKiBAZXhhbXBsZVxuXHRcdCAqXG5cdFx0ICogXy50cmFuc2Zvcm0oWzIsIDMsIDRdLCBmdW5jdGlvbihyZXN1bHQsIG4pIHtcblx0XHQgKiAgIHJlc3VsdC5wdXNoKG4gKj0gbik7XG5cdFx0ICogICByZXR1cm4gbiAlIDIgPT0gMDtcblx0XHQgKiB9LCBbXSk7XG5cdFx0ICogLy8gPT4gWzQsIDldXG5cdFx0ICpcblx0XHQgKiBfLnRyYW5zZm9ybSh7ICdhJzogMSwgJ2InOiAyLCAnYyc6IDEgfSwgZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG5cdFx0ICogICAocmVzdWx0W3ZhbHVlXSB8fCAocmVzdWx0W3ZhbHVlXSA9IFtdKSkucHVzaChrZXkpO1xuXHRcdCAqIH0sIHt9KTtcblx0XHQgKiAvLyA9PiB7ICcxJzogWydhJywgJ2MnXSwgJzInOiBbJ2InXSB9XG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gdHJhbnNmb3JtKG9iamVjdCwgaXRlcmF0ZWUsIGFjY3VtdWxhdG9yKSB7XG5cdFx0ICB2YXIgaXNBcnIgPSBpc0FycmF5KG9iamVjdCkgfHwgaXNUeXBlZEFycmF5KG9iamVjdCk7XG5cdFx0ICBpdGVyYXRlZSA9IGJhc2VJdGVyYXRlZShpdGVyYXRlZSk7XG5cblx0XHQgIGlmIChhY2N1bXVsYXRvciA9PSBudWxsKSB7XG5cdFx0ICAgIGlmIChpc0FyciB8fCBpc09iamVjdChvYmplY3QpKSB7XG5cdFx0ICAgICAgdmFyIEN0b3IgPSBvYmplY3QuY29uc3RydWN0b3I7XG5cdFx0ICAgICAgaWYgKGlzQXJyKSB7XG5cdFx0ICAgICAgICBhY2N1bXVsYXRvciA9IGlzQXJyYXkob2JqZWN0KSA/IG5ldyBDdG9yIDogW107XG5cdFx0ICAgICAgfSBlbHNlIHtcblx0XHQgICAgICAgIGFjY3VtdWxhdG9yID0gaXNGdW5jdGlvbihDdG9yKSA/IGJhc2VDcmVhdGUoZ2V0UHJvdG90eXBlKG9iamVjdCkpIDoge307XG5cdFx0ICAgICAgfVxuXHRcdCAgICB9IGVsc2Uge1xuXHRcdCAgICAgIGFjY3VtdWxhdG9yID0ge307XG5cdFx0ICAgIH1cblx0XHQgIH1cblx0XHQgIChpc0FyciA/IGFycmF5RWFjaCA6IGJhc2VGb3JPd24pKG9iamVjdCwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBvYmplY3QpIHtcblx0XHQgICAgcmV0dXJuIGl0ZXJhdGVlKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIG9iamVjdCk7XG5cdFx0ICB9KTtcblx0XHQgIHJldHVybiBhY2N1bXVsYXRvcjtcblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBmaXJzdCBhcmd1bWVudCBpdCByZWNlaXZlcy5cblx0XHQgKlxuXHRcdCAqIEBzdGF0aWNcblx0XHQgKiBAc2luY2UgMC4xLjBcblx0XHQgKiBAbWVtYmVyT2YgX1xuXHRcdCAqIEBjYXRlZ29yeSBVdGlsXG5cdFx0ICogQHBhcmFtIHsqfSB2YWx1ZSBBbnkgdmFsdWUuXG5cdFx0ICogQHJldHVybnMgeyp9IFJldHVybnMgYHZhbHVlYC5cblx0XHQgKiBAZXhhbXBsZVxuXHRcdCAqXG5cdFx0ICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxIH07XG5cdFx0ICpcblx0XHQgKiBjb25zb2xlLmxvZyhfLmlkZW50aXR5KG9iamVjdCkgPT09IG9iamVjdCk7XG5cdFx0ICogLy8gPT4gdHJ1ZVxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIGlkZW50aXR5KHZhbHVlKSB7XG5cdFx0ICByZXR1cm4gdmFsdWU7XG5cdFx0fVxuXG5cdFx0LyoqXG5cdFx0ICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgdmFsdWUgYXQgYHBhdGhgIG9mIGEgZ2l2ZW4gb2JqZWN0LlxuXHRcdCAqXG5cdFx0ICogQHN0YXRpY1xuXHRcdCAqIEBtZW1iZXJPZiBfXG5cdFx0ICogQHNpbmNlIDIuNC4wXG5cdFx0ICogQGNhdGVnb3J5IFV0aWxcblx0XHQgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHRcdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLlxuXHRcdCAqIEBleGFtcGxlXG5cdFx0ICpcblx0XHQgKiB2YXIgb2JqZWN0cyA9IFtcblx0XHQgKiAgIHsgJ2EnOiB7ICdiJzogMiB9IH0sXG5cdFx0ICogICB7ICdhJzogeyAnYic6IDEgfSB9XG5cdFx0ICogXTtcblx0XHQgKlxuXHRcdCAqIF8ubWFwKG9iamVjdHMsIF8ucHJvcGVydHkoJ2EuYicpKTtcblx0XHQgKiAvLyA9PiBbMiwgMV1cblx0XHQgKlxuXHRcdCAqIF8ubWFwKF8uc29ydEJ5KG9iamVjdHMsIF8ucHJvcGVydHkoWydhJywgJ2InXSkpLCAnYS5iJyk7XG5cdFx0ICogLy8gPT4gWzEsIDJdXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gcHJvcGVydHkocGF0aCkge1xuXHRcdCAgcmV0dXJuIGlzS2V5KHBhdGgpID8gYmFzZVByb3BlcnR5KHRvS2V5KHBhdGgpKSA6IGJhc2VQcm9wZXJ0eURlZXAocGF0aCk7XG5cdFx0fVxuXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSB0cmFuc2Zvcm07IFxuXHR9IChsb2Rhc2hfdHJhbnNmb3JtLCBsb2Rhc2hfdHJhbnNmb3JtLmV4cG9ydHMpKTtcblx0cmV0dXJuIGxvZGFzaF90cmFuc2Zvcm0uZXhwb3J0cztcbn1cblxuZXhwb3J0IHsgcmVxdWlyZUxvZGFzaF90cmFuc2Zvcm0gYXMgX19yZXF1aXJlIH07XG4iLCIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UsIFN1cHByZXNzZWRFcnJvciwgU3ltYm9sLCBJdGVyYXRvciAqL1xyXG5cclxuXHJcbmZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxudHlwZW9mIFN1cHByZXNzZWRFcnJvciA9PT0gXCJmdW5jdGlvblwiID8gU3VwcHJlc3NlZEVycm9yIDogZnVuY3Rpb24gKGVycm9yLCBzdXBwcmVzc2VkLCBtZXNzYWdlKSB7XHJcbiAgICB2YXIgZSA9IG5ldyBFcnJvcihtZXNzYWdlKTtcclxuICAgIHJldHVybiBlLm5hbWUgPSBcIlN1cHByZXNzZWRFcnJvclwiLCBlLmVycm9yID0gZXJyb3IsIGUuc3VwcHJlc3NlZCA9IHN1cHByZXNzZWQsIGU7XHJcbn07XG5cbmV4cG9ydCB7IF9fcmVzdCB9O1xuIiwidmFyIHJhbmRvbVVVSUQgPSB0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8ucmFuZG9tVVVJRCAmJiBjcnlwdG8ucmFuZG9tVVVJRC5iaW5kKGNyeXB0byk7XG52YXIgbmF0aXZlID0ge1xuICByYW5kb21VVUlEXG59O1xuXG5leHBvcnQgeyBuYXRpdmUgYXMgZGVmYXVsdCB9O1xuIiwiLy8gVW5pcXVlIElEIGNyZWF0aW9uIHJlcXVpcmVzIGEgaGlnaCBxdWFsaXR5IHJhbmRvbSAjIGdlbmVyYXRvci4gSW4gdGhlIGJyb3dzZXIgd2UgdGhlcmVmb3JlXG4vLyByZXF1aXJlIHRoZSBjcnlwdG8gQVBJIGFuZCBkbyBub3Qgc3VwcG9ydCBidWlsdC1pbiBmYWxsYmFjayB0byBsb3dlciBxdWFsaXR5IHJhbmRvbSBudW1iZXJcbi8vIGdlbmVyYXRvcnMgKGxpa2UgTWF0aC5yYW5kb20oKSkuXG5cbnZhciBnZXRSYW5kb21WYWx1ZXM7XG52YXIgcm5kczggPSBuZXcgVWludDhBcnJheSgxNik7XG5mdW5jdGlvbiBybmcoKSB7XG4gIC8vIGxhenkgbG9hZCBzbyB0aGF0IGVudmlyb25tZW50cyB0aGF0IG5lZWQgdG8gcG9seWZpbGwgaGF2ZSBhIGNoYW5jZSB0byBkbyBzb1xuICBpZiAoIWdldFJhbmRvbVZhbHVlcykge1xuICAgIC8vIGdldFJhbmRvbVZhbHVlcyBuZWVkcyB0byBiZSBpbnZva2VkIGluIGEgY29udGV4dCB3aGVyZSBcInRoaXNcIiBpcyBhIENyeXB0byBpbXBsZW1lbnRhdGlvbi5cbiAgICBnZXRSYW5kb21WYWx1ZXMgPSB0eXBlb2YgY3J5cHRvICE9PSAndW5kZWZpbmVkJyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChjcnlwdG8pO1xuICAgIGlmICghZ2V0UmFuZG9tVmFsdWVzKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NyeXB0by5nZXRSYW5kb21WYWx1ZXMoKSBub3Qgc3VwcG9ydGVkLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkI2dldHJhbmRvbXZhbHVlcy1ub3Qtc3VwcG9ydGVkJyk7XG4gICAgfVxuICB9XG4gIHJldHVybiBnZXRSYW5kb21WYWx1ZXMocm5kczgpO1xufVxuXG5leHBvcnQgeyBybmcgYXMgZGVmYXVsdCB9O1xuIiwiLyoqXG4gKiBDb252ZXJ0IGFycmF5IG9mIDE2IGJ5dGUgdmFsdWVzIHRvIFVVSUQgc3RyaW5nIGZvcm1hdCBvZiB0aGUgZm9ybTpcbiAqIFhYWFhYWFhYLVhYWFgtWFhYWC1YWFhYLVhYWFhYWFhYWFhYWFxuICovXG52YXIgYnl0ZVRvSGV4ID0gW107XG5mb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgKytpKSB7XG4gIGJ5dGVUb0hleC5wdXNoKChpICsgMHgxMDApLnRvU3RyaW5nKDE2KS5zbGljZSgxKSk7XG59XG5mdW5jdGlvbiB1bnNhZmVTdHJpbmdpZnkoYXJyLCBvZmZzZXQgPSAwKSB7XG4gIC8vIE5vdGU6IEJlIGNhcmVmdWwgZWRpdGluZyB0aGlzIGNvZGUhICBJdCdzIGJlZW4gdHVuZWQgZm9yIHBlcmZvcm1hbmNlXG4gIC8vIGFuZCB3b3JrcyBpbiB3YXlzIHlvdSBtYXkgbm90IGV4cGVjdC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZC9wdWxsLzQzNFxuICAvL1xuICAvLyBOb3RlIHRvIGZ1dHVyZS1zZWxmOiBObywgeW91IGNhbid0IHJlbW92ZSB0aGUgYHRvTG93ZXJDYXNlKClgIGNhbGwuXG4gIC8vIFJFRjogaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkL3B1bGwvNjc3I2lzc3VlY29tbWVudC0xNzU3MzUxMzUxXG4gIHJldHVybiAoYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDFdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgMl1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyAzXV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDRdXSArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgNV1dICsgJy0nICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA2XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDddXSArICctJyArIGJ5dGVUb0hleFthcnJbb2Zmc2V0ICsgOF1dICsgYnl0ZVRvSGV4W2FycltvZmZzZXQgKyA5XV0gKyAnLScgKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEwXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDExXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEyXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDEzXV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE0XV0gKyBieXRlVG9IZXhbYXJyW29mZnNldCArIDE1XV0pLnRvTG93ZXJDYXNlKCk7XG59XG5cbmV4cG9ydCB7IHVuc2FmZVN0cmluZ2lmeSB9O1xuIiwiaW1wb3J0IG5hdGl2ZSBmcm9tICcuL25hdGl2ZS5tanMnO1xuaW1wb3J0IHJuZyBmcm9tICcuL3JuZy5tanMnO1xuaW1wb3J0IHsgdW5zYWZlU3RyaW5naWZ5IH0gZnJvbSAnLi9zdHJpbmdpZnkubWpzJztcblxuZnVuY3Rpb24gdjQob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgaWYgKG5hdGl2ZS5yYW5kb21VVUlEICYmICFidWYgJiYgIW9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmF0aXZlLnJhbmRvbVVVSUQoKTtcbiAgfVxuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIHJuZHMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgcm5nKSgpO1xuXG4gIC8vIFBlciA0LjQsIHNldCBiaXRzIGZvciB2ZXJzaW9uIGFuZCBgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZGBcbiAgcm5kc1s2XSA9IHJuZHNbNl0gJiAweDBmIHwgMHg0MDtcbiAgcm5kc1s4XSA9IHJuZHNbOF0gJiAweDNmIHwgMHg4MDtcbiAgcmV0dXJuIHVuc2FmZVN0cmluZ2lmeShybmRzKTtcbn1cblxuZXhwb3J0IHsgdjQgYXMgZGVmYXVsdCB9O1xuIiwidmFyIHV0aWw7XG4oZnVuY3Rpb24gKHV0aWwpIHtcbiAgICB1dGlsLmFzc2VydEVxdWFsID0gKHZhbCkgPT4gdmFsO1xuICAgIGZ1bmN0aW9uIGFzc2VydElzKF9hcmcpIHsgfVxuICAgIHV0aWwuYXNzZXJ0SXMgPSBhc3NlcnRJcztcbiAgICBmdW5jdGlvbiBhc3NlcnROZXZlcihfeCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICB9XG4gICAgdXRpbC5hc3NlcnROZXZlciA9IGFzc2VydE5ldmVyO1xuICAgIHV0aWwuYXJyYXlUb0VudW0gPSAoaXRlbXMpID0+IHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICAgICAgb2JqW2l0ZW1dID0gaXRlbTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH07XG4gICAgdXRpbC5nZXRWYWxpZEVudW1WYWx1ZXMgPSAob2JqKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbGlkS2V5cyA9IHV0aWwub2JqZWN0S2V5cyhvYmopLmZpbHRlcigoaykgPT4gdHlwZW9mIG9ialtvYmpba11dICE9PSBcIm51bWJlclwiKTtcbiAgICAgICAgY29uc3QgZmlsdGVyZWQgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrIG9mIHZhbGlkS2V5cykge1xuICAgICAgICAgICAgZmlsdGVyZWRba10gPSBvYmpba107XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0VmFsdWVzKGZpbHRlcmVkKTtcbiAgICB9O1xuICAgIHV0aWwub2JqZWN0VmFsdWVzID0gKG9iaikgPT4ge1xuICAgICAgICByZXR1cm4gdXRpbC5vYmplY3RLZXlzKG9iaikubWFwKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqW2VdO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHV0aWwub2JqZWN0S2V5cyA9IHR5cGVvZiBPYmplY3Qua2V5cyA9PT0gXCJmdW5jdGlvblwiIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFuL2JhblxuICAgICAgICA/IChvYmopID0+IE9iamVjdC5rZXlzKG9iaikgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYW4vYmFuXG4gICAgICAgIDogKG9iamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qga2V5cyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgICAgIH07XG4gICAgdXRpbC5maW5kID0gKGFyciwgY2hlY2tlcikgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYXJyKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2tlcihpdGVtKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH07XG4gICAgdXRpbC5pc0ludGVnZXIgPSB0eXBlb2YgTnVtYmVyLmlzSW50ZWdlciA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgID8gKHZhbCkgPT4gTnVtYmVyLmlzSW50ZWdlcih2YWwpIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFuL2JhblxuICAgICAgICA6ICh2YWwpID0+IHR5cGVvZiB2YWwgPT09IFwibnVtYmVyXCIgJiYgaXNGaW5pdGUodmFsKSAmJiBNYXRoLmZsb29yKHZhbCkgPT09IHZhbDtcbiAgICBmdW5jdGlvbiBqb2luVmFsdWVzKGFycmF5LCBzZXBhcmF0b3IgPSBcIiB8IFwiKSB7XG4gICAgICAgIHJldHVybiBhcnJheVxuICAgICAgICAgICAgLm1hcCgodmFsKSA9PiAodHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIiA/IGAnJHt2YWx9J2AgOiB2YWwpKVxuICAgICAgICAgICAgLmpvaW4oc2VwYXJhdG9yKTtcbiAgICB9XG4gICAgdXRpbC5qb2luVmFsdWVzID0gam9pblZhbHVlcztcbiAgICB1dGlsLmpzb25TdHJpbmdpZnlSZXBsYWNlciA9IChfLCB2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcImJpZ2ludFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbn0pKHV0aWwgfHwgKHV0aWwgPSB7fSkpO1xudmFyIG9iamVjdFV0aWw7XG4oZnVuY3Rpb24gKG9iamVjdFV0aWwpIHtcbiAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzID0gKGZpcnN0LCBzZWNvbmQpID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmZpcnN0LFxuICAgICAgICAgICAgLi4uc2Vjb25kLCAvLyBzZWNvbmQgb3ZlcndyaXRlcyBmaXJzdFxuICAgICAgICB9O1xuICAgIH07XG59KShvYmplY3RVdGlsIHx8IChvYmplY3RVdGlsID0ge30pKTtcbmNvbnN0IFpvZFBhcnNlZFR5cGUgPSB1dGlsLmFycmF5VG9FbnVtKFtcbiAgICBcInN0cmluZ1wiLFxuICAgIFwibmFuXCIsXG4gICAgXCJudW1iZXJcIixcbiAgICBcImludGVnZXJcIixcbiAgICBcImZsb2F0XCIsXG4gICAgXCJib29sZWFuXCIsXG4gICAgXCJkYXRlXCIsXG4gICAgXCJiaWdpbnRcIixcbiAgICBcInN5bWJvbFwiLFxuICAgIFwiZnVuY3Rpb25cIixcbiAgICBcInVuZGVmaW5lZFwiLFxuICAgIFwibnVsbFwiLFxuICAgIFwiYXJyYXlcIixcbiAgICBcIm9iamVjdFwiLFxuICAgIFwidW5rbm93blwiLFxuICAgIFwicHJvbWlzZVwiLFxuICAgIFwidm9pZFwiLFxuICAgIFwibmV2ZXJcIixcbiAgICBcIm1hcFwiLFxuICAgIFwic2V0XCIsXG5dKTtcbmNvbnN0IGdldFBhcnNlZFR5cGUgPSAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IHQgPSB0eXBlb2YgZGF0YTtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgY2FzZSBcInVuZGVmaW5lZFwiOlxuICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkO1xuICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5zdHJpbmc7XG4gICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICAgIHJldHVybiBpc05hTihkYXRhKSA/IFpvZFBhcnNlZFR5cGUubmFuIDogWm9kUGFyc2VkVHlwZS5udW1iZXI7XG4gICAgICAgIGNhc2UgXCJib29sZWFuXCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5ib29sZWFuO1xuICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmZ1bmN0aW9uO1xuICAgICAgICBjYXNlIFwiYmlnaW50XCI6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5iaWdpbnQ7XG4gICAgICAgIGNhc2UgXCJzeW1ib2xcIjpcbiAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnN5bWJvbDtcbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5hcnJheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUubnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhLnRoZW4gJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZGF0YS50aGVuID09PSBcImZ1bmN0aW9uXCIgJiZcbiAgICAgICAgICAgICAgICBkYXRhLmNhdGNoICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGRhdGEuY2F0Y2ggPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIE1hcCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgTWFwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFpvZFBhcnNlZFR5cGUubWFwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBTZXQgIT09IFwidW5kZWZpbmVkXCIgJiYgZGF0YSBpbnN0YW5jZW9mIFNldCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLnNldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgRGF0ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkYXRhIGluc3RhbmNlb2YgRGF0ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBab2RQYXJzZWRUeXBlLmRhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS5vYmplY3Q7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gWm9kUGFyc2VkVHlwZS51bmtub3duO1xuICAgIH1cbn07XG5cbmNvbnN0IFpvZElzc3VlQ29kZSA9IHV0aWwuYXJyYXlUb0VudW0oW1xuICAgIFwiaW52YWxpZF90eXBlXCIsXG4gICAgXCJpbnZhbGlkX2xpdGVyYWxcIixcbiAgICBcImN1c3RvbVwiLFxuICAgIFwiaW52YWxpZF91bmlvblwiLFxuICAgIFwiaW52YWxpZF91bmlvbl9kaXNjcmltaW5hdG9yXCIsXG4gICAgXCJpbnZhbGlkX2VudW1fdmFsdWVcIixcbiAgICBcInVucmVjb2duaXplZF9rZXlzXCIsXG4gICAgXCJpbnZhbGlkX2FyZ3VtZW50c1wiLFxuICAgIFwiaW52YWxpZF9yZXR1cm5fdHlwZVwiLFxuICAgIFwiaW52YWxpZF9kYXRlXCIsXG4gICAgXCJpbnZhbGlkX3N0cmluZ1wiLFxuICAgIFwidG9vX3NtYWxsXCIsXG4gICAgXCJ0b29fYmlnXCIsXG4gICAgXCJpbnZhbGlkX2ludGVyc2VjdGlvbl90eXBlc1wiLFxuICAgIFwibm90X211bHRpcGxlX29mXCIsXG4gICAgXCJub3RfZmluaXRlXCIsXG5dKTtcbmNvbnN0IHF1b3RlbGVzc0pzb24gPSAob2JqKSA9PiB7XG4gICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgMik7XG4gICAgcmV0dXJuIGpzb24ucmVwbGFjZSgvXCIoW15cIl0rKVwiOi9nLCBcIiQxOlwiKTtcbn07XG5jbGFzcyBab2RFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3Rvcihpc3N1ZXMpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5pc3N1ZXMgPSBbXTtcbiAgICAgICAgdGhpcy5hZGRJc3N1ZSA9IChzdWIpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVzID0gWy4uLnRoaXMuaXNzdWVzLCBzdWJdO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFkZElzc3VlcyA9IChzdWJzID0gW10pID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNzdWVzID0gWy4uLnRoaXMuaXNzdWVzLCAuLi5zdWJzXTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgYWN0dWFsUHJvdG8gPSBuZXcudGFyZ2V0LnByb3RvdHlwZTtcbiAgICAgICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBhY3R1YWxQcm90byk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9fcHJvdG9fXyA9IGFjdHVhbFByb3RvO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZSA9IFwiWm9kRXJyb3JcIjtcbiAgICAgICAgdGhpcy5pc3N1ZXMgPSBpc3N1ZXM7XG4gICAgfVxuICAgIGdldCBlcnJvcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzc3VlcztcbiAgICB9XG4gICAgZm9ybWF0KF9tYXBwZXIpIHtcbiAgICAgICAgY29uc3QgbWFwcGVyID0gX21hcHBlciB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGlzc3VlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzc3VlLm1lc3NhZ2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICBjb25zdCBmaWVsZEVycm9ycyA9IHsgX2Vycm9yczogW10gfTtcbiAgICAgICAgY29uc3QgcHJvY2Vzc0Vycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGlzc3VlIG9mIGVycm9yLmlzc3Vlcykge1xuICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcImludmFsaWRfdW5pb25cIikge1xuICAgICAgICAgICAgICAgICAgICBpc3N1ZS51bmlvbkVycm9ycy5tYXAocHJvY2Vzc0Vycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUuY29kZSA9PT0gXCJpbnZhbGlkX3JldHVybl90eXBlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0Vycm9yKGlzc3VlLnJldHVyblR5cGVFcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLmNvZGUgPT09IFwiaW52YWxpZF9hcmd1bWVudHNcIikge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzRXJyb3IoaXNzdWUuYXJndW1lbnRzRXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpc3N1ZS5wYXRoLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZEVycm9ycy5fZXJyb3JzLnB1c2gobWFwcGVyKGlzc3VlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VyciA9IGZpZWxkRXJyb3JzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChpIDwgaXNzdWUucGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsID0gaXNzdWUucGF0aFtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlcm1pbmFsID0gaSA9PT0gaXNzdWUucGF0aC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZXJtaW5hbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmICh0eXBlb2YgZWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0gZWxzZSBpZiAodHlwZW9mIGVsID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBjb25zdCBlcnJvckFycmF5OiBhbnkgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGVycm9yQXJyYXkuX2Vycm9ycyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgY3VycltlbF0gPSBjdXJyW2VsXSB8fCBlcnJvckFycmF5O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdID0gY3VycltlbF0gfHwgeyBfZXJyb3JzOiBbXSB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJbZWxdLl9lcnJvcnMucHVzaChtYXBwZXIoaXNzdWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnIgPSBjdXJyW2VsXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcHJvY2Vzc0Vycm9yKHRoaXMpO1xuICAgICAgICByZXR1cm4gZmllbGRFcnJvcnM7XG4gICAgfVxuICAgIHN0YXRpYyBhc3NlcnQodmFsdWUpIHtcbiAgICAgICAgaWYgKCEodmFsdWUgaW5zdGFuY2VvZiBab2RFcnJvcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTm90IGEgWm9kRXJyb3I6ICR7dmFsdWV9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2U7XG4gICAgfVxuICAgIGdldCBtZXNzYWdlKCkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy5pc3N1ZXMsIHV0aWwuanNvblN0cmluZ2lmeVJlcGxhY2VyLCAyKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzc3Vlcy5sZW5ndGggPT09IDA7XG4gICAgfVxuICAgIGZsYXR0ZW4obWFwcGVyID0gKGlzc3VlKSA9PiBpc3N1ZS5tZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGZpZWxkRXJyb3JzID0ge307XG4gICAgICAgIGNvbnN0IGZvcm1FcnJvcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBzdWIgb2YgdGhpcy5pc3N1ZXMpIHtcbiAgICAgICAgICAgIGlmIChzdWIucGF0aC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZmllbGRFcnJvcnNbc3ViLnBhdGhbMF1dID0gZmllbGRFcnJvcnNbc3ViLnBhdGhbMF1dIHx8IFtdO1xuICAgICAgICAgICAgICAgIGZpZWxkRXJyb3JzW3N1Yi5wYXRoWzBdXS5wdXNoKG1hcHBlcihzdWIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvcm1FcnJvcnMucHVzaChtYXBwZXIoc3ViKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgZm9ybUVycm9ycywgZmllbGRFcnJvcnMgfTtcbiAgICB9XG4gICAgZ2V0IGZvcm1FcnJvcnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZsYXR0ZW4oKTtcbiAgICB9XG59XG5ab2RFcnJvci5jcmVhdGUgPSAoaXNzdWVzKSA9PiB7XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoaXNzdWVzKTtcbiAgICByZXR1cm4gZXJyb3I7XG59O1xuXG5jb25zdCBlcnJvck1hcCA9IChpc3N1ZSwgX2N0eCkgPT4ge1xuICAgIGxldCBtZXNzYWdlO1xuICAgIHN3aXRjaCAoaXNzdWUuY29kZSkge1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGU6XG4gICAgICAgICAgICBpZiAoaXNzdWUucmVjZWl2ZWQgPT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IFwiUmVxdWlyZWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgRXhwZWN0ZWQgJHtpc3N1ZS5leHBlY3RlZH0sIHJlY2VpdmVkICR7aXNzdWUucmVjZWl2ZWR9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2xpdGVyYWw6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgbGl0ZXJhbCB2YWx1ZSwgZXhwZWN0ZWQgJHtKU09OLnN0cmluZ2lmeShpc3N1ZS5leHBlY3RlZCwgdXRpbC5qc29uU3RyaW5naWZ5UmVwbGFjZXIpfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUudW5yZWNvZ25pemVkX2tleXM6XG4gICAgICAgICAgICBtZXNzYWdlID0gYFVucmVjb2duaXplZCBrZXkocykgaW4gb2JqZWN0OiAke3V0aWwuam9pblZhbHVlcyhpc3N1ZS5rZXlzLCBcIiwgXCIpfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbjpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dGA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbl9kaXNjcmltaW5hdG9yOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGRpc2NyaW1pbmF0b3IgdmFsdWUuIEV4cGVjdGVkICR7dXRpbC5qb2luVmFsdWVzKGlzc3VlLm9wdGlvbnMpfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9lbnVtX3ZhbHVlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGVudW0gdmFsdWUuIEV4cGVjdGVkICR7dXRpbC5qb2luVmFsdWVzKGlzc3VlLm9wdGlvbnMpfSwgcmVjZWl2ZWQgJyR7aXNzdWUucmVjZWl2ZWR9J2A7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9hcmd1bWVudHM6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZnVuY3Rpb24gYXJndW1lbnRzYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX3JldHVybl90eXBlOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGZ1bmN0aW9uIHJldHVybiB0eXBlYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5pbnZhbGlkX2RhdGU6XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgZGF0ZWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmc6XG4gICAgICAgICAgICBpZiAodHlwZW9mIGlzc3VlLnZhbGlkYXRpb24gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJpbmNsdWRlc1wiIGluIGlzc3VlLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0OiBtdXN0IGluY2x1ZGUgXCIke2lzc3VlLnZhbGlkYXRpb24uaW5jbHVkZXN9XCJgO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGlzc3VlLnZhbGlkYXRpb24ucG9zaXRpb24gPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgJHttZXNzYWdlfSBhdCBvbmUgb3IgbW9yZSBwb3NpdGlvbnMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICR7aXNzdWUudmFsaWRhdGlvbi5wb3NpdGlvbn1gO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKFwic3RhcnRzV2l0aFwiIGluIGlzc3VlLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0OiBtdXN0IHN0YXJ0IHdpdGggXCIke2lzc3VlLnZhbGlkYXRpb24uc3RhcnRzV2l0aH1cImA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKFwiZW5kc1dpdGhcIiBpbiBpc3N1ZS52YWxpZGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCBpbnB1dDogbXVzdCBlbmQgd2l0aCBcIiR7aXNzdWUudmFsaWRhdGlvbi5lbmRzV2l0aH1cImA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGlzc3VlLnZhbGlkYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnZhbGlkYXRpb24gIT09IFwicmVnZXhcIikge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgSW52YWxpZCAke2lzc3VlLnZhbGlkYXRpb259YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIkludmFsaWRcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS50b29fc21hbGw6XG4gICAgICAgICAgICBpZiAoaXNzdWUudHlwZSA9PT0gXCJhcnJheVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgQXJyYXkgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBcImV4YWN0bHlcIiA6IGlzc3VlLmluY2x1c2l2ZSA/IGBhdCBsZWFzdGAgOiBgbW9yZSB0aGFuYH0gJHtpc3N1ZS5taW5pbXVtfSBlbGVtZW50KHMpYDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBTdHJpbmcgbXVzdCBjb250YWluICR7aXNzdWUuZXhhY3QgPyBcImV4YWN0bHlcIiA6IGlzc3VlLmluY2x1c2l2ZSA/IGBhdCBsZWFzdGAgOiBgb3ZlcmB9ICR7aXNzdWUubWluaW11bX0gY2hhcmFjdGVyKHMpYDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBOdW1iZXIgbXVzdCBiZSAke2lzc3VlLmV4YWN0XG4gICAgICAgICAgICAgICAgICAgID8gYGV4YWN0bHkgZXF1YWwgdG8gYFxuICAgICAgICAgICAgICAgICAgICA6IGlzc3VlLmluY2x1c2l2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIGBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogYGdyZWF0ZXIgdGhhbiBgfSR7aXNzdWUubWluaW11bX1gO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJkYXRlXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBEYXRlIG11c3QgYmUgJHtpc3N1ZS5leGFjdFxuICAgICAgICAgICAgICAgICAgICA/IGBleGFjdGx5IGVxdWFsIHRvIGBcbiAgICAgICAgICAgICAgICAgICAgOiBpc3N1ZS5pbmNsdXNpdmVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gYGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGBncmVhdGVyIHRoYW4gYH0ke25ldyBEYXRlKE51bWJlcihpc3N1ZS5taW5pbXVtKSl9YDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gXCJJbnZhbGlkIGlucHV0XCI7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUudG9vX2JpZzpcbiAgICAgICAgICAgIGlmIChpc3N1ZS50eXBlID09PSBcImFycmF5XCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBBcnJheSBtdXN0IGNvbnRhaW4gJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5YCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBhdCBtb3N0YCA6IGBsZXNzIHRoYW5gfSAke2lzc3VlLm1heGltdW19IGVsZW1lbnQocylgO1xuICAgICAgICAgICAgZWxzZSBpZiAoaXNzdWUudHlwZSA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICBtZXNzYWdlID0gYFN0cmluZyBtdXN0IGNvbnRhaW4gJHtpc3N1ZS5leGFjdCA/IGBleGFjdGx5YCA6IGlzc3VlLmluY2x1c2l2ZSA/IGBhdCBtb3N0YCA6IGB1bmRlcmB9ICR7aXNzdWUubWF4aW11bX0gY2hhcmFjdGVyKHMpYDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwibnVtYmVyXCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBOdW1iZXIgbXVzdCBiZSAke2lzc3VlLmV4YWN0XG4gICAgICAgICAgICAgICAgICAgID8gYGV4YWN0bHlgXG4gICAgICAgICAgICAgICAgICAgIDogaXNzdWUuaW5jbHVzaXZlXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGBsZXNzIHRoYW4gb3IgZXF1YWwgdG9gXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGBsZXNzIHRoYW5gfSAke2lzc3VlLm1heGltdW19YDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwiYmlnaW50XCIpXG4gICAgICAgICAgICAgICAgbWVzc2FnZSA9IGBCaWdJbnQgbXVzdCBiZSAke2lzc3VlLmV4YWN0XG4gICAgICAgICAgICAgICAgICAgID8gYGV4YWN0bHlgXG4gICAgICAgICAgICAgICAgICAgIDogaXNzdWUuaW5jbHVzaXZlXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGBsZXNzIHRoYW4gb3IgZXF1YWwgdG9gXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGBsZXNzIHRoYW5gfSAke2lzc3VlLm1heGltdW19YDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGlzc3VlLnR5cGUgPT09IFwiZGF0ZVwiKVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBgRGF0ZSBtdXN0IGJlICR7aXNzdWUuZXhhY3RcbiAgICAgICAgICAgICAgICAgICAgPyBgZXhhY3RseWBcbiAgICAgICAgICAgICAgICAgICAgOiBpc3N1ZS5pbmNsdXNpdmVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gYHNtYWxsZXIgdGhhbiBvciBlcXVhbCB0b2BcbiAgICAgICAgICAgICAgICAgICAgICAgIDogYHNtYWxsZXIgdGhhbmB9ICR7bmV3IERhdGUoTnVtYmVyKGlzc3VlLm1heGltdW0pKX1gO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSBcIkludmFsaWQgaW5wdXRcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5jdXN0b206XG4gICAgICAgICAgICBtZXNzYWdlID0gYEludmFsaWQgaW5wdXRgO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgWm9kSXNzdWVDb2RlLmludmFsaWRfaW50ZXJzZWN0aW9uX3R5cGVzOlxuICAgICAgICAgICAgbWVzc2FnZSA9IGBJbnRlcnNlY3Rpb24gcmVzdWx0cyBjb3VsZCBub3QgYmUgbWVyZ2VkYDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFpvZElzc3VlQ29kZS5ub3RfbXVsdGlwbGVfb2Y6XG4gICAgICAgICAgICBtZXNzYWdlID0gYE51bWJlciBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgJHtpc3N1ZS5tdWx0aXBsZU9mfWA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBab2RJc3N1ZUNvZGUubm90X2Zpbml0ZTpcbiAgICAgICAgICAgIG1lc3NhZ2UgPSBcIk51bWJlciBtdXN0IGJlIGZpbml0ZVwiO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBtZXNzYWdlID0gX2N0eC5kZWZhdWx0RXJyb3I7XG4gICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGlzc3VlKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgbWVzc2FnZSB9O1xufTtcblxubGV0IG92ZXJyaWRlRXJyb3JNYXAgPSBlcnJvck1hcDtcbmZ1bmN0aW9uIHNldEVycm9yTWFwKG1hcCkge1xuICAgIG92ZXJyaWRlRXJyb3JNYXAgPSBtYXA7XG59XG5mdW5jdGlvbiBnZXRFcnJvck1hcCgpIHtcbiAgICByZXR1cm4gb3ZlcnJpZGVFcnJvck1hcDtcbn1cblxuY29uc3QgbWFrZUlzc3VlID0gKHBhcmFtcykgPT4ge1xuICAgIGNvbnN0IHsgZGF0YSwgcGF0aCwgZXJyb3JNYXBzLCBpc3N1ZURhdGEgfSA9IHBhcmFtcztcbiAgICBjb25zdCBmdWxsUGF0aCA9IFsuLi5wYXRoLCAuLi4oaXNzdWVEYXRhLnBhdGggfHwgW10pXTtcbiAgICBjb25zdCBmdWxsSXNzdWUgPSB7XG4gICAgICAgIC4uLmlzc3VlRGF0YSxcbiAgICAgICAgcGF0aDogZnVsbFBhdGgsXG4gICAgfTtcbiAgICBpZiAoaXNzdWVEYXRhLm1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uaXNzdWVEYXRhLFxuICAgICAgICAgICAgcGF0aDogZnVsbFBhdGgsXG4gICAgICAgICAgICBtZXNzYWdlOiBpc3N1ZURhdGEubWVzc2FnZSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgbGV0IGVycm9yTWVzc2FnZSA9IFwiXCI7XG4gICAgY29uc3QgbWFwcyA9IGVycm9yTWFwc1xuICAgICAgICAuZmlsdGVyKChtKSA9PiAhIW0pXG4gICAgICAgIC5zbGljZSgpXG4gICAgICAgIC5yZXZlcnNlKCk7XG4gICAgZm9yIChjb25zdCBtYXAgb2YgbWFwcykge1xuICAgICAgICBlcnJvck1lc3NhZ2UgPSBtYXAoZnVsbElzc3VlLCB7IGRhdGEsIGRlZmF1bHRFcnJvcjogZXJyb3JNZXNzYWdlIH0pLm1lc3NhZ2U7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIC4uLmlzc3VlRGF0YSxcbiAgICAgICAgcGF0aDogZnVsbFBhdGgsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yTWVzc2FnZSxcbiAgICB9O1xufTtcbmNvbnN0IEVNUFRZX1BBVEggPSBbXTtcbmZ1bmN0aW9uIGFkZElzc3VlVG9Db250ZXh0KGN0eCwgaXNzdWVEYXRhKSB7XG4gICAgY29uc3Qgb3ZlcnJpZGVNYXAgPSBnZXRFcnJvck1hcCgpO1xuICAgIGNvbnN0IGlzc3VlID0gbWFrZUlzc3VlKHtcbiAgICAgICAgaXNzdWVEYXRhOiBpc3N1ZURhdGEsXG4gICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgZXJyb3JNYXBzOiBbXG4gICAgICAgICAgICBjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCxcbiAgICAgICAgICAgIGN0eC5zY2hlbWFFcnJvck1hcCxcbiAgICAgICAgICAgIG92ZXJyaWRlTWFwLFxuICAgICAgICAgICAgb3ZlcnJpZGVNYXAgPT09IGVycm9yTWFwID8gdW5kZWZpbmVkIDogZXJyb3JNYXAsIC8vIHRoZW4gZ2xvYmFsIGRlZmF1bHQgbWFwXG4gICAgICAgIF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgIH0pO1xuICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goaXNzdWUpO1xufVxuY2xhc3MgUGFyc2VTdGF0dXMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gXCJ2YWxpZFwiO1xuICAgIH1cbiAgICBkaXJ0eSgpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgPT09IFwidmFsaWRcIilcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBcImRpcnR5XCI7XG4gICAgfVxuICAgIGFib3J0KCkge1xuICAgICAgICBpZiAodGhpcy52YWx1ZSAhPT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gXCJhYm9ydGVkXCI7XG4gICAgfVxuICAgIHN0YXRpYyBtZXJnZUFycmF5KHN0YXR1cywgcmVzdWx0cykge1xuICAgICAgICBjb25zdCBhcnJheVZhbHVlID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiByZXN1bHRzKSB7XG4gICAgICAgICAgICBpZiAocy5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKHMuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICBhcnJheVZhbHVlLnB1c2gocy52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBhcnJheVZhbHVlIH07XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBtZXJnZU9iamVjdEFzeW5jKHN0YXR1cywgcGFpcnMpIHtcbiAgICAgICAgY29uc3Qgc3luY1BhaXJzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcGFpciBvZiBwYWlycykge1xuICAgICAgICAgICAgY29uc3Qga2V5ID0gYXdhaXQgcGFpci5rZXk7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICBzeW5jUGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHN5bmNQYWlycyk7XG4gICAgfVxuICAgIHN0YXRpYyBtZXJnZU9iamVjdFN5bmMoc3RhdHVzLCBwYWlycykge1xuICAgICAgICBjb25zdCBmaW5hbE9iamVjdCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5LCB2YWx1ZSB9ID0gcGFpcjtcbiAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIGlmIChrZXkudmFsdWUgIT09IFwiX19wcm90b19fXCIgJiZcbiAgICAgICAgICAgICAgICAodHlwZW9mIHZhbHVlLnZhbHVlICE9PSBcInVuZGVmaW5lZFwiIHx8IHBhaXIuYWx3YXlzU2V0KSkge1xuICAgICAgICAgICAgICAgIGZpbmFsT2JqZWN0W2tleS52YWx1ZV0gPSB2YWx1ZS52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGZpbmFsT2JqZWN0IH07XG4gICAgfVxufVxuY29uc3QgSU5WQUxJRCA9IE9iamVjdC5mcmVlemUoe1xuICAgIHN0YXR1czogXCJhYm9ydGVkXCIsXG59KTtcbmNvbnN0IERJUlRZID0gKHZhbHVlKSA9PiAoeyBzdGF0dXM6IFwiZGlydHlcIiwgdmFsdWUgfSk7XG5jb25zdCBPSyA9ICh2YWx1ZSkgPT4gKHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlIH0pO1xuY29uc3QgaXNBYm9ydGVkID0gKHgpID0+IHguc3RhdHVzID09PSBcImFib3J0ZWRcIjtcbmNvbnN0IGlzRGlydHkgPSAoeCkgPT4geC5zdGF0dXMgPT09IFwiZGlydHlcIjtcbmNvbnN0IGlzVmFsaWQgPSAoeCkgPT4geC5zdGF0dXMgPT09IFwidmFsaWRcIjtcbmNvbnN0IGlzQXN5bmMgPSAoeCkgPT4gdHlwZW9mIFByb21pc2UgIT09IFwidW5kZWZpbmVkXCIgJiYgeCBpbnN0YW5jZW9mIFByb21pc2U7XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG5cclxuZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIHN0YXRlLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiAoc3RhdGUuc2V0KHJlY2VpdmVyLCB2YWx1ZSkpLCB2YWx1ZTtcclxufVxyXG5cclxudHlwZW9mIFN1cHByZXNzZWRFcnJvciA9PT0gXCJmdW5jdGlvblwiID8gU3VwcHJlc3NlZEVycm9yIDogZnVuY3Rpb24gKGVycm9yLCBzdXBwcmVzc2VkLCBtZXNzYWdlKSB7XHJcbiAgICB2YXIgZSA9IG5ldyBFcnJvcihtZXNzYWdlKTtcclxuICAgIHJldHVybiBlLm5hbWUgPSBcIlN1cHByZXNzZWRFcnJvclwiLCBlLmVycm9yID0gZXJyb3IsIGUuc3VwcHJlc3NlZCA9IHN1cHByZXNzZWQsIGU7XHJcbn07XG5cbnZhciBlcnJvclV0aWw7XG4oZnVuY3Rpb24gKGVycm9yVXRpbCkge1xuICAgIGVycm9yVXRpbC5lcnJUb09iaiA9IChtZXNzYWdlKSA9PiB0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiA/IHsgbWVzc2FnZSB9IDogbWVzc2FnZSB8fCB7fTtcbiAgICBlcnJvclV0aWwudG9TdHJpbmcgPSAobWVzc2FnZSkgPT4gdHlwZW9mIG1lc3NhZ2UgPT09IFwic3RyaW5nXCIgPyBtZXNzYWdlIDogbWVzc2FnZSA9PT0gbnVsbCB8fCBtZXNzYWdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBtZXNzYWdlLm1lc3NhZ2U7XG59KShlcnJvclV0aWwgfHwgKGVycm9yVXRpbCA9IHt9KSk7XG5cbnZhciBfWm9kRW51bV9jYWNoZSwgX1pvZE5hdGl2ZUVudW1fY2FjaGU7XG5jbGFzcyBQYXJzZUlucHV0TGF6eVBhdGgge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudCwgdmFsdWUsIHBhdGgsIGtleSkge1xuICAgICAgICB0aGlzLl9jYWNoZWRQYXRoID0gW107XG4gICAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgICB0aGlzLmRhdGEgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5fcGF0aCA9IHBhdGg7XG4gICAgICAgIHRoaXMuX2tleSA9IGtleTtcbiAgICB9XG4gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIGlmICghdGhpcy5fY2FjaGVkUGF0aC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9rZXkgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlZFBhdGgucHVzaCguLi50aGlzLl9wYXRoLCAuLi50aGlzLl9rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FjaGVkUGF0aC5wdXNoKC4uLnRoaXMuX3BhdGgsIHRoaXMuX2tleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFBhdGg7XG4gICAgfVxufVxuY29uc3QgaGFuZGxlUmVzdWx0ID0gKGN0eCwgcmVzdWx0KSA9PiB7XG4gICAgaWYgKGlzVmFsaWQocmVzdWx0KSkge1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXN1bHQudmFsdWUgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICghY3R4LmNvbW1vbi5pc3N1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJWYWxpZGF0aW9uIGZhaWxlZCBidXQgbm8gaXNzdWVzIGRldGVjdGVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBnZXQgZXJyb3IoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2Vycm9yKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZXJyb3I7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoY3R4LmNvbW1vbi5pc3N1ZXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2Vycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG59O1xuZnVuY3Rpb24gcHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcylcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIGNvbnN0IHsgZXJyb3JNYXAsIGludmFsaWRfdHlwZV9lcnJvciwgcmVxdWlyZWRfZXJyb3IsIGRlc2NyaXB0aW9uIH0gPSBwYXJhbXM7XG4gICAgaWYgKGVycm9yTWFwICYmIChpbnZhbGlkX3R5cGVfZXJyb3IgfHwgcmVxdWlyZWRfZXJyb3IpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgdXNlIFwiaW52YWxpZF90eXBlX2Vycm9yXCIgb3IgXCJyZXF1aXJlZF9lcnJvclwiIGluIGNvbmp1bmN0aW9uIHdpdGggY3VzdG9tIGVycm9yIG1hcC5gKTtcbiAgICB9XG4gICAgaWYgKGVycm9yTWFwKVxuICAgICAgICByZXR1cm4geyBlcnJvck1hcDogZXJyb3JNYXAsIGRlc2NyaXB0aW9uIH07XG4gICAgY29uc3QgY3VzdG9tTWFwID0gKGlzcywgY3R4KSA9PiB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIGNvbnN0IHsgbWVzc2FnZSB9ID0gcGFyYW1zO1xuICAgICAgICBpZiAoaXNzLmNvZGUgPT09IFwiaW52YWxpZF9lbnVtX3ZhbHVlXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IG1lc3NhZ2UgIT09IG51bGwgJiYgbWVzc2FnZSAhPT0gdm9pZCAwID8gbWVzc2FnZSA6IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGN0eC5kYXRhID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4geyBtZXNzYWdlOiAoX2EgPSBtZXNzYWdlICE9PSBudWxsICYmIG1lc3NhZ2UgIT09IHZvaWQgMCA/IG1lc3NhZ2UgOiByZXF1aXJlZF9lcnJvcikgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogY3R4LmRlZmF1bHRFcnJvciB9O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc3MuY29kZSAhPT0gXCJpbnZhbGlkX3R5cGVcIilcbiAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2U6IGN0eC5kZWZhdWx0RXJyb3IgfTtcbiAgICAgICAgcmV0dXJuIHsgbWVzc2FnZTogKF9iID0gbWVzc2FnZSAhPT0gbnVsbCAmJiBtZXNzYWdlICE9PSB2b2lkIDAgPyBtZXNzYWdlIDogaW52YWxpZF90eXBlX2Vycm9yKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBjdHguZGVmYXVsdEVycm9yIH07XG4gICAgfTtcbiAgICByZXR1cm4geyBlcnJvck1hcDogY3VzdG9tTWFwLCBkZXNjcmlwdGlvbiB9O1xufVxuY2xhc3MgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoZGVmKSB7XG4gICAgICAgIC8qKiBBbGlhcyBvZiBzYWZlUGFyc2VBc3luYyAqL1xuICAgICAgICB0aGlzLnNwYSA9IHRoaXMuc2FmZVBhcnNlQXN5bmM7XG4gICAgICAgIHRoaXMuX2RlZiA9IGRlZjtcbiAgICAgICAgdGhpcy5wYXJzZSA9IHRoaXMucGFyc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYWZlUGFyc2UgPSB0aGlzLnNhZmVQYXJzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnBhcnNlQXN5bmMgPSB0aGlzLnBhcnNlQXN5bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zYWZlUGFyc2VBc3luYyA9IHRoaXMuc2FmZVBhcnNlQXN5bmMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5zcGEgPSB0aGlzLnNwYS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnJlZmluZSA9IHRoaXMucmVmaW5lLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVmaW5lbWVudCA9IHRoaXMucmVmaW5lbWVudC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnN1cGVyUmVmaW5lID0gdGhpcy5zdXBlclJlZmluZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm9wdGlvbmFsID0gdGhpcy5vcHRpb25hbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm51bGxhYmxlID0gdGhpcy5udWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLm51bGxpc2ggPSB0aGlzLm51bGxpc2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5hcnJheSA9IHRoaXMuYXJyYXkuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gdGhpcy5wcm9taXNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMub3IgPSB0aGlzLm9yLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuYW5kID0gdGhpcy5hbmQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSB0aGlzLnRyYW5zZm9ybS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmJyYW5kID0gdGhpcy5icmFuZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmRlZmF1bHQgPSB0aGlzLmRlZmF1bHQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5jYXRjaCA9IHRoaXMuY2F0Y2guYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5kZXNjcmliZSA9IHRoaXMuZGVzY3JpYmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5waXBlID0gdGhpcy5waXBlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMucmVhZG9ubHkgPSB0aGlzLnJlYWRvbmx5LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuaXNOdWxsYWJsZSA9IHRoaXMuaXNOdWxsYWJsZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmlzT3B0aW9uYWwgPSB0aGlzLmlzT3B0aW9uYWwuYmluZCh0aGlzKTtcbiAgICB9XG4gICAgZ2V0IGRlc2NyaXB0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmRlc2NyaXB0aW9uO1xuICAgIH1cbiAgICBfZ2V0VHlwZShpbnB1dCkge1xuICAgICAgICByZXR1cm4gZ2V0UGFyc2VkVHlwZShpbnB1dC5kYXRhKTtcbiAgICB9XG4gICAgX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpIHtcbiAgICAgICAgcmV0dXJuIChjdHggfHwge1xuICAgICAgICAgICAgY29tbW9uOiBpbnB1dC5wYXJlbnQuY29tbW9uLFxuICAgICAgICAgICAgZGF0YTogaW5wdXQuZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGF0aDogaW5wdXQucGF0aCxcbiAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3RhdHVzOiBuZXcgUGFyc2VTdGF0dXMoKSxcbiAgICAgICAgICAgIGN0eDoge1xuICAgICAgICAgICAgICAgIGNvbW1vbjogaW5wdXQucGFyZW50LmNvbW1vbixcbiAgICAgICAgICAgICAgICBkYXRhOiBpbnB1dC5kYXRhLFxuICAgICAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoaW5wdXQuZGF0YSksXG4gICAgICAgICAgICAgICAgc2NoZW1hRXJyb3JNYXA6IHRoaXMuX2RlZi5lcnJvck1hcCxcbiAgICAgICAgICAgICAgICBwYXRoOiBpbnB1dC5wYXRoLFxuICAgICAgICAgICAgICAgIHBhcmVudDogaW5wdXQucGFyZW50LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX3BhcnNlU3luYyhpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGlmIChpc0FzeW5jKHJlc3VsdCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlN5bmNocm9ub3VzIHBhcnNlIGVuY291bnRlcmVkIHByb21pc2UuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIF9wYXJzZUFzeW5jKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlKGlucHV0KTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xuICAgIH1cbiAgICBwYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5zYWZlUGFyc2UoZGF0YSwgcGFyYW1zKTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxuICAgIHNhZmVQYXJzZShkYXRhLCBwYXJhbXMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGFzeW5jOiAoX2EgPSBwYXJhbXMgPT09IG51bGwgfHwgcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbXMuYXN5bmMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvbnRleHR1YWxFcnJvck1hcDogcGFyYW1zID09PSBudWxsIHx8IHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1zLmVycm9yTWFwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhdGg6IChwYXJhbXMgPT09IG51bGwgfHwgcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbXMucGF0aCkgfHwgW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX3BhcnNlU3luYyh7IGRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZVJlc3VsdChjdHgsIHJlc3VsdCk7XG4gICAgfVxuICAgIGFzeW5jIHBhcnNlQXN5bmMoZGF0YSwgcGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuc2FmZVBhcnNlQXN5bmMoZGF0YSwgcGFyYW1zKTtcbiAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgICB0aHJvdyByZXN1bHQuZXJyb3I7XG4gICAgfVxuICAgIGFzeW5jIHNhZmVQYXJzZUFzeW5jKGRhdGEsIHBhcmFtcykge1xuICAgICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgIGNvbnRleHR1YWxFcnJvck1hcDogcGFyYW1zID09PSBudWxsIHx8IHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1zLmVycm9yTWFwLFxuICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBhdGg6IChwYXJhbXMgPT09IG51bGwgfHwgcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbXMucGF0aCkgfHwgW10sXG4gICAgICAgICAgICBzY2hlbWFFcnJvck1hcDogdGhpcy5fZGVmLmVycm9yTWFwLFxuICAgICAgICAgICAgcGFyZW50OiBudWxsLFxuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhcnNlZFR5cGU6IGdldFBhcnNlZFR5cGUoZGF0YSksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG1heWJlQXN5bmNSZXN1bHQgPSB0aGlzLl9wYXJzZSh7IGRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgKGlzQXN5bmMobWF5YmVBc3luY1Jlc3VsdClcbiAgICAgICAgICAgID8gbWF5YmVBc3luY1Jlc3VsdFxuICAgICAgICAgICAgOiBQcm9taXNlLnJlc29sdmUobWF5YmVBc3luY1Jlc3VsdCkpO1xuICAgICAgICByZXR1cm4gaGFuZGxlUmVzdWx0KGN0eCwgcmVzdWx0KTtcbiAgICB9XG4gICAgcmVmaW5lKGNoZWNrLCBtZXNzYWdlKSB7XG4gICAgICAgIGNvbnN0IGdldElzc3VlUHJvcGVydGllcyA9ICh2YWwpID0+IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZSA9PT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgbWVzc2FnZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IG1lc3NhZ2UgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBtZXNzYWdlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZSh2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWZpbmVtZW50KCh2YWwsIGN0eCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gY2hlY2sodmFsKTtcbiAgICAgICAgICAgIGNvbnN0IHNldEVycm9yID0gKCkgPT4gY3R4LmFkZElzc3VlKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuY3VzdG9tLFxuICAgICAgICAgICAgICAgIC4uLmdldElzc3VlUHJvcGVydGllcyh2YWwpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIFByb21pc2UgIT09IFwidW5kZWZpbmVkXCIgJiYgcmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEVycm9yKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBzZXRFcnJvcigpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVmaW5lbWVudChjaGVjaywgcmVmaW5lbWVudERhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZmluZW1lbnQoKHZhbCwgY3R4KSA9PiB7XG4gICAgICAgICAgICBpZiAoIWNoZWNrKHZhbCkpIHtcbiAgICAgICAgICAgICAgICBjdHguYWRkSXNzdWUodHlwZW9mIHJlZmluZW1lbnREYXRhID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgPyByZWZpbmVtZW50RGF0YSh2YWwsIGN0eClcbiAgICAgICAgICAgICAgICAgICAgOiByZWZpbmVtZW50RGF0YSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfcmVmaW5lbWVudChyZWZpbmVtZW50KSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgICAgICBzY2hlbWE6IHRoaXMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEVmZmVjdHMsXG4gICAgICAgICAgICBlZmZlY3Q6IHsgdHlwZTogXCJyZWZpbmVtZW50XCIsIHJlZmluZW1lbnQgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN1cGVyUmVmaW5lKHJlZmluZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlZmluZW1lbnQocmVmaW5lbWVudCk7XG4gICAgfVxuICAgIG9wdGlvbmFsKCkge1xuICAgICAgICByZXR1cm4gWm9kT3B0aW9uYWwuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG51bGxhYmxlKCkge1xuICAgICAgICByZXR1cm4gWm9kTnVsbGFibGUuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG51bGxpc2goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm51bGxhYmxlKCkub3B0aW9uYWwoKTtcbiAgICB9XG4gICAgYXJyYXkoKSB7XG4gICAgICAgIHJldHVybiBab2RBcnJheS5jcmVhdGUodGhpcywgdGhpcy5fZGVmKTtcbiAgICB9XG4gICAgcHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIFpvZFByb21pc2UuY3JlYXRlKHRoaXMsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIG9yKG9wdGlvbikge1xuICAgICAgICByZXR1cm4gWm9kVW5pb24uY3JlYXRlKFt0aGlzLCBvcHRpb25dLCB0aGlzLl9kZWYpO1xuICAgIH1cbiAgICBhbmQoaW5jb21pbmcpIHtcbiAgICAgICAgcmV0dXJuIFpvZEludGVyc2VjdGlvbi5jcmVhdGUodGhpcywgaW5jb21pbmcsIHRoaXMuX2RlZik7XG4gICAgfVxuICAgIHRyYW5zZm9ybSh0cmFuc2Zvcm0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RFZmZlY3RzKHtcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXModGhpcy5fZGVmKSxcbiAgICAgICAgICAgIHNjaGVtYTogdGhpcyxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgICAgIGVmZmVjdDogeyB0eXBlOiBcInRyYW5zZm9ybVwiLCB0cmFuc2Zvcm0gfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRlZmF1bHQoZGVmKSB7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZUZ1bmMgPSB0eXBlb2YgZGVmID09PSBcImZ1bmN0aW9uXCIgPyBkZWYgOiAoKSA9PiBkZWY7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRGVmYXVsdCh7XG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgICAgICBpbm5lclR5cGU6IHRoaXMsXG4gICAgICAgICAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRWYWx1ZUZ1bmMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERlZmF1bHQsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBicmFuZCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCcmFuZGVkKHtcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQnJhbmRlZCxcbiAgICAgICAgICAgIHR5cGU6IHRoaXMsXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXMuX2RlZiksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjYXRjaChkZWYpIHtcbiAgICAgICAgY29uc3QgY2F0Y2hWYWx1ZUZ1bmMgPSB0eXBlb2YgZGVmID09PSBcImZ1bmN0aW9uXCIgPyBkZWYgOiAoKSA9PiBkZWY7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQ2F0Y2goe1xuICAgICAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyh0aGlzLl9kZWYpLFxuICAgICAgICAgICAgaW5uZXJUeXBlOiB0aGlzLFxuICAgICAgICAgICAgY2F0Y2hWYWx1ZTogY2F0Y2hWYWx1ZUZ1bmMsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZENhdGNoLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZGVzY3JpYmUoZGVzY3JpcHRpb24pIHtcbiAgICAgICAgY29uc3QgVGhpcyA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgICAgIHJldHVybiBuZXcgVGhpcyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBpcGUodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiBab2RQaXBlbGluZS5jcmVhdGUodGhpcywgdGFyZ2V0KTtcbiAgICB9XG4gICAgcmVhZG9ubHkoKSB7XG4gICAgICAgIHJldHVybiBab2RSZWFkb25seS5jcmVhdGUodGhpcyk7XG4gICAgfVxuICAgIGlzT3B0aW9uYWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNhZmVQYXJzZSh1bmRlZmluZWQpLnN1Y2Nlc3M7XG4gICAgfVxuICAgIGlzTnVsbGFibGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNhZmVQYXJzZShudWxsKS5zdWNjZXNzO1xuICAgIH1cbn1cbmNvbnN0IGN1aWRSZWdleCA9IC9eY1teXFxzLV17OCx9JC9pO1xuY29uc3QgY3VpZDJSZWdleCA9IC9eWzAtOWEtel0rJC87XG5jb25zdCB1bGlkUmVnZXggPSAvXlswLTlBLUhKS01OUC1UVi1aXXsyNn0kLztcbi8vIGNvbnN0IHV1aWRSZWdleCA9XG4vLyAgIC9eKFthLWYwLTldezh9LVthLWYwLTldezR9LVsxLTVdW2EtZjAtOV17M30tW2EtZjAtOV17NH0tW2EtZjAtOV17MTJ9fDAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTAwMDAwMDAwMDAwMCkkL2k7XG5jb25zdCB1dWlkUmVnZXggPSAvXlswLTlhLWZBLUZdezh9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezR9XFxiLVswLTlhLWZBLUZdezEyfSQvaTtcbmNvbnN0IG5hbm9pZFJlZ2V4ID0gL15bYS16MC05Xy1dezIxfSQvaTtcbmNvbnN0IGR1cmF0aW9uUmVnZXggPSAvXlstK10/UCg/ISQpKD86KD86Wy0rXT9cXGQrWSl8KD86Wy0rXT9cXGQrWy4sXVxcZCtZJCkpPyg/Oig/OlstK10/XFxkK00pfCg/OlstK10/XFxkK1suLF1cXGQrTSQpKT8oPzooPzpbLStdP1xcZCtXKXwoPzpbLStdP1xcZCtbLixdXFxkK1ckKSk/KD86KD86Wy0rXT9cXGQrRCl8KD86Wy0rXT9cXGQrWy4sXVxcZCtEJCkpPyg/OlQoPz1bXFxkKy1dKSg/Oig/OlstK10/XFxkK0gpfCg/OlstK10/XFxkK1suLF1cXGQrSCQpKT8oPzooPzpbLStdP1xcZCtNKXwoPzpbLStdP1xcZCtbLixdXFxkK00kKSk/KD86Wy0rXT9cXGQrKD86Wy4sXVxcZCspP1MpPyk/PyQvO1xuLy8gZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNDYxODEvMTU1MDE1NVxuLy8gb2xkIHZlcnNpb246IHRvbyBzbG93LCBkaWRuJ3Qgc3VwcG9ydCB1bmljb2RlXG4vLyBjb25zdCBlbWFpbFJlZ2V4ID0gL14oKChbYS16XXxcXGR8WyEjXFwkJSYnXFwqXFwrXFwtXFwvPVxcP1xcXl9ge1xcfH1+XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkrKFxcLihbYS16XXxcXGR8WyEjXFwkJSYnXFwqXFwrXFwtXFwvPVxcP1xcXl9ge1xcfH1+XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkrKSopfCgoXFx4MjIpKCgoKFxceDIwfFxceDA5KSooXFx4MGRcXHgwYSkpPyhcXHgyMHxcXHgwOSkrKT8oKFtcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDdmXXxcXHgyMXxbXFx4MjMtXFx4NWJdfFtcXHg1ZC1cXHg3ZV18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pfChcXFxcKFtcXHgwMS1cXHgwOVxceDBiXFx4MGNcXHgwZC1cXHg3Zl18W1xcdTAwQTAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0pKSkpKigoKFxceDIwfFxceDA5KSooXFx4MGRcXHgwYSkpPyhcXHgyMHxcXHgwOSkrKT8oXFx4MjIpKSlAKCgoW2Etel18XFxkfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKXwoKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFxcZHxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkpKVxcLikrKChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSl8KChbYS16XXxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkoW2Etel18XFxkfC18XFwufF98fnxbXFx1MDBBMC1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkVGXSkqKFthLXpdfFtcXHUwMEEwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdKSkpJC9pO1xuLy9vbGQgZW1haWwgcmVnZXhcbi8vIGNvbnN0IGVtYWlsUmVnZXggPSAvXigoW148PigpW1xcXS4sOzpcXHNAXCJdKyhcXC5bXjw+KClbXFxdLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKD8hLSkoW148PigpW1xcXS4sOzpcXHNAXCJdK1xcLikrW148PigpW1xcXS4sOzpcXHNAXCJdezEsfSlbXi08PigpW1xcXS4sOzpcXHNAXCJdJC9pO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL14oKFtePD4oKVtcXF1cXFxcLiw7Olxcc0BcXFwiXSsoXFwuW148PigpW1xcXVxcXFwuLDs6XFxzQFxcXCJdKykqKXwoXFxcIi4rXFxcIikpQCgoXFxbKCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFxdKXwoXFxbSVB2NjooKFthLWYwLTldezEsNH06KXs3fXw6OihbYS1mMC05XXsxLDR9Oil7MCw2fXwoW2EtZjAtOV17MSw0fTopezF9OihbYS1mMC05XXsxLDR9Oil7MCw1fXwoW2EtZjAtOV17MSw0fTopezJ9OihbYS1mMC05XXsxLDR9Oil7MCw0fXwoW2EtZjAtOV17MSw0fTopezN9OihbYS1mMC05XXsxLDR9Oil7MCwzfXwoW2EtZjAtOV17MSw0fTopezR9OihbYS1mMC05XXsxLDR9Oil7MCwyfXwoW2EtZjAtOV17MSw0fTopezV9OihbYS1mMC05XXsxLDR9Oil7MCwxfSkoW2EtZjAtOV17MSw0fXwoKCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSlcXC4pezN9KCgyNVswLTVdKXwoMlswLTRdWzAtOV0pfCgxWzAtOV17Mn0pfChbMC05XXsxLDJ9KSkpXFxdKXwoW0EtWmEtejAtOV0oW0EtWmEtejAtOS1dKltBLVphLXowLTldKSooXFwuW0EtWmEtel17Mix9KSspKSQvO1xuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eW2EtekEtWjAtOVxcLlxcIVxcI1xcJFxcJVxcJlxcJ1xcKlxcK1xcL1xcPVxcP1xcXlxcX1xcYFxce1xcfFxcfVxcflxcLV0rQFthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPyg/OlxcLlthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPykqJC87XG4vLyBjb25zdCBlbWFpbFJlZ2V4ID1cbi8vICAgL14oPzpbYS16MC05ISMkJSYnKisvPT9eX2B7fH1+LV0rKD86XFwuW2EtejAtOSEjJCUmJyorLz0/Xl9ge3x9fi1dKykqfFwiKD86W1xceDAxLVxceDA4XFx4MGJcXHgwY1xceDBlLVxceDFmXFx4MjFcXHgyMy1cXHg1YlxceDVkLVxceDdmXXxcXFxcW1xceDAxLVxceDA5XFx4MGJcXHgwY1xceDBlLVxceDdmXSkqXCIpQCg/Oig/OlthLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT98XFxbKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVxcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT98W2EtejAtOS1dKlthLXowLTldOig/OltcXHgwMS1cXHgwOFxceDBiXFx4MGNcXHgwZS1cXHgxZlxceDIxLVxceDVhXFx4NTMtXFx4N2ZdfFxcXFxbXFx4MDEtXFx4MDlcXHgwYlxceDBjXFx4MGUtXFx4N2ZdKSspXFxdKSQvaTtcbmNvbnN0IGVtYWlsUmVnZXggPSAvXig/IVxcLikoPyEuKlxcLlxcLikoW0EtWjAtOV8nK1xcLVxcLl0qKVtBLVowLTlfKy1dQChbQS1aMC05XVtBLVowLTlcXC1dKlxcLikrW0EtWl17Mix9JC9pO1xuLy8gY29uc3QgZW1haWxSZWdleCA9XG4vLyAgIC9eW2EtejAtOS4hIyQlJuKAmSorLz0/Xl9ge3x9fi1dK0BbYS16MC05LV0rKD86XFwuW2EtejAtOVxcLV0rKSokL2k7XG4vLyBmcm9tIGh0dHBzOi8vdGhla2V2aW5zY290dC5jb20vZW1vamlzLWluLWphdmFzY3JpcHQvI3dyaXRpbmctYS1yZWd1bGFyLWV4cHJlc3Npb25cbmNvbnN0IF9lbW9qaVJlZ2V4ID0gYF4oXFxcXHB7RXh0ZW5kZWRfUGljdG9ncmFwaGljfXxcXFxccHtFbW9qaV9Db21wb25lbnR9KSskYDtcbmxldCBlbW9qaVJlZ2V4O1xuLy8gZmFzdGVyLCBzaW1wbGVyLCBzYWZlclxuY29uc3QgaXB2NFJlZ2V4ID0gL14oPzooPzoyNVswLTVdfDJbMC00XVswLTldfDFbMC05XVswLTldfFsxLTldWzAtOV18WzAtOV0pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18MVswLTldWzAtOV18WzEtOV1bMC05XXxbMC05XSkkLztcbmNvbnN0IGlwdjZSZWdleCA9IC9eKChbYS1mMC05XXsxLDR9Oil7N318OjooW2EtZjAtOV17MSw0fTopezAsNn18KFthLWYwLTldezEsNH06KXsxfTooW2EtZjAtOV17MSw0fTopezAsNX18KFthLWYwLTldezEsNH06KXsyfTooW2EtZjAtOV17MSw0fTopezAsNH18KFthLWYwLTldezEsNH06KXszfTooW2EtZjAtOV17MSw0fTopezAsM318KFthLWYwLTldezEsNH06KXs0fTooW2EtZjAtOV17MSw0fTopezAsMn18KFthLWYwLTldezEsNH06KXs1fTooW2EtZjAtOV17MSw0fTopezAsMX0pKFthLWYwLTldezEsNH18KCgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpXFwuKXszfSgoMjVbMC01XSl8KDJbMC00XVswLTldKXwoMVswLTldezJ9KXwoWzAtOV17MSwyfSkpKSQvO1xuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzg2MDM5Mi9kZXRlcm1pbmUtaWYtc3RyaW5nLWlzLWluLWJhc2U2NC11c2luZy1qYXZhc2NyaXB0XG5jb25zdCBiYXNlNjRSZWdleCA9IC9eKFswLTlhLXpBLVorL117NH0pKigoWzAtOWEtekEtWisvXXsyfT09KXwoWzAtOWEtekEtWisvXXszfT0pKT8kLztcbi8vIHNpbXBsZVxuLy8gY29uc3QgZGF0ZVJlZ2V4U291cmNlID0gYFxcXFxkezR9LVxcXFxkezJ9LVxcXFxkezJ9YDtcbi8vIG5vIGxlYXAgeWVhciB2YWxpZGF0aW9uXG4vLyBjb25zdCBkYXRlUmVnZXhTb3VyY2UgPSBgXFxcXGR7NH0tKCgwWzEzNTc4XXwxMHwxMiktMzF8KDBbMTMtOV18MVswLTJdKS0zMHwoMFsxLTldfDFbMC0yXSktKDBbMS05XXwxXFxcXGR8MlxcXFxkKSlgO1xuLy8gd2l0aCBsZWFwIHllYXIgdmFsaWRhdGlvblxuY29uc3QgZGF0ZVJlZ2V4U291cmNlID0gYCgoXFxcXGRcXFxcZFsyNDY4XVswNDhdfFxcXFxkXFxcXGRbMTM1NzldWzI2XXxcXFxcZFxcXFxkMFs0OF18WzAyNDY4XVswNDhdMDB8WzEzNTc5XVsyNl0wMCktMDItMjl8XFxcXGR7NH0tKCgwWzEzNTc4XXwxWzAyXSktKDBbMS05XXxbMTJdXFxcXGR8M1swMV0pfCgwWzQ2OV18MTEpLSgwWzEtOV18WzEyXVxcXFxkfDMwKXwoMDIpLSgwWzEtOV18MVxcXFxkfDJbMC04XSkpKWA7XG5jb25zdCBkYXRlUmVnZXggPSBuZXcgUmVnRXhwKGBeJHtkYXRlUmVnZXhTb3VyY2V9JGApO1xuZnVuY3Rpb24gdGltZVJlZ2V4U291cmNlKGFyZ3MpIHtcbiAgICAvLyBsZXQgcmVnZXggPSBgXFxcXGR7Mn06XFxcXGR7Mn06XFxcXGR7Mn1gO1xuICAgIGxldCByZWdleCA9IGAoWzAxXVxcXFxkfDJbMC0zXSk6WzAtNV1cXFxcZDpbMC01XVxcXFxkYDtcbiAgICBpZiAoYXJncy5wcmVjaXNpb24pIHtcbiAgICAgICAgcmVnZXggPSBgJHtyZWdleH1cXFxcLlxcXFxkeyR7YXJncy5wcmVjaXNpb259fWA7XG4gICAgfVxuICAgIGVsc2UgaWYgKGFyZ3MucHJlY2lzaW9uID09IG51bGwpIHtcbiAgICAgICAgcmVnZXggPSBgJHtyZWdleH0oXFxcXC5cXFxcZCspP2A7XG4gICAgfVxuICAgIHJldHVybiByZWdleDtcbn1cbmZ1bmN0aW9uIHRpbWVSZWdleChhcmdzKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYF4ke3RpbWVSZWdleFNvdXJjZShhcmdzKX0kYCk7XG59XG4vLyBBZGFwdGVkIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzMxNDMyMzFcbmZ1bmN0aW9uIGRhdGV0aW1lUmVnZXgoYXJncykge1xuICAgIGxldCByZWdleCA9IGAke2RhdGVSZWdleFNvdXJjZX1UJHt0aW1lUmVnZXhTb3VyY2UoYXJncyl9YDtcbiAgICBjb25zdCBvcHRzID0gW107XG4gICAgb3B0cy5wdXNoKGFyZ3MubG9jYWwgPyBgWj9gIDogYFpgKTtcbiAgICBpZiAoYXJncy5vZmZzZXQpXG4gICAgICAgIG9wdHMucHVzaChgKFsrLV1cXFxcZHsyfTo/XFxcXGR7Mn0pYCk7XG4gICAgcmVnZXggPSBgJHtyZWdleH0oJHtvcHRzLmpvaW4oXCJ8XCIpfSlgO1xuICAgIHJldHVybiBuZXcgUmVnRXhwKGBeJHtyZWdleH0kYCk7XG59XG5mdW5jdGlvbiBpc1ZhbGlkSVAoaXAsIHZlcnNpb24pIHtcbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjRcIiB8fCAhdmVyc2lvbikgJiYgaXB2NFJlZ2V4LnRlc3QoaXApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoKHZlcnNpb24gPT09IFwidjZcIiB8fCAhdmVyc2lvbikgJiYgaXB2NlJlZ2V4LnRlc3QoaXApKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5jbGFzcyBab2RTdHJpbmcgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBTdHJpbmcoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zdHJpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc3RyaW5nLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGxldCBjdHggPSB1bmRlZmluZWQ7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5sZW5ndGggPCBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5sZW5ndGggPiBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heGltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImxlbmd0aFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vQmlnID0gaW5wdXQuZGF0YS5sZW5ndGggPiBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGlucHV0LmRhdGEubGVuZ3RoIDwgY2hlY2sudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHRvb0JpZyB8fCB0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvb0JpZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19iaWcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImVtYWlsXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVtYWlsUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImVtYWlsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJlbW9qaVwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbW9qaVJlZ2V4KSB7XG4gICAgICAgICAgICAgICAgICAgIGVtb2ppUmVnZXggPSBuZXcgUmVnRXhwKF9lbW9qaVJlZ2V4LCBcInVcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghZW1vamlSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZW1vamlcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInV1aWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghdXVpZFJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1dWlkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJuYW5vaWRcIikge1xuICAgICAgICAgICAgICAgIGlmICghbmFub2lkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcIm5hbm9pZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiY3VpZFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjdWlkUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImN1aWRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImN1aWQyXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWN1aWQyUmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImN1aWQyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ1bGlkXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXVsaWRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwidWxpZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidXJsXCIpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBuZXcgVVJMKGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ1cmxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInJlZ2V4XCIpIHtcbiAgICAgICAgICAgICAgICBjaGVjay5yZWdleC5sYXN0SW5kZXggPSAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlc3RSZXN1bHQgPSBjaGVjay5yZWdleC50ZXN0KGlucHV0LmRhdGEpO1xuICAgICAgICAgICAgICAgIGlmICghdGVzdFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcInJlZ2V4XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0cmltXCIpIHtcbiAgICAgICAgICAgICAgICBpbnB1dC5kYXRhID0gaW5wdXQuZGF0YS50cmltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImluY2x1ZGVzXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0LmRhdGEuaW5jbHVkZXMoY2hlY2sudmFsdWUsIGNoZWNrLnBvc2l0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGluY2x1ZGVzOiBjaGVjay52YWx1ZSwgcG9zaXRpb246IGNoZWNrLnBvc2l0aW9uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJ0b0xvd2VyQ2FzZVwiKSB7XG4gICAgICAgICAgICAgICAgaW5wdXQuZGF0YSA9IGlucHV0LmRhdGEudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwidG9VcHBlckNhc2VcIikge1xuICAgICAgICAgICAgICAgIGlucHV0LmRhdGEgPSBpbnB1dC5kYXRhLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInN0YXJ0c1dpdGhcIikge1xuICAgICAgICAgICAgICAgIGlmICghaW5wdXQuZGF0YS5zdGFydHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IHN0YXJ0c1dpdGg6IGNoZWNrLnZhbHVlIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJlbmRzV2l0aFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dC5kYXRhLmVuZHNXaXRoKGNoZWNrLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7IGVuZHNXaXRoOiBjaGVjay52YWx1ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiZGF0ZXRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZXRpbWVSZWdleChjaGVjayk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImRhdGVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gZGF0ZVJlZ2V4O1xuICAgICAgICAgICAgICAgIGlmICghcmVnZXgudGVzdChpbnB1dC5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcInRpbWVcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gdGltZVJlZ2V4KGNoZWNrKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJ0aW1lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJkdXJhdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkdXJhdGlvblJlZ2V4LnRlc3QoaW5wdXQuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWRhdGlvbjogXCJkdXJhdGlvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwiaXBcIikge1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZElQKGlucHV0LmRhdGEsIGNoZWNrLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiaXBcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcImJhc2U2NFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFiYXNlNjRSZWdleC50ZXN0KGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb246IFwiYmFzZTY0XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbnB1dC5kYXRhIH07XG4gICAgfVxuICAgIF9yZWdleChyZWdleCwgdmFsaWRhdGlvbiwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZpbmVtZW50KChkYXRhKSA9PiByZWdleC50ZXN0KGRhdGEpLCB7XG4gICAgICAgICAgICB2YWxpZGF0aW9uLFxuICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfc3RyaW5nLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIGNoZWNrXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVtYWlsKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJlbWFpbFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHVybChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidXJsXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgZW1vamkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImVtb2ppXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgdXVpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwidXVpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIG5hbm9pZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwibmFub2lkXCIsIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSB9KTtcbiAgICB9XG4gICAgY3VpZChtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiY3VpZFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGN1aWQyKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJjdWlkMlwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIHVsaWQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcInVsaWRcIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICBiYXNlNjQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soeyBraW5kOiBcImJhc2U2NFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkgfSk7XG4gICAgfVxuICAgIGlwKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJpcFwiLCAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucykgfSk7XG4gICAgfVxuICAgIGRhdGV0aW1lKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAgICAgIGtpbmQ6IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgICAgICBwcmVjaXNpb246IG51bGwsXG4gICAgICAgICAgICAgICAgb2Zmc2V0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBsb2NhbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogb3B0aW9ucyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcImRhdGV0aW1lXCIsXG4gICAgICAgICAgICBwcmVjaXNpb246IHR5cGVvZiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnByZWNpc2lvbikgPT09IFwidW5kZWZpbmVkXCIgPyBudWxsIDogb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnByZWNpc2lvbixcbiAgICAgICAgICAgIG9mZnNldDogKF9hID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLm9mZnNldCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2UsXG4gICAgICAgICAgICBsb2NhbDogKF9iID0gb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmxvY2FsKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBmYWxzZSxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMubWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkYXRlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHsga2luZDogXCJkYXRlXCIsIG1lc3NhZ2UgfSk7XG4gICAgfVxuICAgIHRpbWUob3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICAgICAga2luZDogXCJ0aW1lXCIsXG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiBudWxsLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJ0aW1lXCIsXG4gICAgICAgICAgICBwcmVjaXNpb246IHR5cGVvZiAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnByZWNpc2lvbikgPT09IFwidW5kZWZpbmVkXCIgPyBudWxsIDogb3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnByZWNpc2lvbixcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMubWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBkdXJhdGlvbihtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7IGtpbmQ6IFwiZHVyYXRpb25cIiwgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpIH0pO1xuICAgIH1cbiAgICByZWdleChyZWdleCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJyZWdleFwiLFxuICAgICAgICAgICAgcmVnZXg6IHJlZ2V4LFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaW5jbHVkZXModmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwiaW5jbHVkZXNcIixcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgIHBvc2l0aW9uOiBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMucG9zaXRpb24sXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhcnRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJzdGFydHNXaXRoXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbmRzV2l0aCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJlbmRzV2l0aFwiLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWluKG1pbkxlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBtaW5MZW5ndGgsXG4gICAgICAgICAgICAuLi5lcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtYXgobWF4TGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IG1heExlbmd0aCxcbiAgICAgICAgICAgIC4uLmVycm9yVXRpbC5lcnJUb09iaihtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibGVuZ3RoXCIsXG4gICAgICAgICAgICB2YWx1ZTogbGVuLFxuICAgICAgICAgICAgLi4uZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIHouc3RyaW5nKCkubWluKDEpIGluc3RlYWQuXG4gICAgICogQHNlZSB7QGxpbmsgWm9kU3RyaW5nLm1pbn1cbiAgICAgKi9cbiAgICBub25lbXB0eShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigxLCBlcnJvclV0aWwuZXJyVG9PYmoobWVzc2FnZSkpO1xuICAgIH1cbiAgICB0cmltKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZFN0cmluZyh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCB7IGtpbmQ6IFwidHJpbVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9Mb3dlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b0xvd2VyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdG9VcHBlckNhc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogWy4uLnRoaXMuX2RlZi5jaGVja3MsIHsga2luZDogXCJ0b1VwcGVyQ2FzZVwiIH1dLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IGlzRGF0ZXRpbWUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZXRpbWVcIik7XG4gICAgfVxuICAgIGdldCBpc0RhdGUoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZGF0ZVwiKTtcbiAgICB9XG4gICAgZ2V0IGlzVGltZSgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ0aW1lXCIpO1xuICAgIH1cbiAgICBnZXQgaXNEdXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJkdXJhdGlvblwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1haWwoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiZW1haWxcIik7XG4gICAgfVxuICAgIGdldCBpc1VSTCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJ1cmxcIik7XG4gICAgfVxuICAgIGdldCBpc0Vtb2ppKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcImVtb2ppXCIpO1xuICAgIH1cbiAgICBnZXQgaXNVVUlEKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLl9kZWYuY2hlY2tzLmZpbmQoKGNoKSA9PiBjaC5raW5kID09PSBcInV1aWRcIik7XG4gICAgfVxuICAgIGdldCBpc05BTk9JRCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJuYW5vaWRcIik7XG4gICAgfVxuICAgIGdldCBpc0NVSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQ1VJRDIoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiY3VpZDJcIik7XG4gICAgfVxuICAgIGdldCBpc1VMSUQoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwidWxpZFwiKTtcbiAgICB9XG4gICAgZ2V0IGlzSVAoKSB7XG4gICAgICAgIHJldHVybiAhIXRoaXMuX2RlZi5jaGVja3MuZmluZCgoY2gpID0+IGNoLmtpbmQgPT09IFwiaXBcIik7XG4gICAgfVxuICAgIGdldCBpc0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJiYXNlNjRcIik7XG4gICAgfVxuICAgIGdldCBtaW5MZW5ndGgoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heExlbmd0aCgpIHtcbiAgICAgICAgbGV0IG1heCA9IG51bGw7XG4gICAgICAgIGZvciAoY29uc3QgY2ggb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAobWF4ID09PSBudWxsIHx8IGNoLnZhbHVlIDwgbWF4KVxuICAgICAgICAgICAgICAgICAgICBtYXggPSBjaC52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF4O1xuICAgIH1cbn1cblpvZFN0cmluZy5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgdmFyIF9hO1xuICAgIHJldHVybiBuZXcgWm9kU3RyaW5nKHtcbiAgICAgICAgY2hlY2tzOiBbXSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RTdHJpbmcsXG4gICAgICAgIGNvZXJjZTogKF9hID0gcGFyYW1zID09PSBudWxsIHx8IHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1zLmNvZXJjZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zOTY2NDg0L3doeS1kb2VzLW1vZHVsdXMtb3BlcmF0b3ItcmV0dXJuLWZyYWN0aW9uYWwtbnVtYmVyLWluLWphdmFzY3JpcHQvMzE3MTEwMzQjMzE3MTEwMzRcbmZ1bmN0aW9uIGZsb2F0U2FmZVJlbWFpbmRlcih2YWwsIHN0ZXApIHtcbiAgICBjb25zdCB2YWxEZWNDb3VudCA9ICh2YWwudG9TdHJpbmcoKS5zcGxpdChcIi5cIilbMV0gfHwgXCJcIikubGVuZ3RoO1xuICAgIGNvbnN0IHN0ZXBEZWNDb3VudCA9IChzdGVwLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdIHx8IFwiXCIpLmxlbmd0aDtcbiAgICBjb25zdCBkZWNDb3VudCA9IHZhbERlY0NvdW50ID4gc3RlcERlY0NvdW50ID8gdmFsRGVjQ291bnQgOiBzdGVwRGVjQ291bnQ7XG4gICAgY29uc3QgdmFsSW50ID0gcGFyc2VJbnQodmFsLnRvRml4ZWQoZGVjQ291bnQpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbiAgICBjb25zdCBzdGVwSW50ID0gcGFyc2VJbnQoc3RlcC50b0ZpeGVkKGRlY0NvdW50KS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgcmV0dXJuICh2YWxJbnQgJSBzdGVwSW50KSAvIE1hdGgucG93KDEwLCBkZWNDb3VudCk7XG59XG5jbGFzcyBab2ROdW1iZXIgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5taW4gPSB0aGlzLmd0ZTtcbiAgICAgICAgdGhpcy5tYXggPSB0aGlzLmx0ZTtcbiAgICAgICAgdGhpcy5zdGVwID0gdGhpcy5tdWx0aXBsZU9mO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBOdW1iZXIoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVtYmVyLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gbmV3IFBhcnNlU3RhdHVzKCk7XG4gICAgICAgIGZvciAoY29uc3QgY2hlY2sgb2YgdGhpcy5fZGVmLmNoZWNrcykge1xuICAgICAgICAgICAgaWYgKGNoZWNrLmtpbmQgPT09IFwiaW50XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXV0aWwuaXNJbnRlZ2VyKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleHBlY3RlZDogXCJpbnRlZ2VyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNlaXZlZDogXCJmbG9hdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWluXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGNoZWNrLmluY2x1c2l2ZVxuICAgICAgICAgICAgICAgICAgICA/IGlucHV0LmRhdGEgPCBjaGVjay52YWx1ZVxuICAgICAgICAgICAgICAgICAgICA6IGlucHV0LmRhdGEgPD0gY2hlY2sudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHRvb1NtYWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IGNoZWNrLmluY2x1c2l2ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGVjay5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vQmlnID0gY2hlY2suaW5jbHVzaXZlXG4gICAgICAgICAgICAgICAgICAgID8gaW5wdXQuZGF0YSA+IGNoZWNrLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIDogaW5wdXQuZGF0YSA+PSBjaGVjay52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodG9vQmlnKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm51bWJlclwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBjaGVjay5pbmNsdXNpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtdWx0aXBsZU9mXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmxvYXRTYWZlUmVtYWluZGVyKGlucHV0LmRhdGEsIGNoZWNrLnZhbHVlKSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUubm90X211bHRpcGxlX29mLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGlwbGVPZjogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJmaW5pdGVcIikge1xuICAgICAgICAgICAgICAgIGlmICghTnVtYmVyLmlzRmluaXRlKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfZmluaXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHV0aWwuYXNzZXJ0TmV2ZXIoY2hlY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5wdXQuZGF0YSB9O1xuICAgIH1cbiAgICBndGUodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtaW5cIiwgdmFsdWUsIHRydWUsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGd0KHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCBmYWxzZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHRlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWF4XCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBsdCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIHNldExpbWl0KGtpbmQsIHZhbHVlLCBpbmNsdXNpdmUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2ROdW1iZXIoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbXG4gICAgICAgICAgICAgICAgLi4udGhpcy5fZGVmLmNoZWNrcyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGtpbmQsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmUsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9hZGRDaGVjayhjaGVjaykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE51bWJlcih7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCBjaGVja10sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbnQobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJpbnRcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBvc2l0aXZlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWluXCIsXG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogZmFsc2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBuZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ubmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbXVsdGlwbGVPZih2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtdWx0aXBsZU9mXCIsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmaW5pdGUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJmaW5pdGVcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNhZmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSkuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibWF4XCIsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxuICAgIGdldCBpc0ludCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGVmLmNoZWNrcy5maW5kKChjaCkgPT4gY2gua2luZCA9PT0gXCJpbnRcIiB8fFxuICAgICAgICAgICAgKGNoLmtpbmQgPT09IFwibXVsdGlwbGVPZlwiICYmIHV0aWwuaXNJbnRlZ2VyKGNoLnZhbHVlKSkpO1xuICAgIH1cbiAgICBnZXQgaXNGaW5pdGUoKSB7XG4gICAgICAgIGxldCBtYXggPSBudWxsLCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcImZpbml0ZVwiIHx8XG4gICAgICAgICAgICAgICAgY2gua2luZCA9PT0gXCJpbnRcIiB8fFxuICAgICAgICAgICAgICAgIGNoLmtpbmQgPT09IFwibXVsdGlwbGVPZlwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaC5raW5kID09PSBcIm1heFwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1heCA9PT0gbnVsbCB8fCBjaC52YWx1ZSA8IG1heClcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE51bWJlci5pc0Zpbml0ZShtaW4pICYmIE51bWJlci5pc0Zpbml0ZShtYXgpO1xuICAgIH1cbn1cblpvZE51bWJlci5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROdW1iZXIoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bWJlcixcbiAgICAgICAgY29lcmNlOiAocGFyYW1zID09PSBudWxsIHx8IHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1zLmNvZXJjZSkgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RCaWdJbnQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5taW4gPSB0aGlzLmd0ZTtcbiAgICAgICAgdGhpcy5tYXggPSB0aGlzLmx0ZTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gQmlnSW50KGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYmlnaW50KSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmJpZ2ludCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjdHggPSB1bmRlZmluZWQ7XG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IG5ldyBQYXJzZVN0YXR1cygpO1xuICAgICAgICBmb3IgKGNvbnN0IGNoZWNrIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaGVjay5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9vU21hbGwgPSBjaGVjay5pbmNsdXNpdmVcbiAgICAgICAgICAgICAgICAgICAgPyBpbnB1dC5kYXRhIDwgY2hlY2sudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgOiBpbnB1dC5kYXRhIDw9IGNoZWNrLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmICh0b29TbWFsbCkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJiaWdpbnRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbmltdW06IGNoZWNrLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiBjaGVjay5pbmNsdXNpdmUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hlY2sua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvb0JpZyA9IGNoZWNrLmluY2x1c2l2ZVxuICAgICAgICAgICAgICAgICAgICA/IGlucHV0LmRhdGEgPiBjaGVjay52YWx1ZVxuICAgICAgICAgICAgICAgICAgICA6IGlucHV0LmRhdGEgPj0gY2hlY2sudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHRvb0JpZykge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYmlnaW50XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogY2hlY2suaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogY2hlY2subWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibXVsdGlwbGVPZlwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LmRhdGEgJSBjaGVjay52YWx1ZSAhPT0gQmlnSW50KDApKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5ub3RfbXVsdGlwbGVfb2YsXG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZU9mOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1dGlsLmFzc2VydE5ldmVyKGNoZWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgZ3RlKHZhbHVlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldExpbWl0KFwibWluXCIsIHZhbHVlLCB0cnVlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBndCh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1pblwiLCB2YWx1ZSwgZmFsc2UsIGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSk7XG4gICAgfVxuICAgIGx0ZSh2YWx1ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRMaW1pdChcIm1heFwiLCB2YWx1ZSwgdHJ1ZSwgZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpKTtcbiAgICB9XG4gICAgbHQodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0TGltaXQoXCJtYXhcIiwgdmFsdWUsIGZhbHNlLCBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkpO1xuICAgIH1cbiAgICBzZXRMaW1pdChraW5kLCB2YWx1ZSwgaW5jbHVzaXZlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQmlnSW50KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGNoZWNrczogW1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5jaGVja3MsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBraW5kLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBfYWRkQ2hlY2soY2hlY2spIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2hlY2tzOiBbLi4udGhpcy5fZGVmLmNoZWNrcywgY2hlY2tdLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmVnYXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGZhbHNlLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbm9ucG9zaXRpdmUobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtYXhcIixcbiAgICAgICAgICAgIHZhbHVlOiBCaWdJbnQoMCksXG4gICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBub25uZWdhdGl2ZShtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1pblwiLFxuICAgICAgICAgICAgdmFsdWU6IEJpZ0ludCgwKSxcbiAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG11bHRpcGxlT2YodmFsdWUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZENoZWNrKHtcbiAgICAgICAgICAgIGtpbmQ6IFwibXVsdGlwbGVPZlwiLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSksXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgbWluVmFsdWUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXg7XG4gICAgfVxufVxuWm9kQmlnSW50LmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICB2YXIgX2E7XG4gICAgcmV0dXJuIG5ldyBab2RCaWdJbnQoe1xuICAgICAgICBjaGVja3M6IFtdLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZEJpZ0ludCxcbiAgICAgICAgY29lcmNlOiAoX2EgPSBwYXJhbXMgPT09IG51bGwgfHwgcGFyYW1zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwYXJhbXMuY29lcmNlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYWxzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZEJvb2xlYW4gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5jb2VyY2UpIHtcbiAgICAgICAgICAgIGlucHV0LmRhdGEgPSBCb29sZWFuKGlucHV0LmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYm9vbGVhbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5ib29sZWFuLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZEJvb2xlYW4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQm9vbGVhbih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQm9vbGVhbixcbiAgICAgICAgY29lcmNlOiAocGFyYW1zID09PSBudWxsIHx8IHBhcmFtcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcGFyYW1zLmNvZXJjZSkgfHwgZmFsc2UsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2REYXRlIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWYuY29lcmNlKSB7XG4gICAgICAgICAgICBpbnB1dC5kYXRhID0gbmV3IERhdGUoaW5wdXQuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5kYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLmRhdGUsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNOYU4oaW5wdXQuZGF0YS5nZXRUaW1lKCkpKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9kYXRlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0dXMgPSBuZXcgUGFyc2VTdGF0dXMoKTtcbiAgICAgICAgbGV0IGN0eCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yIChjb25zdCBjaGVjayBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2sua2luZCA9PT0gXCJtaW5cIikge1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5kYXRhLmdldFRpbWUoKSA8IGNoZWNrLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0LCBjdHgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fc21hbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaGVjay5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhhY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWluaW11bTogY2hlY2sudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImRhdGVcIixcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoZWNrLmtpbmQgPT09IFwibWF4XCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuZGF0YS5nZXRUaW1lKCkgPiBjaGVjay52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNoZWNrLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBjaGVjay52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZGF0ZVwiLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdXRpbC5hc3NlcnROZXZlcihjaGVjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN0YXR1czogc3RhdHVzLnZhbHVlLFxuICAgICAgICAgICAgdmFsdWU6IG5ldyBEYXRlKGlucHV0LmRhdGEuZ2V0VGltZSgpKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX2FkZENoZWNrKGNoZWNrKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kRGF0ZSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBjaGVja3M6IFsuLi50aGlzLl9kZWYuY2hlY2tzLCBjaGVja10sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBtaW4obWluRGF0ZSwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ2hlY2soe1xuICAgICAgICAgICAga2luZDogXCJtaW5cIixcbiAgICAgICAgICAgIHZhbHVlOiBtaW5EYXRlLmdldFRpbWUoKSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG1heChtYXhEYXRlLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRDaGVjayh7XG4gICAgICAgICAgICBraW5kOiBcIm1heFwiLFxuICAgICAgICAgICAgdmFsdWU6IG1heERhdGUuZ2V0VGltZSgpLFxuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0IG1pbkRhdGUoKSB7XG4gICAgICAgIGxldCBtaW4gPSBudWxsO1xuICAgICAgICBmb3IgKGNvbnN0IGNoIG9mIHRoaXMuX2RlZi5jaGVja3MpIHtcbiAgICAgICAgICAgIGlmIChjaC5raW5kID09PSBcIm1pblwiKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1pbiA9PT0gbnVsbCB8fCBjaC52YWx1ZSA+IG1pbilcbiAgICAgICAgICAgICAgICAgICAgbWluID0gY2gudmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1pbiAhPSBudWxsID8gbmV3IERhdGUobWluKSA6IG51bGw7XG4gICAgfVxuICAgIGdldCBtYXhEYXRlKCkge1xuICAgICAgICBsZXQgbWF4ID0gbnVsbDtcbiAgICAgICAgZm9yIChjb25zdCBjaCBvZiB0aGlzLl9kZWYuY2hlY2tzKSB7XG4gICAgICAgICAgICBpZiAoY2gua2luZCA9PT0gXCJtYXhcIikge1xuICAgICAgICAgICAgICAgIGlmIChtYXggPT09IG51bGwgfHwgY2gudmFsdWUgPCBtYXgpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGNoLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXggIT0gbnVsbCA/IG5ldyBEYXRlKG1heCkgOiBudWxsO1xuICAgIH1cbn1cblpvZERhdGUuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRGF0ZSh7XG4gICAgICAgIGNoZWNrczogW10sXG4gICAgICAgIGNvZXJjZTogKHBhcmFtcyA9PT0gbnVsbCB8fCBwYXJhbXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmFtcy5jb2VyY2UpIHx8IGZhbHNlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERhdGUsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RTeW1ib2wgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5zeW1ib2wpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuc3ltYm9sLFxuICAgICAgICAgICAgICAgIHJlY2VpdmVkOiBjdHgucGFyc2VkVHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFN5bWJvbC5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RTeW1ib2woe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFN5bWJvbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZFVuZGVmaW5lZCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS51bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVW5kZWZpbmVkLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFVuZGVmaW5lZCh7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5kZWZpbmVkLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuY2xhc3MgWm9kTnVsbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubnVsbCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2ROdWxsLmNyZWF0ZSA9IChwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bGwoe1xuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RBbnkgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLy8gdG8gcHJldmVudCBpbnN0YW5jZXMgb2Ygb3RoZXIgY2xhc3NlcyBmcm9tIGV4dGVuZGluZyBab2RBbnkuIHRoaXMgY2F1c2VzIGlzc3VlcyB3aXRoIGNhdGNoYWxsIGluIFpvZE9iamVjdC5cbiAgICAgICAgdGhpcy5fYW55ID0gdHJ1ZTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG59XG5ab2RBbnkuY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQW55KHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBbnksXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RVbmtub3duIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIC8vIHJlcXVpcmVkXG4gICAgICAgIHRoaXMuX3Vua25vd24gPSB0cnVlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbn1cblpvZFVua25vd24uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5rbm93bih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kVW5rbm93bixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZE5ldmVyIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuX2dldE9yUmV0dXJuQ3R4KGlucHV0KTtcbiAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUubmV2ZXIsXG4gICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICB9XG59XG5ab2ROZXZlci5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROZXZlcih7XG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmV2ZXIsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RWb2lkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUudW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLnZvaWQsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT0soaW5wdXQuZGF0YSk7XG4gICAgfVxufVxuWm9kVm9pZC5jcmVhdGUgPSAocGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2RWb2lkKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RWb2lkLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuY2xhc3MgWm9kQXJyYXkgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHgsIHN0YXR1cyB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZGVmID0gdGhpcy5fZGVmO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYXJyYXkpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuYXJyYXksXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLmV4YWN0TGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCB0b29CaWcgPSBjdHguZGF0YS5sZW5ndGggPiBkZWYuZXhhY3RMZW5ndGgudmFsdWU7XG4gICAgICAgICAgICBjb25zdCB0b29TbWFsbCA9IGN0eC5kYXRhLmxlbmd0aCA8IGRlZi5leGFjdExlbmd0aC52YWx1ZTtcbiAgICAgICAgICAgIGlmICh0b29CaWcgfHwgdG9vU21hbGwpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogdG9vQmlnID8gWm9kSXNzdWVDb2RlLnRvb19iaWcgOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiAodG9vU21hbGwgPyBkZWYuZXhhY3RMZW5ndGgudmFsdWUgOiB1bmRlZmluZWQpLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiAodG9vQmlnID8gZGVmLmV4YWN0TGVuZ3RoLnZhbHVlIDogdW5kZWZpbmVkKSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWYuZXhhY3RMZW5ndGgubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGVmLm1pbkxlbmd0aCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLmxlbmd0aCA8IGRlZi5taW5MZW5ndGgudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICAgICAgbWluaW11bTogZGVmLm1pbkxlbmd0aC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1pbkxlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkZWYubWF4TGVuZ3RoICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoID4gZGVmLm1heExlbmd0aC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICAgICAgbWF4aW11bTogZGVmLm1heExlbmd0aC52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGV4YWN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZGVmLm1heExlbmd0aC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoWy4uLmN0eC5kYXRhXS5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmLnR5cGUuX3BhcnNlQXN5bmMobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGl0ZW0sIGN0eC5wYXRoLCBpKSk7XG4gICAgICAgICAgICB9KSkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gWy4uLmN0eC5kYXRhXS5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBkZWYudHlwZS5fcGFyc2VTeW5jKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBpdGVtLCBjdHgucGF0aCwgaSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlQXJyYXkoc3RhdHVzLCByZXN1bHQpO1xuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbiAgICBtaW4obWluTGVuZ3RoLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWluTGVuZ3RoOiB7IHZhbHVlOiBtaW5MZW5ndGgsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWF4KG1heExlbmd0aCwgbWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEFycmF5KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1heExlbmd0aDogeyB2YWx1ZTogbWF4TGVuZ3RoLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxlbmd0aChsZW4sIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBleGFjdExlbmd0aDogeyB2YWx1ZTogbGVuLCBtZXNzYWdlOiBlcnJvclV0aWwudG9TdHJpbmcobWVzc2FnZSkgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG5vbmVtcHR5KG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKDEsIG1lc3NhZ2UpO1xuICAgIH1cbn1cblpvZEFycmF5LmNyZWF0ZSA9IChzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQXJyYXkoe1xuICAgICAgICB0eXBlOiBzY2hlbWEsXG4gICAgICAgIG1pbkxlbmd0aDogbnVsbCxcbiAgICAgICAgbWF4TGVuZ3RoOiBudWxsLFxuICAgICAgICBleGFjdExlbmd0aDogbnVsbCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RBcnJheSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmZ1bmN0aW9uIGRlZXBQYXJ0aWFsaWZ5KHNjaGVtYSkge1xuICAgIGlmIChzY2hlbWEgaW5zdGFuY2VvZiBab2RPYmplY3QpIHtcbiAgICAgICAgY29uc3QgbmV3U2hhcGUgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc2NoZW1hLnNoYXBlKSB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZFNjaGVtYSA9IHNjaGVtYS5zaGFwZVtrZXldO1xuICAgICAgICAgICAgbmV3U2hhcGVba2V5XSA9IFpvZE9wdGlvbmFsLmNyZWF0ZShkZWVwUGFydGlhbGlmeShmaWVsZFNjaGVtYSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnNjaGVtYS5fZGVmLFxuICAgICAgICAgICAgc2hhcGU6ICgpID0+IG5ld1NoYXBlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoc2NoZW1hIGluc3RhbmNlb2YgWm9kQXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RBcnJheSh7XG4gICAgICAgICAgICAuLi5zY2hlbWEuX2RlZixcbiAgICAgICAgICAgIHR5cGU6IGRlZXBQYXJ0aWFsaWZ5KHNjaGVtYS5lbGVtZW50KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBab2RPcHRpb25hbC5jcmVhdGUoZGVlcFBhcnRpYWxpZnkoc2NoZW1hLnVud3JhcCgpKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBab2ROdWxsYWJsZS5jcmVhdGUoZGVlcFBhcnRpYWxpZnkoc2NoZW1hLnVud3JhcCgpKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSBpbnN0YW5jZW9mIFpvZFR1cGxlKSB7XG4gICAgICAgIHJldHVybiBab2RUdXBsZS5jcmVhdGUoc2NoZW1hLml0ZW1zLm1hcCgoaXRlbSkgPT4gZGVlcFBhcnRpYWxpZnkoaXRlbSkpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBzY2hlbWE7XG4gICAgfVxufVxuY2xhc3MgWm9kT2JqZWN0IGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuX2NhY2hlZCA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBJbiBtb3N0IGNhc2VzLCB0aGlzIGlzIG5vIGxvbmdlciBuZWVkZWQgLSB1bmtub3duIHByb3BlcnRpZXMgYXJlIG5vdyBzaWxlbnRseSBzdHJpcHBlZC5cbiAgICAgICAgICogSWYgeW91IHdhbnQgdG8gcGFzcyB0aHJvdWdoIHVua25vd24gcHJvcGVydGllcywgdXNlIGAucGFzc3Rocm91Z2goKWAgaW5zdGVhZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubm9uc3RyaWN0ID0gdGhpcy5wYXNzdGhyb3VnaDtcbiAgICAgICAgLy8gZXh0ZW5kPFxuICAgICAgICAvLyAgIEF1Z21lbnRhdGlvbiBleHRlbmRzIFpvZFJhd1NoYXBlLFxuICAgICAgICAvLyAgIE5ld091dHB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgICAgIC8vICAgICAgID8gQXVnbWVudGF0aW9uW2tdW1wiX291dHB1dFwiXVxuICAgICAgICAvLyAgICAgICA6IGsgZXh0ZW5kcyBrZXlvZiBPdXRwdXRcbiAgICAgICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAgICAgLy8gICAgICAgOiBuZXZlcjtcbiAgICAgICAgLy8gICB9PixcbiAgICAgICAgLy8gICBOZXdJbnB1dCBleHRlbmRzIHV0aWwuZmxhdHRlbjx7XG4gICAgICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfaW5wdXRcIl1cbiAgICAgICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgSW5wdXRcbiAgICAgICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgICAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgICAgICAvLyAgIH0+XG4gICAgICAgIC8vID4oXG4gICAgICAgIC8vICAgYXVnbWVudGF0aW9uOiBBdWdtZW50YXRpb25cbiAgICAgICAgLy8gKTogWm9kT2JqZWN0PFxuICAgICAgICAvLyAgIGV4dGVuZFNoYXBlPFQsIEF1Z21lbnRhdGlvbj4sXG4gICAgICAgIC8vICAgVW5rbm93bktleXMsXG4gICAgICAgIC8vICAgQ2F0Y2hhbGwsXG4gICAgICAgIC8vICAgTmV3T3V0cHV0LFxuICAgICAgICAvLyAgIE5ld0lucHV0XG4gICAgICAgIC8vID4ge1xuICAgICAgICAvLyAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgLy8gICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgLy8gICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAvLyAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgLy8gICAgICAgLi4uYXVnbWVudGF0aW9uLFxuICAgICAgICAvLyAgICAgfSksXG4gICAgICAgIC8vICAgfSkgYXMgYW55O1xuICAgICAgICAvLyB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYC5leHRlbmRgIGluc3RlYWRcbiAgICAgICAgICogICovXG4gICAgICAgIHRoaXMuYXVnbWVudCA9IHRoaXMuZXh0ZW5kO1xuICAgIH1cbiAgICBfZ2V0Q2FjaGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY2FjaGVkICE9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZDtcbiAgICAgICAgY29uc3Qgc2hhcGUgPSB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICAgICAgY29uc3Qga2V5cyA9IHV0aWwub2JqZWN0S2V5cyhzaGFwZSk7XG4gICAgICAgIHJldHVybiAodGhpcy5fY2FjaGVkID0geyBzaGFwZSwga2V5cyB9KTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFR5cGUgPSB0aGlzLl9nZXRUeXBlKGlucHV0KTtcbiAgICAgICAgaWYgKHBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IHsgc2hhcGUsIGtleXM6IHNoYXBlS2V5cyB9ID0gdGhpcy5fZ2V0Q2FjaGVkKCk7XG4gICAgICAgIGNvbnN0IGV4dHJhS2V5cyA9IFtdO1xuICAgICAgICBpZiAoISh0aGlzLl9kZWYuY2F0Y2hhbGwgaW5zdGFuY2VvZiBab2ROZXZlciAmJlxuICAgICAgICAgICAgdGhpcy5fZGVmLnVua25vd25LZXlzID09PSBcInN0cmlwXCIpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBjdHguZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmICghc2hhcGVLZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFLZXlzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFpcnMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcGVLZXlzKSB7XG4gICAgICAgICAgICBjb25zdCBrZXlWYWxpZGF0b3IgPSBzaGFwZVtrZXldO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjdHguZGF0YVtrZXldO1xuICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAga2V5OiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZToga2V5IH0sXG4gICAgICAgICAgICAgICAgdmFsdWU6IGtleVZhbGlkYXRvci5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIHZhbHVlLCBjdHgucGF0aCwga2V5KSksXG4gICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBrZXkgaW4gY3R4LmRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fZGVmLmNhdGNoYWxsIGluc3RhbmNlb2YgWm9kTmV2ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IHVua25vd25LZXlzID0gdGhpcy5fZGVmLnVua25vd25LZXlzO1xuICAgICAgICAgICAgaWYgKHVua25vd25LZXlzID09PSBcInBhc3N0aHJvdWdoXCIpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBleHRyYUtleXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFpcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB7IHN0YXR1czogXCJ2YWxpZFwiLCB2YWx1ZTogY3R4LmRhdGFba2V5XSB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh1bmtub3duS2V5cyA9PT0gXCJzdHJpY3RcIikge1xuICAgICAgICAgICAgICAgIGlmIChleHRyYUtleXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS51bnJlY29nbml6ZWRfa2V5cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXM6IGV4dHJhS2V5cyxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHVua25vd25LZXlzID09PSBcInN0cmlwXCIpIDtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW50ZXJuYWwgWm9kT2JqZWN0IGVycm9yOiBpbnZhbGlkIHVua25vd25LZXlzIHZhbHVlLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gcnVuIGNhdGNoYWxsIHZhbGlkYXRpb25cbiAgICAgICAgICAgIGNvbnN0IGNhdGNoYWxsID0gdGhpcy5fZGVmLmNhdGNoYWxsO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgZXh0cmFLZXlzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjdHguZGF0YVtrZXldO1xuICAgICAgICAgICAgICAgIHBhaXJzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBrZXk6IHsgc3RhdHVzOiBcInZhbGlkXCIsIHZhbHVlOiBrZXkgfSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNhdGNoYWxsLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBrZXkpIC8vLCBjdHguY2hpbGQoa2V5KSwgdmFsdWUsIGdldFBhcnNlZFR5cGUodmFsdWUpXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIGFsd2F5c1NldDoga2V5IGluIGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKClcbiAgICAgICAgICAgICAgICAudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3luY1BhaXJzID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHN5bmNQYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWx3YXlzU2V0OiBwYWlyLmFsd2F5c1NldCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzeW5jUGFpcnM7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC50aGVuKChzeW5jUGFpcnMpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUGFyc2VTdGF0dXMubWVyZ2VPYmplY3RTeW5jKHN0YXR1cywgc3luY1BhaXJzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHBhaXJzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgc2hhcGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2hhcGUoKTtcbiAgICB9XG4gICAgc3RyaWN0KG1lc3NhZ2UpIHtcbiAgICAgICAgZXJyb3JVdGlsLmVyclRvT2JqO1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICB1bmtub3duS2V5czogXCJzdHJpY3RcIixcbiAgICAgICAgICAgIC4uLihtZXNzYWdlICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JNYXA6IChpc3N1ZSwgY3R4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0RXJyb3IgPSAoX2MgPSAoX2IgPSAoX2EgPSB0aGlzLl9kZWYpLmVycm9yTWFwKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FsbChfYSwgaXNzdWUsIGN0eCkubWVzc2FnZSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogY3R4LmRlZmF1bHRFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc3N1ZS5jb2RlID09PSBcInVucmVjb2duaXplZF9rZXlzXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogKF9kID0gZXJyb3JVdGlsLmVyclRvT2JqKG1lc3NhZ2UpLm1lc3NhZ2UpICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IGRlZmF1bHRFcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBkZWZhdWx0RXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0cmlwKCkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcGFzc3Rocm91Z2goKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHVua25vd25LZXlzOiBcInBhc3N0aHJvdWdoXCIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBjb25zdCBBdWdtZW50RmFjdG9yeSA9XG4gICAgLy8gICA8RGVmIGV4dGVuZHMgWm9kT2JqZWN0RGVmPihkZWY6IERlZikgPT5cbiAgICAvLyAgIDxBdWdtZW50YXRpb24gZXh0ZW5kcyBab2RSYXdTaGFwZT4oXG4gICAgLy8gICAgIGF1Z21lbnRhdGlvbjogQXVnbWVudGF0aW9uXG4gICAgLy8gICApOiBab2RPYmplY3Q8XG4gICAgLy8gICAgIGV4dGVuZFNoYXBlPFJldHVyblR5cGU8RGVmW1wic2hhcGVcIl0+LCBBdWdtZW50YXRpb24+LFxuICAgIC8vICAgICBEZWZbXCJ1bmtub3duS2V5c1wiXSxcbiAgICAvLyAgICAgRGVmW1wiY2F0Y2hhbGxcIl1cbiAgICAvLyAgID4gPT4ge1xuICAgIC8vICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgLy8gICAgICAgLi4uZGVmLFxuICAgIC8vICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgIC8vICAgICAgICAgLi4uZGVmLnNoYXBlKCksXG4gICAgLy8gICAgICAgICAuLi5hdWdtZW50YXRpb24sXG4gICAgLy8gICAgICAgfSksXG4gICAgLy8gICAgIH0pIGFzIGFueTtcbiAgICAvLyAgIH07XG4gICAgZXh0ZW5kKGF1Z21lbnRhdGlvbikge1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAgICAgICAgICAgICAuLi5hdWdtZW50YXRpb24sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByaW9yIHRvIHpvZEAxLjAuMTIgdGhlcmUgd2FzIGEgYnVnIGluIHRoZVxuICAgICAqIGluZmVycmVkIHR5cGUgb2YgbWVyZ2VkIG9iamVjdHMuIFBsZWFzZVxuICAgICAqIHVwZ3JhZGUgaWYgeW91IGFyZSBleHBlcmllbmNpbmcgaXNzdWVzLlxuICAgICAqL1xuICAgIG1lcmdlKG1lcmdpbmcpIHtcbiAgICAgICAgY29uc3QgbWVyZ2VkID0gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICB1bmtub3duS2V5czogbWVyZ2luZy5fZGVmLnVua25vd25LZXlzLFxuICAgICAgICAgICAgY2F0Y2hhbGw6IG1lcmdpbmcuX2RlZi5jYXRjaGFsbCxcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgICAgIC4uLm1lcmdpbmcuX2RlZi5zaGFwZSgpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBtZXJnZWQ7XG4gICAgfVxuICAgIC8vIG1lcmdlPFxuICAgIC8vICAgSW5jb21pbmcgZXh0ZW5kcyBBbnlab2RPYmplY3QsXG4gICAgLy8gICBBdWdtZW50YXRpb24gZXh0ZW5kcyBJbmNvbWluZ1tcInNoYXBlXCJdLFxuICAgIC8vICAgTmV3T3V0cHV0IGV4dGVuZHMge1xuICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBPdXRwdXRdOiBrIGV4dGVuZHMga2V5b2YgQXVnbWVudGF0aW9uXG4gICAgLy8gICAgICAgPyBBdWdtZW50YXRpb25ba11bXCJfb3V0cHV0XCJdXG4gICAgLy8gICAgICAgOiBrIGV4dGVuZHMga2V5b2YgT3V0cHV0XG4gICAgLy8gICAgICAgPyBPdXRwdXRba11cbiAgICAvLyAgICAgICA6IG5ldmVyO1xuICAgIC8vICAgfSxcbiAgICAvLyAgIE5ld0lucHV0IGV4dGVuZHMge1xuICAgIC8vICAgICBbayBpbiBrZXlvZiBBdWdtZW50YXRpb24gfCBrZXlvZiBJbnB1dF06IGsgZXh0ZW5kcyBrZXlvZiBBdWdtZW50YXRpb25cbiAgICAvLyAgICAgICA/IEF1Z21lbnRhdGlvbltrXVtcIl9pbnB1dFwiXVxuICAgIC8vICAgICAgIDogayBleHRlbmRzIGtleW9mIElucHV0XG4gICAgLy8gICAgICAgPyBJbnB1dFtrXVxuICAgIC8vICAgICAgIDogbmV2ZXI7XG4gICAgLy8gICB9XG4gICAgLy8gPihcbiAgICAvLyAgIG1lcmdpbmc6IEluY29taW5nXG4gICAgLy8gKTogWm9kT2JqZWN0PFxuICAgIC8vICAgZXh0ZW5kU2hhcGU8VCwgUmV0dXJuVHlwZTxJbmNvbWluZ1tcIl9kZWZcIl1bXCJzaGFwZVwiXT4+LFxuICAgIC8vICAgSW5jb21pbmdbXCJfZGVmXCJdW1widW5rbm93bktleXNcIl0sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJjYXRjaGFsbFwiXSxcbiAgICAvLyAgIE5ld091dHB1dCxcbiAgICAvLyAgIE5ld0lucHV0XG4gICAgLy8gPiB7XG4gICAgLy8gICBjb25zdCBtZXJnZWQ6IGFueSA9IG5ldyBab2RPYmplY3Qoe1xuICAgIC8vICAgICB1bmtub3duS2V5czogbWVyZ2luZy5fZGVmLnVua25vd25LZXlzLFxuICAgIC8vICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgIC8vICAgICBzaGFwZTogKCkgPT5cbiAgICAvLyAgICAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzKHRoaXMuX2RlZi5zaGFwZSgpLCBtZXJnaW5nLl9kZWYuc2hhcGUoKSksXG4gICAgLy8gICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgIC8vICAgfSkgYXMgYW55O1xuICAgIC8vICAgcmV0dXJuIG1lcmdlZDtcbiAgICAvLyB9XG4gICAgc2V0S2V5KGtleSwgc2NoZW1hKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF1Z21lbnQoeyBba2V5XTogc2NoZW1hIH0pO1xuICAgIH1cbiAgICAvLyBtZXJnZTxJbmNvbWluZyBleHRlbmRzIEFueVpvZE9iamVjdD4oXG4gICAgLy8gICBtZXJnaW5nOiBJbmNvbWluZ1xuICAgIC8vICk6IC8vWm9kT2JqZWN0PFQgJiBJbmNvbWluZ1tcIl9zaGFwZVwiXSwgVW5rbm93bktleXMsIENhdGNoYWxsPiA9IChtZXJnaW5nKSA9PiB7XG4gICAgLy8gWm9kT2JqZWN0PFxuICAgIC8vICAgZXh0ZW5kU2hhcGU8VCwgUmV0dXJuVHlwZTxJbmNvbWluZ1tcIl9kZWZcIl1bXCJzaGFwZVwiXT4+LFxuICAgIC8vICAgSW5jb21pbmdbXCJfZGVmXCJdW1widW5rbm93bktleXNcIl0sXG4gICAgLy8gICBJbmNvbWluZ1tcIl9kZWZcIl1bXCJjYXRjaGFsbFwiXVxuICAgIC8vID4ge1xuICAgIC8vICAgLy8gY29uc3QgbWVyZ2VkU2hhcGUgPSBvYmplY3RVdGlsLm1lcmdlU2hhcGVzKFxuICAgIC8vICAgLy8gICB0aGlzLl9kZWYuc2hhcGUoKSxcbiAgICAvLyAgIC8vICAgbWVyZ2luZy5fZGVmLnNoYXBlKClcbiAgICAvLyAgIC8vICk7XG4gICAgLy8gICBjb25zdCBtZXJnZWQ6IGFueSA9IG5ldyBab2RPYmplY3Qoe1xuICAgIC8vICAgICB1bmtub3duS2V5czogbWVyZ2luZy5fZGVmLnVua25vd25LZXlzLFxuICAgIC8vICAgICBjYXRjaGFsbDogbWVyZ2luZy5fZGVmLmNhdGNoYWxsLFxuICAgIC8vICAgICBzaGFwZTogKCkgPT5cbiAgICAvLyAgICAgICBvYmplY3RVdGlsLm1lcmdlU2hhcGVzKHRoaXMuX2RlZi5zaGFwZSgpLCBtZXJnaW5nLl9kZWYuc2hhcGUoKSksXG4gICAgLy8gICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgIC8vICAgfSkgYXMgYW55O1xuICAgIC8vICAgcmV0dXJuIG1lcmdlZDtcbiAgICAvLyB9XG4gICAgY2F0Y2hhbGwoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RPYmplY3Qoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgY2F0Y2hhbGw6IGluZGV4LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcGljayhtYXNrKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlID0ge307XG4gICAgICAgIHV0aWwub2JqZWN0S2V5cyhtYXNrKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIGlmIChtYXNrW2tleV0gJiYgdGhpcy5zaGFwZVtrZXldKSB7XG4gICAgICAgICAgICAgICAgc2hhcGVba2V5XSA9IHRoaXMuc2hhcGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9taXQobWFzaykge1xuICAgICAgICBjb25zdCBzaGFwZSA9IHt9O1xuICAgICAgICB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBpZiAoIW1hc2tba2V5XSkge1xuICAgICAgICAgICAgICAgIHNoYXBlW2tleV0gPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gc2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqL1xuICAgIGRlZXBQYXJ0aWFsKCkge1xuICAgICAgICByZXR1cm4gZGVlcFBhcnRpYWxpZnkodGhpcyk7XG4gICAgfVxuICAgIHBhcnRpYWwobWFzaykge1xuICAgICAgICBjb25zdCBuZXdTaGFwZSA9IHt9O1xuICAgICAgICB1dGlsLm9iamVjdEtleXModGhpcy5zaGFwZSkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZFNjaGVtYSA9IHRoaXMuc2hhcGVba2V5XTtcbiAgICAgICAgICAgIGlmIChtYXNrICYmICFtYXNrW2tleV0pIHtcbiAgICAgICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gZmllbGRTY2hlbWE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gZmllbGRTY2hlbWEub3B0aW9uYWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHNoYXBlOiAoKSA9PiBuZXdTaGFwZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlcXVpcmVkKG1hc2spIHtcbiAgICAgICAgY29uc3QgbmV3U2hhcGUgPSB7fTtcbiAgICAgICAgdXRpbC5vYmplY3RLZXlzKHRoaXMuc2hhcGUpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKG1hc2sgJiYgIW1hc2tba2V5XSkge1xuICAgICAgICAgICAgICAgIG5ld1NoYXBlW2tleV0gPSB0aGlzLnNoYXBlW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWVsZFNjaGVtYSA9IHRoaXMuc2hhcGVba2V5XTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3RmllbGQgPSBmaWVsZFNjaGVtYTtcbiAgICAgICAgICAgICAgICB3aGlsZSAobmV3RmllbGQgaW5zdGFuY2VvZiBab2RPcHRpb25hbCkge1xuICAgICAgICAgICAgICAgICAgICBuZXdGaWVsZCA9IG5ld0ZpZWxkLl9kZWYuaW5uZXJUeXBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXdTaGFwZVtrZXldID0gbmV3RmllbGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICBzaGFwZTogKCkgPT4gbmV3U2hhcGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBrZXlvZigpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZVpvZEVudW0odXRpbC5vYmplY3RLZXlzKHRoaXMuc2hhcGUpKTtcbiAgICB9XG59XG5ab2RPYmplY3QuY3JlYXRlID0gKHNoYXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgIHNoYXBlOiAoKSA9PiBzaGFwZSxcbiAgICAgICAgdW5rbm93bktleXM6IFwic3RyaXBcIixcbiAgICAgICAgY2F0Y2hhbGw6IFpvZE5ldmVyLmNyZWF0ZSgpLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcblpvZE9iamVjdC5zdHJpY3RDcmVhdGUgPSAoc2hhcGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT2JqZWN0KHtcbiAgICAgICAgc2hhcGU6ICgpID0+IHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpY3RcIixcbiAgICAgICAgY2F0Y2hhbGw6IFpvZE5ldmVyLmNyZWF0ZSgpLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE9iamVjdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcblpvZE9iamVjdC5sYXp5Y3JlYXRlID0gKHNoYXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE9iamVjdCh7XG4gICAgICAgIHNoYXBlLFxuICAgICAgICB1bmtub3duS2V5czogXCJzdHJpcFwiLFxuICAgICAgICBjYXRjaGFsbDogWm9kTmV2ZXIuY3JlYXRlKCksXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT2JqZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuY2xhc3MgWm9kVW5pb24gZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLl9kZWYub3B0aW9ucztcbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlUmVzdWx0cyhyZXN1bHRzKSB7XG4gICAgICAgICAgICAvLyByZXR1cm4gZmlyc3QgaXNzdWUtZnJlZSB2YWxpZGF0aW9uIGlmIGl0IGV4aXN0c1xuICAgICAgICAgICAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQucmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQucmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVzdWx0IG9mIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgaXNzdWVzIGZyb20gZGlydHkgb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIGN0eC5jb21tb24uaXNzdWVzLnB1c2goLi4ucmVzdWx0LmN0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmV0dXJuIGludmFsaWRcbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gcmVzdWx0cy5tYXAoKHJlc3VsdCkgPT4gbmV3IFpvZEVycm9yKHJlc3VsdC5jdHguY29tbW9uLmlzc3VlcykpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdW5pb24sXG4gICAgICAgICAgICAgICAgdW5pb25FcnJvcnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwob3B0aW9ucy5tYXAoYXN5bmMgKG9wdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkQ3R4ID0ge1xuICAgICAgICAgICAgICAgICAgICAuLi5jdHgsXG4gICAgICAgICAgICAgICAgICAgIGNvbW1vbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY3R4LmNvbW1vbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzc3VlczogW10sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogbnVsbCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdDogYXdhaXQgb3B0aW9uLl9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGNoaWxkQ3R4LFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgY3R4OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpLnRoZW4oaGFuZGxlUmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgZGlydHkgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBpc3N1ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZEN0eCA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgICAgICAgICBjb21tb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmN0eC5jb21tb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvcHRpb24uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjaGlsZEN0eCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIiAmJiAhZGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlydHkgPSB7IHJlc3VsdCwgY3R4OiBjaGlsZEN0eCB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRDdHguY29tbW9uLmlzc3Vlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNzdWVzLnB1c2goY2hpbGRDdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpcnR5KSB7XG4gICAgICAgICAgICAgICAgY3R4LmNvbW1vbi5pc3N1ZXMucHVzaCguLi5kaXJ0eS5jdHguY29tbW9uLmlzc3Vlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRpcnR5LnJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVuaW9uRXJyb3JzID0gaXNzdWVzLm1hcCgoaXNzdWVzKSA9PiBuZXcgWm9kRXJyb3IoaXNzdWVzKSk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbixcbiAgICAgICAgICAgICAgICB1bmlvbkVycm9ycyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYub3B0aW9ucztcbiAgICB9XG59XG5ab2RVbmlvbi5jcmVhdGUgPSAodHlwZXMsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kVW5pb24oe1xuICAgICAgICBvcHRpb25zOiB0eXBlcyxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RVbmlvbixcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy9cbi8vLy8vLy8vLy8gICAgICBab2REaXNjcmltaW5hdGVkVW5pb24gICAgICAvLy8vLy8vLy8vXG4vLy8vLy8vLy8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5jb25zdCBnZXREaXNjcmltaW5hdG9yID0gKHR5cGUpID0+IHtcbiAgICBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExhenkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS5zY2hlbWEpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kRWZmZWN0cykge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLmlubmVyVHlwZSgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZExpdGVyYWwpIHtcbiAgICAgICAgcmV0dXJuIFt0eXBlLnZhbHVlXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZEVudW0pIHtcbiAgICAgICAgcmV0dXJuIHR5cGUub3B0aW9ucztcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE5hdGl2ZUVudW0pIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGJhbi9iYW5cbiAgICAgICAgcmV0dXJuIHV0aWwub2JqZWN0VmFsdWVzKHR5cGUuZW51bSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2REZWZhdWx0KSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUuX2RlZi5pbm5lclR5cGUpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kVW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGwpIHtcbiAgICAgICAgcmV0dXJuIFtudWxsXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE9wdGlvbmFsKSB7XG4gICAgICAgIHJldHVybiBbdW5kZWZpbmVkLCAuLi5nZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSBpbnN0YW5jZW9mIFpvZE51bGxhYmxlKSB7XG4gICAgICAgIHJldHVybiBbbnVsbCwgLi4uZ2V0RGlzY3JpbWluYXRvcih0eXBlLnVud3JhcCgpKV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RCcmFuZGVkKSB7XG4gICAgICAgIHJldHVybiBnZXREaXNjcmltaW5hdG9yKHR5cGUudW53cmFwKCkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlIGluc3RhbmNlb2YgWm9kUmVhZG9ubHkpIHtcbiAgICAgICAgcmV0dXJuIGdldERpc2NyaW1pbmF0b3IodHlwZS51bndyYXAoKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgaW5zdGFuY2VvZiBab2RDYXRjaCkge1xuICAgICAgICByZXR1cm4gZ2V0RGlzY3JpbWluYXRvcih0eXBlLl9kZWYuaW5uZXJUeXBlKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59O1xuY2xhc3MgWm9kRGlzY3JpbWluYXRlZFVuaW9uIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUub2JqZWN0KSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF90eXBlLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkOiBab2RQYXJzZWRUeXBlLm9iamVjdCxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRpc2NyaW1pbmF0b3IgPSB0aGlzLmRpc2NyaW1pbmF0b3I7XG4gICAgICAgIGNvbnN0IGRpc2NyaW1pbmF0b3JWYWx1ZSA9IGN0eC5kYXRhW2Rpc2NyaW1pbmF0b3JdO1xuICAgICAgICBjb25zdCBvcHRpb24gPSB0aGlzLm9wdGlvbnNNYXAuZ2V0KGRpc2NyaW1pbmF0b3JWYWx1ZSk7XG4gICAgICAgIGlmICghb3B0aW9uKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF91bmlvbl9kaXNjcmltaW5hdG9yLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IEFycmF5LmZyb20odGhpcy5vcHRpb25zTWFwLmtleXMoKSksXG4gICAgICAgICAgICAgICAgcGF0aDogW2Rpc2NyaW1pbmF0b3JdLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbi5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb24uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZGlzY3JpbWluYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5kaXNjcmltaW5hdG9yO1xuICAgIH1cbiAgICBnZXQgb3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vcHRpb25zO1xuICAgIH1cbiAgICBnZXQgb3B0aW9uc01hcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vcHRpb25zTWFwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29uc3RydWN0b3Igb2YgdGhlIGRpc2NyaW1pbmF0ZWQgdW5pb24gc2NoZW1hLiBJdHMgYmVoYXZpb3VyIGlzIHZlcnkgc2ltaWxhciB0byB0aGF0IG9mIHRoZSBub3JtYWwgei51bmlvbigpIGNvbnN0cnVjdG9yLlxuICAgICAqIEhvd2V2ZXIsIGl0IG9ubHkgYWxsb3dzIGEgdW5pb24gb2Ygb2JqZWN0cywgYWxsIG9mIHdoaWNoIG5lZWQgdG8gc2hhcmUgYSBkaXNjcmltaW5hdG9yIHByb3BlcnR5LiBUaGlzIHByb3BlcnR5IG11c3RcbiAgICAgKiBoYXZlIGEgZGlmZmVyZW50IHZhbHVlIGZvciBlYWNoIG9iamVjdCBpbiB0aGUgdW5pb24uXG4gICAgICogQHBhcmFtIGRpc2NyaW1pbmF0b3IgdGhlIG5hbWUgb2YgdGhlIGRpc2NyaW1pbmF0b3IgcHJvcGVydHlcbiAgICAgKiBAcGFyYW0gdHlwZXMgYW4gYXJyYXkgb2Ygb2JqZWN0IHNjaGVtYXNcbiAgICAgKiBAcGFyYW0gcGFyYW1zXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShkaXNjcmltaW5hdG9yLCBvcHRpb25zLCBwYXJhbXMpIHtcbiAgICAgICAgLy8gR2V0IGFsbCB0aGUgdmFsaWQgZGlzY3JpbWluYXRvciB2YWx1ZXNcbiAgICAgICAgY29uc3Qgb3B0aW9uc01hcCA9IG5ldyBNYXAoKTtcbiAgICAgICAgLy8gdHJ5IHtcbiAgICAgICAgZm9yIChjb25zdCB0eXBlIG9mIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGRpc2NyaW1pbmF0b3JWYWx1ZXMgPSBnZXREaXNjcmltaW5hdG9yKHR5cGUuc2hhcGVbZGlzY3JpbWluYXRvcl0pO1xuICAgICAgICAgICAgaWYgKCFkaXNjcmltaW5hdG9yVmFsdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQSBkaXNjcmltaW5hdG9yIHZhbHVlIGZvciBrZXkgXFxgJHtkaXNjcmltaW5hdG9yfVxcYCBjb3VsZCBub3QgYmUgZXh0cmFjdGVkIGZyb20gYWxsIHNjaGVtYSBvcHRpb25zYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIGRpc2NyaW1pbmF0b3JWYWx1ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uc01hcC5oYXModmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRGlzY3JpbWluYXRvciBwcm9wZXJ0eSAke1N0cmluZyhkaXNjcmltaW5hdG9yKX0gaGFzIGR1cGxpY2F0ZSB2YWx1ZSAke1N0cmluZyh2YWx1ZSl9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9wdGlvbnNNYXAuc2V0KHZhbHVlLCB0eXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFpvZERpc2NyaW1pbmF0ZWRVbmlvbih7XG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZERpc2NyaW1pbmF0ZWRVbmlvbixcbiAgICAgICAgICAgIGRpc2NyaW1pbmF0b3IsXG4gICAgICAgICAgICBvcHRpb25zLFxuICAgICAgICAgICAgb3B0aW9uc01hcCxcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gbWVyZ2VWYWx1ZXMoYSwgYikge1xuICAgIGNvbnN0IGFUeXBlID0gZ2V0UGFyc2VkVHlwZShhKTtcbiAgICBjb25zdCBiVHlwZSA9IGdldFBhcnNlZFR5cGUoYik7XG4gICAgaWYgKGEgPT09IGIpIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IGEgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUub2JqZWN0ICYmIGJUeXBlID09PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICBjb25zdCBiS2V5cyA9IHV0aWwub2JqZWN0S2V5cyhiKTtcbiAgICAgICAgY29uc3Qgc2hhcmVkS2V5cyA9IHV0aWxcbiAgICAgICAgICAgIC5vYmplY3RLZXlzKGEpXG4gICAgICAgICAgICAuZmlsdGVyKChrZXkpID0+IGJLZXlzLmluZGV4T2Yoa2V5KSAhPT0gLTEpO1xuICAgICAgICBjb25zdCBuZXdPYmogPSB7IC4uLmEsIC4uLmIgfTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Ygc2hhcmVkS2V5cykge1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhhW2tleV0sIGJba2V5XSk7XG4gICAgICAgICAgICBpZiAoIXNoYXJlZFZhbHVlLnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdPYmpba2V5XSA9IHNoYXJlZFZhbHVlLmRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IG5ld09iaiB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChhVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSAmJiBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5hcnJheSkge1xuICAgICAgICBpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZmFsc2UgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXdBcnJheSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYS5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1BID0gYVtpbmRleF07XG4gICAgICAgICAgICBjb25zdCBpdGVtQiA9IGJbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3Qgc2hhcmVkVmFsdWUgPSBtZXJnZVZhbHVlcyhpdGVtQSwgaXRlbUIpO1xuICAgICAgICAgICAgaWYgKCFzaGFyZWRWYWx1ZS52YWxpZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3QXJyYXkucHVzaChzaGFyZWRWYWx1ZS5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogbmV3QXJyYXkgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAoYVR5cGUgPT09IFpvZFBhcnNlZFR5cGUuZGF0ZSAmJlxuICAgICAgICBiVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS5kYXRlICYmXG4gICAgICAgICthID09PSArYikge1xuICAgICAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSwgZGF0YTogYSB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlIH07XG4gICAgfVxufVxuY2xhc3MgWm9kSW50ZXJzZWN0aW9uIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IGhhbmRsZVBhcnNlZCA9IChwYXJzZWRMZWZ0LCBwYXJzZWRSaWdodCkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzQWJvcnRlZChwYXJzZWRMZWZ0KSB8fCBpc0Fib3J0ZWQocGFyc2VkUmlnaHQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBtZXJnZWQgPSBtZXJnZVZhbHVlcyhwYXJzZWRMZWZ0LnZhbHVlLCBwYXJzZWRSaWdodC52YWx1ZSk7XG4gICAgICAgICAgICBpZiAoIW1lcmdlZC52YWxpZCkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9pbnRlcnNlY3Rpb25fdHlwZXMsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNEaXJ0eShwYXJzZWRMZWZ0KSB8fCBpc0RpcnR5KHBhcnNlZFJpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBtZXJnZWQuZGF0YSB9O1xuICAgICAgICB9O1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICB0aGlzLl9kZWYubGVmdC5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVmLnJpZ2h0Ll9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF0pLnRoZW4oKFtsZWZ0LCByaWdodF0pID0+IGhhbmRsZVBhcnNlZChsZWZ0LCByaWdodCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZVBhcnNlZCh0aGlzLl9kZWYubGVmdC5fcGFyc2VTeW5jKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgIH0pLCB0aGlzLl9kZWYucmlnaHQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5ab2RJbnRlcnNlY3Rpb24uY3JlYXRlID0gKGxlZnQsIHJpZ2h0LCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEludGVyc2VjdGlvbih7XG4gICAgICAgIGxlZnQ6IGxlZnQsXG4gICAgICAgIHJpZ2h0OiByaWdodCxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RJbnRlcnNlY3Rpb24sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RUdXBsZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IHN0YXR1cywgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuYXJyYXkpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuYXJyYXksXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3R4LmRhdGEubGVuZ3RoIDwgdGhpcy5fZGVmLml0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLnRvb19zbWFsbCxcbiAgICAgICAgICAgICAgICBtaW5pbXVtOiB0aGlzLl9kZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN0ID0gdGhpcy5fZGVmLnJlc3Q7XG4gICAgICAgIGlmICghcmVzdCAmJiBjdHguZGF0YS5sZW5ndGggPiB0aGlzLl9kZWYuaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX2JpZyxcbiAgICAgICAgICAgICAgICBtYXhpbXVtOiB0aGlzLl9kZWYuaXRlbXMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpdGVtcyA9IFsuLi5jdHguZGF0YV1cbiAgICAgICAgICAgIC5tYXAoKGl0ZW0sIGl0ZW1JbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2NoZW1hID0gdGhpcy5fZGVmLml0ZW1zW2l0ZW1JbmRleF0gfHwgdGhpcy5fZGVmLnJlc3Q7XG4gICAgICAgICAgICBpZiAoIXNjaGVtYSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBzY2hlbWEuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBpdGVtLCBjdHgucGF0aCwgaXRlbUluZGV4KSk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuZmlsdGVyKCh4KSA9PiAhIXgpOyAvLyBmaWx0ZXIgbnVsbHNcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChpdGVtcykudGhlbigocmVzdWx0cykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZUFycmF5KHN0YXR1cywgcmVzdWx0cyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZUFycmF5KHN0YXR1cywgaXRlbXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBpdGVtcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pdGVtcztcbiAgICB9XG4gICAgcmVzdChyZXN0KSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kVHVwbGUoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgcmVzdCxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuWm9kVHVwbGUuY3JlYXRlID0gKHNjaGVtYXMsIHBhcmFtcykgPT4ge1xuICAgIGlmICghQXJyYXkuaXNBcnJheShzY2hlbWFzKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgbXVzdCBwYXNzIGFuIGFycmF5IG9mIHNjaGVtYXMgdG8gei50dXBsZShbIC4uLiBdKVwiKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBab2RUdXBsZSh7XG4gICAgICAgIGl0ZW1zOiBzY2hlbWFzLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFR1cGxlLFxuICAgICAgICByZXN0OiBudWxsLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuY2xhc3MgWm9kUmVjb3JkIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm9iamVjdCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYWlycyA9IFtdO1xuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGN0eC5kYXRhKSB7XG4gICAgICAgICAgICBwYWlycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBrZXk6IGtleVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBrZXksIGN0eC5wYXRoLCBrZXkpKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgY3R4LmRhdGFba2V5XSwgY3R4LnBhdGgsIGtleSkpLFxuICAgICAgICAgICAgICAgIGFsd2F5c1NldDoga2V5IGluIGN0eC5kYXRhLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQYXJzZVN0YXR1cy5tZXJnZU9iamVjdEFzeW5jKHN0YXR1cywgcGFpcnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFBhcnNlU3RhdHVzLm1lcmdlT2JqZWN0U3luYyhzdGF0dXMsIHBhaXJzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZWxlbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUoZmlyc3QsIHNlY29uZCwgdGhpcmQpIHtcbiAgICAgICAgaWYgKHNlY29uZCBpbnN0YW5jZW9mIFpvZFR5cGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgWm9kUmVjb3JkKHtcbiAgICAgICAgICAgICAgICBrZXlUeXBlOiBmaXJzdCxcbiAgICAgICAgICAgICAgICB2YWx1ZVR5cGU6IHNlY29uZCxcbiAgICAgICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlY29yZCxcbiAgICAgICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHRoaXJkKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgWm9kUmVjb3JkKHtcbiAgICAgICAgICAgIGtleVR5cGU6IFpvZFN0cmluZy5jcmVhdGUoKSxcbiAgICAgICAgICAgIHZhbHVlVHlwZTogZmlyc3QsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFJlY29yZCxcbiAgICAgICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMoc2Vjb25kKSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuY2xhc3MgWm9kTWFwIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgZ2V0IGtleVNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5rZXlUeXBlO1xuICAgIH1cbiAgICBnZXQgdmFsdWVTY2hlbWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVUeXBlO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm1hcCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5tYXAsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXlUeXBlID0gdGhpcy5fZGVmLmtleVR5cGU7XG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZSA9IHRoaXMuX2RlZi52YWx1ZVR5cGU7XG4gICAgICAgIGNvbnN0IHBhaXJzID0gWy4uLmN0eC5kYXRhLmVudHJpZXMoKV0ubWFwKChba2V5LCB2YWx1ZV0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGtleToga2V5VHlwZS5fcGFyc2UobmV3IFBhcnNlSW5wdXRMYXp5UGF0aChjdHgsIGtleSwgY3R4LnBhdGgsIFtpbmRleCwgXCJrZXlcIl0pKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVUeXBlLl9wYXJzZShuZXcgUGFyc2VJbnB1dExhenlQYXRoKGN0eCwgdmFsdWUsIGN0eC5wYXRoLCBbaW5kZXgsIFwidmFsdWVcIl0pKSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoY3R4LmNvbW1vbi5hc3luYykge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYWlyIG9mIHBhaXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IGF3YWl0IHBhaXIua2V5O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImFib3J0ZWRcIiB8fCB2YWx1ZS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXR1cyA9PT0gXCJkaXJ0eVwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbE1hcC5zZXQoa2V5LnZhbHVlLCB2YWx1ZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZmluYWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBwYWlyLmtleTtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhaXIudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKGtleS5zdGF0dXMgPT09IFwiYWJvcnRlZFwiIHx8IHZhbHVlLnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhdHVzID09PSBcImRpcnR5XCIgfHwgdmFsdWUuc3RhdHVzID09PSBcImRpcnR5XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpbmFsTWFwLnNldChrZXkudmFsdWUsIHZhbHVlLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogZmluYWxNYXAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cblpvZE1hcC5jcmVhdGUgPSAoa2V5VHlwZSwgdmFsdWVUeXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE1hcCh7XG4gICAgICAgIHZhbHVlVHlwZSxcbiAgICAgICAga2V5VHlwZSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RNYXAsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2RTZXQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLnNldCkge1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5zZXQsXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWYgPSB0aGlzLl9kZWY7XG4gICAgICAgIGlmIChkZWYubWluU2l6ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGN0eC5kYXRhLnNpemUgPCBkZWYubWluU2l6ZS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUudG9vX3NtYWxsLFxuICAgICAgICAgICAgICAgICAgICBtaW5pbXVtOiBkZWYubWluU2l6ZS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzZXRcIixcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZi5taW5TaXplLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlZi5tYXhTaXplICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY3R4LmRhdGEuc2l6ZSA+IGRlZi5tYXhTaXplLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS50b29fYmlnLFxuICAgICAgICAgICAgICAgICAgICBtYXhpbXVtOiBkZWYubWF4U2l6ZS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzZXRcIixcbiAgICAgICAgICAgICAgICAgICAgaW5jbHVzaXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBleGFjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGRlZi5tYXhTaXplLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsdWVUeXBlID0gdGhpcy5fZGVmLnZhbHVlVHlwZTtcbiAgICAgICAgZnVuY3Rpb24gZmluYWxpemVTZXQoZWxlbWVudHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZFNldCA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBlbGVtZW50cykge1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICBwYXJzZWRTZXQuYWRkKGVsZW1lbnQudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBwYXJzZWRTZXQgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlbGVtZW50cyA9IFsuLi5jdHguZGF0YS52YWx1ZXMoKV0ubWFwKChpdGVtLCBpKSA9PiB2YWx1ZVR5cGUuX3BhcnNlKG5ldyBQYXJzZUlucHV0TGF6eVBhdGgoY3R4LCBpdGVtLCBjdHgucGF0aCwgaSkpKTtcbiAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChlbGVtZW50cykudGhlbigoZWxlbWVudHMpID0+IGZpbmFsaXplU2V0KGVsZW1lbnRzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmluYWxpemVTZXQoZWxlbWVudHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1pbihtaW5TaXplLCBtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kU2V0KHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIG1pblNpemU6IHsgdmFsdWU6IG1pblNpemUsIG1lc3NhZ2U6IGVycm9yVXRpbC50b1N0cmluZyhtZXNzYWdlKSB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgbWF4KG1heFNpemUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RTZXQoe1xuICAgICAgICAgICAgLi4udGhpcy5fZGVmLFxuICAgICAgICAgICAgbWF4U2l6ZTogeyB2YWx1ZTogbWF4U2l6ZSwgbWVzc2FnZTogZXJyb3JVdGlsLnRvU3RyaW5nKG1lc3NhZ2UpIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzaXplKHNpemUsIG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKHNpemUsIG1lc3NhZ2UpLm1heChzaXplLCBtZXNzYWdlKTtcbiAgICB9XG4gICAgbm9uZW1wdHkobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oMSwgbWVzc2FnZSk7XG4gICAgfVxufVxuWm9kU2V0LmNyZWF0ZSA9ICh2YWx1ZVR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kU2V0KHtcbiAgICAgICAgdmFsdWVUeXBlLFxuICAgICAgICBtaW5TaXplOiBudWxsLFxuICAgICAgICBtYXhTaXplOiBudWxsLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFNldCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZEZ1bmN0aW9uIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMudmFsaWRhdGUgPSB0aGlzLmltcGxlbWVudDtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuZnVuY3Rpb24pIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUuZnVuY3Rpb24sXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBtYWtlQXJnc0lzc3VlKGFyZ3MsIGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFrZUlzc3VlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBhcmdzLFxuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwczogW1xuICAgICAgICAgICAgICAgICAgICBjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCxcbiAgICAgICAgICAgICAgICAgICAgY3R4LnNjaGVtYUVycm9yTWFwLFxuICAgICAgICAgICAgICAgICAgICBnZXRFcnJvck1hcCgpLFxuICAgICAgICAgICAgICAgICAgICBlcnJvck1hcCxcbiAgICAgICAgICAgICAgICBdLmZpbHRlcigoeCkgPT4gISF4KSxcbiAgICAgICAgICAgICAgICBpc3N1ZURhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfYXJndW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNFcnJvcjogZXJyb3IsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG1ha2VSZXR1cm5zSXNzdWUocmV0dXJucywgZXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlSXNzdWUoe1xuICAgICAgICAgICAgICAgIGRhdGE6IHJldHVybnMsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgZXJyb3JNYXBzOiBbXG4gICAgICAgICAgICAgICAgICAgIGN0eC5jb21tb24uY29udGV4dHVhbEVycm9yTWFwLFxuICAgICAgICAgICAgICAgICAgICBjdHguc2NoZW1hRXJyb3JNYXAsXG4gICAgICAgICAgICAgICAgICAgIGdldEVycm9yTWFwKCksXG4gICAgICAgICAgICAgICAgICAgIGVycm9yTWFwLFxuICAgICAgICAgICAgICAgIF0uZmlsdGVyKCh4KSA9PiAhIXgpLFxuICAgICAgICAgICAgICAgIGlzc3VlRGF0YToge1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBab2RJc3N1ZUNvZGUuaW52YWxpZF9yZXR1cm5fdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuVHlwZUVycm9yOiBlcnJvcixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcGFyYW1zID0geyBlcnJvck1hcDogY3R4LmNvbW1vbi5jb250ZXh0dWFsRXJyb3JNYXAgfTtcbiAgICAgICAgY29uc3QgZm4gPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKHRoaXMuX2RlZi5yZXR1cm5zIGluc3RhbmNlb2YgWm9kUHJvbWlzZSkge1xuICAgICAgICAgICAgLy8gV291bGQgbG92ZSBhIHdheSB0byBhdm9pZCBkaXNhYmxpbmcgdGhpcyBydWxlLCBidXQgd2UgbmVlZFxuICAgICAgICAgICAgLy8gYW4gYWxpYXMgKHVzaW5nIGFuIGFycm93IGZ1bmN0aW9uIHdhcyB3aGF0IGNhdXNlZCAyNjUxKS5cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgICAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIE9LKGFzeW5jIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgWm9kRXJyb3IoW10pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBhd2FpdCBtZS5fZGVmLmFyZ3NcbiAgICAgICAgICAgICAgICAgICAgLnBhcnNlQXN5bmMoYXJncywgcGFyYW1zKVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IuYWRkSXNzdWUobWFrZUFyZ3NJc3N1ZShhcmdzLCBlKSk7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFJlZmxlY3QuYXBwbHkoZm4sIHRoaXMsIHBhcnNlZEFyZ3MpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFJldHVybnMgPSBhd2FpdCBtZS5fZGVmLnJldHVybnMuX2RlZi50eXBlXG4gICAgICAgICAgICAgICAgICAgIC5wYXJzZUFzeW5jKHJlc3VsdCwgcGFyYW1zKVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IuYWRkSXNzdWUobWFrZVJldHVybnNJc3N1ZShyZXN1bHQsIGUpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZFJldHVybnM7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIFdvdWxkIGxvdmUgYSB3YXkgdG8gYXZvaWQgZGlzYWJsaW5nIHRoaXMgcnVsZSwgYnV0IHdlIG5lZWRcbiAgICAgICAgICAgIC8vIGFuIGFsaWFzICh1c2luZyBhbiBhcnJvdyBmdW5jdGlvbiB3YXMgd2hhdCBjYXVzZWQgMjY1MSkuXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXNcbiAgICAgICAgICAgIGNvbnN0IG1lID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBPSyhmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZEFyZ3MgPSBtZS5fZGVmLmFyZ3Muc2FmZVBhcnNlKGFyZ3MsIHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgaWYgKCFwYXJzZWRBcmdzLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFpvZEVycm9yKFttYWtlQXJnc0lzc3VlKGFyZ3MsIHBhcnNlZEFyZ3MuZXJyb3IpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFJlZmxlY3QuYXBwbHkoZm4sIHRoaXMsIHBhcnNlZEFyZ3MuZGF0YSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkUmV0dXJucyA9IG1lLl9kZWYucmV0dXJucy5zYWZlUGFyc2UocmVzdWx0LCBwYXJhbXMpO1xuICAgICAgICAgICAgICAgIGlmICghcGFyc2VkUmV0dXJucy5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBab2RFcnJvcihbbWFrZVJldHVybnNJc3N1ZShyZXN1bHQsIHBhcnNlZFJldHVybnMuZXJyb3IpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWRSZXR1cm5zLmRhdGE7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwYXJhbWV0ZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmFyZ3M7XG4gICAgfVxuICAgIHJldHVyblR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYucmV0dXJucztcbiAgICB9XG4gICAgYXJncyguLi5pdGVtcykge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEZ1bmN0aW9uKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIGFyZ3M6IFpvZFR1cGxlLmNyZWF0ZShpdGVtcykucmVzdChab2RVbmtub3duLmNyZWF0ZSgpKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybnMocmV0dXJuVHlwZSkge1xuICAgICAgICByZXR1cm4gbmV3IFpvZEZ1bmN0aW9uKHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIHJldHVybnM6IHJldHVyblR5cGUsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbXBsZW1lbnQoZnVuYykge1xuICAgICAgICBjb25zdCB2YWxpZGF0ZWRGdW5jID0gdGhpcy5wYXJzZShmdW5jKTtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRlZEZ1bmM7XG4gICAgfVxuICAgIHN0cmljdEltcGxlbWVudChmdW5jKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRlZEZ1bmMgPSB0aGlzLnBhcnNlKGZ1bmMpO1xuICAgICAgICByZXR1cm4gdmFsaWRhdGVkRnVuYztcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShhcmdzLCByZXR1cm5zLCBwYXJhbXMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBab2RGdW5jdGlvbih7XG4gICAgICAgICAgICBhcmdzOiAoYXJnc1xuICAgICAgICAgICAgICAgID8gYXJnc1xuICAgICAgICAgICAgICAgIDogWm9kVHVwbGUuY3JlYXRlKFtdKS5yZXN0KFpvZFVua25vd24uY3JlYXRlKCkpKSxcbiAgICAgICAgICAgIHJldHVybnM6IHJldHVybnMgfHwgWm9kVW5rbm93bi5jcmVhdGUoKSxcbiAgICAgICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRnVuY3Rpb24sXG4gICAgICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmNsYXNzIFpvZExhenkgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBnZXQgc2NoZW1hKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmdldHRlcigpO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IGxhenlTY2hlbWEgPSB0aGlzLl9kZWYuZ2V0dGVyKCk7XG4gICAgICAgIHJldHVybiBsYXp5U2NoZW1hLl9wYXJzZSh7IGRhdGE6IGN0eC5kYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSk7XG4gICAgfVxufVxuWm9kTGF6eS5jcmVhdGUgPSAoZ2V0dGVyLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZExhenkoe1xuICAgICAgICBnZXR0ZXI6IGdldHRlcixcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RMYXp5LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuY2xhc3MgWm9kTGl0ZXJhbCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBpZiAoaW5wdXQuZGF0YSAhPT0gdGhpcy5fZGVmLnZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfbGl0ZXJhbCxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdGhpcy5fZGVmLnZhbHVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnZhbHVlO1xuICAgIH1cbn1cblpvZExpdGVyYWwuY3JlYXRlID0gKHZhbHVlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZExpdGVyYWwoe1xuICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTGl0ZXJhbCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmZ1bmN0aW9uIGNyZWF0ZVpvZEVudW0odmFsdWVzLCBwYXJhbXMpIHtcbiAgICByZXR1cm4gbmV3IFpvZEVudW0oe1xuICAgICAgICB2YWx1ZXMsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRW51bSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufVxuY2xhc3MgWm9kRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBfWm9kRW51bV9jYWNoZS5zZXQodGhpcywgdm9pZCAwKTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQuZGF0YSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgY29uc3QgZXhwZWN0ZWRWYWx1ZXMgPSB0aGlzLl9kZWYudmFsdWVzO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IHV0aWwuam9pblZhbHVlcyhleHBlY3RlZFZhbHVlcyksXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGlmICghX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfWm9kRW51bV9jYWNoZSkpIHtcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX1pvZEVudW1fY2FjaGUsIG5ldyBTZXQodGhpcy5fZGVmLnZhbHVlcykpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfWm9kRW51bV9jYWNoZSkuaGFzKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCBjdHggPSB0aGlzLl9nZXRPclJldHVybkN0eChpbnB1dCk7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFZhbHVlcyA9IHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfZW51bV92YWx1ZSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBleHBlY3RlZFZhbHVlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE9LKGlucHV0LmRhdGEpO1xuICAgIH1cbiAgICBnZXQgb3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi52YWx1ZXM7XG4gICAgfVxuICAgIGdldCBlbnVtKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZ2V0IFZhbHVlcygpIHtcbiAgICAgICAgY29uc3QgZW51bVZhbHVlcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHZhbCBvZiB0aGlzLl9kZWYudmFsdWVzKSB7XG4gICAgICAgICAgICBlbnVtVmFsdWVzW3ZhbF0gPSB2YWw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVudW1WYWx1ZXM7XG4gICAgfVxuICAgIGdldCBFbnVtKCkge1xuICAgICAgICBjb25zdCBlbnVtVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgdmFsIG9mIHRoaXMuX2RlZi52YWx1ZXMpIHtcbiAgICAgICAgICAgIGVudW1WYWx1ZXNbdmFsXSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW51bVZhbHVlcztcbiAgICB9XG4gICAgZXh0cmFjdCh2YWx1ZXMsIG5ld0RlZiA9IHRoaXMuX2RlZikge1xuICAgICAgICByZXR1cm4gWm9kRW51bS5jcmVhdGUodmFsdWVzLCB7XG4gICAgICAgICAgICAuLi50aGlzLl9kZWYsXG4gICAgICAgICAgICAuLi5uZXdEZWYsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBleGNsdWRlKHZhbHVlcywgbmV3RGVmID0gdGhpcy5fZGVmKSB7XG4gICAgICAgIHJldHVybiBab2RFbnVtLmNyZWF0ZSh0aGlzLm9wdGlvbnMuZmlsdGVyKChvcHQpID0+ICF2YWx1ZXMuaW5jbHVkZXMob3B0KSksIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2RlZixcbiAgICAgICAgICAgIC4uLm5ld0RlZixcbiAgICAgICAgfSk7XG4gICAgfVxufVxuX1pvZEVudW1fY2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuWm9kRW51bS5jcmVhdGUgPSBjcmVhdGVab2RFbnVtO1xuY2xhc3MgWm9kTmF0aXZlRW51bSBleHRlbmRzIFpvZFR5cGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBfWm9kTmF0aXZlRW51bV9jYWNoZS5zZXQodGhpcywgdm9pZCAwKTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IG5hdGl2ZUVudW1WYWx1ZXMgPSB1dGlsLmdldFZhbGlkRW51bVZhbHVlcyh0aGlzLl9kZWYudmFsdWVzKTtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUuc3RyaW5nICYmXG4gICAgICAgICAgICBjdHgucGFyc2VkVHlwZSAhPT0gWm9kUGFyc2VkVHlwZS5udW1iZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkVmFsdWVzID0gdXRpbC5vYmplY3RWYWx1ZXMobmF0aXZlRW51bVZhbHVlcyk7XG4gICAgICAgICAgICBhZGRJc3N1ZVRvQ29udGV4dChjdHgsIHtcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogdXRpbC5qb2luVmFsdWVzKGV4cGVjdGVkVmFsdWVzKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9ab2ROYXRpdmVFbnVtX2NhY2hlKSkge1xuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfWm9kTmF0aXZlRW51bV9jYWNoZSwgbmV3IFNldCh1dGlsLmdldFZhbGlkRW51bVZhbHVlcyh0aGlzLl9kZWYudmFsdWVzKSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfWm9kTmF0aXZlRW51bV9jYWNoZSkuaGFzKGlucHV0LmRhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCBleHBlY3RlZFZhbHVlcyA9IHV0aWwub2JqZWN0VmFsdWVzKG5hdGl2ZUVudW1WYWx1ZXMpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX2VudW1fdmFsdWUsXG4gICAgICAgICAgICAgICAgb3B0aW9uczogZXhwZWN0ZWRWYWx1ZXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPSyhpbnB1dC5kYXRhKTtcbiAgICB9XG4gICAgZ2V0IGVudW0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudmFsdWVzO1xuICAgIH1cbn1cbl9ab2ROYXRpdmVFbnVtX2NhY2hlID0gbmV3IFdlYWtNYXAoKTtcblpvZE5hdGl2ZUVudW0uY3JlYXRlID0gKHZhbHVlcywgcGFyYW1zKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBab2ROYXRpdmVFbnVtKHtcbiAgICAgICAgdmFsdWVzOiB2YWx1ZXMsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kTmF0aXZlRW51bSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZFByb21pc2UgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYudHlwZTtcbiAgICB9XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICBpZiAoY3R4LnBhcnNlZFR5cGUgIT09IFpvZFBhcnNlZFR5cGUucHJvbWlzZSAmJlxuICAgICAgICAgICAgY3R4LmNvbW1vbi5hc3luYyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGFkZElzc3VlVG9Db250ZXh0KGN0eCwge1xuICAgICAgICAgICAgICAgIGNvZGU6IFpvZElzc3VlQ29kZS5pbnZhbGlkX3R5cGUsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQ6IFpvZFBhcnNlZFR5cGUucHJvbWlzZSxcbiAgICAgICAgICAgICAgICByZWNlaXZlZDogY3R4LnBhcnNlZFR5cGUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByb21pc2lmaWVkID0gY3R4LnBhcnNlZFR5cGUgPT09IFpvZFBhcnNlZFR5cGUucHJvbWlzZVxuICAgICAgICAgICAgPyBjdHguZGF0YVxuICAgICAgICAgICAgOiBQcm9taXNlLnJlc29sdmUoY3R4LmRhdGEpO1xuICAgICAgICByZXR1cm4gT0socHJvbWlzaWZpZWQudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlLnBhcnNlQXN5bmMoZGF0YSwge1xuICAgICAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgICAgIGVycm9yTWFwOiBjdHguY29tbW9uLmNvbnRleHR1YWxFcnJvck1hcCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuWm9kUHJvbWlzZS5jcmVhdGUgPSAoc2NoZW1hLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZFByb21pc2Uoe1xuICAgICAgICB0eXBlOiBzY2hlbWEsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUHJvbWlzZSxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZEVmZmVjdHMgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBpbm5lclR5cGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBzb3VyY2VUeXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLnNjaGVtYS5fZGVmLnR5cGVOYW1lID09PSBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0c1xuICAgICAgICAgICAgPyB0aGlzLl9kZWYuc2NoZW1hLnNvdXJjZVR5cGUoKVxuICAgICAgICAgICAgOiB0aGlzLl9kZWYuc2NoZW1hO1xuICAgIH1cbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBzdGF0dXMsIGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgY29uc3QgZWZmZWN0ID0gdGhpcy5fZGVmLmVmZmVjdCB8fCBudWxsO1xuICAgICAgICBjb25zdCBjaGVja0N0eCA9IHtcbiAgICAgICAgICAgIGFkZElzc3VlOiAoYXJnKSA9PiB7XG4gICAgICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCBhcmcpO1xuICAgICAgICAgICAgICAgIGlmIChhcmcuZmF0YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5wYXRoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgY2hlY2tDdHguYWRkSXNzdWUgPSBjaGVja0N0eC5hZGRJc3N1ZS5iaW5kKGNoZWNrQ3R4KTtcbiAgICAgICAgaWYgKGVmZmVjdC50eXBlID09PSBcInByZXByb2Nlc3NcIikge1xuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkID0gZWZmZWN0LnRyYW5zZm9ybShjdHguZGF0YSwgY2hlY2tDdHgpO1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHByb2Nlc3NlZCkudGhlbihhc3luYyAocHJvY2Vzc2VkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlQXN5bmMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcHJvY2Vzc2VkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMudmFsdWUgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBESVJUWShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX2RlZi5zY2hlbWEuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHByb2Nlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdHVzID09PSBcImFib3J0ZWRcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cy52YWx1ZSA9PT0gXCJkaXJ0eVwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRElSVFkocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlZmZlY3QudHlwZSA9PT0gXCJyZWZpbmVtZW50XCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4ZWN1dGVSZWZpbmVtZW50ID0gKGFjYykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVmZmVjdC5yZWZpbmVtZW50KGFjYywgY2hlY2tDdHgpO1xuICAgICAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXN5bmMgcmVmaW5lbWVudCBlbmNvdW50ZXJlZCBkdXJpbmcgc3luY2hyb25vdXMgcGFyc2Ugb3BlcmF0aW9uLiBVc2UgLnBhcnNlQXN5bmMgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKGN0eC5jb21tb24uYXN5bmMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5uZXIgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChpbm5lci5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXIuc3RhdHVzID09PSBcImRpcnR5XCIpXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgIC8vIHJldHVybiB2YWx1ZSBpcyBpZ25vcmVkXG4gICAgICAgICAgICAgICAgZXhlY3V0ZVJlZmluZW1lbnQoaW5uZXIudmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogc3RhdHVzLnZhbHVlLCB2YWx1ZTogaW5uZXIudmFsdWUgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYuc2NoZW1hXG4gICAgICAgICAgICAgICAgICAgIC5fcGFyc2VBc3luYyh7IGRhdGE6IGN0eC5kYXRhLCBwYXRoOiBjdHgucGF0aCwgcGFyZW50OiBjdHggfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGlubmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbm5lci5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIElOVkFMSUQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbm5lci5zdGF0dXMgPT09IFwiZGlydHlcIilcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cy5kaXJ0eSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXhlY3V0ZVJlZmluZW1lbnQoaW5uZXIudmFsdWUpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBzdGF0dXMudmFsdWUsIHZhbHVlOiBpbm5lci52YWx1ZSB9O1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZWZmZWN0LnR5cGUgPT09IFwidHJhbnNmb3JtXCIpIHtcbiAgICAgICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2UgPSB0aGlzLl9kZWYuc2NoZW1hLl9wYXJzZVN5bmMoe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBjdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogY3R4LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZChiYXNlKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJhc2U7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZWZmZWN0LnRyYW5zZm9ybShiYXNlLnZhbHVlLCBjaGVja0N0eCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBc3luY2hyb25vdXMgdHJhbnNmb3JtIGVuY291bnRlcmVkIGR1cmluZyBzeW5jaHJvbm91cyBwYXJzZSBvcGVyYXRpb24uIFVzZSAucGFyc2VBc3luYyBpbnN0ZWFkLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IHJlc3VsdCB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5zY2hlbWFcbiAgICAgICAgICAgICAgICAgICAgLl9wYXJzZUFzeW5jKHsgZGF0YTogY3R4LmRhdGEsIHBhdGg6IGN0eC5wYXRoLCBwYXJlbnQ6IGN0eCB9KVxuICAgICAgICAgICAgICAgICAgICAudGhlbigoYmFzZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWQoYmFzZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShlZmZlY3QudHJhbnNmb3JtKGJhc2UudmFsdWUsIGNoZWNrQ3R4KSkudGhlbigocmVzdWx0KSA9PiAoeyBzdGF0dXM6IHN0YXR1cy52YWx1ZSwgdmFsdWU6IHJlc3VsdCB9KSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdXRpbC5hc3NlcnROZXZlcihlZmZlY3QpO1xuICAgIH1cbn1cblpvZEVmZmVjdHMuY3JlYXRlID0gKHNjaGVtYSwgZWZmZWN0LCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZEVmZmVjdHMoe1xuICAgICAgICBzY2hlbWEsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRWZmZWN0cyxcbiAgICAgICAgZWZmZWN0LFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuWm9kRWZmZWN0cy5jcmVhdGVXaXRoUHJlcHJvY2VzcyA9IChwcmVwcm9jZXNzLCBzY2hlbWEsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kRWZmZWN0cyh7XG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgZWZmZWN0OiB7IHR5cGU6IFwicHJlcHJvY2Vzc1wiLCB0cmFuc2Zvcm06IHByZXByb2Nlc3MgfSxcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2RFZmZlY3RzLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuY2xhc3MgWm9kT3B0aW9uYWwgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgcGFyc2VkVHlwZSA9IHRoaXMuX2dldFR5cGUoaW5wdXQpO1xuICAgICAgICBpZiAocGFyc2VkVHlwZSA9PT0gWm9kUGFyc2VkVHlwZS51bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBPSyh1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kT3B0aW9uYWwuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kT3B0aW9uYWwoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kT3B0aW9uYWwsXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jbGFzcyBab2ROdWxsYWJsZSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLm51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBPSyhudWxsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZS5fcGFyc2UoaW5wdXQpO1xuICAgIH1cbiAgICB1bndyYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZWYuaW5uZXJUeXBlO1xuICAgIH1cbn1cblpvZE51bGxhYmxlLmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZE51bGxhYmxlKHtcbiAgICAgICAgaW5uZXJUeXBlOiB0eXBlLFxuICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZE51bGxhYmxlLFxuICAgICAgICAuLi5wcm9jZXNzQ3JlYXRlUGFyYW1zKHBhcmFtcyksXG4gICAgfSk7XG59O1xuY2xhc3MgWm9kRGVmYXVsdCBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCB7IGN0eCB9ID0gdGhpcy5fcHJvY2Vzc0lucHV0UGFyYW1zKGlucHV0KTtcbiAgICAgICAgbGV0IGRhdGEgPSBjdHguZGF0YTtcbiAgICAgICAgaWYgKGN0eC5wYXJzZWRUeXBlID09PSBab2RQYXJzZWRUeXBlLnVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZGF0YSA9IHRoaXMuX2RlZi5kZWZhdWx0VmFsdWUoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHBhdGg6IGN0eC5wYXRoLFxuICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZW1vdmVEZWZhdWx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGVmLmlubmVyVHlwZTtcbiAgICB9XG59XG5ab2REZWZhdWx0LmNyZWF0ZSA9ICh0eXBlLCBwYXJhbXMpID0+IHtcbiAgICByZXR1cm4gbmV3IFpvZERlZmF1bHQoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kRGVmYXVsdCxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiB0eXBlb2YgcGFyYW1zLmRlZmF1bHQgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgICAgPyBwYXJhbXMuZGVmYXVsdFxuICAgICAgICAgICAgOiAoKSA9PiBwYXJhbXMuZGVmYXVsdCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZENhdGNoIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgY3R4IH0gPSB0aGlzLl9wcm9jZXNzSW5wdXRQYXJhbXMoaW5wdXQpO1xuICAgICAgICAvLyBuZXdDdHggaXMgdXNlZCB0byBub3QgY29sbGVjdCBpc3N1ZXMgZnJvbSBpbm5lciB0eXBlcyBpbiBjdHhcbiAgICAgICAgY29uc3QgbmV3Q3R4ID0ge1xuICAgICAgICAgICAgLi4uY3R4LFxuICAgICAgICAgICAgY29tbW9uOiB7XG4gICAgICAgICAgICAgICAgLi4uY3R4LmNvbW1vbixcbiAgICAgICAgICAgICAgICBpc3N1ZXM6IFtdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fZGVmLmlubmVyVHlwZS5fcGFyc2Uoe1xuICAgICAgICAgICAgZGF0YTogbmV3Q3R4LmRhdGEsXG4gICAgICAgICAgICBwYXRoOiBuZXdDdHgucGF0aCxcbiAgICAgICAgICAgIHBhcmVudDoge1xuICAgICAgICAgICAgICAgIC4uLm5ld0N0eCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoaXNBc3luYyhyZXN1bHQpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogXCJ2YWxpZFwiLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnN0YXR1cyA9PT0gXCJ2YWxpZFwiXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHJlc3VsdC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLl9kZWYuY2F0Y2hWYWx1ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0IGVycm9yKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFpvZEVycm9yKG5ld0N0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiBuZXdDdHguZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBcInZhbGlkXCIsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHJlc3VsdC5zdGF0dXMgPT09IFwidmFsaWRcIlxuICAgICAgICAgICAgICAgICAgICA/IHJlc3VsdC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICA6IHRoaXMuX2RlZi5jYXRjaFZhbHVlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldCBlcnJvcigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFpvZEVycm9yKG5ld0N0eC5jb21tb24uaXNzdWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogbmV3Q3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZW1vdmVDYXRjaCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kQ2F0Y2guY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kQ2F0Y2goe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kQ2F0Y2gsXG4gICAgICAgIGNhdGNoVmFsdWU6IHR5cGVvZiBwYXJhbXMuY2F0Y2ggPT09IFwiZnVuY3Rpb25cIiA/IHBhcmFtcy5jYXRjaCA6ICgpID0+IHBhcmFtcy5jYXRjaCxcbiAgICAgICAgLi4ucHJvY2Vzc0NyZWF0ZVBhcmFtcyhwYXJhbXMpLFxuICAgIH0pO1xufTtcbmNsYXNzIFpvZE5hTiBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCBwYXJzZWRUeXBlID0gdGhpcy5fZ2V0VHlwZShpbnB1dCk7XG4gICAgICAgIGlmIChwYXJzZWRUeXBlICE9PSBab2RQYXJzZWRUeXBlLm5hbikge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5fZ2V0T3JSZXR1cm5DdHgoaW5wdXQpO1xuICAgICAgICAgICAgYWRkSXNzdWVUb0NvbnRleHQoY3R4LCB7XG4gICAgICAgICAgICAgICAgY29kZTogWm9kSXNzdWVDb2RlLmludmFsaWRfdHlwZSxcbiAgICAgICAgICAgICAgICBleHBlY3RlZDogWm9kUGFyc2VkVHlwZS5uYW4sXG4gICAgICAgICAgICAgICAgcmVjZWl2ZWQ6IGN0eC5wYXJzZWRUeXBlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gSU5WQUxJRDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBzdGF0dXM6IFwidmFsaWRcIiwgdmFsdWU6IGlucHV0LmRhdGEgfTtcbiAgICB9XG59XG5ab2ROYU4uY3JlYXRlID0gKHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kTmFOKHtcbiAgICAgICAgdHlwZU5hbWU6IFpvZEZpcnN0UGFydHlUeXBlS2luZC5ab2ROYU4sXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5jb25zdCBCUkFORCA9IFN5bWJvbChcInpvZF9icmFuZFwiKTtcbmNsYXNzIFpvZEJyYW5kZWQgZXh0ZW5kcyBab2RUeXBlIHtcbiAgICBfcGFyc2UoaW5wdXQpIHtcbiAgICAgICAgY29uc3QgeyBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBjdHguZGF0YTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlLl9wYXJzZSh7XG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi50eXBlO1xuICAgIH1cbn1cbmNsYXNzIFpvZFBpcGVsaW5lIGV4dGVuZHMgWm9kVHlwZSB7XG4gICAgX3BhcnNlKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IHsgc3RhdHVzLCBjdHggfSA9IHRoaXMuX3Byb2Nlc3NJbnB1dFBhcmFtcyhpbnB1dCk7XG4gICAgICAgIGlmIChjdHguY29tbW9uLmFzeW5jKSB7XG4gICAgICAgICAgICBjb25zdCBoYW5kbGVBc3luYyA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpblJlc3VsdCA9IGF3YWl0IHRoaXMuX2RlZi5pbi5fcGFyc2VBc3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGN0eC5kYXRhLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJhYm9ydGVkXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgICAgIGlmIChpblJlc3VsdC5zdGF0dXMgPT09IFwiZGlydHlcIikge1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXMuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERJUlRZKGluUmVzdWx0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWYub3V0Ll9wYXJzZUFzeW5jKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IGN0eCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVBc3luYygpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaW5SZXN1bHQgPSB0aGlzLl9kZWYuaW4uX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgZGF0YTogY3R4LmRhdGEsXG4gICAgICAgICAgICAgICAgcGF0aDogY3R4LnBhdGgsXG4gICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChpblJlc3VsdC5zdGF0dXMgPT09IFwiYWJvcnRlZFwiKVxuICAgICAgICAgICAgICAgIHJldHVybiBJTlZBTElEO1xuICAgICAgICAgICAgaWYgKGluUmVzdWx0LnN0YXR1cyA9PT0gXCJkaXJ0eVwiKSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBcImRpcnR5XCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpblJlc3VsdC52YWx1ZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5vdXQuX3BhcnNlU3luYyh7XG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGluUmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBjdHgucGF0aCxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBjdHgsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZShhLCBiKSB7XG4gICAgICAgIHJldHVybiBuZXcgWm9kUGlwZWxpbmUoe1xuICAgICAgICAgICAgaW46IGEsXG4gICAgICAgICAgICBvdXQ6IGIsXG4gICAgICAgICAgICB0eXBlTmFtZTogWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLlpvZFBpcGVsaW5lLFxuICAgICAgICB9KTtcbiAgICB9XG59XG5jbGFzcyBab2RSZWFkb25seSBleHRlbmRzIFpvZFR5cGUge1xuICAgIF9wYXJzZShpbnB1dCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9kZWYuaW5uZXJUeXBlLl9wYXJzZShpbnB1dCk7XG4gICAgICAgIGNvbnN0IGZyZWV6ZSA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZChkYXRhKSkge1xuICAgICAgICAgICAgICAgIGRhdGEudmFsdWUgPSBPYmplY3QuZnJlZXplKGRhdGEudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBpc0FzeW5jKHJlc3VsdClcbiAgICAgICAgICAgID8gcmVzdWx0LnRoZW4oKGRhdGEpID0+IGZyZWV6ZShkYXRhKSlcbiAgICAgICAgICAgIDogZnJlZXplKHJlc3VsdCk7XG4gICAgfVxuICAgIHVud3JhcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlZi5pbm5lclR5cGU7XG4gICAgfVxufVxuWm9kUmVhZG9ubHkuY3JlYXRlID0gKHR5cGUsIHBhcmFtcykgPT4ge1xuICAgIHJldHVybiBuZXcgWm9kUmVhZG9ubHkoe1xuICAgICAgICBpbm5lclR5cGU6IHR5cGUsXG4gICAgICAgIHR5cGVOYW1lOiBab2RGaXJzdFBhcnR5VHlwZUtpbmQuWm9kUmVhZG9ubHksXG4gICAgICAgIC4uLnByb2Nlc3NDcmVhdGVQYXJhbXMocGFyYW1zKSxcbiAgICB9KTtcbn07XG5mdW5jdGlvbiBjdXN0b20oY2hlY2ssIHBhcmFtcyA9IHt9LCBcbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqXG4gKiBQYXNzIGBmYXRhbGAgaW50byB0aGUgcGFyYW1zIG9iamVjdCBpbnN0ZWFkOlxuICpcbiAqIGBgYHRzXG4gKiB6LnN0cmluZygpLmN1c3RvbSgodmFsKSA9PiB2YWwubGVuZ3RoID4gNSwgeyBmYXRhbDogZmFsc2UgfSlcbiAqIGBgYFxuICpcbiAqL1xuZmF0YWwpIHtcbiAgICBpZiAoY2hlY2spXG4gICAgICAgIHJldHVybiBab2RBbnkuY3JlYXRlKCkuc3VwZXJSZWZpbmUoKGRhdGEsIGN0eCkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgICAgIGlmICghY2hlY2soZGF0YSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwID0gdHlwZW9mIHBhcmFtcyA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgICAgICAgICAgID8gcGFyYW1zKGRhdGEpXG4gICAgICAgICAgICAgICAgICAgIDogdHlwZW9mIHBhcmFtcyA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyB7IG1lc3NhZ2U6IHBhcmFtcyB9XG4gICAgICAgICAgICAgICAgICAgICAgICA6IHBhcmFtcztcbiAgICAgICAgICAgICAgICBjb25zdCBfZmF0YWwgPSAoX2IgPSAoX2EgPSBwLmZhdGFsKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBmYXRhbCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBwMiA9IHR5cGVvZiBwID09PSBcInN0cmluZ1wiID8geyBtZXNzYWdlOiBwIH0gOiBwO1xuICAgICAgICAgICAgICAgIGN0eC5hZGRJc3N1ZSh7IGNvZGU6IFwiY3VzdG9tXCIsIC4uLnAyLCBmYXRhbDogX2ZhdGFsIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICByZXR1cm4gWm9kQW55LmNyZWF0ZSgpO1xufVxuY29uc3QgbGF0ZSA9IHtcbiAgICBvYmplY3Q6IFpvZE9iamVjdC5sYXp5Y3JlYXRlLFxufTtcbnZhciBab2RGaXJzdFBhcnR5VHlwZUtpbmQ7XG4oZnVuY3Rpb24gKFpvZEZpcnN0UGFydHlUeXBlS2luZCkge1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFN0cmluZ1wiXSA9IFwiWm9kU3RyaW5nXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVtYmVyXCJdID0gXCJab2ROdW1iZXJcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2ROYU5cIl0gPSBcIlpvZE5hTlwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEJpZ0ludFwiXSA9IFwiWm9kQmlnSW50XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQm9vbGVhblwiXSA9IFwiWm9kQm9vbGVhblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZERhdGVcIl0gPSBcIlpvZERhdGVcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RTeW1ib2xcIl0gPSBcIlpvZFN5bWJvbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFVuZGVmaW5lZFwiXSA9IFwiWm9kVW5kZWZpbmVkXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTnVsbFwiXSA9IFwiWm9kTnVsbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEFueVwiXSA9IFwiWm9kQW55XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kVW5rbm93blwiXSA9IFwiWm9kVW5rbm93blwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE5ldmVyXCJdID0gXCJab2ROZXZlclwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFZvaWRcIl0gPSBcIlpvZFZvaWRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RBcnJheVwiXSA9IFwiWm9kQXJyYXlcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RPYmplY3RcIl0gPSBcIlpvZE9iamVjdFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFVuaW9uXCJdID0gXCJab2RVbmlvblwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZERpc2NyaW1pbmF0ZWRVbmlvblwiXSA9IFwiWm9kRGlzY3JpbWluYXRlZFVuaW9uXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kSW50ZXJzZWN0aW9uXCJdID0gXCJab2RJbnRlcnNlY3Rpb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RUdXBsZVwiXSA9IFwiWm9kVHVwbGVcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RSZWNvcmRcIl0gPSBcIlpvZFJlY29yZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE1hcFwiXSA9IFwiWm9kTWFwXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kU2V0XCJdID0gXCJab2RTZXRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RGdW5jdGlvblwiXSA9IFwiWm9kRnVuY3Rpb25cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RMYXp5XCJdID0gXCJab2RMYXp5XCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTGl0ZXJhbFwiXSA9IFwiWm9kTGl0ZXJhbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZEVudW1cIl0gPSBcIlpvZEVudW1cIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RFZmZlY3RzXCJdID0gXCJab2RFZmZlY3RzXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kTmF0aXZlRW51bVwiXSA9IFwiWm9kTmF0aXZlRW51bVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE9wdGlvbmFsXCJdID0gXCJab2RPcHRpb25hbFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZE51bGxhYmxlXCJdID0gXCJab2ROdWxsYWJsZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZERlZmF1bHRcIl0gPSBcIlpvZERlZmF1bHRcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RDYXRjaFwiXSA9IFwiWm9kQ2F0Y2hcIjtcbiAgICBab2RGaXJzdFBhcnR5VHlwZUtpbmRbXCJab2RQcm9taXNlXCJdID0gXCJab2RQcm9taXNlXCI7XG4gICAgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kW1wiWm9kQnJhbmRlZFwiXSA9IFwiWm9kQnJhbmRlZFwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFBpcGVsaW5lXCJdID0gXCJab2RQaXBlbGluZVwiO1xuICAgIFpvZEZpcnN0UGFydHlUeXBlS2luZFtcIlpvZFJlYWRvbmx5XCJdID0gXCJab2RSZWFkb25seVwiO1xufSkoWm9kRmlyc3RQYXJ0eVR5cGVLaW5kIHx8IChab2RGaXJzdFBhcnR5VHlwZUtpbmQgPSB7fSkpO1xuY29uc3QgaW5zdGFuY2VPZlR5cGUgPSAoXG4vLyBjb25zdCBpbnN0YW5jZU9mVHlwZSA9IDxUIGV4dGVuZHMgbmV3ICguLi5hcmdzOiBhbnlbXSkgPT4gYW55PihcbmNscywgcGFyYW1zID0ge1xuICAgIG1lc3NhZ2U6IGBJbnB1dCBub3QgaW5zdGFuY2Ugb2YgJHtjbHMubmFtZX1gLFxufSkgPT4gY3VzdG9tKChkYXRhKSA9PiBkYXRhIGluc3RhbmNlb2YgY2xzLCBwYXJhbXMpO1xuY29uc3Qgc3RyaW5nVHlwZSA9IFpvZFN0cmluZy5jcmVhdGU7XG5jb25zdCBudW1iZXJUeXBlID0gWm9kTnVtYmVyLmNyZWF0ZTtcbmNvbnN0IG5hblR5cGUgPSBab2ROYU4uY3JlYXRlO1xuY29uc3QgYmlnSW50VHlwZSA9IFpvZEJpZ0ludC5jcmVhdGU7XG5jb25zdCBib29sZWFuVHlwZSA9IFpvZEJvb2xlYW4uY3JlYXRlO1xuY29uc3QgZGF0ZVR5cGUgPSBab2REYXRlLmNyZWF0ZTtcbmNvbnN0IHN5bWJvbFR5cGUgPSBab2RTeW1ib2wuY3JlYXRlO1xuY29uc3QgdW5kZWZpbmVkVHlwZSA9IFpvZFVuZGVmaW5lZC5jcmVhdGU7XG5jb25zdCBudWxsVHlwZSA9IFpvZE51bGwuY3JlYXRlO1xuY29uc3QgYW55VHlwZSA9IFpvZEFueS5jcmVhdGU7XG5jb25zdCB1bmtub3duVHlwZSA9IFpvZFVua25vd24uY3JlYXRlO1xuY29uc3QgbmV2ZXJUeXBlID0gWm9kTmV2ZXIuY3JlYXRlO1xuY29uc3Qgdm9pZFR5cGUgPSBab2RWb2lkLmNyZWF0ZTtcbmNvbnN0IGFycmF5VHlwZSA9IFpvZEFycmF5LmNyZWF0ZTtcbmNvbnN0IG9iamVjdFR5cGUgPSBab2RPYmplY3QuY3JlYXRlO1xuY29uc3Qgc3RyaWN0T2JqZWN0VHlwZSA9IFpvZE9iamVjdC5zdHJpY3RDcmVhdGU7XG5jb25zdCB1bmlvblR5cGUgPSBab2RVbmlvbi5jcmVhdGU7XG5jb25zdCBkaXNjcmltaW5hdGVkVW5pb25UeXBlID0gWm9kRGlzY3JpbWluYXRlZFVuaW9uLmNyZWF0ZTtcbmNvbnN0IGludGVyc2VjdGlvblR5cGUgPSBab2RJbnRlcnNlY3Rpb24uY3JlYXRlO1xuY29uc3QgdHVwbGVUeXBlID0gWm9kVHVwbGUuY3JlYXRlO1xuY29uc3QgcmVjb3JkVHlwZSA9IFpvZFJlY29yZC5jcmVhdGU7XG5jb25zdCBtYXBUeXBlID0gWm9kTWFwLmNyZWF0ZTtcbmNvbnN0IHNldFR5cGUgPSBab2RTZXQuY3JlYXRlO1xuY29uc3QgZnVuY3Rpb25UeXBlID0gWm9kRnVuY3Rpb24uY3JlYXRlO1xuY29uc3QgbGF6eVR5cGUgPSBab2RMYXp5LmNyZWF0ZTtcbmNvbnN0IGxpdGVyYWxUeXBlID0gWm9kTGl0ZXJhbC5jcmVhdGU7XG5jb25zdCBlbnVtVHlwZSA9IFpvZEVudW0uY3JlYXRlO1xuY29uc3QgbmF0aXZlRW51bVR5cGUgPSBab2ROYXRpdmVFbnVtLmNyZWF0ZTtcbmNvbnN0IHByb21pc2VUeXBlID0gWm9kUHJvbWlzZS5jcmVhdGU7XG5jb25zdCBlZmZlY3RzVHlwZSA9IFpvZEVmZmVjdHMuY3JlYXRlO1xuY29uc3Qgb3B0aW9uYWxUeXBlID0gWm9kT3B0aW9uYWwuY3JlYXRlO1xuY29uc3QgbnVsbGFibGVUeXBlID0gWm9kTnVsbGFibGUuY3JlYXRlO1xuY29uc3QgcHJlcHJvY2Vzc1R5cGUgPSBab2RFZmZlY3RzLmNyZWF0ZVdpdGhQcmVwcm9jZXNzO1xuY29uc3QgcGlwZWxpbmVUeXBlID0gWm9kUGlwZWxpbmUuY3JlYXRlO1xuY29uc3Qgb3N0cmluZyA9ICgpID0+IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpO1xuY29uc3Qgb251bWJlciA9ICgpID0+IG51bWJlclR5cGUoKS5vcHRpb25hbCgpO1xuY29uc3Qgb2Jvb2xlYW4gPSAoKSA9PiBib29sZWFuVHlwZSgpLm9wdGlvbmFsKCk7XG5jb25zdCBjb2VyY2UgPSB7XG4gICAgc3RyaW5nOiAoKGFyZykgPT4gWm9kU3RyaW5nLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbiAgICBudW1iZXI6ICgoYXJnKSA9PiBab2ROdW1iZXIuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGJvb2xlYW46ICgoYXJnKSA9PiBab2RCb29sZWFuLmNyZWF0ZSh7XG4gICAgICAgIC4uLmFyZyxcbiAgICAgICAgY29lcmNlOiB0cnVlLFxuICAgIH0pKSxcbiAgICBiaWdpbnQ6ICgoYXJnKSA9PiBab2RCaWdJbnQuY3JlYXRlKHsgLi4uYXJnLCBjb2VyY2U6IHRydWUgfSkpLFxuICAgIGRhdGU6ICgoYXJnKSA9PiBab2REYXRlLmNyZWF0ZSh7IC4uLmFyZywgY29lcmNlOiB0cnVlIH0pKSxcbn07XG5jb25zdCBORVZFUiA9IElOVkFMSUQ7XG5cbnZhciB6ID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoe1xuICAgIF9fcHJvdG9fXzogbnVsbCxcbiAgICBkZWZhdWx0RXJyb3JNYXA6IGVycm9yTWFwLFxuICAgIHNldEVycm9yTWFwOiBzZXRFcnJvck1hcCxcbiAgICBnZXRFcnJvck1hcDogZ2V0RXJyb3JNYXAsXG4gICAgbWFrZUlzc3VlOiBtYWtlSXNzdWUsXG4gICAgRU1QVFlfUEFUSDogRU1QVFlfUEFUSCxcbiAgICBhZGRJc3N1ZVRvQ29udGV4dDogYWRkSXNzdWVUb0NvbnRleHQsXG4gICAgUGFyc2VTdGF0dXM6IFBhcnNlU3RhdHVzLFxuICAgIElOVkFMSUQ6IElOVkFMSUQsXG4gICAgRElSVFk6IERJUlRZLFxuICAgIE9LOiBPSyxcbiAgICBpc0Fib3J0ZWQ6IGlzQWJvcnRlZCxcbiAgICBpc0RpcnR5OiBpc0RpcnR5LFxuICAgIGlzVmFsaWQ6IGlzVmFsaWQsXG4gICAgaXNBc3luYzogaXNBc3luYyxcbiAgICBnZXQgdXRpbCAoKSB7IHJldHVybiB1dGlsOyB9LFxuICAgIGdldCBvYmplY3RVdGlsICgpIHsgcmV0dXJuIG9iamVjdFV0aWw7IH0sXG4gICAgWm9kUGFyc2VkVHlwZTogWm9kUGFyc2VkVHlwZSxcbiAgICBnZXRQYXJzZWRUeXBlOiBnZXRQYXJzZWRUeXBlLFxuICAgIFpvZFR5cGU6IFpvZFR5cGUsXG4gICAgZGF0ZXRpbWVSZWdleDogZGF0ZXRpbWVSZWdleCxcbiAgICBab2RTdHJpbmc6IFpvZFN0cmluZyxcbiAgICBab2ROdW1iZXI6IFpvZE51bWJlcixcbiAgICBab2RCaWdJbnQ6IFpvZEJpZ0ludCxcbiAgICBab2RCb29sZWFuOiBab2RCb29sZWFuLFxuICAgIFpvZERhdGU6IFpvZERhdGUsXG4gICAgWm9kU3ltYm9sOiBab2RTeW1ib2wsXG4gICAgWm9kVW5kZWZpbmVkOiBab2RVbmRlZmluZWQsXG4gICAgWm9kTnVsbDogWm9kTnVsbCxcbiAgICBab2RBbnk6IFpvZEFueSxcbiAgICBab2RVbmtub3duOiBab2RVbmtub3duLFxuICAgIFpvZE5ldmVyOiBab2ROZXZlcixcbiAgICBab2RWb2lkOiBab2RWb2lkLFxuICAgIFpvZEFycmF5OiBab2RBcnJheSxcbiAgICBab2RPYmplY3Q6IFpvZE9iamVjdCxcbiAgICBab2RVbmlvbjogWm9kVW5pb24sXG4gICAgWm9kRGlzY3JpbWluYXRlZFVuaW9uOiBab2REaXNjcmltaW5hdGVkVW5pb24sXG4gICAgWm9kSW50ZXJzZWN0aW9uOiBab2RJbnRlcnNlY3Rpb24sXG4gICAgWm9kVHVwbGU6IFpvZFR1cGxlLFxuICAgIFpvZFJlY29yZDogWm9kUmVjb3JkLFxuICAgIFpvZE1hcDogWm9kTWFwLFxuICAgIFpvZFNldDogWm9kU2V0LFxuICAgIFpvZEZ1bmN0aW9uOiBab2RGdW5jdGlvbixcbiAgICBab2RMYXp5OiBab2RMYXp5LFxuICAgIFpvZExpdGVyYWw6IFpvZExpdGVyYWwsXG4gICAgWm9kRW51bTogWm9kRW51bSxcbiAgICBab2ROYXRpdmVFbnVtOiBab2ROYXRpdmVFbnVtLFxuICAgIFpvZFByb21pc2U6IFpvZFByb21pc2UsXG4gICAgWm9kRWZmZWN0czogWm9kRWZmZWN0cyxcbiAgICBab2RUcmFuc2Zvcm1lcjogWm9kRWZmZWN0cyxcbiAgICBab2RPcHRpb25hbDogWm9kT3B0aW9uYWwsXG4gICAgWm9kTnVsbGFibGU6IFpvZE51bGxhYmxlLFxuICAgIFpvZERlZmF1bHQ6IFpvZERlZmF1bHQsXG4gICAgWm9kQ2F0Y2g6IFpvZENhdGNoLFxuICAgIFpvZE5hTjogWm9kTmFOLFxuICAgIEJSQU5EOiBCUkFORCxcbiAgICBab2RCcmFuZGVkOiBab2RCcmFuZGVkLFxuICAgIFpvZFBpcGVsaW5lOiBab2RQaXBlbGluZSxcbiAgICBab2RSZWFkb25seTogWm9kUmVhZG9ubHksXG4gICAgY3VzdG9tOiBjdXN0b20sXG4gICAgU2NoZW1hOiBab2RUeXBlLFxuICAgIFpvZFNjaGVtYTogWm9kVHlwZSxcbiAgICBsYXRlOiBsYXRlLFxuICAgIGdldCBab2RGaXJzdFBhcnR5VHlwZUtpbmQgKCkgeyByZXR1cm4gWm9kRmlyc3RQYXJ0eVR5cGVLaW5kOyB9LFxuICAgIGNvZXJjZTogY29lcmNlLFxuICAgIGFueTogYW55VHlwZSxcbiAgICBhcnJheTogYXJyYXlUeXBlLFxuICAgIGJpZ2ludDogYmlnSW50VHlwZSxcbiAgICBib29sZWFuOiBib29sZWFuVHlwZSxcbiAgICBkYXRlOiBkYXRlVHlwZSxcbiAgICBkaXNjcmltaW5hdGVkVW5pb246IGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUsXG4gICAgZWZmZWN0OiBlZmZlY3RzVHlwZSxcbiAgICAnZW51bSc6IGVudW1UeXBlLFxuICAgICdmdW5jdGlvbic6IGZ1bmN0aW9uVHlwZSxcbiAgICAnaW5zdGFuY2VvZic6IGluc3RhbmNlT2ZUeXBlLFxuICAgIGludGVyc2VjdGlvbjogaW50ZXJzZWN0aW9uVHlwZSxcbiAgICBsYXp5OiBsYXp5VHlwZSxcbiAgICBsaXRlcmFsOiBsaXRlcmFsVHlwZSxcbiAgICBtYXA6IG1hcFR5cGUsXG4gICAgbmFuOiBuYW5UeXBlLFxuICAgIG5hdGl2ZUVudW06IG5hdGl2ZUVudW1UeXBlLFxuICAgIG5ldmVyOiBuZXZlclR5cGUsXG4gICAgJ251bGwnOiBudWxsVHlwZSxcbiAgICBudWxsYWJsZTogbnVsbGFibGVUeXBlLFxuICAgIG51bWJlcjogbnVtYmVyVHlwZSxcbiAgICBvYmplY3Q6IG9iamVjdFR5cGUsXG4gICAgb2Jvb2xlYW46IG9ib29sZWFuLFxuICAgIG9udW1iZXI6IG9udW1iZXIsXG4gICAgb3B0aW9uYWw6IG9wdGlvbmFsVHlwZSxcbiAgICBvc3RyaW5nOiBvc3RyaW5nLFxuICAgIHBpcGVsaW5lOiBwaXBlbGluZVR5cGUsXG4gICAgcHJlcHJvY2VzczogcHJlcHJvY2Vzc1R5cGUsXG4gICAgcHJvbWlzZTogcHJvbWlzZVR5cGUsXG4gICAgcmVjb3JkOiByZWNvcmRUeXBlLFxuICAgIHNldDogc2V0VHlwZSxcbiAgICBzdHJpY3RPYmplY3Q6IHN0cmljdE9iamVjdFR5cGUsXG4gICAgc3RyaW5nOiBzdHJpbmdUeXBlLFxuICAgIHN5bWJvbDogc3ltYm9sVHlwZSxcbiAgICB0cmFuc2Zvcm1lcjogZWZmZWN0c1R5cGUsXG4gICAgdHVwbGU6IHR1cGxlVHlwZSxcbiAgICAndW5kZWZpbmVkJzogdW5kZWZpbmVkVHlwZSxcbiAgICB1bmlvbjogdW5pb25UeXBlLFxuICAgIHVua25vd246IHVua25vd25UeXBlLFxuICAgICd2b2lkJzogdm9pZFR5cGUsXG4gICAgTkVWRVI6IE5FVkVSLFxuICAgIFpvZElzc3VlQ29kZTogWm9kSXNzdWVDb2RlLFxuICAgIHF1b3RlbGVzc0pzb246IHF1b3RlbGVzc0pzb24sXG4gICAgWm9kRXJyb3I6IFpvZEVycm9yXG59KTtcblxuZXhwb3J0IHsgQlJBTkQsIERJUlRZLCBFTVBUWV9QQVRILCBJTlZBTElELCBORVZFUiwgT0ssIFBhcnNlU3RhdHVzLCBab2RUeXBlIGFzIFNjaGVtYSwgWm9kQW55LCBab2RBcnJheSwgWm9kQmlnSW50LCBab2RCb29sZWFuLCBab2RCcmFuZGVkLCBab2RDYXRjaCwgWm9kRGF0ZSwgWm9kRGVmYXVsdCwgWm9kRGlzY3JpbWluYXRlZFVuaW9uLCBab2RFZmZlY3RzLCBab2RFbnVtLCBab2RFcnJvciwgWm9kRmlyc3RQYXJ0eVR5cGVLaW5kLCBab2RGdW5jdGlvbiwgWm9kSW50ZXJzZWN0aW9uLCBab2RJc3N1ZUNvZGUsIFpvZExhenksIFpvZExpdGVyYWwsIFpvZE1hcCwgWm9kTmFOLCBab2ROYXRpdmVFbnVtLCBab2ROZXZlciwgWm9kTnVsbCwgWm9kTnVsbGFibGUsIFpvZE51bWJlciwgWm9kT2JqZWN0LCBab2RPcHRpb25hbCwgWm9kUGFyc2VkVHlwZSwgWm9kUGlwZWxpbmUsIFpvZFByb21pc2UsIFpvZFJlYWRvbmx5LCBab2RSZWNvcmQsIFpvZFR5cGUgYXMgWm9kU2NoZW1hLCBab2RTZXQsIFpvZFN0cmluZywgWm9kU3ltYm9sLCBab2RFZmZlY3RzIGFzIFpvZFRyYW5zZm9ybWVyLCBab2RUdXBsZSwgWm9kVHlwZSwgWm9kVW5kZWZpbmVkLCBab2RVbmlvbiwgWm9kVW5rbm93biwgWm9kVm9pZCwgYWRkSXNzdWVUb0NvbnRleHQsIGFueVR5cGUgYXMgYW55LCBhcnJheVR5cGUgYXMgYXJyYXksIGJpZ0ludFR5cGUgYXMgYmlnaW50LCBib29sZWFuVHlwZSBhcyBib29sZWFuLCBjb2VyY2UsIGN1c3RvbSwgZGF0ZVR5cGUgYXMgZGF0ZSwgZGF0ZXRpbWVSZWdleCwgeiBhcyBkZWZhdWx0LCBlcnJvck1hcCBhcyBkZWZhdWx0RXJyb3JNYXAsIGRpc2NyaW1pbmF0ZWRVbmlvblR5cGUgYXMgZGlzY3JpbWluYXRlZFVuaW9uLCBlZmZlY3RzVHlwZSBhcyBlZmZlY3QsIGVudW1UeXBlIGFzIGVudW0sIGZ1bmN0aW9uVHlwZSBhcyBmdW5jdGlvbiwgZ2V0RXJyb3JNYXAsIGdldFBhcnNlZFR5cGUsIGluc3RhbmNlT2ZUeXBlIGFzIGluc3RhbmNlb2YsIGludGVyc2VjdGlvblR5cGUgYXMgaW50ZXJzZWN0aW9uLCBpc0Fib3J0ZWQsIGlzQXN5bmMsIGlzRGlydHksIGlzVmFsaWQsIGxhdGUsIGxhenlUeXBlIGFzIGxhenksIGxpdGVyYWxUeXBlIGFzIGxpdGVyYWwsIG1ha2VJc3N1ZSwgbWFwVHlwZSBhcyBtYXAsIG5hblR5cGUgYXMgbmFuLCBuYXRpdmVFbnVtVHlwZSBhcyBuYXRpdmVFbnVtLCBuZXZlclR5cGUgYXMgbmV2ZXIsIG51bGxUeXBlIGFzIG51bGwsIG51bGxhYmxlVHlwZSBhcyBudWxsYWJsZSwgbnVtYmVyVHlwZSBhcyBudW1iZXIsIG9iamVjdFR5cGUgYXMgb2JqZWN0LCBvYmplY3RVdGlsLCBvYm9vbGVhbiwgb251bWJlciwgb3B0aW9uYWxUeXBlIGFzIG9wdGlvbmFsLCBvc3RyaW5nLCBwaXBlbGluZVR5cGUgYXMgcGlwZWxpbmUsIHByZXByb2Nlc3NUeXBlIGFzIHByZXByb2Nlc3MsIHByb21pc2VUeXBlIGFzIHByb21pc2UsIHF1b3RlbGVzc0pzb24sIHJlY29yZFR5cGUgYXMgcmVjb3JkLCBzZXRUeXBlIGFzIHNldCwgc2V0RXJyb3JNYXAsIHN0cmljdE9iamVjdFR5cGUgYXMgc3RyaWN0T2JqZWN0LCBzdHJpbmdUeXBlIGFzIHN0cmluZywgc3ltYm9sVHlwZSBhcyBzeW1ib2wsIGVmZmVjdHNUeXBlIGFzIHRyYW5zZm9ybWVyLCB0dXBsZVR5cGUgYXMgdHVwbGUsIHVuZGVmaW5lZFR5cGUgYXMgdW5kZWZpbmVkLCB1bmlvblR5cGUgYXMgdW5pb24sIHVua25vd25UeXBlIGFzIHVua25vd24sIHV0aWwsIHZvaWRUeXBlIGFzIHZvaWQsIHogfTtcbiIsImltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSAnLi9fdmlydHVhbC9pbmRleC5tanMnO1xuaW1wb3J0IGJpZ0ludCBmcm9tICcuL192aXJ0dWFsL0JpZ0ludGVnZXIubWpzJztcbmltcG9ydCB0cmFuc2Zvcm0gZnJvbSAnLi9fdmlydHVhbC9pbmRleDIubWpzJztcbmltcG9ydCB7IFBsYXRmb3JtIH0gZnJvbSAnLi9Db25zdGFudHMubWpzJztcbmltcG9ydCBnZXREZWZhdWx0U2RrQ29uZmlndXJhdGlvbiBmcm9tICcuL3V0aWxzL2dldERlZmF1bHRTZGtDb25maWd1cmF0aW9uLm1qcyc7XG5pbXBvcnQgeyBDaGFubmVsVHlwZXNPYmplY3QgfSBmcm9tICcuL3NjaGVtYS9jb21tb24ubWpzJztcblxuY2xhc3MgRGlzY29yZFNES01vY2sge1xuICAgIGNvbnN0cnVjdG9yKGNsaWVudElkLCBndWlsZElkLCBjaGFubmVsSWQsIGxvY2F0aW9uSWQpIHtcbiAgICAgICAgdGhpcy5wbGF0Zm9ybSA9IFBsYXRmb3JtLkRFU0tUT1A7XG4gICAgICAgIHRoaXMuaW5zdGFuY2VJZCA9ICcxMjM0NTY3ODkwMTIzNDU2NzgnO1xuICAgICAgICB0aGlzLmNvbmZpZ3VyYXRpb24gPSBnZXREZWZhdWx0U2RrQ29uZmlndXJhdGlvbigpO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IG51bGw7XG4gICAgICAgIHRoaXMuc291cmNlT3JpZ2luID0gJyc7XG4gICAgICAgIHRoaXMuc2RrVmVyc2lvbiA9ICdtb2NrJztcbiAgICAgICAgdGhpcy5tb2JpbGVBcHBWZXJzaW9uID0gJ3Vua25vd24nO1xuICAgICAgICB0aGlzLmZyYW1lSWQgPSAnYWFhYWFhYWEtYWFhYS1hYWFhLWFhYWEtYWFhYWFhYWFhYWFhJztcbiAgICAgICAgdGhpcy5ldmVudEJ1cyA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IGNsaWVudElkO1xuICAgICAgICB0aGlzLmNvbW1hbmRzID0gdGhpcy5fdXBkYXRlQ29tbWFuZE1vY2tzKHt9KTtcbiAgICAgICAgdGhpcy5ndWlsZElkID0gZ3VpbGRJZDtcbiAgICAgICAgdGhpcy5jaGFubmVsSWQgPSBjaGFubmVsSWQ7XG4gICAgICAgIHRoaXMubG9jYXRpb25JZCA9IGxvY2F0aW9uSWQ7XG4gICAgICAgIHRoaXMuY3VzdG9tSWQgPSBudWxsO1xuICAgICAgICB0aGlzLnJlZmVycmVySWQgPSBudWxsO1xuICAgIH1cbiAgICBfdXBkYXRlQ29tbWFuZE1vY2tzKG5ld0NvbW1hbmRzKSB7XG4gICAgICAgIC8vIFdyYXAgYWxsIHRoZSBjb21tYW5kIGZ1bmN0aW9ucyB3aXRoIGxvZ2dpbmdcbiAgICAgICAgdGhpcy5jb21tYW5kcyA9IHRyYW5zZm9ybShPYmplY3QuYXNzaWduKHt9LCBjb21tYW5kc01vY2tEZWZhdWx0LCBuZXdDb21tYW5kcyksIChtb2NrLCBmdW5jLCBuYW1lKSA9PiB7XG4gICAgICAgICAgICBtb2NrW25hbWVdID0gYXN5bmMgKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oYERpc2NvcmRTREtNb2NrOiAke1N0cmluZyhuYW1lKX0oJHtKU09OLnN0cmluZ2lmeShhcmdzKX0pYCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGZ1bmMoLi4uYXJncyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gcmVkdW5kYW50IHJldHVybiBoZXJlIHRvIHNhdGlzZnkgdGhlIGNvbnN0cnVjdG9yIGRlZmluaW5nIGNvbW1hbmRzXG4gICAgICAgIHJldHVybiB0aGlzLmNvbW1hbmRzO1xuICAgIH1cbiAgICBlbWl0UmVhZHkoKSB7XG4gICAgICAgIHRoaXMuZW1pdEV2ZW50KCdSRUFEWScsIHVuZGVmaW5lZCk7XG4gICAgfVxuICAgIGNsb3NlKC4uLmFyZ3MpIHtcbiAgICAgICAgY29uc29sZS5pbmZvKGBEaXNjb3JkU0RLTW9jazogY2xvc2UoJHtKU09OLnN0cmluZ2lmeShhcmdzKX0pYCk7XG4gICAgfVxuICAgIHJlYWR5KCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGFzeW5jIHN1YnNjcmliZShldmVudCwgbGlzdGVuZXIsIC4uLl9zdWJzY3JpYmVBcmdzKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmV2ZW50QnVzLm9uKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgfVxuICAgIGFzeW5jIHVuc3Vic2NyaWJlKGV2ZW50LCBsaXN0ZW5lciwgLi4uX3Vuc3Vic2NyaWJlQXJncykge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5ldmVudEJ1cy5vZmYoZXZlbnQsIGxpc3RlbmVyKTtcbiAgICB9XG4gICAgZW1pdEV2ZW50KGV2ZW50LCBkYXRhKSB7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMuZW1pdChldmVudCwgZGF0YSk7XG4gICAgfVxufVxuLyoqIERlZmF1bHQgcmV0dXJuIHZhbHVlcyBmb3IgYWxsIGRpc2NvcmQgU0RLIGNvbW1hbmRzICovXG5jb25zdCBjb21tYW5kc01vY2tEZWZhdWx0ID0ge1xuICAgIGF1dGhvcml6ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgY29kZTogJ21vY2tfY29kZScgfSksXG4gICAgYXV0aGVudGljYXRlOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoe1xuICAgICAgICBhY2Nlc3NfdG9rZW46ICdtb2NrX3Rva2VuJyxcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgdXNlcm5hbWU6ICdtb2NrX3VzZXJfdXNlcm5hbWUnLFxuICAgICAgICAgICAgZGlzY3JpbWluYXRvcjogJ21vY2tfdXNlcl9kaXNjcmltaW5hdG9yJyxcbiAgICAgICAgICAgIGlkOiAnbW9ja191c2VyX2lkJyxcbiAgICAgICAgICAgIGF2YXRhcjogbnVsbCxcbiAgICAgICAgICAgIHB1YmxpY19mbGFnczogMSxcbiAgICAgICAgfSxcbiAgICAgICAgc2NvcGVzOiBbXSxcbiAgICAgICAgZXhwaXJlczogbmV3IERhdGUoMjEyMSwgMSwgMSkudG9TdHJpbmcoKSxcbiAgICAgICAgYXBwbGljYXRpb246IHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnbW9ja19hcHBfZGVzY3JpcHRpb24nLFxuICAgICAgICAgICAgaWNvbjogJ21vY2tfYXBwX2ljb24nLFxuICAgICAgICAgICAgaWQ6ICdtb2NrX2FwcF9pZCcsXG4gICAgICAgICAgICBuYW1lOiAnbW9ja19hcHBfbmFtZScsXG4gICAgICAgIH0sXG4gICAgfSksXG4gICAgc2V0QWN0aXZpdHk6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgIG5hbWU6ICdtb2NrX2FjdGl2aXR5X25hbWUnLFxuICAgICAgICB0eXBlOiAwLFxuICAgIH0pLFxuICAgIGdldENoYW5uZWw6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7XG4gICAgICAgIGlkOiAnbW9ja19jaGFubmVsX2lkJyxcbiAgICAgICAgbmFtZTogJ21vY2tfY2hhbm5lbF9uYW1lJyxcbiAgICAgICAgdHlwZTogQ2hhbm5lbFR5cGVzT2JqZWN0LkdVSUxEX1RFWFQsXG4gICAgICAgIHZvaWNlX3N0YXRlczogW10sXG4gICAgICAgIG1lc3NhZ2VzOiBbXSxcbiAgICB9KSxcbiAgICBnZXRTa3VzOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBza3VzOiBbXSB9KSxcbiAgICBnZXRFbnRpdGxlbWVudHM6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IGVudGl0bGVtZW50czogW10gfSksXG4gICAgc3RhcnRQdXJjaGFzZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKFtdKSxcbiAgICBzZXRDb25maWc6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHVzZV9pbnRlcmFjdGl2ZV9waXA6IGZhbHNlIH0pLFxuICAgIHVzZXJTZXR0aW5nc0dldExvY2FsZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHsgbG9jYWxlOiAnJyB9KSxcbiAgICBvcGVuRXh0ZXJuYWxMaW5rOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBvcGVuZWQ6IGZhbHNlIH0pLFxuICAgIGVuY291cmFnZUhhcmR3YXJlQWNjZWxlcmF0aW9uOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBlbmFibGVkOiB0cnVlIH0pLFxuICAgIGNhcHR1cmVMb2c6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSxcbiAgICBzZXRPcmllbnRhdGlvbkxvY2tTdGF0ZTogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpLFxuICAgIG9wZW5JbnZpdGVEaWFsb2c6ICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSxcbiAgICBnZXRQbGF0Zm9ybUJlaGF2aW9yczogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgaW9zS2V5Ym9hcmRSZXNpemVzVmlldzogdHJ1ZSxcbiAgICB9KSxcbiAgICBnZXRDaGFubmVsUGVybWlzc2lvbnM6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHBlcm1pc3Npb25zOiBiaWdJbnQoMTIzNDU2Nzg5MCkgfSksXG4gICAgb3BlblNoYXJlTW9tZW50RGlhbG9nOiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgc2hhcmVMaW5rOiAoKSA9PiBQcm9taXNlLnJlc29sdmUoeyBzdWNjZXNzOiBmYWxzZSwgZGlkU2VuZE1lc3NhZ2U6IGZhbHNlLCBkaWRDb3B5TGluazogZmFsc2UgfSksXG4gICAgaW5pdGlhdGVJbWFnZVVwbG9hZDogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgaW1hZ2VfdXJsOiAnaHR0cHM6Ly9hc3NldHMtZ2xvYmFsLndlYnNpdGUtZmlsZXMuY29tLzYyNTdhZGVmOTM4NjdlNTBkODRkMzBlMi82MzZlMGI1MmFhOWU5OWI4MzI1NzRhNTNfZnVsbF9sb2dvX2JsdXJwbGVfUkdCLnBuZycsXG4gICAgfSksXG4gICAgZ2V0SW5zdGFuY2VDb25uZWN0ZWRQYXJ0aWNpcGFudHM6ICgpID0+IFByb21pc2UucmVzb2x2ZSh7IHBhcnRpY2lwYW50czogW10gfSksXG4gICAgZ2V0UmVsYXRpb25zaGlwczogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgcmVsYXRpb25zaGlwczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6IDEsXG4gICAgICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogJ21vY2tfZnJpZW5kX3VzZXJuYW1lJyxcbiAgICAgICAgICAgICAgICAgICAgZmxhZ3M6IDAsXG4gICAgICAgICAgICAgICAgICAgIGJvdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGRpc2NyaW1pbmF0b3I6ICdtb2NrX2ZyaWVuZF9kaXNjcmltaW5hdG9yJyxcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdtb2NrX2ZyaWVuZF9pZF8xJyxcbiAgICAgICAgICAgICAgICAgICAgYXZhdGFyOiBudWxsLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5cGU6IDEsXG4gICAgICAgICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogJ21vY2tfZnJpZW5kX3VzZXJuYW1lX3dpdGhfbmlja25hbWUnLFxuICAgICAgICAgICAgICAgICAgICBmbGFnczogMCxcbiAgICAgICAgICAgICAgICAgICAgYm90OiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZGlzY3JpbWluYXRvcjogJ21vY2tfZnJpZW5kX2Rpc2NyaW1pbmF0b3Jfd2l0aF9uaWNrbmFtZScsXG4gICAgICAgICAgICAgICAgICAgIGlkOiAnbW9ja19mcmllbmRfaWRfMicsXG4gICAgICAgICAgICAgICAgICAgIGF2YXRhcjogbnVsbCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG5pY2tuYW1lOiAnbW9ja19mcmllbmRfbmlja25hbWVfZm9yX3VzZXInLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAxLFxuICAgICAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6ICdtb2NrX2ZyaWVuZF91c2VybmFtZV93aXRoX3NpbmNlJyxcbiAgICAgICAgICAgICAgICAgICAgZmxhZ3M6IDAsXG4gICAgICAgICAgICAgICAgICAgIGJvdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGRpc2NyaW1pbmF0b3I6ICdtb2NrX2ZyaWVuZF9kaXNjcmltaW5hdG9yX3dpdGhfc2luY2UnLFxuICAgICAgICAgICAgICAgICAgICBpZDogJ21vY2tfZnJpZW5kX2lkXzMnLFxuICAgICAgICAgICAgICAgICAgICBhdmF0YXI6IG51bGwsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzaW5jZTogJzIwMjEtMDYtMjlUMDA6MzI6MzcuMTgwODEzKzAwOjAwJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgfSksXG4gICAgaW52aXRlVXNlckVtYmVkZGVkOiAoKSA9PiBQcm9taXNlLnJlc29sdmUobnVsbCksXG4gICAgZ2V0VXNlcjogKCkgPT4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiAnbW9ja19mcmllbmRfdXNlcm5hbWUnLFxuICAgICAgICAgICAgZmxhZ3M6IDAsXG4gICAgICAgICAgICBib3Q6IGZhbHNlLFxuICAgICAgICAgICAgZGlzY3JpbWluYXRvcjogJ21vY2tfZnJpZW5kX2Rpc2NyaW1pbmF0b3InLFxuICAgICAgICAgICAgaWQ6ICdtb2NrX2ZyaWVuZF9pZF8xJyxcbiAgICAgICAgICAgIGF2YXRhcjogbnVsbCxcbiAgICAgICAgfSk7XG4gICAgfSxcbn07XG5cbmV4cG9ydCB7IERpc2NvcmRTREtNb2NrLCBjb21tYW5kc01vY2tEZWZhdWx0IH07XG4iLCJ2YXIgdmVyc2lvbiA9IFwiMi4wLjBcIjtcblxuZXhwb3J0IHsgdmVyc2lvbiB9O1xuIiwiaW1wb3J0IHsgb2JqZWN0IGFzIG9iamVjdFR5cGUsIHN0cmluZyBhcyBzdHJpbmdUeXBlLCB1bmtub3duIGFzIHVua25vd25UeXBlLCBudWxsIGFzIG51bGxUeXBlLCBib29sZWFuIGFzIGJvb2xlYW5UeXBlLCBudW1iZXIgYXMgbnVtYmVyVHlwZSwgYXJyYXkgYXMgYXJyYXlUeXBlLCB1bmlvbiBhcyB1bmlvblR5cGUgfSBmcm9tICcuLi9saWIvem9kL2xpYi9pbmRleC5tanMnO1xuaW1wb3J0IHsgem9kQ29lcmNlVW5oYW5kbGVkVmFsdWUgfSBmcm9tICcuLi91dGlscy96b2RVdGlscy5tanMnO1xuaW1wb3J0IHsgQXV0aGVudGljYXRlUmVzcG9uc2VTY2hlbWEsIEdldFJlbGF0aW9uc2hpcHNSZXNwb25zZVNjaGVtYSB9IGZyb20gJy4uL2dlbmVyYXRlZC9zY2hlbWFzLm1qcyc7XG5cbi8vIERJU1BBVENIIGlzIHNlbnQgYXMgY21kIGJ1dCBpcyBhIHNwZWNpYWwgY2FzZSwgc28gaXMgZXhjbHVkZWQgZnJvbSBDb21tYW5kcyBlbnVtXG5jb25zdCBESVNQQVRDSCA9ICdESVNQQVRDSCc7XG52YXIgQ29tbWFuZHM7XG4oZnVuY3Rpb24gKENvbW1hbmRzKSB7XG4gICAgQ29tbWFuZHNbXCJBVVRIT1JJWkVcIl0gPSBcIkFVVEhPUklaRVwiO1xuICAgIENvbW1hbmRzW1wiQVVUSEVOVElDQVRFXCJdID0gXCJBVVRIRU5USUNBVEVcIjtcbiAgICBDb21tYW5kc1tcIkdFVF9HVUlMRFNcIl0gPSBcIkdFVF9HVUlMRFNcIjtcbiAgICBDb21tYW5kc1tcIkdFVF9HVUlMRFwiXSA9IFwiR0VUX0dVSUxEXCI7XG4gICAgQ29tbWFuZHNbXCJHRVRfQ0hBTk5FTFwiXSA9IFwiR0VUX0NIQU5ORUxcIjtcbiAgICBDb21tYW5kc1tcIkdFVF9DSEFOTkVMU1wiXSA9IFwiR0VUX0NIQU5ORUxTXCI7XG4gICAgQ29tbWFuZHNbXCJTRUxFQ1RfVk9JQ0VfQ0hBTk5FTFwiXSA9IFwiU0VMRUNUX1ZPSUNFX0NIQU5ORUxcIjtcbiAgICBDb21tYW5kc1tcIlNFTEVDVF9URVhUX0NIQU5ORUxcIl0gPSBcIlNFTEVDVF9URVhUX0NIQU5ORUxcIjtcbiAgICBDb21tYW5kc1tcIlNVQlNDUklCRVwiXSA9IFwiU1VCU0NSSUJFXCI7XG4gICAgQ29tbWFuZHNbXCJVTlNVQlNDUklCRVwiXSA9IFwiVU5TVUJTQ1JJQkVcIjtcbiAgICBDb21tYW5kc1tcIkNBUFRVUkVfU0hPUlRDVVRcIl0gPSBcIkNBUFRVUkVfU0hPUlRDVVRcIjtcbiAgICBDb21tYW5kc1tcIlNFVF9DRVJUSUZJRURfREVWSUNFU1wiXSA9IFwiU0VUX0NFUlRJRklFRF9ERVZJQ0VTXCI7XG4gICAgQ29tbWFuZHNbXCJTRVRfQUNUSVZJVFlcIl0gPSBcIlNFVF9BQ1RJVklUWVwiO1xuICAgIENvbW1hbmRzW1wiR0VUX1NLVVNcIl0gPSBcIkdFVF9TS1VTXCI7XG4gICAgQ29tbWFuZHNbXCJHRVRfRU5USVRMRU1FTlRTXCJdID0gXCJHRVRfRU5USVRMRU1FTlRTXCI7XG4gICAgQ29tbWFuZHNbXCJHRVRfU0tVU19FTUJFRERFRFwiXSA9IFwiR0VUX1NLVVNfRU1CRURERURcIjtcbiAgICBDb21tYW5kc1tcIkdFVF9FTlRJVExFTUVOVFNfRU1CRURERURcIl0gPSBcIkdFVF9FTlRJVExFTUVOVFNfRU1CRURERURcIjtcbiAgICBDb21tYW5kc1tcIlNUQVJUX1BVUkNIQVNFXCJdID0gXCJTVEFSVF9QVVJDSEFTRVwiO1xuICAgIENvbW1hbmRzW1wiU0VUX0NPTkZJR1wiXSA9IFwiU0VUX0NPTkZJR1wiO1xuICAgIENvbW1hbmRzW1wiU0VORF9BTkFMWVRJQ1NfRVZFTlRcIl0gPSBcIlNFTkRfQU5BTFlUSUNTX0VWRU5UXCI7XG4gICAgQ29tbWFuZHNbXCJVU0VSX1NFVFRJTkdTX0dFVF9MT0NBTEVcIl0gPSBcIlVTRVJfU0VUVElOR1NfR0VUX0xPQ0FMRVwiO1xuICAgIENvbW1hbmRzW1wiT1BFTl9FWFRFUk5BTF9MSU5LXCJdID0gXCJPUEVOX0VYVEVSTkFMX0xJTktcIjtcbiAgICBDb21tYW5kc1tcIkVOQ09VUkFHRV9IV19BQ0NFTEVSQVRJT05cIl0gPSBcIkVOQ09VUkFHRV9IV19BQ0NFTEVSQVRJT05cIjtcbiAgICBDb21tYW5kc1tcIkNBUFRVUkVfTE9HXCJdID0gXCJDQVBUVVJFX0xPR1wiO1xuICAgIENvbW1hbmRzW1wiU0VUX09SSUVOVEFUSU9OX0xPQ0tfU1RBVEVcIl0gPSBcIlNFVF9PUklFTlRBVElPTl9MT0NLX1NUQVRFXCI7XG4gICAgQ29tbWFuZHNbXCJPUEVOX0lOVklURV9ESUFMT0dcIl0gPSBcIk9QRU5fSU5WSVRFX0RJQUxPR1wiO1xuICAgIENvbW1hbmRzW1wiR0VUX1BMQVRGT1JNX0JFSEFWSU9SU1wiXSA9IFwiR0VUX1BMQVRGT1JNX0JFSEFWSU9SU1wiO1xuICAgIENvbW1hbmRzW1wiR0VUX0NIQU5ORUxfUEVSTUlTU0lPTlNcIl0gPSBcIkdFVF9DSEFOTkVMX1BFUk1JU1NJT05TXCI7XG4gICAgQ29tbWFuZHNbXCJPUEVOX1NIQVJFX01PTUVOVF9ESUFMT0dcIl0gPSBcIk9QRU5fU0hBUkVfTU9NRU5UX0RJQUxPR1wiO1xuICAgIENvbW1hbmRzW1wiSU5JVElBVEVfSU1BR0VfVVBMT0FEXCJdID0gXCJJTklUSUFURV9JTUFHRV9VUExPQURcIjtcbiAgICBDb21tYW5kc1tcIkdFVF9BQ1RJVklUWV9JTlNUQU5DRV9DT05ORUNURURfUEFSVElDSVBBTlRTXCJdID0gXCJHRVRfQUNUSVZJVFlfSU5TVEFOQ0VfQ09OTkVDVEVEX1BBUlRJQ0lQQU5UU1wiO1xuICAgIENvbW1hbmRzW1wiU0hBUkVfTElOS1wiXSA9IFwiU0hBUkVfTElOS1wiO1xuICAgIENvbW1hbmRzW1wiR0VUX1JFTEFUSU9OU0hJUFNcIl0gPSBcIkdFVF9SRUxBVElPTlNISVBTXCI7XG4gICAgQ29tbWFuZHNbXCJJTlZJVEVfVVNFUl9FTUJFRERFRFwiXSA9IFwiSU5WSVRFX1VTRVJfRU1CRURERURcIjtcbiAgICBDb21tYW5kc1tcIkdFVF9VU0VSXCJdID0gXCJHRVRfVVNFUlwiO1xufSkoQ29tbWFuZHMgfHwgKENvbW1hbmRzID0ge30pKTtcbmNvbnN0IFJlY2VpdmVGcmFtZVBheWxvYWQgPSBvYmplY3RUeXBlKHtcbiAgICBjbWQ6IHN0cmluZ1R5cGUoKSxcbiAgICBkYXRhOiB1bmtub3duVHlwZSgpLFxuICAgIGV2dDogbnVsbFR5cGUoKSxcbiAgICBub25jZTogc3RyaW5nVHlwZSgpLFxufSlcbiAgICAucGFzc3Rocm91Z2goKTtcbi8vIFRPRE8gYWZnaWVsIC0tIG5leHQgYnJlYWtpbmcgY2hhbmdlIHJlbGVhc2Vcbi8vIHJlbW92ZSBTY29wZXMgYW5kIFNjb3Blc09iamVjdCBpbiBmYXZvciBvZiBUeXBlcy5PQXV0aFNjb3Blc1xuY29uc3QgU2NvcGVzT2JqZWN0ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBBdXRoZW50aWNhdGVSZXNwb25zZVNjaGVtYS5zaGFwZS5zY29wZXMuZWxlbWVudC5vdmVybGF5VHlwZS5fZGVmLmlubmVyVHlwZS5vcHRpb25zWzBdLlZhbHVlcyksIHsgVU5IQU5ETEVEOiAtMSB9KTtcbmNvbnN0IFNjb3BlcyA9IHpvZENvZXJjZVVuaGFuZGxlZFZhbHVlKFNjb3Blc09iamVjdCk7XG5jb25zdCBSZWxhdGlvbnNoaXAgPSBHZXRSZWxhdGlvbnNoaXBzUmVzcG9uc2VTY2hlbWEuc2hhcGUucmVsYXRpb25zaGlwcy5lbGVtZW50O1xuY29uc3QgVXNlciA9IG9iamVjdFR5cGUoe1xuICAgIGlkOiBzdHJpbmdUeXBlKCksXG4gICAgdXNlcm5hbWU6IHN0cmluZ1R5cGUoKSxcbiAgICBkaXNjcmltaW5hdG9yOiBzdHJpbmdUeXBlKCksXG4gICAgZ2xvYmFsX25hbWU6IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgYXZhdGFyOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIGF2YXRhcl9kZWNvcmF0aW9uX2RhdGE6IG9iamVjdFR5cGUoe1xuICAgICAgICBhc3NldDogc3RyaW5nVHlwZSgpLFxuICAgICAgICBza3VfaWQ6IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLFxuICAgIH0pXG4gICAgICAgIC5udWxsYWJsZSgpLFxuICAgIGJvdDogYm9vbGVhblR5cGUoKSxcbiAgICBmbGFnczogbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBwcmVtaXVtX3R5cGU6IG51bWJlclR5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG59KTtcbmNvbnN0IEd1aWxkTWVtYmVyID0gb2JqZWN0VHlwZSh7XG4gICAgdXNlcjogVXNlcixcbiAgICBuaWNrOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHJvbGVzOiBhcnJheVR5cGUoc3RyaW5nVHlwZSgpKSxcbiAgICBqb2luZWRfYXQ6IHN0cmluZ1R5cGUoKSxcbiAgICBkZWFmOiBib29sZWFuVHlwZSgpLFxuICAgIG11dGU6IGJvb2xlYW5UeXBlKCksXG59KTtcbmNvbnN0IEd1aWxkTWVtYmVyUlBDID0gb2JqZWN0VHlwZSh7XG4gICAgdXNlcl9pZDogc3RyaW5nVHlwZSgpLFxuICAgIG5pY2s6IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgZ3VpbGRfaWQ6IHN0cmluZ1R5cGUoKSxcbiAgICBhdmF0YXI6IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgYXZhdGFyX2RlY29yYXRpb25fZGF0YTogb2JqZWN0VHlwZSh7XG4gICAgICAgIGFzc2V0OiBzdHJpbmdUeXBlKCksXG4gICAgICAgIHNrdV9pZDogc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICB9KVxuICAgICAgICAub3B0aW9uYWwoKVxuICAgICAgICAubnVsbGFibGUoKSxcbiAgICBjb2xvcl9zdHJpbmc6IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG59KTtcbmNvbnN0IEVtb2ppID0gb2JqZWN0VHlwZSh7XG4gICAgaWQ6IHN0cmluZ1R5cGUoKSxcbiAgICBuYW1lOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHJvbGVzOiBhcnJheVR5cGUoc3RyaW5nVHlwZSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgdXNlcjogVXNlci5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgcmVxdWlyZV9jb2xvbnM6IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG1hbmFnZWQ6IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIGFuaW1hdGVkOiBib29sZWFuVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBhdmFpbGFibGU6IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxufSk7XG5jb25zdCBWb2ljZVN0YXRlID0gb2JqZWN0VHlwZSh7XG4gICAgbXV0ZTogYm9vbGVhblR5cGUoKSxcbiAgICBkZWFmOiBib29sZWFuVHlwZSgpLFxuICAgIHNlbGZfbXV0ZTogYm9vbGVhblR5cGUoKSxcbiAgICBzZWxmX2RlYWY6IGJvb2xlYW5UeXBlKCksXG4gICAgc3VwcHJlc3M6IGJvb2xlYW5UeXBlKCksXG59KTtcbmNvbnN0IFVzZXJWb2ljZVN0YXRlID0gb2JqZWN0VHlwZSh7XG4gICAgbXV0ZTogYm9vbGVhblR5cGUoKSxcbiAgICBuaWNrOiBzdHJpbmdUeXBlKCksXG4gICAgdXNlcjogVXNlcixcbiAgICB2b2ljZV9zdGF0ZTogVm9pY2VTdGF0ZSxcbiAgICB2b2x1bWU6IG51bWJlclR5cGUoKSxcbn0pO1xuY29uc3QgU3RhdHVzT2JqZWN0ID0ge1xuICAgIFVOSEFORExFRDogLTEsXG4gICAgSURMRTogJ2lkbGUnLFxuICAgIERORDogJ2RuZCcsXG4gICAgT05MSU5FOiAnb25saW5lJyxcbiAgICBPRkZMSU5FOiAnb2ZmbGluZScsXG59O1xuY29uc3QgU3RhdHVzID0gem9kQ29lcmNlVW5oYW5kbGVkVmFsdWUoU3RhdHVzT2JqZWN0KTtcbmNvbnN0IEFjdGl2aXR5ID0gb2JqZWN0VHlwZSh7XG4gICAgbmFtZTogc3RyaW5nVHlwZSgpLFxuICAgIHR5cGU6IG51bWJlclR5cGUoKSxcbiAgICB1cmw6IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgY3JlYXRlZF9hdDogbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICB0aW1lc3RhbXBzOiBvYmplY3RUeXBlKHtcbiAgICAgICAgc3RhcnQ6IG51bWJlclR5cGUoKSxcbiAgICAgICAgZW5kOiBudW1iZXJUeXBlKCksXG4gICAgfSlcbiAgICAgICAgLnBhcnRpYWwoKVxuICAgICAgICAub3B0aW9uYWwoKVxuICAgICAgICAubnVsbGFibGUoKSxcbiAgICBhcHBsaWNhdGlvbl9pZDogc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBkZXRhaWxzOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHN0YXRlOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIGVtb2ppOiBFbW9qaS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgcGFydHk6IG9iamVjdFR5cGUoe1xuICAgICAgICBpZDogc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICAgICAgc2l6ZTogYXJyYXlUeXBlKG51bWJlclR5cGUoKSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIH0pXG4gICAgICAgIC5vcHRpb25hbCgpXG4gICAgICAgIC5udWxsYWJsZSgpLFxuICAgIGFzc2V0czogb2JqZWN0VHlwZSh7XG4gICAgICAgIGxhcmdlX2ltYWdlOiBzdHJpbmdUeXBlKCkubnVsbGFibGUoKSxcbiAgICAgICAgbGFyZ2VfdGV4dDogc3RyaW5nVHlwZSgpLm51bGxhYmxlKCksXG4gICAgICAgIHNtYWxsX2ltYWdlOiBzdHJpbmdUeXBlKCkubnVsbGFibGUoKSxcbiAgICAgICAgc21hbGxfdGV4dDogc3RyaW5nVHlwZSgpLm51bGxhYmxlKCksXG4gICAgfSlcbiAgICAgICAgLnBhcnRpYWwoKVxuICAgICAgICAub3B0aW9uYWwoKVxuICAgICAgICAubnVsbGFibGUoKSxcbiAgICBzZWNyZXRzOiBvYmplY3RUeXBlKHtcbiAgICAgICAgam9pbjogc3RyaW5nVHlwZSgpLFxuICAgICAgICBtYXRjaDogc3RyaW5nVHlwZSgpLFxuICAgIH0pXG4gICAgICAgIC5wYXJ0aWFsKClcbiAgICAgICAgLm9wdGlvbmFsKClcbiAgICAgICAgLm51bGxhYmxlKCksXG4gICAgaW5zdGFuY2U6IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIGZsYWdzOiBudW1iZXJUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxufSk7XG5jb25zdCBQZXJtaXNzaW9uT3ZlcndyaXRlVHlwZU9iamVjdCA9IHtcbiAgICBVTkhBTkRMRUQ6IC0xLFxuICAgIFJPTEU6IDAsXG4gICAgTUVNQkVSOiAxLFxufTtcbmNvbnN0IFBlcm1pc3Npb25PdmVyd3JpdGUgPSBvYmplY3RUeXBlKHtcbiAgICBpZDogc3RyaW5nVHlwZSgpLFxuICAgIHR5cGU6IHpvZENvZXJjZVVuaGFuZGxlZFZhbHVlKFBlcm1pc3Npb25PdmVyd3JpdGVUeXBlT2JqZWN0KSxcbiAgICBhbGxvdzogc3RyaW5nVHlwZSgpLFxuICAgIGRlbnk6IHN0cmluZ1R5cGUoKSxcbn0pO1xuY29uc3QgQ2hhbm5lbFR5cGVzT2JqZWN0ID0ge1xuICAgIFVOSEFORExFRDogLTEsXG4gICAgRE06IDEsXG4gICAgR1JPVVBfRE06IDMsXG4gICAgR1VJTERfVEVYVDogMCxcbiAgICBHVUlMRF9WT0lDRTogMixcbiAgICBHVUlMRF9DQVRFR09SWTogNCxcbiAgICBHVUlMRF9BTk5PVU5DRU1FTlQ6IDUsXG4gICAgR1VJTERfU1RPUkU6IDYsXG4gICAgQU5OT1VOQ0VNRU5UX1RIUkVBRDogMTAsXG4gICAgUFVCTElDX1RIUkVBRDogMTEsXG4gICAgUFJJVkFURV9USFJFQUQ6IDEyLFxuICAgIEdVSUxEX1NUQUdFX1ZPSUNFOiAxMyxcbiAgICBHVUlMRF9ESVJFQ1RPUlk6IDE0LFxuICAgIEdVSUxEX0ZPUlVNOiAxNSxcbn07XG5jb25zdCBDaGFubmVsID0gb2JqZWN0VHlwZSh7XG4gICAgaWQ6IHN0cmluZ1R5cGUoKSxcbiAgICB0eXBlOiB6b2RDb2VyY2VVbmhhbmRsZWRWYWx1ZShDaGFubmVsVHlwZXNPYmplY3QpLFxuICAgIGd1aWxkX2lkOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHBvc2l0aW9uOiBudW1iZXJUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHBlcm1pc3Npb25fb3ZlcndyaXRlczogYXJyYXlUeXBlKFBlcm1pc3Npb25PdmVyd3JpdGUpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBuYW1lOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHRvcGljOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG5zZnc6IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIGxhc3RfbWVzc2FnZV9pZDogc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBiaXRyYXRlOiBudW1iZXJUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHVzZXJfbGltaXQ6IG51bWJlclR5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgcmF0ZV9saW1pdF9wZXJfdXNlcjogbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICByZWNpcGllbnRzOiBhcnJheVR5cGUoVXNlcikub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIGljb246IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgb3duZXJfaWQ6IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgYXBwbGljYXRpb25faWQ6IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgcGFyZW50X2lkOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIGxhc3RfcGluX3RpbWVzdGFtcDogc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbn0pO1xuY29uc3QgUHJlc2VuY2VVcGRhdGUgPSBvYmplY3RUeXBlKHtcbiAgICB1c2VyOiBVc2VyLFxuICAgIGd1aWxkX2lkOiBzdHJpbmdUeXBlKCksXG4gICAgc3RhdHVzOiBTdGF0dXMsXG4gICAgYWN0aXZpdGllczogYXJyYXlUeXBlKEFjdGl2aXR5KSxcbiAgICBjbGllbnRfc3RhdHVzOiBvYmplY3RUeXBlKHtcbiAgICAgICAgZGVza3RvcDogU3RhdHVzLFxuICAgICAgICBtb2JpbGU6IFN0YXR1cyxcbiAgICAgICAgd2ViOiBTdGF0dXMsXG4gICAgfSlcbiAgICAgICAgLnBhcnRpYWwoKSxcbn0pO1xuY29uc3QgUm9sZSA9IG9iamVjdFR5cGUoe1xuICAgIGlkOiBzdHJpbmdUeXBlKCksXG4gICAgbmFtZTogc3RyaW5nVHlwZSgpLFxuICAgIGNvbG9yOiBudW1iZXJUeXBlKCksXG4gICAgaG9pc3Q6IGJvb2xlYW5UeXBlKCksXG4gICAgcG9zaXRpb246IG51bWJlclR5cGUoKSxcbiAgICBwZXJtaXNzaW9uczogc3RyaW5nVHlwZSgpLFxuICAgIG1hbmFnZWQ6IGJvb2xlYW5UeXBlKCksXG4gICAgbWVudGlvbmFibGU6IGJvb2xlYW5UeXBlKCksXG59KTtcbmNvbnN0IEd1aWxkID0gb2JqZWN0VHlwZSh7XG4gICAgaWQ6IHN0cmluZ1R5cGUoKSxcbiAgICBuYW1lOiBzdHJpbmdUeXBlKCksXG4gICAgb3duZXJfaWQ6IHN0cmluZ1R5cGUoKSxcbiAgICBpY29uOiBzdHJpbmdUeXBlKCkubnVsbGFibGUoKSxcbiAgICBpY29uX2hhc2g6IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgc3BsYXNoOiBzdHJpbmdUeXBlKCkubnVsbGFibGUoKSxcbiAgICBkaXNjb3Zlcnlfc3BsYXNoOiBzdHJpbmdUeXBlKCkubnVsbGFibGUoKSxcbiAgICBvd25lcjogYm9vbGVhblR5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgcGVybWlzc2lvbnM6IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgcmVnaW9uOiBzdHJpbmdUeXBlKCksXG4gICAgYWZrX2NoYW5uZWxfaWQ6IHN0cmluZ1R5cGUoKS5udWxsYWJsZSgpLFxuICAgIGFma190aW1lb3V0OiBudW1iZXJUeXBlKCksXG4gICAgd2lkZ2V0X2VuYWJsZWQ6IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHdpZGdldF9jaGFubmVsX2lkOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHZlcmlmaWNhdGlvbl9sZXZlbDogbnVtYmVyVHlwZSgpLFxuICAgIGRlZmF1bHRfbWVzc2FnZV9ub3RpZmljYXRpb25zOiBudW1iZXJUeXBlKCksXG4gICAgZXhwbGljaXRfY29udGVudF9maWx0ZXI6IG51bWJlclR5cGUoKSxcbiAgICByb2xlczogYXJyYXlUeXBlKFJvbGUpLFxuICAgIGVtb2ppczogYXJyYXlUeXBlKEVtb2ppKSxcbiAgICBmZWF0dXJlczogYXJyYXlUeXBlKHN0cmluZ1R5cGUoKSksXG4gICAgbWZhX2xldmVsOiBudW1iZXJUeXBlKCksXG4gICAgYXBwbGljYXRpb25faWQ6IHN0cmluZ1R5cGUoKS5udWxsYWJsZSgpLFxuICAgIHN5c3RlbV9jaGFubmVsX2lkOiBzdHJpbmdUeXBlKCkubnVsbGFibGUoKSxcbiAgICBzeXN0ZW1fY2hhbm5lbF9mbGFnczogbnVtYmVyVHlwZSgpLFxuICAgIHJ1bGVzX2NoYW5uZWxfaWQ6IHN0cmluZ1R5cGUoKS5udWxsYWJsZSgpLFxuICAgIGpvaW5lZF9hdDogc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBsYXJnZTogYm9vbGVhblR5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgdW5hdmFpbGFibGU6IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG1lbWJlcl9jb3VudDogbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICB2b2ljZV9zdGF0ZXM6IGFycmF5VHlwZShWb2ljZVN0YXRlKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgbWVtYmVyczogYXJyYXlUeXBlKEd1aWxkTWVtYmVyKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgY2hhbm5lbHM6IGFycmF5VHlwZShDaGFubmVsKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgcHJlc2VuY2VzOiBhcnJheVR5cGUoUHJlc2VuY2VVcGRhdGUpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBtYXhfcHJlc2VuY2VzOiBudW1iZXJUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG1heF9tZW1iZXJzOiBudW1iZXJUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHZhbml0eV91cmxfY29kZTogc3RyaW5nVHlwZSgpLm51bGxhYmxlKCksXG4gICAgZGVzY3JpcHRpb246IHN0cmluZ1R5cGUoKS5udWxsYWJsZSgpLFxuICAgIGJhbm5lcjogc3RyaW5nVHlwZSgpLm51bGxhYmxlKCksXG4gICAgcHJlbWl1bV90aWVyOiBudW1iZXJUeXBlKCksXG4gICAgcHJlbWl1bV9zdWJzY3JpcHRpb25fY291bnQ6IG51bWJlclR5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgcHJlZmVycmVkX2xvY2FsZTogc3RyaW5nVHlwZSgpLFxuICAgIHB1YmxpY191cGRhdGVzX2NoYW5uZWxfaWQ6IHN0cmluZ1R5cGUoKS5udWxsYWJsZSgpLFxuICAgIG1heF92aWRlb19jaGFubmVsX3VzZXJzOiBudW1iZXJUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIGFwcHJveGltYXRlX21lbWJlcl9jb3VudDogbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBhcHByb3hpbWF0ZV9wcmVzZW5jZV9jb3VudDogbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbn0pO1xuY29uc3QgQ2hhbm5lbE1lbnRpb24gPSBvYmplY3RUeXBlKHtcbiAgICBpZDogc3RyaW5nVHlwZSgpLFxuICAgIGd1aWxkX2lkOiBzdHJpbmdUeXBlKCksXG4gICAgdHlwZTogbnVtYmVyVHlwZSgpLFxuICAgIG5hbWU6IHN0cmluZ1R5cGUoKSxcbn0pO1xuY29uc3QgQXR0YWNobWVudCA9IG9iamVjdFR5cGUoe1xuICAgIGlkOiBzdHJpbmdUeXBlKCksXG4gICAgZmlsZW5hbWU6IHN0cmluZ1R5cGUoKSxcbiAgICBzaXplOiBudW1iZXJUeXBlKCksXG4gICAgdXJsOiBzdHJpbmdUeXBlKCksXG4gICAgcHJveHlfdXJsOiBzdHJpbmdUeXBlKCksXG4gICAgaGVpZ2h0OiBudW1iZXJUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHdpZHRoOiBudW1iZXJUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxufSk7XG5jb25zdCBFbWJlZEZvb3RlciA9IG9iamVjdFR5cGUoe1xuICAgIHRleHQ6IHN0cmluZ1R5cGUoKSxcbiAgICBpY29uX3VybDogc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBwcm94eV9pY29uX3VybDogc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbn0pO1xuY29uc3QgSW1hZ2UgPSBvYmplY3RUeXBlKHtcbiAgICB1cmw6IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgcHJveHlfdXJsOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIGhlaWdodDogbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICB3aWR0aDogbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbn0pO1xuY29uc3QgVmlkZW8gPSBJbWFnZS5vbWl0KHsgcHJveHlfdXJsOiB0cnVlIH0pO1xuY29uc3QgRW1iZWRQcm92aWRlciA9IG9iamVjdFR5cGUoe1xuICAgIG5hbWU6IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgdXJsOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxufSk7XG5jb25zdCBFbWJlZEF1dGhvciA9IG9iamVjdFR5cGUoe1xuICAgIG5hbWU6IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgdXJsOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIGljb25fdXJsOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHByb3h5X2ljb25fdXJsOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxufSk7XG5jb25zdCBFbWJlZEZpZWxkID0gb2JqZWN0VHlwZSh7XG4gICAgbmFtZTogc3RyaW5nVHlwZSgpLFxuICAgIHZhbHVlOiBzdHJpbmdUeXBlKCksXG4gICAgaW5saW5lOiBib29sZWFuVHlwZSgpLFxufSk7XG5jb25zdCBFbWJlZCA9IG9iamVjdFR5cGUoe1xuICAgIHRpdGxlOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHR5cGU6IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgZGVzY3JpcHRpb246IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgdXJsOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHRpbWVzdGFtcDogc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBjb2xvcjogbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBmb290ZXI6IEVtYmVkRm9vdGVyLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBpbWFnZTogSW1hZ2Uub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHRodW1ibmFpbDogSW1hZ2Uub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHZpZGVvOiBWaWRlby5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgcHJvdmlkZXI6IEVtYmVkUHJvdmlkZXIub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIGF1dGhvcjogRW1iZWRBdXRob3Iub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIGZpZWxkczogYXJyYXlUeXBlKEVtYmVkRmllbGQpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbn0pO1xuY29uc3QgUmVhY3Rpb24gPSBvYmplY3RUeXBlKHtcbiAgICBjb3VudDogbnVtYmVyVHlwZSgpLFxuICAgIG1lOiBib29sZWFuVHlwZSgpLFxuICAgIGVtb2ppOiBFbW9qaSxcbn0pO1xuY29uc3QgTWVzc2FnZUFjdGl2aXR5ID0gb2JqZWN0VHlwZSh7XG4gICAgdHlwZTogbnVtYmVyVHlwZSgpLFxuICAgIHBhcnR5X2lkOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxufSk7XG5jb25zdCBNZXNzYWdlQXBwbGljYXRpb24gPSBvYmplY3RUeXBlKHtcbiAgICBpZDogc3RyaW5nVHlwZSgpLFxuICAgIGNvdmVyX2ltYWdlOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmdUeXBlKCksXG4gICAgaWNvbjogc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBuYW1lOiBzdHJpbmdUeXBlKCksXG59KTtcbmNvbnN0IE1lc3NhZ2VSZWZlcmVuY2UgPSBvYmplY3RUeXBlKHtcbiAgICBtZXNzYWdlX2lkOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIGNoYW5uZWxfaWQ6IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgZ3VpbGRfaWQ6IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG59KTtcbmNvbnN0IE1lc3NhZ2UgPSBvYmplY3RUeXBlKHtcbiAgICBpZDogc3RyaW5nVHlwZSgpLFxuICAgIGNoYW5uZWxfaWQ6IHN0cmluZ1R5cGUoKSxcbiAgICBndWlsZF9pZDogc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBhdXRob3I6IFVzZXIub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG1lbWJlcjogR3VpbGRNZW1iZXIub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIGNvbnRlbnQ6IHN0cmluZ1R5cGUoKSxcbiAgICB0aW1lc3RhbXA6IHN0cmluZ1R5cGUoKSxcbiAgICBlZGl0ZWRfdGltZXN0YW1wOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHR0czogYm9vbGVhblR5cGUoKSxcbiAgICBtZW50aW9uX2V2ZXJ5b25lOiBib29sZWFuVHlwZSgpLFxuICAgIG1lbnRpb25zOiBhcnJheVR5cGUoVXNlciksXG4gICAgbWVudGlvbl9yb2xlczogYXJyYXlUeXBlKHN0cmluZ1R5cGUoKSksXG4gICAgbWVudGlvbl9jaGFubmVsczogYXJyYXlUeXBlKENoYW5uZWxNZW50aW9uKSxcbiAgICBhdHRhY2htZW50czogYXJyYXlUeXBlKEF0dGFjaG1lbnQpLFxuICAgIGVtYmVkczogYXJyYXlUeXBlKEVtYmVkKSxcbiAgICByZWFjdGlvbnM6IGFycmF5VHlwZShSZWFjdGlvbikub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG5vbmNlOiB1bmlvblR5cGUoW3N0cmluZ1R5cGUoKSwgbnVtYmVyVHlwZSgpXSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHBpbm5lZDogYm9vbGVhblR5cGUoKSxcbiAgICB3ZWJob29rX2lkOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHR5cGU6IG51bWJlclR5cGUoKSxcbiAgICBhY3Rpdml0eTogTWVzc2FnZUFjdGl2aXR5Lm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBhcHBsaWNhdGlvbjogTWVzc2FnZUFwcGxpY2F0aW9uLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBtZXNzYWdlX3JlZmVyZW5jZTogTWVzc2FnZVJlZmVyZW5jZS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgZmxhZ3M6IG51bWJlclR5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgc3RpY2tlcnM6IGFycmF5VHlwZSh1bmtub3duVHlwZSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgLy8gQ2Fubm90IHNlbGYgcmVmZXJlbmNlLCBidXQgdGhpcyBpcyBwb3NzaWJseSBhIE1lc3NhZ2VcbiAgICByZWZlcmVuY2VkX21lc3NhZ2U6IHVua25vd25UeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxufSk7XG5jb25zdCBWb2ljZURldmljZSA9IG9iamVjdFR5cGUoe1xuICAgIGlkOiBzdHJpbmdUeXBlKCksXG4gICAgbmFtZTogc3RyaW5nVHlwZSgpLFxufSk7XG5jb25zdCBLZXlUeXBlc09iamVjdCA9IHtcbiAgICBVTkhBTkRMRUQ6IC0xLFxuICAgIEtFWUJPQVJEX0tFWTogMCxcbiAgICBNT1VTRV9CVVRUT046IDEsXG4gICAgS0VZQk9BUkRfTU9ESUZJRVJfS0VZOiAyLFxuICAgIEdBTUVQQURfQlVUVE9OOiAzLFxufTtcbmNvbnN0IFNob3J0Y3V0S2V5ID0gb2JqZWN0VHlwZSh7XG4gICAgdHlwZTogem9kQ29lcmNlVW5oYW5kbGVkVmFsdWUoS2V5VHlwZXNPYmplY3QpLFxuICAgIGNvZGU6IG51bWJlclR5cGUoKSxcbiAgICBuYW1lOiBzdHJpbmdUeXBlKCksXG59KTtcbmNvbnN0IFZvaWNlU2V0dGluZ01vZGVUeXBlT2JqZWN0ID0ge1xuICAgIFVOSEFORExFRDogLTEsXG4gICAgUFVTSF9UT19UQUxLOiAnUFVTSF9UT19UQUxLJyxcbiAgICBWT0lDRV9BQ1RJVklUWTogJ1ZPSUNFX0FDVElWSVRZJyxcbn07XG5jb25zdCBWb2ljZVNldHRpbmdzTW9kZSA9IG9iamVjdFR5cGUoe1xuICAgIHR5cGU6IHpvZENvZXJjZVVuaGFuZGxlZFZhbHVlKFZvaWNlU2V0dGluZ01vZGVUeXBlT2JqZWN0KSxcbiAgICBhdXRvX3RocmVzaG9sZDogYm9vbGVhblR5cGUoKSxcbiAgICB0aHJlc2hvbGQ6IG51bWJlclR5cGUoKSxcbiAgICBzaG9ydGN1dDogYXJyYXlUeXBlKFNob3J0Y3V0S2V5KSxcbiAgICBkZWxheTogbnVtYmVyVHlwZSgpLFxufSk7XG5jb25zdCBWb2ljZVNldHRpbmdzSU8gPSBvYmplY3RUeXBlKHtcbiAgICBkZXZpY2VfaWQ6IHN0cmluZ1R5cGUoKSxcbiAgICB2b2x1bWU6IG51bWJlclR5cGUoKSxcbiAgICBhdmFpbGFibGVfZGV2aWNlczogYXJyYXlUeXBlKFZvaWNlRGV2aWNlKSxcbn0pO1xuY29uc3QgQ2VydGlmaWVkRGV2aWNlVHlwZU9iamVjdCA9IHtcbiAgICBVTkhBTkRMRUQ6IC0xLFxuICAgIEFVRElPX0lOUFVUOiAnQVVESU9fSU5QVVQnLFxuICAgIEFVRElPX09VVFBVVDogJ0FVRElPX09VVFBVVCcsXG4gICAgVklERU9fSU5QVVQ6ICdWSURFT19JTlBVVCcsXG59O1xuY29uc3QgQ2VydGlmaWVkRGV2aWNlID0gb2JqZWN0VHlwZSh7XG4gICAgdHlwZTogem9kQ29lcmNlVW5oYW5kbGVkVmFsdWUoQ2VydGlmaWVkRGV2aWNlVHlwZU9iamVjdCksXG4gICAgaWQ6IHN0cmluZ1R5cGUoKSxcbiAgICB2ZW5kb3I6IG9iamVjdFR5cGUoe1xuICAgICAgICBuYW1lOiBzdHJpbmdUeXBlKCksXG4gICAgICAgIHVybDogc3RyaW5nVHlwZSgpLFxuICAgIH0pLFxuICAgIG1vZGVsOiBvYmplY3RUeXBlKHtcbiAgICAgICAgbmFtZTogc3RyaW5nVHlwZSgpLFxuICAgICAgICB1cmw6IHN0cmluZ1R5cGUoKSxcbiAgICB9KSxcbiAgICByZWxhdGVkOiBhcnJheVR5cGUoc3RyaW5nVHlwZSgpKSxcbiAgICBlY2hvX2NhbmNlbGxhdGlvbjogYm9vbGVhblR5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgbm9pc2Vfc3VwcHJlc3Npb246IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIGF1dG9tYXRpY19nYWluX2NvbnRyb2w6IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIGhhcmR3YXJlX211dGU6IGJvb2xlYW5UeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxufSk7XG5jb25zdCBTa3VUeXBlT2JqZWN0ID0ge1xuICAgIFVOSEFORExFRDogLTEsXG4gICAgQVBQTElDQVRJT046IDEsXG4gICAgRExDOiAyLFxuICAgIENPTlNVTUFCTEU6IDMsXG4gICAgQlVORExFOiA0LFxuICAgIFNVQlNDUklQVElPTjogNSxcbn07XG5jb25zdCBTa3UgPSBvYmplY3RUeXBlKHtcbiAgICBpZDogc3RyaW5nVHlwZSgpLFxuICAgIG5hbWU6IHN0cmluZ1R5cGUoKSxcbiAgICB0eXBlOiB6b2RDb2VyY2VVbmhhbmRsZWRWYWx1ZShTa3VUeXBlT2JqZWN0KSxcbiAgICBwcmljZTogb2JqZWN0VHlwZSh7XG4gICAgICAgIGFtb3VudDogbnVtYmVyVHlwZSgpLFxuICAgICAgICBjdXJyZW5jeTogc3RyaW5nVHlwZSgpLFxuICAgIH0pLFxuICAgIGFwcGxpY2F0aW9uX2lkOiBzdHJpbmdUeXBlKCksXG4gICAgZmxhZ3M6IG51bWJlclR5cGUoKSxcbiAgICByZWxlYXNlX2RhdGU6IHN0cmluZ1R5cGUoKS5udWxsYWJsZSgpLFxufSk7XG5jb25zdCBFbnRpdGxlbWVudFR5cGVzT2JqZWN0ID0ge1xuICAgIFVOSEFORExFRDogLTEsXG4gICAgUFVSQ0hBU0U6IDEsXG4gICAgUFJFTUlVTV9TVUJTQ1JJUFRJT046IDIsXG4gICAgREVWRUxPUEVSX0dJRlQ6IDMsXG4gICAgVEVTVF9NT0RFX1BVUkNIQVNFOiA0LFxuICAgIEZSRUVfUFVSQ0hBU0U6IDUsXG4gICAgVVNFUl9HSUZUOiA2LFxuICAgIFBSRU1JVU1fUFVSQ0hBU0U6IDcsXG59O1xuY29uc3QgRW50aXRsZW1lbnQgPSBvYmplY3RUeXBlKHtcbiAgICBpZDogc3RyaW5nVHlwZSgpLFxuICAgIHNrdV9pZDogc3RyaW5nVHlwZSgpLFxuICAgIGFwcGxpY2F0aW9uX2lkOiBzdHJpbmdUeXBlKCksXG4gICAgdXNlcl9pZDogc3RyaW5nVHlwZSgpLFxuICAgIGdpZnRfY29kZV9mbGFnczogbnVtYmVyVHlwZSgpLFxuICAgIHR5cGU6IHpvZENvZXJjZVVuaGFuZGxlZFZhbHVlKEVudGl0bGVtZW50VHlwZXNPYmplY3QpLFxuICAgIGdpZnRlcl91c2VyX2lkOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIGJyYW5jaGVzOiBhcnJheVR5cGUoc3RyaW5nVHlwZSgpKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgc3RhcnRzX2F0OiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLCAvLyBJU08gc3RyaW5nXG4gICAgZW5kc19hdDogc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSwgLy8gSVNPIHN0cmluZ1xuICAgIHBhcmVudF9pZDogc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICBjb25zdW1lZDogYm9vbGVhblR5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgZGVsZXRlZDogYm9vbGVhblR5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgZ2lmdF9jb2RlX2JhdGNoX2lkOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxufSk7XG5jb25zdCBPcmllbnRhdGlvbkxvY2tTdGF0ZVR5cGVPYmplY3QgPSB7XG4gICAgVU5IQU5ETEVEOiAtMSxcbiAgICBVTkxPQ0tFRDogMSxcbiAgICBQT1JUUkFJVDogMixcbiAgICBMQU5EU0NBUEU6IDMsXG59O1xuY29uc3QgT3JpZW50YXRpb25Mb2NrU3RhdGUgPSB6b2RDb2VyY2VVbmhhbmRsZWRWYWx1ZShPcmllbnRhdGlvbkxvY2tTdGF0ZVR5cGVPYmplY3QpO1xuY29uc3QgVGhlcm1hbFN0YXRlVHlwZU9iamVjdCA9IHtcbiAgICBVTkhBTkRMRUQ6IC0xLFxuICAgIE5PTUlOQUw6IDAsXG4gICAgRkFJUjogMSxcbiAgICBTRVJJT1VTOiAyLFxuICAgIENSSVRJQ0FMOiAzLFxufTtcbmNvbnN0IFRoZXJtYWxTdGF0ZSA9IHpvZENvZXJjZVVuaGFuZGxlZFZhbHVlKFRoZXJtYWxTdGF0ZVR5cGVPYmplY3QpO1xuY29uc3QgT3JpZW50YXRpb25UeXBlT2JqZWN0ID0ge1xuICAgIFVOSEFORExFRDogLTEsXG4gICAgUE9SVFJBSVQ6IDAsXG4gICAgTEFORFNDQVBFOiAxLFxufTtcbmNvbnN0IE9yaWVudGF0aW9uID0gem9kQ29lcmNlVW5oYW5kbGVkVmFsdWUoT3JpZW50YXRpb25UeXBlT2JqZWN0KTtcbmNvbnN0IExheW91dE1vZGVUeXBlT2JqZWN0ID0ge1xuICAgIFVOSEFORExFRDogLTEsXG4gICAgRk9DVVNFRDogMCxcbiAgICBQSVA6IDEsXG4gICAgR1JJRDogMixcbn07XG5jb25zdCBMYXlvdXRNb2RlID0gem9kQ29lcmNlVW5oYW5kbGVkVmFsdWUoTGF5b3V0TW9kZVR5cGVPYmplY3QpO1xuXG5leHBvcnQgeyBBY3Rpdml0eSwgQXR0YWNobWVudCwgQ2VydGlmaWVkRGV2aWNlLCBDZXJ0aWZpZWREZXZpY2VUeXBlT2JqZWN0LCBDaGFubmVsLCBDaGFubmVsTWVudGlvbiwgQ2hhbm5lbFR5cGVzT2JqZWN0LCBDb21tYW5kcywgRElTUEFUQ0gsIEVtYmVkLCBFbWJlZEF1dGhvciwgRW1iZWRGaWVsZCwgRW1iZWRGb290ZXIsIEVtYmVkUHJvdmlkZXIsIEVtb2ppLCBFbnRpdGxlbWVudCwgRW50aXRsZW1lbnRUeXBlc09iamVjdCwgR3VpbGQsIEd1aWxkTWVtYmVyLCBHdWlsZE1lbWJlclJQQywgSW1hZ2UsIEtleVR5cGVzT2JqZWN0LCBMYXlvdXRNb2RlLCBMYXlvdXRNb2RlVHlwZU9iamVjdCwgTWVzc2FnZSwgTWVzc2FnZUFjdGl2aXR5LCBNZXNzYWdlQXBwbGljYXRpb24sIE1lc3NhZ2VSZWZlcmVuY2UsIE9yaWVudGF0aW9uLCBPcmllbnRhdGlvbkxvY2tTdGF0ZSwgT3JpZW50YXRpb25Mb2NrU3RhdGVUeXBlT2JqZWN0LCBPcmllbnRhdGlvblR5cGVPYmplY3QsIFBlcm1pc3Npb25PdmVyd3JpdGUsIFBlcm1pc3Npb25PdmVyd3JpdGVUeXBlT2JqZWN0LCBQcmVzZW5jZVVwZGF0ZSwgUmVhY3Rpb24sIFJlY2VpdmVGcmFtZVBheWxvYWQsIFJlbGF0aW9uc2hpcCwgUm9sZSwgU2NvcGVzLCBTY29wZXNPYmplY3QsIFNob3J0Y3V0S2V5LCBTa3UsIFNrdVR5cGVPYmplY3QsIFN0YXR1cywgU3RhdHVzT2JqZWN0LCBUaGVybWFsU3RhdGUsIFRoZXJtYWxTdGF0ZVR5cGVPYmplY3QsIFVzZXIsIFVzZXJWb2ljZVN0YXRlLCBWaWRlbywgVm9pY2VEZXZpY2UsIFZvaWNlU2V0dGluZ01vZGVUeXBlT2JqZWN0LCBWb2ljZVNldHRpbmdzSU8sIFZvaWNlU2V0dGluZ3NNb2RlLCBWb2ljZVN0YXRlIH07XG4iLCJpbXBvcnQgeyBuYXRpdmVFbnVtIGFzIG5hdGl2ZUVudW1UeXBlLCBzdHJpbmcgYXMgc3RyaW5nVHlwZSwgbGl0ZXJhbCBhcyBsaXRlcmFsVHlwZSwgb2JqZWN0IGFzIG9iamVjdFR5cGUsIG51bWJlciBhcyBudW1iZXJUeXBlLCB1bmlvbiBhcyB1bmlvblR5cGUgfSBmcm9tICcuLi9saWIvem9kL2xpYi9pbmRleC5tanMnO1xuaW1wb3J0IHsgT3JpZW50YXRpb24gfSBmcm9tICcuLi9Db25zdGFudHMubWpzJztcbmltcG9ydCB7IFJlY2VpdmVGcmFtZVBheWxvYWQsIERJU1BBVENILCBDb21tYW5kcywgVXNlclZvaWNlU3RhdGUsIFVzZXIsIEd1aWxkTWVtYmVyUlBDLCBFbnRpdGxlbWVudCwgVGhlcm1hbFN0YXRlLCBSZWxhdGlvbnNoaXAsIExheW91dE1vZGVUeXBlT2JqZWN0LCBPcmllbnRhdGlvblR5cGVPYmplY3QgfSBmcm9tICcuL2NvbW1vbi5tanMnO1xuaW1wb3J0IHsgem9kQ29lcmNlVW5oYW5kbGVkVmFsdWUgfSBmcm9tICcuLi91dGlscy96b2RVdGlscy5tanMnO1xuaW1wb3J0IHsgR2V0QWN0aXZpdHlJbnN0YW5jZUNvbm5lY3RlZFBhcnRpY2lwYW50c1Jlc3BvbnNlU2NoZW1hIH0gZnJvbSAnLi4vZ2VuZXJhdGVkL3NjaGVtYXMubWpzJztcblxuLy8gRVJST1IgaXMgc2VudCBhcyBldnQgYnV0IGlzIGEgc3BlY2lhbCBjYXNlLCBzbyBpcyBleGNsdWRlZCBmcm9tIEV2ZW50cyBlbnVtXG5jb25zdCBFUlJPUiA9ICdFUlJPUic7XG52YXIgRXZlbnRzO1xuKGZ1bmN0aW9uIChFdmVudHMpIHtcbiAgICBFdmVudHNbXCJSRUFEWVwiXSA9IFwiUkVBRFlcIjtcbiAgICBFdmVudHNbXCJWT0lDRV9TVEFURV9VUERBVEVcIl0gPSBcIlZPSUNFX1NUQVRFX1VQREFURVwiO1xuICAgIEV2ZW50c1tcIlNQRUFLSU5HX1NUQVJUXCJdID0gXCJTUEVBS0lOR19TVEFSVFwiO1xuICAgIEV2ZW50c1tcIlNQRUFLSU5HX1NUT1BcIl0gPSBcIlNQRUFLSU5HX1NUT1BcIjtcbiAgICBFdmVudHNbXCJBQ1RJVklUWV9MQVlPVVRfTU9ERV9VUERBVEVcIl0gPSBcIkFDVElWSVRZX0xBWU9VVF9NT0RFX1VQREFURVwiO1xuICAgIEV2ZW50c1tcIk9SSUVOVEFUSU9OX1VQREFURVwiXSA9IFwiT1JJRU5UQVRJT05fVVBEQVRFXCI7XG4gICAgRXZlbnRzW1wiQ1VSUkVOVF9VU0VSX1VQREFURVwiXSA9IFwiQ1VSUkVOVF9VU0VSX1VQREFURVwiO1xuICAgIEV2ZW50c1tcIkNVUlJFTlRfR1VJTERfTUVNQkVSX1VQREFURVwiXSA9IFwiQ1VSUkVOVF9HVUlMRF9NRU1CRVJfVVBEQVRFXCI7XG4gICAgRXZlbnRzW1wiRU5USVRMRU1FTlRfQ1JFQVRFXCJdID0gXCJFTlRJVExFTUVOVF9DUkVBVEVcIjtcbiAgICBFdmVudHNbXCJUSEVSTUFMX1NUQVRFX1VQREFURVwiXSA9IFwiVEhFUk1BTF9TVEFURV9VUERBVEVcIjtcbiAgICBFdmVudHNbXCJBQ1RJVklUWV9JTlNUQU5DRV9QQVJUSUNJUEFOVFNfVVBEQVRFXCJdID0gXCJBQ1RJVklUWV9JTlNUQU5DRV9QQVJUSUNJUEFOVFNfVVBEQVRFXCI7XG4gICAgRXZlbnRzW1wiUkVMQVRJT05TSElQX1VQREFURVwiXSA9IFwiUkVMQVRJT05TSElQX1VQREFURVwiO1xufSkoRXZlbnRzIHx8IChFdmVudHMgPSB7fSkpO1xuY29uc3QgRGlzcGF0Y2hFdmVudEZyYW1lID0gUmVjZWl2ZUZyYW1lUGF5bG9hZC5leHRlbmQoe1xuICAgIGV2dDogbmF0aXZlRW51bVR5cGUoRXZlbnRzKSxcbiAgICBub25jZTogc3RyaW5nVHlwZSgpLm51bGxhYmxlKCksXG4gICAgY21kOiBsaXRlcmFsVHlwZShESVNQQVRDSCksXG4gICAgZGF0YTogb2JqZWN0VHlwZSh7fSkucGFzc3Rocm91Z2goKSxcbn0pO1xuY29uc3QgRXJyb3JFdmVudCA9IFJlY2VpdmVGcmFtZVBheWxvYWQuZXh0ZW5kKHtcbiAgICBldnQ6IGxpdGVyYWxUeXBlKEVSUk9SKSxcbiAgICBkYXRhOiBvYmplY3RUeXBlKHtcbiAgICAgICAgY29kZTogbnVtYmVyVHlwZSgpLFxuICAgICAgICBtZXNzYWdlOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKSxcbiAgICB9KVxuICAgICAgICAucGFzc3Rocm91Z2goKSxcbiAgICBjbWQ6IG5hdGl2ZUVudW1UeXBlKENvbW1hbmRzKSxcbiAgICBub25jZTogc3RyaW5nVHlwZSgpLm51bGxhYmxlKCksXG59KTtcbmNvbnN0IE90aGVyRXZlbnQgPSBEaXNwYXRjaEV2ZW50RnJhbWUuZXh0ZW5kKHtcbiAgICBldnQ6IHN0cmluZ1R5cGUoKSxcbn0pO1xuY29uc3QgRXZlbnRGcmFtZSA9IHVuaW9uVHlwZShbRGlzcGF0Y2hFdmVudEZyYW1lLCBPdGhlckV2ZW50LCBFcnJvckV2ZW50XSk7XG5mdW5jdGlvbiBwYXJzZUV2ZW50UGF5bG9hZChkYXRhKSB7XG4gICAgY29uc3QgZXZlbnQgPSBkYXRhLmV2dDtcbiAgICBpZiAoIShldmVudCBpbiBFdmVudHMpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIGV2ZW50IHR5cGUgJHtkYXRhLmV2dH1gKTtcbiAgICB9XG4gICAgY29uc3QgZXZlbnRTY2hlbWEgPSBFdmVudFNjaGVtYVtldmVudF07XG4gICAgcmV0dXJuIGV2ZW50U2NoZW1hLnBheWxvYWQucGFyc2UoZGF0YSk7XG59XG5jb25zdCBFdmVudFNjaGVtYSA9IHtcbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb25cbiAgICAgKiBUaGUgUkVBRFkgZXZlbnQgaXMgZW1pdHRlZCBieSBEaXNjb3JkJ3MgUlBDIHNlcnZlciBpbiByZXBseSB0byBhIGNsaWVudFxuICAgICAqIGluaXRpYXRpbmcgdGhlIFJQQyBoYW5kc2hha2UuIFRoZSBldmVudCBpbmNsdWRlcyBpbmZvcm1hdGlvbiBhYm91dFxuICAgICAqIC0gdGhlIHJwYyBzZXJ2ZXIgdmVyc2lvblxuICAgICAqIC0gdGhlIGRpc2NvcmQgY2xpZW50IGNvbmZpZ3VyYXRpb25cbiAgICAgKiAtIHRoZSAoYmFzaWMpIHVzZXIgb2JqZWN0XG4gICAgICpcbiAgICAgKiBVbmxpa2Ugb3RoZXIgZXZlbnRzLCBSRUFEWSB3aWxsIG9ubHkgYmUgb21pdHRlZCBvbmNlLCBpbW1lZGlhdGVseSBhZnRlciB0aGVcbiAgICAgKiBFbWJlZGRlZCBBcHAgU0RLIGlzIGluaXRpYWxpemVkXG4gICAgICpcbiAgICAgKiAjIFN1cHBvcnRlZCBQbGF0Zm9ybXNcbiAgICAgKiB8IFdlYiB8IGlPUyB8IEFuZHJvaWQgfFxuICAgICAqIHwtLS0tLXwtLS0tLXwtLS0tLS0tLS18XG4gICAgICogfCDinIUgIHwg4pyFICB8IOKchSAgICAgIHxcbiAgICAgKlxuICAgICAqIFJlcXVpcmVkIHNjb3BlczogW11cbiAgICAgKlxuICAgICAqL1xuICAgIFtFdmVudHMuUkVBRFldOiB7XG4gICAgICAgIHBheWxvYWQ6IERpc3BhdGNoRXZlbnRGcmFtZS5leHRlbmQoe1xuICAgICAgICAgICAgZXZ0OiBsaXRlcmFsVHlwZShFdmVudHMuUkVBRFkpLFxuICAgICAgICAgICAgZGF0YTogb2JqZWN0VHlwZSh7XG4gICAgICAgICAgICAgICAgdjogbnVtYmVyVHlwZSgpLFxuICAgICAgICAgICAgICAgIGNvbmZpZzogb2JqZWN0VHlwZSh7XG4gICAgICAgICAgICAgICAgICAgIGNkbl9ob3N0OiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICAgICAgYXBpX2VuZHBvaW50OiBzdHJpbmdUeXBlKCksXG4gICAgICAgICAgICAgICAgICAgIGVudmlyb25tZW50OiBzdHJpbmdUeXBlKCksXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdXNlcjogb2JqZWN0VHlwZSh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBzdHJpbmdUeXBlKCksXG4gICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBzdHJpbmdUeXBlKCksXG4gICAgICAgICAgICAgICAgICAgIGRpc2NyaW1pbmF0b3I6IHN0cmluZ1R5cGUoKSxcbiAgICAgICAgICAgICAgICAgICAgYXZhdGFyOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAub3B0aW9uYWwoKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICB9LFxuICAgIFtFdmVudHMuVk9JQ0VfU1RBVEVfVVBEQVRFXToge1xuICAgICAgICBwYXlsb2FkOiBEaXNwYXRjaEV2ZW50RnJhbWUuZXh0ZW5kKHtcbiAgICAgICAgICAgIGV2dDogbGl0ZXJhbFR5cGUoRXZlbnRzLlZPSUNFX1NUQVRFX1VQREFURSksXG4gICAgICAgICAgICBkYXRhOiBVc2VyVm9pY2VTdGF0ZSxcbiAgICAgICAgfSksXG4gICAgICAgIHN1YnNjcmliZUFyZ3M6IG9iamVjdFR5cGUoe1xuICAgICAgICAgICAgY2hhbm5lbF9pZDogc3RyaW5nVHlwZSgpLFxuICAgICAgICB9KSxcbiAgICB9LFxuICAgIFtFdmVudHMuU1BFQUtJTkdfU1RBUlRdOiB7XG4gICAgICAgIHBheWxvYWQ6IERpc3BhdGNoRXZlbnRGcmFtZS5leHRlbmQoe1xuICAgICAgICAgICAgZXZ0OiBsaXRlcmFsVHlwZShFdmVudHMuU1BFQUtJTkdfU1RBUlQpLFxuICAgICAgICAgICAgZGF0YTogb2JqZWN0VHlwZSh7XG4gICAgICAgICAgICAgICAgbG9iYnlfaWQ6IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgIGNoYW5uZWxfaWQ6IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHN0cmluZ1R5cGUoKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICAgICAgc3Vic2NyaWJlQXJnczogb2JqZWN0VHlwZSh7XG4gICAgICAgICAgICBsb2JieV9pZDogc3RyaW5nVHlwZSgpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgIGNoYW5uZWxfaWQ6IHN0cmluZ1R5cGUoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIH0pLFxuICAgIH0sXG4gICAgW0V2ZW50cy5TUEVBS0lOR19TVE9QXToge1xuICAgICAgICBwYXlsb2FkOiBEaXNwYXRjaEV2ZW50RnJhbWUuZXh0ZW5kKHtcbiAgICAgICAgICAgIGV2dDogbGl0ZXJhbFR5cGUoRXZlbnRzLlNQRUFLSU5HX1NUT1ApLFxuICAgICAgICAgICAgZGF0YTogb2JqZWN0VHlwZSh7XG4gICAgICAgICAgICAgICAgbG9iYnlfaWQ6IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgIGNoYW5uZWxfaWQ6IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHN0cmluZ1R5cGUoKSxcbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KSxcbiAgICAgICAgc3Vic2NyaWJlQXJnczogb2JqZWN0VHlwZSh7XG4gICAgICAgICAgICBsb2JieV9pZDogc3RyaW5nVHlwZSgpLm51bGxhYmxlKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgIGNoYW5uZWxfaWQ6IHN0cmluZ1R5cGUoKS5udWxsYWJsZSgpLm9wdGlvbmFsKCksXG4gICAgICAgIH0pLFxuICAgIH0sXG4gICAgW0V2ZW50cy5BQ1RJVklUWV9MQVlPVVRfTU9ERV9VUERBVEVdOiB7XG4gICAgICAgIHBheWxvYWQ6IERpc3BhdGNoRXZlbnRGcmFtZS5leHRlbmQoe1xuICAgICAgICAgICAgZXZ0OiBsaXRlcmFsVHlwZShFdmVudHMuQUNUSVZJVFlfTEFZT1VUX01PREVfVVBEQVRFKSxcbiAgICAgICAgICAgIGRhdGE6IG9iamVjdFR5cGUoe1xuICAgICAgICAgICAgICAgIGxheW91dF9tb2RlOiB6b2RDb2VyY2VVbmhhbmRsZWRWYWx1ZShMYXlvdXRNb2RlVHlwZU9iamVjdCksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSksXG4gICAgfSxcbiAgICBbRXZlbnRzLk9SSUVOVEFUSU9OX1VQREFURV06IHtcbiAgICAgICAgcGF5bG9hZDogRGlzcGF0Y2hFdmVudEZyYW1lLmV4dGVuZCh7XG4gICAgICAgICAgICBldnQ6IGxpdGVyYWxUeXBlKEV2ZW50cy5PUklFTlRBVElPTl9VUERBVEUpLFxuICAgICAgICAgICAgZGF0YTogb2JqZWN0VHlwZSh7XG4gICAgICAgICAgICAgICAgc2NyZWVuX29yaWVudGF0aW9uOiB6b2RDb2VyY2VVbmhhbmRsZWRWYWx1ZShPcmllbnRhdGlvblR5cGVPYmplY3QpLFxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEBkZXByZWNhdGVkIHVzZSBzY3JlZW5fb3JpZW50YXRpb24gaW5zdGVhZFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uOiBuYXRpdmVFbnVtVHlwZShPcmllbnRhdGlvbiksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSksXG4gICAgfSxcbiAgICBbRXZlbnRzLkNVUlJFTlRfVVNFUl9VUERBVEVdOiB7XG4gICAgICAgIHBheWxvYWQ6IERpc3BhdGNoRXZlbnRGcmFtZS5leHRlbmQoe1xuICAgICAgICAgICAgZXZ0OiBsaXRlcmFsVHlwZShFdmVudHMuQ1VSUkVOVF9VU0VSX1VQREFURSksXG4gICAgICAgICAgICBkYXRhOiBVc2VyLFxuICAgICAgICB9KSxcbiAgICB9LFxuICAgIFtFdmVudHMuQ1VSUkVOVF9HVUlMRF9NRU1CRVJfVVBEQVRFXToge1xuICAgICAgICBwYXlsb2FkOiBEaXNwYXRjaEV2ZW50RnJhbWUuZXh0ZW5kKHtcbiAgICAgICAgICAgIGV2dDogbGl0ZXJhbFR5cGUoRXZlbnRzLkNVUlJFTlRfR1VJTERfTUVNQkVSX1VQREFURSksXG4gICAgICAgICAgICBkYXRhOiBHdWlsZE1lbWJlclJQQyxcbiAgICAgICAgfSksXG4gICAgICAgIHN1YnNjcmliZUFyZ3M6IG9iamVjdFR5cGUoe1xuICAgICAgICAgICAgZ3VpbGRfaWQ6IHN0cmluZ1R5cGUoKSxcbiAgICAgICAgfSksXG4gICAgfSxcbiAgICBbRXZlbnRzLkVOVElUTEVNRU5UX0NSRUFURV06IHtcbiAgICAgICAgcGF5bG9hZDogRGlzcGF0Y2hFdmVudEZyYW1lLmV4dGVuZCh7XG4gICAgICAgICAgICBldnQ6IGxpdGVyYWxUeXBlKEV2ZW50cy5FTlRJVExFTUVOVF9DUkVBVEUpLFxuICAgICAgICAgICAgZGF0YTogb2JqZWN0VHlwZSh7IGVudGl0bGVtZW50OiBFbnRpdGxlbWVudCB9KSxcbiAgICAgICAgfSksXG4gICAgfSxcbiAgICBbRXZlbnRzLlRIRVJNQUxfU1RBVEVfVVBEQVRFXToge1xuICAgICAgICBwYXlsb2FkOiBEaXNwYXRjaEV2ZW50RnJhbWUuZXh0ZW5kKHtcbiAgICAgICAgICAgIGV2dDogbGl0ZXJhbFR5cGUoRXZlbnRzLlRIRVJNQUxfU1RBVEVfVVBEQVRFKSxcbiAgICAgICAgICAgIGRhdGE6IG9iamVjdFR5cGUoeyB0aGVybWFsX3N0YXRlOiBUaGVybWFsU3RhdGUgfSksXG4gICAgICAgIH0pLFxuICAgIH0sXG4gICAgW0V2ZW50cy5BQ1RJVklUWV9JTlNUQU5DRV9QQVJUSUNJUEFOVFNfVVBEQVRFXToge1xuICAgICAgICBwYXlsb2FkOiBEaXNwYXRjaEV2ZW50RnJhbWUuZXh0ZW5kKHtcbiAgICAgICAgICAgIGV2dDogbGl0ZXJhbFR5cGUoRXZlbnRzLkFDVElWSVRZX0lOU1RBTkNFX1BBUlRJQ0lQQU5UU19VUERBVEUpLFxuICAgICAgICAgICAgZGF0YTogb2JqZWN0VHlwZSh7XG4gICAgICAgICAgICAgICAgcGFydGljaXBhbnRzOiBHZXRBY3Rpdml0eUluc3RhbmNlQ29ubmVjdGVkUGFydGljaXBhbnRzUmVzcG9uc2VTY2hlbWEuc2hhcGUucGFydGljaXBhbnRzLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pLFxuICAgIH0sXG4gICAgW0V2ZW50cy5SRUxBVElPTlNISVBfVVBEQVRFXToge1xuICAgICAgICBwYXlsb2FkOiBEaXNwYXRjaEV2ZW50RnJhbWUuZXh0ZW5kKHtcbiAgICAgICAgICAgIGV2dDogbGl0ZXJhbFR5cGUoRXZlbnRzLlJFTEFUSU9OU0hJUF9VUERBVEUpLFxuICAgICAgICAgICAgZGF0YTogUmVsYXRpb25zaGlwLFxuICAgICAgICB9KSxcbiAgICB9LFxufTtcblxuZXhwb3J0IHsgRGlzcGF0Y2hFdmVudEZyYW1lLCBFUlJPUiwgRXJyb3JFdmVudCwgRXZlbnRGcmFtZSwgRXZlbnRTY2hlbWEsIEV2ZW50cywgT3RoZXJFdmVudCwgcGFyc2VFdmVudFBheWxvYWQgfTtcbiIsImltcG9ydCB7IG9iamVjdCBhcyBvYmplY3RUeXBlLCBzdHJpbmcgYXMgc3RyaW5nVHlwZSwgbmF0aXZlRW51bSBhcyBuYXRpdmVFbnVtVHlwZSwgbGl0ZXJhbCBhcyBsaXRlcmFsVHlwZSwgbnVtYmVyIGFzIG51bWJlclR5cGUsIHVua25vd24gYXMgdW5rbm93blR5cGUgfSBmcm9tICcuLi9saWIvem9kL2xpYi9pbmRleC5tanMnO1xuaW1wb3J0IHsgRVJST1IsIEVycm9yRXZlbnQsIHBhcnNlRXZlbnRQYXlsb2FkLCBFdmVudEZyYW1lIH0gZnJvbSAnLi9ldmVudHMubWpzJztcbmltcG9ydCB7IHBhcnNlUmVzcG9uc2VQYXlsb2FkLCBSZXNwb25zZUZyYW1lIH0gZnJvbSAnLi9yZXNwb25zZXMubWpzJztcbmltcG9ydCAqIGFzIHJlc3BvbnNlcyBmcm9tICcuL3Jlc3BvbnNlcy5tanMnO1xuZXhwb3J0IHsgcmVzcG9uc2VzIGFzIFJlc3BvbnNlcyB9O1xuaW1wb3J0ICogYXMgY29tbW9uIGZyb20gJy4vY29tbW9uLm1qcyc7XG5leHBvcnQgeyBjb21tb24gYXMgQ29tbW9uIH07XG5pbXBvcnQgeyBQbGF0Zm9ybSB9IGZyb20gJy4uL0NvbnN0YW50cy5tanMnO1xuXG5vYmplY3RUeXBlKHtcbiAgICBmcmFtZV9pZDogc3RyaW5nVHlwZSgpLFxuICAgIHBsYXRmb3JtOiBuYXRpdmVFbnVtVHlwZShQbGF0Zm9ybSkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxufSk7XG5vYmplY3RUeXBlKHtcbiAgICB2OiBsaXRlcmFsVHlwZSgxKSxcbiAgICBlbmNvZGluZzogbGl0ZXJhbFR5cGUoJ2pzb24nKS5vcHRpb25hbCgpLFxuICAgIGNsaWVudF9pZDogc3RyaW5nVHlwZSgpLFxuICAgIGZyYW1lX2lkOiBzdHJpbmdUeXBlKCksXG59KTtcbmNvbnN0IENsb3NlUGF5bG9hZCA9IG9iamVjdFR5cGUoe1xuICAgIGNvZGU6IG51bWJlclR5cGUoKSxcbiAgICBtZXNzYWdlOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKSxcbn0pO1xuY29uc3QgSW5jb21pbmdQYXlsb2FkID0gb2JqZWN0VHlwZSh7XG4gICAgZXZ0OiBzdHJpbmdUeXBlKCkubnVsbGFibGUoKSxcbiAgICBub25jZTogc3RyaW5nVHlwZSgpLm51bGxhYmxlKCksXG4gICAgZGF0YTogdW5rbm93blR5cGUoKS5udWxsYWJsZSgpLFxuICAgIGNtZDogc3RyaW5nVHlwZSgpLFxufSlcbiAgICAucGFzc3Rocm91Z2goKTtcbmZ1bmN0aW9uIHBhcnNlSW5jb21pbmdQYXlsb2FkKHBheWxvYWQpIHtcbiAgICBjb25zdCBpbmNvbWluZyA9IEluY29taW5nUGF5bG9hZC5wYXJzZShwYXlsb2FkKTtcbiAgICBpZiAoaW5jb21pbmcuZXZ0ICE9IG51bGwpIHtcbiAgICAgICAgaWYgKGluY29taW5nLmV2dCA9PT0gRVJST1IpIHtcbiAgICAgICAgICAgIHJldHVybiBFcnJvckV2ZW50LnBhcnNlKGluY29taW5nKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyc2VFdmVudFBheWxvYWQoRXZlbnRGcmFtZS5wYXJzZShpbmNvbWluZykpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlUmVzcG9uc2VQYXlsb2FkKFJlc3BvbnNlRnJhbWUucGFzc3Rocm91Z2goKS5wYXJzZShpbmNvbWluZykpO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgQ2xvc2VQYXlsb2FkLCBJbmNvbWluZ1BheWxvYWQsIHBhcnNlSW5jb21pbmdQYXlsb2FkIH07XG4iLCJpbXBvcnQgeyBvYmplY3QgYXMgb2JqZWN0VHlwZSwgc3RyaW5nIGFzIHN0cmluZ1R5cGUsIGFycmF5IGFzIGFycmF5VHlwZSwgbnVtYmVyIGFzIG51bWJlclR5cGUsIGJvb2xlYW4gYXMgYm9vbGVhblR5cGUsIGJpZ2ludCBhcyBiaWdJbnRUeXBlLCBudWxsIGFzIG51bGxUeXBlLCBvcHRpb25hbCBhcyBvcHRpb25hbFR5cGUsIG5hdGl2ZUVudW0gYXMgbmF0aXZlRW51bVR5cGUgfSBmcm9tICcuLi9saWIvem9kL2xpYi9pbmRleC5tanMnO1xuaW1wb3J0IHsgR3VpbGRNZW1iZXIsIFVzZXJWb2ljZVN0YXRlLCBNZXNzYWdlLCBDaGFubmVsLCBWb2ljZVNldHRpbmdzSU8sIFZvaWNlU2V0dGluZ3NNb2RlLCBTaG9ydGN1dEtleSwgU2t1LCBFbnRpdGxlbWVudCwgUmVjZWl2ZUZyYW1lUGF5bG9hZCwgQ29tbWFuZHMsIENoYW5uZWxUeXBlc09iamVjdCwgQWN0aXZpdHkgfSBmcm9tICcuL2NvbW1vbi5tanMnO1xuaW1wb3J0IHsgem9kQ29lcmNlVW5oYW5kbGVkVmFsdWUsIGZhbGxiYWNrVG9EZWZhdWx0IH0gZnJvbSAnLi4vdXRpbHMvem9kVXRpbHMubWpzJztcbmltcG9ydCB7IFNjaGVtYXMgfSBmcm9tICcuLi9nZW5lcmF0ZWQvc2NoZW1hcy5tanMnO1xuZXhwb3J0IHsgQXV0aGVudGljYXRlUmVzcG9uc2VTY2hlbWEgYXMgQXV0aGVudGljYXRlUmVzcG9uc2UsIEluaXRpYXRlSW1hZ2VVcGxvYWRSZXNwb25zZVNjaGVtYSBhcyBJbml0aWF0ZUltYWdlVXBsb2FkUmVzcG9uc2UgfSBmcm9tICcuLi9nZW5lcmF0ZWQvc2NoZW1hcy5tanMnO1xuaW1wb3J0IGFzc2VydFVucmVhY2hhYmxlIGZyb20gJy4uL3V0aWxzL2Fzc2VydFVucmVhY2hhYmxlLm1qcyc7XG5cbmNvbnN0IEVtcHR5UmVzcG9uc2UgPSBvYmplY3RUeXBlKHt9KS5udWxsYWJsZSgpO1xuY29uc3QgQXV0aG9yaXplUmVzcG9uc2UgPSBvYmplY3RUeXBlKHtcbiAgICBjb2RlOiBzdHJpbmdUeXBlKCksXG59KTtcbmNvbnN0IEdldEd1aWxkc1Jlc3BvbnNlID0gb2JqZWN0VHlwZSh7XG4gICAgZ3VpbGRzOiBhcnJheVR5cGUob2JqZWN0VHlwZSh7XG4gICAgICAgIGlkOiBzdHJpbmdUeXBlKCksXG4gICAgICAgIG5hbWU6IHN0cmluZ1R5cGUoKSxcbiAgICB9KSksXG59KTtcbmNvbnN0IEdldEd1aWxkUmVzcG9uc2UgPSBvYmplY3RUeXBlKHtcbiAgICBpZDogc3RyaW5nVHlwZSgpLFxuICAgIG5hbWU6IHN0cmluZ1R5cGUoKSxcbiAgICBpY29uX3VybDogc3RyaW5nVHlwZSgpLm9wdGlvbmFsKCksXG4gICAgbWVtYmVyczogYXJyYXlUeXBlKEd1aWxkTWVtYmVyKSxcbn0pO1xuY29uc3QgR2V0Q2hhbm5lbFJlc3BvbnNlID0gb2JqZWN0VHlwZSh7XG4gICAgaWQ6IHN0cmluZ1R5cGUoKSxcbiAgICB0eXBlOiB6b2RDb2VyY2VVbmhhbmRsZWRWYWx1ZShDaGFubmVsVHlwZXNPYmplY3QpLFxuICAgIGd1aWxkX2lkOiBzdHJpbmdUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIG5hbWU6IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgdG9waWM6IHN0cmluZ1R5cGUoKS5vcHRpb25hbCgpLm51bGxhYmxlKCksXG4gICAgYml0cmF0ZTogbnVtYmVyVHlwZSgpLm9wdGlvbmFsKCkubnVsbGFibGUoKSxcbiAgICB1c2VyX2xpbWl0OiBudW1iZXJUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHBvc2l0aW9uOiBudW1iZXJUeXBlKCkub3B0aW9uYWwoKS5udWxsYWJsZSgpLFxuICAgIHZvaWNlX3N0YXRlczogYXJyYXlUeXBlKFVzZXJWb2ljZVN0YXRlKSxcbiAgICBtZXNzYWdlczogYXJyYXlUeXBlKE1lc3NhZ2UpLFxufSk7XG5jb25zdCBHZXRDaGFubmVsc1Jlc3BvbnNlID0gb2JqZWN0VHlwZSh7XG4gICAgY2hhbm5lbHM6IGFycmF5VHlwZShDaGFubmVsKSxcbn0pO1xuY29uc3QgTnVsbGFibGVDaGFubmVsUmVzcG9uc2UgPSBHZXRDaGFubmVsUmVzcG9uc2UubnVsbGFibGUoKTtcbmNvbnN0IFNlbGVjdFZvaWNlQ2hhbm5lbFJlc3BvbnNlID0gR2V0Q2hhbm5lbFJlc3BvbnNlLm51bGxhYmxlKCk7XG5jb25zdCBTZWxlY3RUZXh0Q2hhbm5lbFJlc3BvbnNlID0gR2V0Q2hhbm5lbFJlc3BvbnNlLm51bGxhYmxlKCk7XG5jb25zdCBWb2ljZVNldHRpbmdzUmVzcG9uc2UgPSBvYmplY3RUeXBlKHtcbiAgICBpbnB1dDogVm9pY2VTZXR0aW5nc0lPLFxuICAgIG91dHB1dDogVm9pY2VTZXR0aW5nc0lPLFxuICAgIG1vZGU6IFZvaWNlU2V0dGluZ3NNb2RlLFxuICAgIGF1dG9tYXRpY19nYWluX2NvbnRyb2w6IGJvb2xlYW5UeXBlKCksXG4gICAgZWNob19jYW5jZWxsYXRpb246IGJvb2xlYW5UeXBlKCksXG4gICAgbm9pc2Vfc3VwcHJlc3Npb246IGJvb2xlYW5UeXBlKCksXG4gICAgcW9zOiBib29sZWFuVHlwZSgpLFxuICAgIHNpbGVuY2Vfd2FybmluZzogYm9vbGVhblR5cGUoKSxcbiAgICBkZWFmOiBib29sZWFuVHlwZSgpLFxuICAgIG11dGU6IGJvb2xlYW5UeXBlKCksXG59KTtcbmNvbnN0IFN1YnNjcmliZVJlc3BvbnNlID0gb2JqZWN0VHlwZSh7XG4gICAgZXZ0OiBzdHJpbmdUeXBlKCksXG59KTtcbmNvbnN0IENhcHR1cmVTaG9ydGN1dFJlc3BvbnNlID0gb2JqZWN0VHlwZSh7IHNob3J0Y3V0OiBTaG9ydGN1dEtleSB9KTtcbmNvbnN0IFNldEFjdGl2aXR5UmVzcG9uc2UgPSBBY3Rpdml0eTtcbmNvbnN0IEdldFNrdXNSZXNwb25zZSA9IG9iamVjdFR5cGUoeyBza3VzOiBhcnJheVR5cGUoU2t1KSB9KTtcbmNvbnN0IEdldEVudGl0bGVtZW50c1Jlc3BvbnNlID0gb2JqZWN0VHlwZSh7IGVudGl0bGVtZW50czogYXJyYXlUeXBlKEVudGl0bGVtZW50KSB9KTtcbmNvbnN0IFN0YXJ0UHVyY2hhc2VSZXNwb25zZSA9IGFycmF5VHlwZShFbnRpdGxlbWVudCkubnVsbGFibGUoKTtcbmNvbnN0IFNldENvbmZpZ1Jlc3BvbnNlID0gb2JqZWN0VHlwZSh7XG4gICAgdXNlX2ludGVyYWN0aXZlX3BpcDogYm9vbGVhblR5cGUoKSxcbn0pO1xuY29uc3QgVXNlclNldHRpbmdzR2V0TG9jYWxlUmVzcG9uc2UgPSBvYmplY3RUeXBlKHtcbiAgICBsb2NhbGU6IHN0cmluZ1R5cGUoKSxcbn0pO1xuY29uc3QgRW5jb3VyYWdlSGFyZHdhcmVBY2NlbGVyYXRpb25SZXNwb25zZSA9IG9iamVjdFR5cGUoe1xuICAgIGVuYWJsZWQ6IGJvb2xlYW5UeXBlKCksXG59KTtcbmNvbnN0IEdldENoYW5uZWxQZXJtaXNzaW9uc1Jlc3BvbnNlID0gb2JqZWN0VHlwZSh7XG4gICAgcGVybWlzc2lvbnM6IGJpZ0ludFR5cGUoKS5vcihzdHJpbmdUeXBlKCkpLFxufSk7XG5jb25zdCBPcGVuRXh0ZXJuYWxMaW5rUmVzcG9uc2UgPSBmYWxsYmFja1RvRGVmYXVsdChvYmplY3RUeXBlKHsgb3BlbmVkOiBib29sZWFuVHlwZSgpLm9yKG51bGxUeXBlKCkpIH0pLmRlZmF1bHQoeyBvcGVuZWQ6IG51bGwgfSkpO1xuLyoqXG4gKiBCZWNhdXNlIG9mIHRoZSBuYXR1cmUgb2YgUGxhdGZvcm0gQmVoYXZpb3IgY2hhbmdlc1xuICogZXZlcnkga2V5L3ZhbHVlIGlzIG9wdGlvbmFsIGFuZCBtYXkgZXZlbnR1YWxseSBiZSByZW1vdmVkXG4gKi9cbmNvbnN0IEdldFBsYXRmb3JtQmVoYXZpb3JzUmVzcG9uc2UgPSBvYmplY3RUeXBlKHtcbiAgICBpb3NLZXlib2FyZFJlc2l6ZXNWaWV3OiBvcHRpb25hbFR5cGUoYm9vbGVhblR5cGUoKSksXG59KTtcbmNvbnN0IFJlc3BvbnNlRnJhbWUgPSBSZWNlaXZlRnJhbWVQYXlsb2FkLmV4dGVuZCh7XG4gICAgY21kOiBuYXRpdmVFbnVtVHlwZShDb21tYW5kcyksXG4gICAgZXZ0OiBudWxsVHlwZSgpLFxufSk7XG5mdW5jdGlvbiBwYXJzZVJlc3BvbnNlRGF0YSh7IGNtZCwgZGF0YSB9KSB7XG4gICAgc3dpdGNoIChjbWQpIHtcbiAgICAgICAgY2FzZSBDb21tYW5kcy5BVVRIT1JJWkU6XG4gICAgICAgICAgICByZXR1cm4gQXV0aG9yaXplUmVzcG9uc2UucGFyc2UoZGF0YSk7XG4gICAgICAgIGNhc2UgQ29tbWFuZHMuQ0FQVFVSRV9TSE9SVENVVDpcbiAgICAgICAgICAgIHJldHVybiBDYXB0dXJlU2hvcnRjdXRSZXNwb25zZS5wYXJzZShkYXRhKTtcbiAgICAgICAgY2FzZSBDb21tYW5kcy5FTkNPVVJBR0VfSFdfQUNDRUxFUkFUSU9OOlxuICAgICAgICAgICAgcmV0dXJuIEVuY291cmFnZUhhcmR3YXJlQWNjZWxlcmF0aW9uUmVzcG9uc2UucGFyc2UoZGF0YSk7XG4gICAgICAgIGNhc2UgQ29tbWFuZHMuR0VUX0NIQU5ORUw6XG4gICAgICAgICAgICByZXR1cm4gR2V0Q2hhbm5lbFJlc3BvbnNlLnBhcnNlKGRhdGEpO1xuICAgICAgICBjYXNlIENvbW1hbmRzLkdFVF9DSEFOTkVMUzpcbiAgICAgICAgICAgIHJldHVybiBHZXRDaGFubmVsc1Jlc3BvbnNlLnBhcnNlKGRhdGEpO1xuICAgICAgICBjYXNlIENvbW1hbmRzLkdFVF9DSEFOTkVMX1BFUk1JU1NJT05TOlxuICAgICAgICAgICAgcmV0dXJuIEdldENoYW5uZWxQZXJtaXNzaW9uc1Jlc3BvbnNlLnBhcnNlKGRhdGEpO1xuICAgICAgICBjYXNlIENvbW1hbmRzLkdFVF9HVUlMRDpcbiAgICAgICAgICAgIHJldHVybiBHZXRHdWlsZFJlc3BvbnNlLnBhcnNlKGRhdGEpO1xuICAgICAgICBjYXNlIENvbW1hbmRzLkdFVF9HVUlMRFM6XG4gICAgICAgICAgICByZXR1cm4gR2V0R3VpbGRzUmVzcG9uc2UucGFyc2UoZGF0YSk7XG4gICAgICAgIGNhc2UgQ29tbWFuZHMuR0VUX1BMQVRGT1JNX0JFSEFWSU9SUzpcbiAgICAgICAgICAgIHJldHVybiBHZXRQbGF0Zm9ybUJlaGF2aW9yc1Jlc3BvbnNlLnBhcnNlKGRhdGEpO1xuICAgICAgICBjYXNlIENvbW1hbmRzLkdFVF9DSEFOTkVMOlxuICAgICAgICAgICAgcmV0dXJuIEdldENoYW5uZWxSZXNwb25zZS5wYXJzZShkYXRhKTtcbiAgICAgICAgY2FzZSBDb21tYW5kcy5TRUxFQ1RfVEVYVF9DSEFOTkVMOlxuICAgICAgICAgICAgcmV0dXJuIFNlbGVjdFRleHRDaGFubmVsUmVzcG9uc2UucGFyc2UoZGF0YSk7XG4gICAgICAgIGNhc2UgQ29tbWFuZHMuU0VMRUNUX1ZPSUNFX0NIQU5ORUw6XG4gICAgICAgICAgICByZXR1cm4gU2VsZWN0Vm9pY2VDaGFubmVsUmVzcG9uc2UucGFyc2UoZGF0YSk7XG4gICAgICAgIGNhc2UgQ29tbWFuZHMuU0VUX0FDVElWSVRZOlxuICAgICAgICAgICAgcmV0dXJuIFNldEFjdGl2aXR5UmVzcG9uc2UucGFyc2UoZGF0YSk7XG4gICAgICAgIGNhc2UgQ29tbWFuZHMuR0VUX1NLVVNfRU1CRURERUQ6XG4gICAgICAgICAgICByZXR1cm4gR2V0U2t1c1Jlc3BvbnNlLnBhcnNlKGRhdGEpO1xuICAgICAgICBjYXNlIENvbW1hbmRzLkdFVF9FTlRJVExFTUVOVFNfRU1CRURERUQ6XG4gICAgICAgICAgICByZXR1cm4gR2V0RW50aXRsZW1lbnRzUmVzcG9uc2UucGFyc2UoZGF0YSk7XG4gICAgICAgIGNhc2UgQ29tbWFuZHMuU0VUX0NPTkZJRzpcbiAgICAgICAgICAgIHJldHVybiBTZXRDb25maWdSZXNwb25zZS5wYXJzZShkYXRhKTtcbiAgICAgICAgY2FzZSBDb21tYW5kcy5TVEFSVF9QVVJDSEFTRTpcbiAgICAgICAgICAgIHJldHVybiBTdGFydFB1cmNoYXNlUmVzcG9uc2UucGFyc2UoZGF0YSk7XG4gICAgICAgIGNhc2UgQ29tbWFuZHMuU1VCU0NSSUJFOlxuICAgICAgICBjYXNlIENvbW1hbmRzLlVOU1VCU0NSSUJFOlxuICAgICAgICAgICAgcmV0dXJuIFN1YnNjcmliZVJlc3BvbnNlLnBhcnNlKGRhdGEpO1xuICAgICAgICBjYXNlIENvbW1hbmRzLlVTRVJfU0VUVElOR1NfR0VUX0xPQ0FMRTpcbiAgICAgICAgICAgIHJldHVybiBVc2VyU2V0dGluZ3NHZXRMb2NhbGVSZXNwb25zZS5wYXJzZShkYXRhKTtcbiAgICAgICAgY2FzZSBDb21tYW5kcy5PUEVOX0VYVEVSTkFMX0xJTks6XG4gICAgICAgICAgICByZXR1cm4gT3BlbkV4dGVybmFsTGlua1Jlc3BvbnNlLnBhcnNlKGRhdGEpO1xuICAgICAgICAvLyBFbXB0eSBSZXNwb25zZXNcbiAgICAgICAgY2FzZSBDb21tYW5kcy5TRVRfT1JJRU5UQVRJT05fTE9DS19TVEFURTpcbiAgICAgICAgY2FzZSBDb21tYW5kcy5TRVRfQ0VSVElGSUVEX0RFVklDRVM6XG4gICAgICAgIGNhc2UgQ29tbWFuZHMuU0VORF9BTkFMWVRJQ1NfRVZFTlQ6XG4gICAgICAgIGNhc2UgQ29tbWFuZHMuT1BFTl9JTlZJVEVfRElBTE9HOlxuICAgICAgICBjYXNlIENvbW1hbmRzLkNBUFRVUkVfTE9HOlxuICAgICAgICBjYXNlIENvbW1hbmRzLkdFVF9TS1VTOlxuICAgICAgICBjYXNlIENvbW1hbmRzLkdFVF9FTlRJVExFTUVOVFM6XG4gICAgICAgICAgICByZXR1cm4gRW1wdHlSZXNwb25zZS5wYXJzZShkYXRhKTtcbiAgICAgICAgLy8gR2VuZXJhdGVkIFJlc3BvbnNlc1xuICAgICAgICBjYXNlIENvbW1hbmRzLkFVVEhFTlRJQ0FURTpcbiAgICAgICAgY2FzZSBDb21tYW5kcy5JTklUSUFURV9JTUFHRV9VUExPQUQ6XG4gICAgICAgIGNhc2UgQ29tbWFuZHMuT1BFTl9TSEFSRV9NT01FTlRfRElBTE9HOlxuICAgICAgICBjYXNlIENvbW1hbmRzLkdFVF9BQ1RJVklUWV9JTlNUQU5DRV9DT05ORUNURURfUEFSVElDSVBBTlRTOlxuICAgICAgICBjYXNlIENvbW1hbmRzLlNIQVJFX0xJTks6XG4gICAgICAgIGNhc2UgQ29tbWFuZHMuR0VUX1JFTEFUSU9OU0hJUFM6XG4gICAgICAgIGNhc2UgQ29tbWFuZHMuSU5WSVRFX1VTRVJfRU1CRURERUQ6XG4gICAgICAgIGNhc2UgQ29tbWFuZHMuR0VUX1VTRVI6XG4gICAgICAgICAgICBjb25zdCB7IHJlc3BvbnNlIH0gPSBTY2hlbWFzW2NtZF07XG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UucGFyc2UoZGF0YSk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBhc3NlcnRVbnJlYWNoYWJsZShjbWQsIG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIGNvbW1hbmQgJHtjbWR9YCkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHBhcnNlUmVzcG9uc2VQYXlsb2FkKHBheWxvYWQpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwYXlsb2FkKSwgeyBkYXRhOiBwYXJzZVJlc3BvbnNlRGF0YShwYXlsb2FkKSB9KTtcbn1cblxuZXhwb3J0IHsgQXV0aG9yaXplUmVzcG9uc2UsIENhcHR1cmVTaG9ydGN1dFJlc3BvbnNlLCBFbXB0eVJlc3BvbnNlLCBFbmNvdXJhZ2VIYXJkd2FyZUFjY2VsZXJhdGlvblJlc3BvbnNlLCBHZXRDaGFubmVsUGVybWlzc2lvbnNSZXNwb25zZSwgR2V0Q2hhbm5lbFJlc3BvbnNlLCBHZXRDaGFubmVsc1Jlc3BvbnNlLCBHZXRFbnRpdGxlbWVudHNSZXNwb25zZSwgR2V0R3VpbGRSZXNwb25zZSwgR2V0R3VpbGRzUmVzcG9uc2UsIEdldFBsYXRmb3JtQmVoYXZpb3JzUmVzcG9uc2UsIEdldFNrdXNSZXNwb25zZSwgTnVsbGFibGVDaGFubmVsUmVzcG9uc2UsIE9wZW5FeHRlcm5hbExpbmtSZXNwb25zZSwgUmVzcG9uc2VGcmFtZSwgU2VsZWN0VGV4dENoYW5uZWxSZXNwb25zZSwgU2VsZWN0Vm9pY2VDaGFubmVsUmVzcG9uc2UsIFNldEFjdGl2aXR5UmVzcG9uc2UsIFNldENvbmZpZ1Jlc3BvbnNlLCBTdGFydFB1cmNoYXNlUmVzcG9uc2UsIFN1YnNjcmliZVJlc3BvbnNlLCBVc2VyU2V0dGluZ3NHZXRMb2NhbGVSZXNwb25zZSwgVm9pY2VTZXR0aW5nc1Jlc3BvbnNlLCBwYXJzZVJlc3BvbnNlUGF5bG9hZCB9O1xuIiwiaW1wb3J0IGJpZ0ludCBmcm9tICcuLi9fdmlydHVhbC9CaWdJbnRlZ2VyLm1qcyc7XG5cbi8qKlxuICogQ29udGV4dDogRHVlIHRvIERpc2NvcmQgc3VwcG9ydGluZyBtb3JlIHRoYW4gMzIgcGVybWlzc2lvbnMsIHBlcm1pc3Npb24gY2FsY3VsYXRpb24gaGFzIGJlY29tZSBtb3JlIGNvbXBsaWNhdGVkIHRoYW4gbmFpdmVcbiAqIGJpdCBvcGVyYXRpb25zIG9uIGBudW1iZXJgcy4gVG8gc3VwcG9ydCB0aGlzIGdlbmVyaWNhbGx5LCB3ZSBoYXZlIGNyZWF0ZWQgQmlnRmxhZ1V0aWxzIHRvIHdvcmsgd2l0aCBiaXQtZmxhZ3MgZ3JlYXRlclxuICogdGhhbiAzMi1iaXRzIGluIHNpemUuXG4gKlxuICogSWRlYWxseSwgd2Ugd291bGQgbGlrZSB0byB1c2UgQmlnSW50LCB3aGljaCBpcyBwcmV0dHkgZWZmaWNpZW50LCBidXQgc29tZSBKYXZhU2NyaXB0IGVuZ2luZXMgZG8gbm90IHN1cHBvcnQgaXQuXG4gKlxuICogVGhpcyBmaWxlIGlzIGludGVuZGVkIHRvIGJlIGEgc2V0IG9mIGxvd2VyLWxldmVsIG9wZXJhdG9ycyB0aGF0IGFjdCBkaXJlY3RseSBvbiBcIkJpZ0ZsYWdzXCIuXG4gKlxuICogSWYgeW91J3JlIHdvcmtpbmcgd2l0aCBwZXJtaXNzaW9ucywgaW4gbW9zdCBjYXNlcyB5b3UgY2FuIHByb2JhYmx5IHVzZSBQZXJtaXNzaW9uVXRpbHMuXG4gKi9cbmNvbnN0IE1BWF9CSUdfSU5UID0gNjQ7XG5jb25zdCBTTUFMTF9JTlQgPSAxNjtcbmNvbnN0IFBBUlRTID0gTUFYX0JJR19JTlQgLyBTTUFMTF9JTlQ7XG5mdW5jdGlvbiBjaGVja0Jyb3dzZXJTdXBwb3J0c0JpZ0ludCgpIHtcbiAgICB0cnkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC1leHByZXNzaW9uc1xuICAgICAgICBCaWdJbnQ7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbi8qKlxuICogVGFrZXMgdGhlIHNsaWNlZCBvdXRwdXQgb2YgYHRvSGV4UmV2ZXJzZUFycmF5YCBhbmQgY29udmVydHMgaGV4IHRvIGRlY2ltYWwuXG4gKi9cbmZ1bmN0aW9uIGZyb21IZXhSZXZlcnNlQXJyYXkoaGV4VmFsdWVzLCBzdGFydCwgc2l6ZSkge1xuICAgIGxldCB2YWx1ZSA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgICAgY29uc3QgYnl0ZSA9IGhleFZhbHVlc1tzdGFydCArIGldO1xuICAgICAgICBpZiAoYnl0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZSArPSBieXRlICogMTYgKiogaTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuLyoqXG4gKiBDb252ZXJ0cyBhIG51bWJlciBzdHJpbmcgdG8gYXJyYXkgb2YgaGV4IGJ5dGVzIGJhc2VkIG9uIHRoZSBpbXBsZW1lbnRhdGlvbiBmb3VuZCBhdFxuICogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTg2MjY4NDQvY29udmVydC1hLWxhcmdlLWludGVnZXItdG8tYS1oZXgtc3RyaW5nLWluLWphdmFzY3JpcHRcbiAqXG4gKiBUbyBhdm9pZCBleHRyYSBhbGxvY2F0aW9ucyBpdCByZXR1cm5zIHRoZSB2YWx1ZXMgaW4gcmV2ZXJzZS5cbiAqL1xuZnVuY3Rpb24gdG9IZXhSZXZlcnNlQXJyYXkodmFsdWUpIHtcbiAgICBjb25zdCBzdW0gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBzID0gTnVtYmVyKHZhbHVlW2ldKTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IHMgfHwgaiA8IHN1bS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgcyArPSAoc3VtW2pdIHx8IDApICogMTA7XG4gICAgICAgICAgICBzdW1bal0gPSBzICUgMTY7XG4gICAgICAgICAgICBzID0gKHMgLSBzdW1bal0pIC8gMTY7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN1bTtcbn1cbi8qKlxuICogU3BsaXRzIGEgYmlnIGludGVnZXJzIGludG8gYXJyYXkgb2Ygc21hbGwgaW50ZWdlcnMgdG8gcGVyZm9ybSBmYXN0IGJpdHdpc2Ugb3BlcmF0aW9ucy5cbiAqL1xuZnVuY3Rpb24gc3BsaXRCaWdJbnQodmFsdWUpIHtcbiAgICBjb25zdCBzdW0gPSB0b0hleFJldmVyc2VBcnJheSh2YWx1ZSk7XG4gICAgY29uc3QgcGFydHMgPSBBcnJheShQQVJUUyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBQQVJUUzsgaSsrKSB7XG4gICAgICAgIC8vIEhpZ2hlc3QgYml0cyB0byBsb3dlc3QgYml0cy5cbiAgICAgICAgcGFydHNbUEFSVFMgLSAxIC0gaV0gPSBmcm9tSGV4UmV2ZXJzZUFycmF5KHN1bSwgaSAqIFBBUlRTLCBQQVJUUyk7XG4gICAgfVxuICAgIHJldHVybiBwYXJ0cztcbn1cbmNsYXNzIEhpZ2hMb3cge1xuICAgIHN0YXRpYyBmcm9tU3RyaW5nKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBuZXcgSGlnaExvdyhzcGxpdEJpZ0ludCh2YWx1ZSksIHZhbHVlKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21CaXQoaW5kZXgpIHtcbiAgICAgICAgY29uc3QgcGFydHMgPSBBcnJheShQQVJUUyk7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IE1hdGguZmxvb3IoaW5kZXggLyBTTUFMTF9JTlQpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IFBBUlRTOyBpKyspIHtcbiAgICAgICAgICAgIC8vIEhpZ2hlc3QgYml0cyB0byBsb3dlc3QgYml0cy5cbiAgICAgICAgICAgIHBhcnRzW1BBUlRTIC0gMSAtIGldID0gaSA9PT0gb2Zmc2V0ID8gMSA8PCAoaW5kZXggLSBvZmZzZXQgKiBTTUFMTF9JTlQpIDogMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEhpZ2hMb3cocGFydHMpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihwYXJ0cywgc3RyKSB7XG4gICAgICAgIHRoaXMucGFydHMgPSBwYXJ0cztcbiAgICAgICAgdGhpcy5zdHIgPSBzdHI7XG4gICAgfVxuICAgIGFuZCh7IHBhcnRzIH0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIaWdoTG93KHRoaXMucGFydHMubWFwKCh2LCBpKSA9PiB2ICYgcGFydHNbaV0pKTtcbiAgICB9XG4gICAgb3IoeyBwYXJ0cyB9KSB7XG4gICAgICAgIHJldHVybiBuZXcgSGlnaExvdyh0aGlzLnBhcnRzLm1hcCgodiwgaSkgPT4gdiB8IHBhcnRzW2ldKSk7XG4gICAgfVxuICAgIHhvcih7IHBhcnRzIH0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIaWdoTG93KHRoaXMucGFydHMubWFwKCh2LCBpKSA9PiB2IF4gcGFydHNbaV0pKTtcbiAgICB9XG4gICAgbm90KCkge1xuICAgICAgICByZXR1cm4gbmV3IEhpZ2hMb3codGhpcy5wYXJ0cy5tYXAoKHYpID0+IH52KSk7XG4gICAgfVxuICAgIGVxdWFscyh7IHBhcnRzIH0pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFydHMuZXZlcnkoKHYsIGkpID0+IHYgPT09IHBhcnRzW2ldKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9yIHRoZSBhdmVyYWdlIGNhc2UgdGhlIHN0cmluZyByZXByZXNlbnRhdGlvbiBpcyBwcm92aWRlZCwgYnV0XG4gICAgICogd2hlbiB3ZSBuZWVkIHRvIGNvbnZlcnQgaGlnaCBhbmQgbG93IHRvIHN0cmluZyB3ZSBqdXN0IGxldCB0aGVcbiAgICAgKiBzbG93ZXIgYmlnLWludGVnZXIgbGlicmFyeSBkbyBpdC5cbiAgICAgKi9cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RyICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0cjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhcnJheSA9IG5ldyBBcnJheShNQVhfQklHX0lOVCAvIDQpO1xuICAgICAgICB0aGlzLnBhcnRzLmZvckVhY2goKHZhbHVlLCBvZmZzZXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGhleCA9IHRvSGV4UmV2ZXJzZUFycmF5KHZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgICAgICAgICAgICBhcnJheVtpICsgb2Zmc2V0ICogNF0gPSBoZXhbNCAtIDEgLSBpXSB8fCAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuICh0aGlzLnN0ciA9IGJpZ0ludC5mcm9tQXJyYXkoYXJyYXksIDE2KS50b1N0cmluZygpKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b1N0cmluZygpO1xuICAgIH1cbn1cbmNvbnN0IFNVUFBPUlRTX0JJR0lOVCA9IGNoZWNrQnJvd3NlclN1cHBvcnRzQmlnSW50KCk7XG4vLyBQb2x5ZmlsbCB0b0pTT04gb24gQmlnSW50IGlmIG5lY2Vzc2FyeS5cbmlmIChTVVBQT1JUU19CSUdJTlQgJiYgQmlnSW50LnByb3RvdHlwZS50b0pTT04gPT0gbnVsbCkge1xuICAgIEJpZ0ludC5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b1N0cmluZygpO1xuICAgIH07XG59XG5jb25zdCBISUdIX0xPV19DQUNIRSA9IHt9O1xuY29uc3QgY29udmVydFRvQmlnRmxhZyA9IFNVUFBPUlRTX0JJR0lOVFxuICAgID8gZnVuY3Rpb24gY29udmVydFRvQmlnRmxhZ0JpZ0ludCh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gQmlnSW50KHZhbHVlKTtcbiAgICB9XG4gICAgOiBmdW5jdGlvbiBjb252ZXJ0VG9CaWdGbGFnSGlnaExvdyh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBIaWdoTG93KSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGVzZSB0eXBlIGFzc2VydGlvbnMgYXJlIHVnbHksIGJ1dCB0aGVyZSBkb2Vzbid0IHNlZW0gdG8gYmUgYVxuICAgICAgICAvLyBydW50aW1lIGNvc3RsZXNzIHdheSB0byBkbyBhIHR5cGUgYXNzZXJ0aW9uIGFib3ZlLlxuICAgICAgICBpZiAoSElHSF9MT1dfQ0FDSEVbdmFsdWVdICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBISUdIX0xPV19DQUNIRVt2YWx1ZV07XG4gICAgICAgIH1cbiAgICAgICAgSElHSF9MT1dfQ0FDSEVbdmFsdWVdID0gSGlnaExvdy5mcm9tU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIEhJR0hfTE9XX0NBQ0hFW3ZhbHVlXTtcbiAgICB9O1xuY29uc3QgRU1QVFlfRkxBRyA9IGNvbnZlcnRUb0JpZ0ZsYWcoMCk7XG5jb25zdCBmbGFnQW5kID0gU1VQUE9SVFNfQklHSU5UXG4gICAgPyBmdW5jdGlvbiBmbGFnQW5kQmlnSW50KGZpcnN0ID0gRU1QVFlfRkxBRywgc2Vjb25kID0gRU1QVFlfRkxBRykge1xuICAgICAgICByZXR1cm4gZmlyc3QgJiBzZWNvbmQ7XG4gICAgfVxuICAgIDogZnVuY3Rpb24gZmxhZ0FuZEhpZ2hMb3coZmlyc3QgPSBFTVBUWV9GTEFHLCBzZWNvbmQgPSBFTVBUWV9GTEFHKSB7XG4gICAgICAgIHJldHVybiBmaXJzdC5hbmQoc2Vjb25kKTtcbiAgICB9O1xuY29uc3QgZmxhZ09yID0gU1VQUE9SVFNfQklHSU5UXG4gICAgPyBmdW5jdGlvbiBmbGFnT3JCaWdJbnQoZmlyc3QgPSBFTVBUWV9GTEFHLCBzZWNvbmQgPSBFTVBUWV9GTEFHKSB7XG4gICAgICAgIHJldHVybiBmaXJzdCB8IHNlY29uZDtcbiAgICB9XG4gICAgOiBmdW5jdGlvbiBmbGFnT3JIaWdoTG93KGZpcnN0ID0gRU1QVFlfRkxBRywgc2Vjb25kID0gRU1QVFlfRkxBRykge1xuICAgICAgICByZXR1cm4gZmlyc3Qub3Ioc2Vjb25kKTtcbiAgICB9O1xuY29uc3QgZmxhZ1hvciA9IFNVUFBPUlRTX0JJR0lOVFxuICAgID8gZnVuY3Rpb24gZmxhZ1hvckJpZ0ludChmaXJzdCA9IEVNUFRZX0ZMQUcsIHNlY29uZCA9IEVNUFRZX0ZMQUcpIHtcbiAgICAgICAgcmV0dXJuIGZpcnN0IF4gc2Vjb25kO1xuICAgIH1cbiAgICA6IGZ1bmN0aW9uIGZsYWdYb3JIaWdoTG93KGZpcnN0ID0gRU1QVFlfRkxBRywgc2Vjb25kID0gRU1QVFlfRkxBRykge1xuICAgICAgICByZXR1cm4gZmlyc3QueG9yKHNlY29uZCk7XG4gICAgfTtcbmNvbnN0IGZsYWdOb3QgPSBTVVBQT1JUU19CSUdJTlRcbiAgICA/IGZ1bmN0aW9uIGZsYWdOb3RCaWdJbnQoZmlyc3QgPSBFTVBUWV9GTEFHKSB7XG4gICAgICAgIHJldHVybiB+Zmlyc3Q7XG4gICAgfVxuICAgIDogZnVuY3Rpb24gZmxhZ05vdEhpZ2hMb3coZmlyc3QgPSBFTVBUWV9GTEFHKSB7XG4gICAgICAgIHJldHVybiBmaXJzdC5ub3QoKTtcbiAgICB9O1xuY29uc3QgZmxhZ0VxdWFscyA9IFNVUFBPUlRTX0JJR0lOVFxuICAgID8gZnVuY3Rpb24gZmxhZ0VxdWFsc0JpZ0ludChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICAgIHJldHVybiBmaXJzdCA9PT0gc2Vjb25kO1xuICAgIH1cbiAgICA6IGZ1bmN0aW9uIGZsYWdFcXVhbHNIaWdoTG93KGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgaWYgKGZpcnN0ID09IG51bGwgfHwgc2Vjb25kID09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBlcWVxZXFcbiAgICAgICAgICAgIHJldHVybiBmaXJzdCA9PSBzZWNvbmQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpcnN0LmVxdWFscyhzZWNvbmQpO1xuICAgIH07XG5mdW5jdGlvbiBmbGFnT3JNdWx0aXBsZSguLi5mbGFncykge1xuICAgIGxldCByZXN1bHQgPSBmbGFnc1swXTtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IGZsYWdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJlc3VsdCA9IGZsYWdPcihyZXN1bHQsIGZsYWdzW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIGZsYWdIYXMoYmFzZSwgZmxhZykge1xuICAgIHJldHVybiBmbGFnRXF1YWxzKGZsYWdBbmQoYmFzZSwgZmxhZyksIGZsYWcpO1xufVxuZnVuY3Rpb24gZmxhZ0hhc0FueShiYXNlLCBmbGFnKSB7XG4gICAgcmV0dXJuICFmbGFnRXF1YWxzKGZsYWdBbmQoYmFzZSwgZmxhZyksIEVNUFRZX0ZMQUcpO1xufVxuZnVuY3Rpb24gZmxhZ0FkZChiYXNlLCBmbGFnKSB7XG4gICAgcmV0dXJuIGZsYWcgPT09IEVNUFRZX0ZMQUcgPyBiYXNlIDogZmxhZ09yKGJhc2UsIGZsYWcpO1xufVxuZnVuY3Rpb24gZmxhZ1JlbW92ZShiYXNlLCBmbGFnKSB7XG4gICAgcmV0dXJuIGZsYWcgPT09IEVNUFRZX0ZMQUcgPyBiYXNlIDogZmxhZ1hvcihiYXNlLCBmbGFnQW5kKGJhc2UsIGZsYWcpKTtcbn1cbmNvbnN0IGdldEZsYWcgPSBTVVBQT1JUU19CSUdJTlRcbiAgICA/IGZ1bmN0aW9uIGdldEZsYWdCaWdJbnQoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIEJpZ0ludCgxKSA8PCBCaWdJbnQoaW5kZXgpO1xuICAgIH1cbiAgICA6IGZ1bmN0aW9uIGdldEZsYWdIaWdoTG93KGluZGV4KSB7XG4gICAgICAgIHJldHVybiBIaWdoTG93LmZyb21CaXQoaW5kZXgpO1xuICAgIH07XG52YXIgQmlnRmxhZ1V0aWxzID0ge1xuICAgIGNvbWJpbmU6IGZsYWdPck11bHRpcGxlLFxuICAgIGFkZDogZmxhZ0FkZCxcbiAgICByZW1vdmU6IGZsYWdSZW1vdmUsXG4gICAgZmlsdGVyOiBmbGFnQW5kLFxuICAgIGludmVydDogZmxhZ05vdCxcbiAgICBoYXM6IGZsYWdIYXMsXG4gICAgaGFzQW55OiBmbGFnSGFzQW55LFxuICAgIGVxdWFsczogZmxhZ0VxdWFscyxcbiAgICBkZXNlcmlhbGl6ZTogY29udmVydFRvQmlnRmxhZyxcbiAgICBnZXRGbGFnOiBnZXRGbGFnLFxufTtcblxuZXhwb3J0IHsgQmlnRmxhZ1V0aWxzIGFzIGRlZmF1bHQgfTtcbiIsImltcG9ydCBCaWdGbGFnVXRpbHMgZnJvbSAnLi9CaWdGbGFnVXRpbHMubWpzJztcblxuZnVuY3Rpb24gY2FuKHBlcm1pc3Npb24sIHBlcm1pc3Npb25zKSB7XG4gICAgcmV0dXJuIEJpZ0ZsYWdVdGlscy5oYXMoQmlnRmxhZ1V0aWxzLmRlc2VyaWFsaXplKHBlcm1pc3Npb25zKSwgcGVybWlzc2lvbik7XG59XG52YXIgUGVybWlzc2lvblV0aWxzID0ge1xuICAgIGNhbixcbn07XG5cbmV4cG9ydCB7IFBlcm1pc3Npb25VdGlscyBhcyBkZWZhdWx0IH07XG4iLCJ2YXIgQ3VycmVuY3lDb2RlcztcbihmdW5jdGlvbiAoQ3VycmVuY3lDb2Rlcykge1xuICAgIEN1cnJlbmN5Q29kZXNbXCJBRURcIl0gPSBcImFlZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJBRk5cIl0gPSBcImFmblwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJBTExcIl0gPSBcImFsbFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJBTURcIl0gPSBcImFtZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJBTkdcIl0gPSBcImFuZ1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJBT0FcIl0gPSBcImFvYVwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJBUlNcIl0gPSBcImFyc1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJBVURcIl0gPSBcImF1ZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJBV0dcIl0gPSBcImF3Z1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJBWk5cIl0gPSBcImF6blwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJCQU1cIl0gPSBcImJhbVwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJCQkRcIl0gPSBcImJiZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJCRFRcIl0gPSBcImJkdFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJCR05cIl0gPSBcImJnblwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJCSERcIl0gPSBcImJoZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJCSUZcIl0gPSBcImJpZlwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJCTURcIl0gPSBcImJtZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJCTkRcIl0gPSBcImJuZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJCT0JcIl0gPSBcImJvYlwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJCT1ZcIl0gPSBcImJvdlwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJCUkxcIl0gPSBcImJybFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJCU0RcIl0gPSBcImJzZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJCVE5cIl0gPSBcImJ0blwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJCV1BcIl0gPSBcImJ3cFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJCWU5cIl0gPSBcImJ5blwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJCWVJcIl0gPSBcImJ5clwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJCWkRcIl0gPSBcImJ6ZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJDQURcIl0gPSBcImNhZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJDREZcIl0gPSBcImNkZlwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJDSEVcIl0gPSBcImNoZVwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJDSEZcIl0gPSBcImNoZlwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJDSFdcIl0gPSBcImNod1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJDTEZcIl0gPSBcImNsZlwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJDTFBcIl0gPSBcImNscFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJDTllcIl0gPSBcImNueVwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJDT1BcIl0gPSBcImNvcFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJDT1VcIl0gPSBcImNvdVwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJDUkNcIl0gPSBcImNyY1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJDVUNcIl0gPSBcImN1Y1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJDVVBcIl0gPSBcImN1cFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJDVkVcIl0gPSBcImN2ZVwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJDWktcIl0gPSBcImN6a1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJESkZcIl0gPSBcImRqZlwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJES0tcIl0gPSBcImRra1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJET1BcIl0gPSBcImRvcFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJEWkRcIl0gPSBcImR6ZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJFR1BcIl0gPSBcImVncFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJFUk5cIl0gPSBcImVyblwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJFVEJcIl0gPSBcImV0YlwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJFVVJcIl0gPSBcImV1clwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJGSkRcIl0gPSBcImZqZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJGS1BcIl0gPSBcImZrcFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJHQlBcIl0gPSBcImdicFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJHRUxcIl0gPSBcImdlbFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJHSFNcIl0gPSBcImdoc1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJHSVBcIl0gPSBcImdpcFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJHTURcIl0gPSBcImdtZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJHTkZcIl0gPSBcImduZlwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJHVFFcIl0gPSBcImd0cVwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJHWURcIl0gPSBcImd5ZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJIS0RcIl0gPSBcImhrZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJITkxcIl0gPSBcImhubFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJIUktcIl0gPSBcImhya1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJIVEdcIl0gPSBcImh0Z1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJIVUZcIl0gPSBcImh1ZlwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJJRFJcIl0gPSBcImlkclwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJJTFNcIl0gPSBcImlsc1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJJTlJcIl0gPSBcImluclwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJJUURcIl0gPSBcImlxZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJJUlJcIl0gPSBcImlyclwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJJU0tcIl0gPSBcImlza1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJKTURcIl0gPSBcImptZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJKT0RcIl0gPSBcImpvZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJKUFlcIl0gPSBcImpweVwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJLRVNcIl0gPSBcImtlc1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJLR1NcIl0gPSBcImtnc1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJLSFJcIl0gPSBcImtoclwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJLTUZcIl0gPSBcImttZlwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJLUFdcIl0gPSBcImtwd1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJLUldcIl0gPSBcImtyd1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJLV0RcIl0gPSBcImt3ZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJLWURcIl0gPSBcImt5ZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJLWlRcIl0gPSBcImt6dFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJMQUtcIl0gPSBcImxha1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJMQlBcIl0gPSBcImxicFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJMS1JcIl0gPSBcImxrclwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJMUkRcIl0gPSBcImxyZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJMU0xcIl0gPSBcImxzbFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJMVExcIl0gPSBcImx0bFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJMVkxcIl0gPSBcImx2bFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJMWURcIl0gPSBcImx5ZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJNQURcIl0gPSBcIm1hZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJNRExcIl0gPSBcIm1kbFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJNR0FcIl0gPSBcIm1nYVwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJNS0RcIl0gPSBcIm1rZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJNTUtcIl0gPSBcIm1ta1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJNTlRcIl0gPSBcIm1udFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJNT1BcIl0gPSBcIm1vcFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJNUk9cIl0gPSBcIm1yb1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJNVVJcIl0gPSBcIm11clwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJNVlJcIl0gPSBcIm12clwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJNV0tcIl0gPSBcIm13a1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJNWE5cIl0gPSBcIm14blwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJNWFZcIl0gPSBcIm14dlwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJNWVJcIl0gPSBcIm15clwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJNWk5cIl0gPSBcIm16blwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJOQURcIl0gPSBcIm5hZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJOR05cIl0gPSBcIm5nblwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJOSU9cIl0gPSBcIm5pb1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJOT0tcIl0gPSBcIm5va1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJOUFJcIl0gPSBcIm5wclwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJOWkRcIl0gPSBcIm56ZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJPTVJcIl0gPSBcIm9tclwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJQQUJcIl0gPSBcInBhYlwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJQRU5cIl0gPSBcInBlblwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJQR0tcIl0gPSBcInBna1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJQSFBcIl0gPSBcInBocFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJQS1JcIl0gPSBcInBrclwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJQTE5cIl0gPSBcInBsblwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJQWUdcIl0gPSBcInB5Z1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJRQVJcIl0gPSBcInFhclwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJST05cIl0gPSBcInJvblwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJSU0RcIl0gPSBcInJzZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJSVUJcIl0gPSBcInJ1YlwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJSV0ZcIl0gPSBcInJ3ZlwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJTQVJcIl0gPSBcInNhclwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJTQkRcIl0gPSBcInNiZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJTQ1JcIl0gPSBcInNjclwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJTREdcIl0gPSBcInNkZ1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJTRUtcIl0gPSBcInNla1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJTR0RcIl0gPSBcInNnZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJTSFBcIl0gPSBcInNocFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJTTExcIl0gPSBcInNsbFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJTT1NcIl0gPSBcInNvc1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJTUkRcIl0gPSBcInNyZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJTU1BcIl0gPSBcInNzcFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJTVERcIl0gPSBcInN0ZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJTVkNcIl0gPSBcInN2Y1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJTWVBcIl0gPSBcInN5cFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJTWkxcIl0gPSBcInN6bFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJUSEJcIl0gPSBcInRoYlwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJUSlNcIl0gPSBcInRqc1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJUTVRcIl0gPSBcInRtdFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJUTkRcIl0gPSBcInRuZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJUT1BcIl0gPSBcInRvcFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJUUllcIl0gPSBcInRyeVwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJUVERcIl0gPSBcInR0ZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJUV0RcIl0gPSBcInR3ZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJUWlNcIl0gPSBcInR6c1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJVQUhcIl0gPSBcInVhaFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJVR1hcIl0gPSBcInVneFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJVU0RcIl0gPSBcInVzZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJVU05cIl0gPSBcInVzblwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJVU1NcIl0gPSBcInVzc1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJVWUlcIl0gPSBcInV5aVwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJVWVVcIl0gPSBcInV5dVwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJVWlNcIl0gPSBcInV6c1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJWRUZcIl0gPSBcInZlZlwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJWTkRcIl0gPSBcInZuZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJWVVZcIl0gPSBcInZ1dlwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJXU1RcIl0gPSBcIndzdFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJYQUZcIl0gPSBcInhhZlwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJYQUdcIl0gPSBcInhhZ1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJYQVVcIl0gPSBcInhhdVwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJYQkFcIl0gPSBcInhiYVwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJYQkJcIl0gPSBcInhiYlwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJYQkNcIl0gPSBcInhiY1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJYQkRcIl0gPSBcInhiZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJYQ0RcIl0gPSBcInhjZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJYRFJcIl0gPSBcInhkclwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJYRlVcIl0gPSBcInhmdVwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJYT0ZcIl0gPSBcInhvZlwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJYUERcIl0gPSBcInhwZFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJYUEZcIl0gPSBcInhwZlwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJYUFRcIl0gPSBcInhwdFwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJYU1VcIl0gPSBcInhzdVwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJYVFNcIl0gPSBcInh0c1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJYVUFcIl0gPSBcInh1YVwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJZRVJcIl0gPSBcInllclwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJaQVJcIl0gPSBcInphclwiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJaTVdcIl0gPSBcInptd1wiO1xuICAgIEN1cnJlbmN5Q29kZXNbXCJaV0xcIl0gPSBcInp3bFwiO1xufSkoQ3VycmVuY3lDb2RlcyB8fCAoQ3VycmVuY3lDb2RlcyA9IHt9KSk7XG5jb25zdCBDdXJyZW5jeUV4cG9uZW50cyA9IHtcbiAgICBbQ3VycmVuY3lDb2Rlcy5BRURdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLkFGTl06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuQUxMXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5BTURdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLkFOR106IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuQU9BXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5BUlNdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLkFVRF06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuQVdHXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5BWk5dOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLkJBTV06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuQkJEXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5CRFRdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLkJHTl06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuQkhEXTogMyxcbiAgICBbQ3VycmVuY3lDb2Rlcy5CSUZdOiAwLFxuICAgIFtDdXJyZW5jeUNvZGVzLkJNRF06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuQk5EXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5CT0JdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLkJPVl06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuQlJMXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5CU0RdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLkJUTl06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuQldQXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5CWVJdOiAwLFxuICAgIFtDdXJyZW5jeUNvZGVzLkJZTl06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuQlpEXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5DQURdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLkNERl06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuQ0hFXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5DSEZdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLkNIV106IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuQ0xGXTogMCxcbiAgICBbQ3VycmVuY3lDb2Rlcy5DTFBdOiAwLFxuICAgIFtDdXJyZW5jeUNvZGVzLkNOWV06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuQ09QXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5DT1VdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLkNSQ106IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuQ1VDXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5DVVBdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLkNWRV06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuQ1pLXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5ESkZdOiAwLFxuICAgIFtDdXJyZW5jeUNvZGVzLkRLS106IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuRE9QXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5EWkRdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLkVHUF06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuRVJOXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5FVEJdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLkVVUl06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuRkpEXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5GS1BdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLkdCUF06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuR0VMXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5HSFNdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLkdJUF06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuR01EXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5HTkZdOiAwLFxuICAgIFtDdXJyZW5jeUNvZGVzLkdUUV06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuR1lEXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5IS0RdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLkhOTF06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuSFJLXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5IVEddOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLkhVRl06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuSURSXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5JTFNdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLklOUl06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuSVFEXTogMyxcbiAgICBbQ3VycmVuY3lDb2Rlcy5JUlJdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLklTS106IDAsXG4gICAgW0N1cnJlbmN5Q29kZXMuSk1EXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5KT0RdOiAzLFxuICAgIFtDdXJyZW5jeUNvZGVzLkpQWV06IDAsXG4gICAgW0N1cnJlbmN5Q29kZXMuS0VTXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5LR1NdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLktIUl06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuS01GXTogMCxcbiAgICBbQ3VycmVuY3lDb2Rlcy5LUFddOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLktSV106IDAsXG4gICAgW0N1cnJlbmN5Q29kZXMuS1dEXTogMyxcbiAgICBbQ3VycmVuY3lDb2Rlcy5LWURdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLktaVF06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuTEFLXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5MQlBdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLkxLUl06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuTFJEXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5MU0xdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLkxUTF06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuTFZMXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5MWURdOiAzLFxuICAgIFtDdXJyZW5jeUNvZGVzLk1BRF06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuTURMXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5NR0FdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLk1LRF06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuTU1LXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5NTlRdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLk1PUF06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuTVJPXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5NVVJdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLk1WUl06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuTVdLXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5NWE5dOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLk1YVl06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuTVlSXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5NWk5dOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLk5BRF06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuTkdOXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5OSU9dOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLk5PS106IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuTlBSXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5OWkRdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLk9NUl06IDMsXG4gICAgW0N1cnJlbmN5Q29kZXMuUEFCXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5QRU5dOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLlBHS106IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuUEhQXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5QS1JdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLlBMTl06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuUFlHXTogMCxcbiAgICBbQ3VycmVuY3lDb2Rlcy5RQVJdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLlJPTl06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuUlNEXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5SVUJdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLlJXRl06IDAsXG4gICAgW0N1cnJlbmN5Q29kZXMuU0FSXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5TQkRdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLlNDUl06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuU0RHXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5TRUtdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLlNHRF06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuU0hQXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5TTExdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLlNPU106IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuU1JEXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5TU1BdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLlNURF06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuU1ZDXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5TWVBdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLlNaTF06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuVEhCXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5USlNdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLlRNVF06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuVE5EXTogMyxcbiAgICBbQ3VycmVuY3lDb2Rlcy5UT1BdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLlRSWV06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuVFREXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5UV0RdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLlRaU106IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuVUFIXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5VR1hdOiAwLFxuICAgIFtDdXJyZW5jeUNvZGVzLlVTRF06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuVVNOXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5VU1NdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLlVZSV06IDAsXG4gICAgW0N1cnJlbmN5Q29kZXMuVVlVXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5VWlNdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLlZFRl06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuVk5EXTogMCxcbiAgICBbQ3VycmVuY3lDb2Rlcy5WVVZdOiAwLFxuICAgIFtDdXJyZW5jeUNvZGVzLldTVF06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuWEFGXTogMCxcbiAgICBbQ3VycmVuY3lDb2Rlcy5YQUddOiAwLFxuICAgIFtDdXJyZW5jeUNvZGVzLlhBVV06IDAsXG4gICAgW0N1cnJlbmN5Q29kZXMuWEJBXTogMCxcbiAgICBbQ3VycmVuY3lDb2Rlcy5YQkJdOiAwLFxuICAgIFtDdXJyZW5jeUNvZGVzLlhCQ106IDAsXG4gICAgW0N1cnJlbmN5Q29kZXMuWEJEXTogMCxcbiAgICBbQ3VycmVuY3lDb2Rlcy5YQ0RdOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLlhEUl06IDAsXG4gICAgW0N1cnJlbmN5Q29kZXMuWEZVXTogMCxcbiAgICBbQ3VycmVuY3lDb2Rlcy5YT0ZdOiAwLFxuICAgIFtDdXJyZW5jeUNvZGVzLlhQRF06IDAsXG4gICAgW0N1cnJlbmN5Q29kZXMuWFBGXTogMCxcbiAgICBbQ3VycmVuY3lDb2Rlcy5YUFRdOiAwLFxuICAgIFtDdXJyZW5jeUNvZGVzLlhTVV06IDAsXG4gICAgW0N1cnJlbmN5Q29kZXMuWFRTXTogMCxcbiAgICBbQ3VycmVuY3lDb2Rlcy5YVUFdOiAwLFxuICAgIFtDdXJyZW5jeUNvZGVzLllFUl06IDIsXG4gICAgW0N1cnJlbmN5Q29kZXMuWkFSXTogMixcbiAgICBbQ3VycmVuY3lDb2Rlcy5aTVddOiAyLFxuICAgIFtDdXJyZW5jeUNvZGVzLlpXTF06IDIsXG59O1xuXG5leHBvcnQgeyBDdXJyZW5jeUNvZGVzLCBDdXJyZW5jeUV4cG9uZW50cyB9O1xuIiwiaW1wb3J0IERlY2ltYWwgZnJvbSAnLi4vbGliL2RlY2ltYWwuanMtbGlnaHQvZGVjaW1hbC5tanMnO1xuaW1wb3J0IHsgQ3VycmVuY3lFeHBvbmVudHMgfSBmcm9tICcuL1ByaWNlQ29uc3RhbnRzLm1qcyc7XG5cbmZ1bmN0aW9uIGZvcm1hdFByaWNlKHByaWNlLCBsb2NhbGUgPSAnZW4tVVMnKSB7XG4gICAgY29uc3QgeyBhbW91bnQsIGN1cnJlbmN5IH0gPSBwcmljZTtcbiAgICBjb25zdCBmb3JtYXR0ZXIgPSBJbnRsLk51bWJlckZvcm1hdChsb2NhbGUsIHsgc3R5bGU6ICdjdXJyZW5jeScsIGN1cnJlbmN5IH0pO1xuICAgIHJldHVybiBmb3JtYXR0ZXIuZm9ybWF0KGNvbnZlcnRUb01ham9yQ3VycmVuY3lVbml0cyhhbW91bnQsIGN1cnJlbmN5KSk7XG59XG5mdW5jdGlvbiBjb252ZXJ0VG9NYWpvckN1cnJlbmN5VW5pdHMobWlub3JVbml0VmFsdWUsIGN1cnJlbmN5KSB7XG4gICAgY29uc3QgZXhwb25lbnQgPSBDdXJyZW5jeUV4cG9uZW50c1tjdXJyZW5jeV07XG4gICAgaWYgKGV4cG9uZW50ID09IG51bGwpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIGN1cnJlbmN5ICR7Y3VycmVuY3l9YCk7XG4gICAgICAgIHJldHVybiBtaW5vclVuaXRWYWx1ZTtcbiAgICB9XG4gICAgY29uc3QgbWlub3JVbml0ID0gbmV3IERlY2ltYWwobWlub3JVbml0VmFsdWUpO1xuICAgIHJldHVybiBtaW5vclVuaXQuZGl2aWRlZEJ5KDEwICoqIGV4cG9uZW50KS50b051bWJlcigpO1xufVxudmFyIFByaWNlVXRpbHMgPSB7XG4gICAgZm9ybWF0UHJpY2UsXG59O1xuXG5leHBvcnQgeyBQcmljZVV0aWxzIGFzIGRlZmF1bHQgfTtcbiIsIi8qKlxuICogQXNzZXRzIHggaXMgc3RhdGljYWxseSB1bnJlYWNoYWJsZSBhdCBidWlsZC10aW1lLFxuICogYW5kIHRocm93cyBhdCBydW50aW1lIGlmIGRhdGEgaXMgZHluYW1pYy5cbiAqL1xuZnVuY3Rpb24gYXNzZXJ0VW5yZWFjaGFibGUoX3gsIHJ1bnRpbWVFcnJvcikge1xuICAgIHRocm93IHJ1bnRpbWVFcnJvcjtcbn1cblxuZXhwb3J0IHsgYXNzZXJ0VW5yZWFjaGFibGUgYXMgZGVmYXVsdCB9O1xuIiwiaW1wb3J0IHsgbGl0ZXJhbCBhcyBsaXRlcmFsVHlwZSB9IGZyb20gJy4uL2xpYi96b2QvbGliL2luZGV4Lm1qcyc7XG5pbXBvcnQgeyBSZWNlaXZlRnJhbWVQYXlsb2FkIH0gZnJvbSAnLi4vc2NoZW1hL2NvbW1vbi5tanMnO1xuaW1wb3J0IHsgU2NoZW1hcyB9IGZyb20gJy4uL2dlbmVyYXRlZC9zY2hlbWFzLm1qcyc7XG5cbmZ1bmN0aW9uIGNvbW1hbmRGYWN0b3J5KHNlbmRDb21tYW5kLCBjbWQsIHJlc3BvbnNlLCB0cmFuc2ZlclRyYW5zZm9ybSA9ICgpID0+IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IHBheWxvYWQgPSBSZWNlaXZlRnJhbWVQYXlsb2FkLmV4dGVuZCh7XG4gICAgICAgIGNtZDogbGl0ZXJhbFR5cGUoY21kKSxcbiAgICAgICAgZGF0YTogcmVzcG9uc2UsXG4gICAgfSk7XG4gICAgcmV0dXJuIGFzeW5jIChhcmdzKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlcGx5ID0gYXdhaXQgc2VuZENvbW1hbmQoeyBjbWQsIGFyZ3MsIHRyYW5zZmVyOiB0cmFuc2ZlclRyYW5zZm9ybShhcmdzKSB9KTtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gcGF5bG9hZC5wYXJzZShyZXBseSk7XG4gICAgICAgIHJldHVybiBwYXJzZWQuZGF0YTtcbiAgICB9O1xufVxuZnVuY3Rpb24gc2NoZW1hQ29tbWFuZEZhY3RvcnkoY21kLCB0cmFuc2ZlclRyYW5zZm9ybSA9ICgpID0+IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gU2NoZW1hc1tjbWRdLnJlc3BvbnNlO1xuICAgIGNvbnN0IHBheWxvYWQgPSBSZWNlaXZlRnJhbWVQYXlsb2FkLmV4dGVuZCh7XG4gICAgICAgIGNtZDogbGl0ZXJhbFR5cGUoY21kKSxcbiAgICAgICAgZGF0YTogcmVzcG9uc2UsXG4gICAgfSk7XG4gICAgcmV0dXJuIChzZW5kQ29tbWFuZCkgPT4gYXN5bmMgKGFyZ3MpID0+IHtcbiAgICAgICAgY29uc3QgcmVwbHkgPSBhd2FpdCBzZW5kQ29tbWFuZCh7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gTWVyZ2UgY29tbWFuZHNcbiAgICAgICAgICAgIGNtZDogY21kLFxuICAgICAgICAgICAgYXJncyxcbiAgICAgICAgICAgIHRyYW5zZmVyOiB0cmFuc2ZlclRyYW5zZm9ybShhcmdzKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IHBheWxvYWQucGFyc2UocmVwbHkpO1xuICAgICAgICByZXR1cm4gcGFyc2VkLmRhdGE7XG4gICAgfTtcbn1cblxuZXhwb3J0IHsgY29tbWFuZEZhY3RvcnksIHNjaGVtYUNvbW1hbmRGYWN0b3J5IH07XG4iLCJpbXBvcnQgeyBsaXRlcmFsIGFzIGxpdGVyYWxUeXBlIH0gZnJvbSAnLi4vbGliL3pvZC9saWIvaW5kZXgubWpzJztcbmltcG9ydCB7IFJQQ0Vycm9yQ29kZXMgfSBmcm9tICcuLi9Db25zdGFudHMubWpzJztcbmltcG9ydCB7IFJlY2VpdmVGcmFtZVBheWxvYWQgfSBmcm9tICcuLi9zY2hlbWEvY29tbW9uLm1qcyc7XG5cbi8qKlxuICogQGFyZ3MgLSB0aGUgcHJpbWFyeSBhcmdzIHRvIHNlbmQgd2l0aCB0aGUgY29tbWFuZC5cbiAqIEBmYWxsYmFja0FyZ3MgLSB0aGUgYXJncyB0byB0cnkgdGhlIGNvbW1hbmQgd2l0aCBpbiB0aGUgY2FzZSB3aGVyZSBhbiBvbGQgRGlzY29yZFxuICogIGNsaWVudCBkb2Vzbid0IHN1cHBvcnQgb25lIG9mIHRoZSBuZXcgYXJncy5cbiAqL1xuZnVuY3Rpb24gY29tcGF0Q29tbWFuZEZhY3RvcnkoeyBzZW5kQ29tbWFuZCwgY21kLCByZXNwb25zZSwgZmFsbGJhY2tUcmFuc2Zvcm0sIHRyYW5zZmVyVHJhbnNmb3JtID0gKCkgPT4gdW5kZWZpbmVkLCB9KSB7XG4gICAgY29uc3QgcGF5bG9hZCA9IFJlY2VpdmVGcmFtZVBheWxvYWQuZXh0ZW5kKHtcbiAgICAgICAgY21kOiBsaXRlcmFsVHlwZShjbWQpLFxuICAgICAgICBkYXRhOiByZXNwb25zZSxcbiAgICB9KTtcbiAgICByZXR1cm4gYXN5bmMgKGFyZ3MpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcGx5ID0gYXdhaXQgc2VuZENvbW1hbmQoeyBjbWQsIGFyZ3MsIHRyYW5zZmVyOiB0cmFuc2ZlclRyYW5zZm9ybShhcmdzKSB9KTtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IHBheWxvYWQucGFyc2UocmVwbHkpO1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlZC5kYXRhO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgaWYgKGVycm9yLmNvZGUgPT09IFJQQ0Vycm9yQ29kZXMuSU5WQUxJRF9QQVlMT0FEKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmFsbGJhY2tBcmdzID0gZmFsbGJhY2tUcmFuc2Zvcm0oYXJncyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVwbHkgPSBhd2FpdCBzZW5kQ29tbWFuZCh7IGNtZCwgYXJnczogZmFsbGJhY2tBcmdzLCB0cmFuc2ZlcjogdHJhbnNmZXJUcmFuc2Zvcm0oZmFsbGJhY2tBcmdzKSB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZWQgPSBwYXlsb2FkLnBhcnNlKHJlcGx5KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkLmRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG59XG5cbmV4cG9ydCB7IGNvbXBhdENvbW1hbmRGYWN0b3J5IGFzIGRlZmF1bHQgfTtcbiIsImNvbnN0IGNvbnNvbGVMZXZlbHMgPSBbJ2xvZycsICd3YXJuJywgJ2RlYnVnJywgJ2luZm8nLCAnZXJyb3InXTtcbmZ1bmN0aW9uIHdyYXBDb25zb2xlTWV0aG9kKGNvbnNvbGUsIGxldmVsLCBjYWxsYmFjaykge1xuICAgIGNvbnN0IF9jb25zb2xlTWV0aG9kID0gY29uc29sZVtsZXZlbF07XG4gICAgY29uc3QgX2NvbnNvbGUgPSBjb25zb2xlO1xuICAgIGlmICghX2NvbnNvbGVNZXRob2QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zb2xlW2xldmVsXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3QgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9ICcnICsgYXJncy5qb2luKCcgJyk7XG4gICAgICAgIGNhbGxiYWNrKGxldmVsLCBtZXNzYWdlKTtcbiAgICAgICAgX2NvbnNvbGVNZXRob2QuYXBwbHkoX2NvbnNvbGUsIGFyZ3MpO1xuICAgIH07XG59XG5cbmV4cG9ydCB7IGNvbnNvbGVMZXZlbHMsIHdyYXBDb25zb2xlTWV0aG9kIH07XG4iLCJmdW5jdGlvbiBnZXREZWZhdWx0U2RrQ29uZmlndXJhdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBkaXNhYmxlQ29uc29sZUxvZ092ZXJyaWRlOiBmYWxzZSxcbiAgICB9O1xufVxuXG5leHBvcnQgeyBnZXREZWZhdWx0U2RrQ29uZmlndXJhdGlvbiBhcyBkZWZhdWx0IH07XG4iLCJpbXBvcnQgeyBfX3Jlc3QgfSBmcm9tICcuLi9saWIvdHNsaWIvdHNsaWIuZXM2Lm1qcyc7XG5pbXBvcnQgeyBhYnNvbHV0ZVVSTCwgUFJPWFlfUFJFRklYLCBtYXRjaEFuZFJld3JpdGVVUkwgfSBmcm9tICcuL3VybC5tanMnO1xuXG5mdW5jdGlvbiBwYXRjaFVybE1hcHBpbmdzKG1hcHBpbmdzLCB7IHBhdGNoRmV0Y2ggPSB0cnVlLCBwYXRjaFdlYlNvY2tldCA9IHRydWUsIHBhdGNoWGhyID0gdHJ1ZSwgcGF0Y2hTcmNBdHRyaWJ1dGVzID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgLy8gQmFpbCBvdXQgaWYgd2UncmUgbm90IGluIGEgYnJvd3NlclxuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJylcbiAgICAgICAgcmV0dXJuO1xuICAgIGlmIChwYXRjaEZldGNoKSB7XG4gICAgICAgIGNvbnN0IGZldGNoSW1wbCA9IHdpbmRvdy5mZXRjaDtcbiAgICAgICAgLy8gZmV0Y2ggaXMgYSBkdXBsZXgsIGJ1dCB0aGlzIGlzIGNvbnNpc3RlbnRcbiAgICAgICAgd2luZG93LmZldGNoID0gZnVuY3Rpb24gKGlucHV0LCBpbml0KSB7XG4gICAgICAgICAgICAvLyBJZiBmZXRjaCBoYXMgUmVxdWVzdCBhcyBpbnB1dCwgd2UgbmVlZCB0byByZXNvbHZlIGFueSBzdHJlYW1cbiAgICAgICAgICAgIC8vIGJlZm9yZSB3ZSBjcmVhdGUgYSBuZXcgcmVxdWVzdCB3aXRoIHRoZSBtYXBwZWQgdXJsXG4gICAgICAgICAgICBpZiAoaW5wdXQgaW5zdGFuY2VvZiBSZXF1ZXN0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VXJsID0gYXR0ZW1wdFJlbWFwKHsgdXJsOiBhYnNvbHV0ZVVSTChpbnB1dC51cmwpLCBtYXBwaW5ncyB9KTtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgICAgICAgICAgICAgY29uc3QgX2EgPSAoaW5pdCAhPT0gbnVsbCAmJiBpbml0ICE9PSB2b2lkIDAgPyBpbml0IDoge30pLCBuZXdJbml0ID0gX19yZXN0KF9hLCBbXCJ1cmxcIl0pO1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKFJlcXVlc3QucHJvdG90eXBlKS5mb3JFYWNoKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09ICd1cmwnKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW5pdFt2YWx1ZV0gPSBpbnB1dFt2YWx1ZV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFJlbWFwcGluZyBmZXRjaCByZXF1ZXN0IGtleSBcIiR7dmFsdWV9XCIgZmFpbGVkYCwgZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LmJsb2IoKS50aGVuKChibG9iKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0Lm1ldGhvZC50b1VwcGVyQ2FzZSgpICE9PSAnSEVBRCcgJiYgaW5wdXQubWV0aG9kLnRvVXBwZXJDYXNlKCkgIT09ICdHRVQnICYmIGJsb2Iuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW5pdC5ib2R5ID0gYmxvYjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmZXRjaEltcGwobmV3IFJlcXVlc3QobmV3VXJsLCBuZXdJbml0KSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBBc3N1bWluZyBhIGdlbmVyaWMgdXJsIG9yIHN0cmluZ1xuICAgICAgICAgICAgY29uc3QgcmVtYXBwZWQgPSBhdHRlbXB0UmVtYXAoeyB1cmw6IGlucHV0IGluc3RhbmNlb2YgVVJMID8gaW5wdXQgOiBhYnNvbHV0ZVVSTChpbnB1dCksIG1hcHBpbmdzIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGZldGNoSW1wbChyZW1hcHBlZCwgaW5pdCk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChwYXRjaFdlYlNvY2tldCkge1xuICAgICAgICBjbGFzcyBXZWJTb2NrZXRQcm94eSBleHRlbmRzIFdlYlNvY2tldCB7XG4gICAgICAgICAgICBjb25zdHJ1Y3Rvcih1cmwsIHByb3RvY29scykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFwcGVkID0gYXR0ZW1wdFJlbWFwKHsgdXJsOiB1cmwgaW5zdGFuY2VvZiBVUkwgPyB1cmwgOiBhYnNvbHV0ZVVSTCh1cmwpLCBtYXBwaW5ncyB9KTtcbiAgICAgICAgICAgICAgICBzdXBlcihyZW1hcHBlZCwgcHJvdG9jb2xzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB3aW5kb3cuV2ViU29ja2V0ID0gV2ViU29ja2V0UHJveHk7XG4gICAgfVxuICAgIGlmIChwYXRjaFhocikge1xuICAgICAgICBjb25zdCBvcGVuSW1wbCA9IFhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5vcGVuO1xuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gdGhlIHRzIGludGVyZmFjZSBleHBvcnRzIHR3byAnb3BlbicgbWV0aG9kc1xuICAgICAgICBYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uIChtZXRob2QsIHVybCwgYXN5bmMsIHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgICAgICAgY29uc3QgcmVtYXBwZWQgPSBhdHRlbXB0UmVtYXAoeyB1cmw6IGFic29sdXRlVVJMKHVybCksIG1hcHBpbmdzIH0pO1xuICAgICAgICAgICAgb3BlbkltcGwuYXBwbHkodGhpcywgW21ldGhvZCwgcmVtYXBwZWQsIGFzeW5jLCB1c2VybmFtZSwgcGFzc3dvcmRdKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKHBhdGNoU3JjQXR0cmlidXRlcykge1xuICAgICAgICBjb25zdCBjYWxsYmFjayA9IGZ1bmN0aW9uIChtdXRhdGlvbnNMaXN0KSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG11dGF0aW9uIG9mIG11dGF0aW9uc0xpc3QpIHtcbiAgICAgICAgICAgICAgICBpZiAobXV0YXRpb24udHlwZSA9PT0gJ2F0dHJpYnV0ZXMnICYmIG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPT09ICdzcmMnKSB7XG4gICAgICAgICAgICAgICAgICAgIGF0dGVtcHRTZXROb2RlU3JjKG11dGF0aW9uLnRhcmdldCwgbWFwcGluZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtdXRhdGlvbi50eXBlID09PSAnY2hpbGRMaXN0Jykge1xuICAgICAgICAgICAgICAgICAgICBtdXRhdGlvbi5hZGRlZE5vZGVzLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dGVtcHRTZXROb2RlU3JjKG5vZGUsIG1hcHBpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZWx5UmVtYXBDaGlsZE5vZGVzKG5vZGUsIG1hcHBpbmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGNhbGxiYWNrKTtcbiAgICAgICAgY29uc3QgY29uZmlnID0ge1xuICAgICAgICAgICAgYXR0cmlidXRlRmlsdGVyOiBbJ3NyYyddLFxuICAgICAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgICAgICAgc3VidHJlZTogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh3aW5kb3cuZG9jdW1lbnQsIGNvbmZpZyk7XG4gICAgICAgIHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbc3JjXScpLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICAgIGF0dGVtcHRTZXROb2RlU3JjKG5vZGUsIG1hcHBpbmdzKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gcmVjdXJzaXZlbHlSZW1hcENoaWxkTm9kZXMobm9kZSwgbWFwcGluZ3MpIHtcbiAgICBpZiAobm9kZS5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgICAgbm9kZS5jaGlsZE5vZGVzLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICAgICAgICBhdHRlbXB0U2V0Tm9kZVNyYyhjaGlsZCwgbWFwcGluZ3MpO1xuICAgICAgICAgICAgcmVjdXJzaXZlbHlSZW1hcENoaWxkTm9kZXMoY2hpbGQsIG1hcHBpbmdzKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gYXR0ZW1wdFNldE5vZGVTcmMobm9kZSwgbWFwcGluZ3MpIHtcbiAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmIG5vZGUuaGFzQXR0cmlidXRlKCdzcmMnKSkge1xuICAgICAgICBjb25zdCByYXdTcmMgPSBub2RlLmdldEF0dHJpYnV0ZSgnc3JjJyk7XG4gICAgICAgIGNvbnN0IHVybCA9IGFic29sdXRlVVJMKHJhd1NyYyAhPT0gbnVsbCAmJiByYXdTcmMgIT09IHZvaWQgMCA/IHJhd1NyYyA6ICcnKTtcbiAgICAgICAgaWYgKHVybC5ob3N0ID09PSB3aW5kb3cubG9jYXRpb24uaG9zdClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgaWYgKG5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnc2NyaXB0Jykge1xuICAgICAgICAgICAgLy8gU2NyaXB0cyBhcmUgYSBzcGVjaWFsIGNhc2UsIGFuZCBuZWVkIHRvIGJlIHdob2xseSByZWNyZWF0ZWQgc2luY2VcbiAgICAgICAgICAgIC8vIG1vZGlmeWluZyBhIHNjcmlwdCB0YWcgZG9lc24ndCByZWZldGNoLlxuICAgICAgICAgICAgYXR0ZW1wdFJlY3JlYXRlU2NyaXB0Tm9kZShub2RlLCB7IHVybCwgbWFwcGluZ3MgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBuZXdTcmMgPSBhdHRlbXB0UmVtYXAoeyB1cmwsIG1hcHBpbmdzIH0pLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAvLyBPbmx5IGFwcGx5IHRoZSByZW1hcHBpbmcgaWYgd2UgYWN0dWFsbHkgcmVtYXBwZWQgdGhlIHZhbHVlXG4gICAgICAgICAgICBpZiAobmV3U3JjICE9PSByYXdTcmMpIHtcbiAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZSgnc3JjJywgbmV3U3JjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGF0dGVtcHRSZWNyZWF0ZVNjcmlwdE5vZGUobm9kZSwgeyB1cmwsIG1hcHBpbmdzIH0pIHtcbiAgICBjb25zdCBuZXdVcmwgPSBhdHRlbXB0UmVtYXAoeyB1cmwsIG1hcHBpbmdzIH0pO1xuICAgIGlmICh1cmwudG9TdHJpbmcoKSAhPT0gbmV3VXJsLnRvU3RyaW5nKCkpIHtcbiAgICAgICAgLy8gTm90ZTogU2NyaXB0IHRhZ3MgY2Fubm90IGJlIGR1cGxpY2F0ZWQgdmlhIGBub2RlLmNsb25lKClgIGJlY2F1c2UgdGhlaXIgaW50ZXJuYWwgJ2FscmVhZHkgc3RhcnRlZCdcbiAgICAgICAgLy8gc3RhdGUgcHJldmVudHMgdGhlIG5ldyBvbmUgZnJvbSBiZWluZyBmZXRjaGVkLiBXZSBtdXN0IG1hbnVhbGx5IHJlY3JlYXRlIHRoZSBkdXBsaWNhdGUgdGFnIGluc3RlYWQuXG4gICAgICAgIGNvbnN0IG5ld05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5vZGUudGFnTmFtZSk7XG4gICAgICAgIG5ld05vZGUuaW5uZXJIVE1MID0gbm9kZS5pbm5lckhUTUw7XG4gICAgICAgIGZvciAoY29uc3QgYXR0ciBvZiBub2RlLmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIG5ld05vZGUuc2V0QXR0cmlidXRlKGF0dHIubmFtZSwgYXR0ci52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgbmV3Tm9kZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGF0dGVtcHRSZW1hcCh7IHVybCwgbWFwcGluZ3MgfSkudG9TdHJpbmcoKSk7XG4gICAgICAgIG5vZGUuYWZ0ZXIobmV3Tm9kZSk7XG4gICAgICAgIG5vZGUucmVtb3ZlKCk7XG4gICAgfVxufVxuZnVuY3Rpb24gYXR0ZW1wdFJlbWFwKHsgdXJsLCBtYXBwaW5ncyB9KSB7XG4gICAgY29uc3QgbmV3VVJMID0gbmV3IFVSTCh1cmwudG9TdHJpbmcoKSk7XG4gICAgaWYgKChuZXdVUkwuaG9zdG5hbWUuaW5jbHVkZXMoJ2Rpc2NvcmRzYXlzLmNvbScpIHx8IG5ld1VSTC5ob3N0bmFtZS5pbmNsdWRlcygnZGlzY29yZHNlei5jb20nKSkgJiZcbiAgICAgICAgLy8gT25seSBhcHBseSBwcm94eSBwcmVmaXggb25jZVxuICAgICAgICAhbmV3VVJMLnBhdGhuYW1lLnN0YXJ0c1dpdGgoUFJPWFlfUFJFRklYKSkge1xuICAgICAgICBuZXdVUkwucGF0aG5hbWUgPSBQUk9YWV9QUkVGSVggKyBuZXdVUkwucGF0aG5hbWU7XG4gICAgfVxuICAgIGZvciAoY29uc3QgbWFwcGluZyBvZiBtYXBwaW5ncykge1xuICAgICAgICBjb25zdCBtYXBwZWQgPSBtYXRjaEFuZFJld3JpdGVVUkwoe1xuICAgICAgICAgICAgb3JpZ2luYWxVUkw6IG5ld1VSTCxcbiAgICAgICAgICAgIHByZWZpeDogbWFwcGluZy5wcmVmaXgsXG4gICAgICAgICAgICB0YXJnZXQ6IG1hcHBpbmcudGFyZ2V0LFxuICAgICAgICAgICAgcHJlZml4SG9zdDogd2luZG93LmxvY2F0aW9uLmhvc3QsXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAobWFwcGVkICE9IG51bGwgJiYgKG1hcHBlZCA9PT0gbnVsbCB8fCBtYXBwZWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1hcHBlZC50b1N0cmluZygpKSAhPT0gdXJsLnRvU3RyaW5nKCkpIHtcbiAgICAgICAgICAgIHJldHVybiBtYXBwZWQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ld1VSTDtcbn1cblxuZXhwb3J0IHsgYXR0ZW1wdFJlbWFwLCBwYXRjaFVybE1hcHBpbmdzIH07XG4iLCJjb25zdCBQUk9YWV9QUkVGSVggPSAnLy5wcm94eSc7XG4vKipcbiAqIENyZWF0ZXMgYSByZWd1bGFyIGV4cHJlc3Npb24gZnJvbSBhIHRhcmdldCBzdHJpbmcuIFRoZSB0YXJnZXQgc3RyaW5nXG4gKiBtYXkgY29udGFpbiBge25hbWV9YCB0b2tlbnMgd2hpY2ggd2lsbCBlbmQgdXAgYmVpbmcgdHJhbnNsYXRlZCB0b1xuICogYSBuYW1lZCBncm91cCBtYXRjaCBmb3IgYSBzZXJpZXMgb2Ygd29yZCBjaGFyYWN0ZXJzIHdpdGggdGhlIGdyb3VwIG5hbWVkIGBuYW1lYFxuICogVGhlIHN1YnN0aXR1dGlvbiBwYXR0ZXJuIGlzIHthLXp9IGJlY2F1c2UgdGhlIG5hbWVkIGdyb3VwcyBtdXN0IGJlIHZhbGlkIEpTIGlkZW50aWZpZXJzLFxuICogbWFraW5nIGl0ZW1zIGxpa2UgezB9IGludmFsaWQuXG4gKlxuICogQHJldHVybnMgYSBSZWdFeHAgb2JqZWN0XG4gKiovXG5jb25zdCBTVUJTVElUVVRJT05fUkVHRVggPSAvXFx7KFthLXpdKylcXH0vZztcbmZ1bmN0aW9uIHJlZ2V4RnJvbVRhcmdldCh0YXJnZXQpIHtcbiAgICBjb25zdCByZWdleFN0cmluZyA9IHRhcmdldC5yZXBsYWNlKFNVQlNUSVRVVElPTl9SRUdFWCwgKG1hdGNoLCBuYW1lKSA9PiBgKD88JHtuYW1lfT5bXFxcXHctXSspYCk7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYCR7cmVnZXhTdHJpbmd9KC98JClgKTtcbn1cbi8qKlxuICpcbiAqIEF0dGVtcHRzIHRvIG1hcCB0aGUgYWN0dWFsIHVybCAoaS5lLiBnb29nbGUuY29tKSB0byBhIHVybCBwYXRoLCBwZXIgdGhlIHVybFxuICogbWFwcGluZ3Mgc2V0IHVwIGluIHRoZSBlbWJlZGRlZCBhcHBsaWNhdGlvbi4gSWYgdGhlIHRhcmdldCBjb250YWlucyBge2Zvb31gXG4gKiB0b2tlbnMsIHRoZXkgd2lsbCBiZSByZXBsYWNlIHdpdGggdGhlIHZhbHVlcyBjb250YWluZWQgaW4gdGhlIG9yaWdpbmFsIFVSTCxcbiAqIHZpYSB0aGUgcGF0dGVybiBkZXNjcmliZWQgaW4gdGhlIHByZWZpeFxuICpcbiAqIEByZXR1cm5zICBudWxsIGlmIFVSTCBkb2Vzbid0IG1hdGNoIHByZWZpeCwgb3RoZXJ3aXNlIHJldHVybiByZXdyaXR0ZW4gVVJMXG4gKi9cbmZ1bmN0aW9uIG1hdGNoQW5kUmV3cml0ZVVSTCh7IG9yaWdpbmFsVVJMLCBwcmVmaXgsIHByZWZpeEhvc3QsIHRhcmdldCB9KSB7XG4gICAgLy8gY29lcmNlIHVybCB3aXRoIGZpbGxlciBodHRwcyBwcm90b2NvbCBzbyB3ZSBjYW4gcmV0cmlldmUgaG9zdCBhbmQgcGF0aG5hbWUgZnJvbSB0YXJnZXRcbiAgICBjb25zdCB0YXJnZXRVUkwgPSBuZXcgVVJMKGBodHRwczovLyR7dGFyZ2V0fWApO1xuICAgIC8vIERlcGVuZGluZyBvbiB0aGUgZW52aXJvbm1lbnQsIHRoZSBVUkwgY29uc3RydWN0b3IgbWF5IHR1cm4gYHtgIGFuZCBgfWAgaW50byBgJTdCYCBhbmQgYCU3RGAsIHJlc3BlY3RpdmVseVxuICAgIGNvbnN0IHRhcmdldFJlZ0V4ID0gcmVnZXhGcm9tVGFyZ2V0KHRhcmdldFVSTC5ob3N0LnJlcGxhY2UoLyU3Qi9nLCAneycpLnJlcGxhY2UoLyU3RC9nLCAnfScpKTtcbiAgICBjb25zdCBtYXRjaCA9IG9yaWdpbmFsVVJMLnRvU3RyaW5nKCkubWF0Y2godGFyZ2V0UmVnRXgpO1xuICAgIC8vIE51bGwgbWF0Y2ggaW5kaWNhdGVzIHRoYXQgdGhpcyB0YXJnZXQgaXMgbm90IHJlbGV2YW50XG4gICAgaWYgKG1hdGNoID09IG51bGwpXG4gICAgICAgIHJldHVybiBvcmlnaW5hbFVSTDtcbiAgICBjb25zdCBuZXdVUkwgPSBuZXcgVVJMKG9yaWdpbmFsVVJMLnRvU3RyaW5nKCkpO1xuICAgIG5ld1VSTC5ob3N0ID0gcHJlZml4SG9zdDtcbiAgICBuZXdVUkwucGF0aG5hbWUgPSBwcmVmaXgucmVwbGFjZShTVUJTVElUVVRJT05fUkVHRVgsIChfLCBtYXRjaE5hbWUpID0+IHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCByZXBsYWNlVmFsdWUgPSAoX2EgPSBtYXRjaC5ncm91cHMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVttYXRjaE5hbWVdO1xuICAgICAgICBpZiAocmVwbGFjZVZhbHVlID09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc2NvbmZpZ3VyZWQgcm91dGUuJyk7XG4gICAgICAgIHJldHVybiByZXBsYWNlVmFsdWU7XG4gICAgfSk7XG4gICAgLy8gQXBwZW5kIHRoZSBvcmlnaW5hbCBwYXRoXG4gICAgbmV3VVJMLnBhdGhuYW1lICs9IG5ld1VSTC5wYXRobmFtZSA9PT0gJy8nID8gb3JpZ2luYWxVUkwucGF0aG5hbWUuc2xpY2UoMSkgOiBvcmlnaW5hbFVSTC5wYXRobmFtZTtcbiAgICAvLyBwcmVwZW5kIC8ucHJveHkvIHRvIHBhdGggaWYgdXNpbmcgZGlzY29yZCBhY3Rpdml0aWVzIHByb3h5XG4gICAgaWYgKChuZXdVUkwuaG9zdG5hbWUuaW5jbHVkZXMoJ2Rpc2NvcmRzYXlzLmNvbScpIHx8IG5ld1VSTC5ob3N0bmFtZS5pbmNsdWRlcygnZGlzY29yZHNlei5jb20nKSkgJiZcbiAgICAgICAgIW5ld1VSTC5wYXRobmFtZS5zdGFydHNXaXRoKFBST1hZX1BSRUZJWCkpIHtcbiAgICAgICAgbmV3VVJMLnBhdGhuYW1lID0gUFJPWFlfUFJFRklYICsgbmV3VVJMLnBhdGhuYW1lO1xuICAgIH1cbiAgICAvLyBSZW1vdmUgdGhlIHRhcmdldCdzIHBhdGggZnJvbSB0aGUgbmV3IHVybCBwYXRoXG4gICAgbmV3VVJMLnBhdGhuYW1lID0gbmV3VVJMLnBhdGhuYW1lLnJlcGxhY2UodGFyZ2V0VVJMLnBhdGhuYW1lLCAnJyk7XG4gICAgLy8gQWRkIGEgdHJhaWxpbmcgc2xhc2ggaWYgb3JpZ2luYWwgdXJsIGhhZCBpdCwgYW5kIGlmIGl0IGRvZXNuJ3QgYWxyZWFkeSBoYXZlIG9uZSBvciBpZiBtYXRjaGVzIGZpbGVuYW1lIHJlZ2V4XG4gICAgaWYgKG9yaWdpbmFsVVJMLnBhdGhuYW1lLmVuZHNXaXRoKCcvJykgJiYgIW5ld1VSTC5wYXRobmFtZS5lbmRzV2l0aCgnLycpKSB7XG4gICAgICAgIG5ld1VSTC5wYXRobmFtZSArPSAnLyc7XG4gICAgfVxuICAgIHJldHVybiBuZXdVUkw7XG59XG5mdW5jdGlvbiBhYnNvbHV0ZVVSTCh1cmwsIHByb3RvY29sID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sLCBob3N0ID0gd2luZG93LmxvY2F0aW9uLmhvc3QpIHtcbiAgICAvLyBJZiB0aGUgZmlyc3QgYXJnIGlzIGEgY29tcGxldGUgdXJsLCBpdCB3aWxsIGlnbm9yZSB0aGUgc2Vjb25kIGFyZ1xuICAgIC8vIFRoaXMgY2FsbCBzdHJ1Y3R1cmUgbGV0cyB1cyBzZXQgcmVsYXRpdmUgdXJscyB0byBoYXZlIGEgZnVsbCB1cmwgd2l0aCB0aGUgcHJvcGVyIHByb3RvY29sIGFuZCBob3N0XG4gICAgcmV0dXJuIG5ldyBVUkwodXJsLCBgJHtwcm90b2NvbH0vLyR7aG9zdH1gKTtcbn1cblxuZXhwb3J0IHsgUFJPWFlfUFJFRklYLCBhYnNvbHV0ZVVSTCwgbWF0Y2hBbmRSZXdyaXRlVVJMIH07XG4iLCJpbXBvcnQgeyBwcmVwcm9jZXNzIGFzIHByZXByb2Nlc3NUeXBlLCBzdHJpbmcgYXMgc3RyaW5nVHlwZSwgbnVtYmVyIGFzIG51bWJlclR5cGUsIGN1c3RvbSB9IGZyb20gJy4uL2xpYi96b2QvbGliL2luZGV4Lm1qcyc7XG5cbi8qKlxuICogVGhpcyBpcyBhIGhlbHBlciBmdW5jdGlvbiB3aGljaCBjb2VyY2VzIGFuIHVuc3VwcG9ydGVkIGFyZyB2YWx1ZSB0byB0aGUga2V5L3ZhbHVlIFVOSEFORExFRDogLTFcbiAqIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIGhhbmRsZSBhIHNjZW5hcmlvIHdoZXJlIGEgbmV3IGVudW0gdmFsdWUgaXMgYWRkZWQgaW4gdGhlIERpc2NvcmQgQ2xpZW50LFxuICogc28gdGhhdCB0aGUgc2RrIHdpbGwgbm90IHRocm93IGFuIGVycm9yIHdoZW4gZ2l2ZW4gYSAobmV3bHkpIHZhbGlkIGVudW0gdmFsdWUuXG4gKlxuICogVG8gcmVtb3ZlIHRoZSByZXF1aXJlbWVudCBmb3IgY29uc3VtZXJzIG9mIHRoaXMgc2RrIHRvIGltcG9ydCBhbiBlbnVtIHdoZW4gcGFyc2luZyBkYXRhLFxuICogd2UgaW5zdGVhZCB1c2UgYW4gb2JqZWN0IGNhc3QgYXMgY29uc3QgKHJlYWRvbmx5KS4gVGhpcyBtYWludGFpbnMgcGFyaXR5IHdpdGggdGhlIHByZXZpb3VzXG4gKiBzY2hlbWEgKHdoaWNoIHVzZWQgem9kLmVudW0pLCBhbmQgYmVoYXZlcyBtb3JlIGxpa2UgYSB1bmlvbiB0eXBlLCBpLmUuICdmb28nIHwgJ2JhcicgfCAtMVxuICpcbiAqIEBwYXJhbSBpbnB1dE9iamVjdCBUaGlzIG9iamVjdCBtdXN0IGluY2x1ZGUgdGhlIGtleS92YWx1ZSBwYWlyIFVOSEFORExFRCA9IC0xXG4gKi9cbmZ1bmN0aW9uIHpvZENvZXJjZVVuaGFuZGxlZFZhbHVlKGlucHV0T2JqZWN0KSB7XG4gICAgcmV0dXJuIHByZXByb2Nlc3NUeXBlKChhcmcpID0+IHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBbb2JqZWN0S2V5XSA9IChfYSA9IE9iamVjdC5lbnRyaWVzKGlucHV0T2JqZWN0KS5maW5kKChbLCB2YWx1ZV0pID0+IHZhbHVlID09PSBhcmcpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBbXTtcbiAgICAgICAgaWYgKGFyZyAhPSBudWxsICYmIG9iamVjdEtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5wdXRPYmplY3QuVU5IQU5ETEVEO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcmc7XG4gICAgfSwgc3RyaW5nVHlwZSgpLm9yKG51bWJlclR5cGUoKSkpO1xufVxuLyoqXG4gKiBGYWxsYmFjayB0byB0aGUgZGVmYXVsdCB6b2QgdmFsdWUgaWYgcGFyc2luZyBmYWlscy5cbiAqL1xuZnVuY3Rpb24gZmFsbGJhY2tUb0RlZmF1bHQoc2NoZW1hKSB7XG4gICAgY29uc3QgdHJhbnNmb3JtID0gY3VzdG9tKCkudHJhbnNmb3JtKChkYXRhKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlcyA9IHNjaGVtYS5zYWZlUGFyc2UoZGF0YSk7XG4gICAgICAgIGlmIChyZXMuc3VjY2Vzcykge1xuICAgICAgICAgICAgcmV0dXJuIHJlcy5kYXRhO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzY2hlbWEuX2RlZi5kZWZhdWx0VmFsdWUoKTtcbiAgICB9KTtcbiAgICAvLyBNdXN0IHNldCB0aGlzIGlubmVyIHNjaGVtYSBzbyBpbnNwZWN0aW9uIHdvcmtzIGNvcnJlY3RseVxuICAgIHRyYW5zZm9ybS5vdmVybGF5VHlwZSA9IHNjaGVtYTtcbiAgICAvLyB0cmFuc2Zvcm0uX2RlZi5zY2hlbWEgPSBzY2hlbWE7XG4gICAgcmV0dXJuIHRyYW5zZm9ybTtcbn1cblxuZXhwb3J0IHsgZmFsbGJhY2tUb0RlZmF1bHQsIHpvZENvZXJjZVVuaGFuZGxlZFZhbHVlIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=